;***************************************; Affiche en hexadÃ©cimal le contenu des ; registres A, X, Y, P, S et PC; dans une fenetre pop-up.;***************************************showregs  .block          jsr scrnsave          php    ;-----------------------------------     ; stack-> p, pcl, pch    ;-----------------------------------           sta  ar          pla    ;-----------------------------------     ; stack-> pcl, pch    ;-----------------------------------           sta  sr          stx  xr          sty  yr          tsx             stx  sp    ;-----------------------------------     ; stack->     ;-----------------------------------           pla          sta  thispcl                   pla                           sta  thispch          pha          lda  thispcl          pha                   lda #$00          ldx #regline          tay          clc          jsr plot          #outcar snoir          #prnligne 176,174,rtitle          #prnligne 221,221,rlable          #prnligne 221,221,rvalues          #prnligne 173,189,rbline    ;-----------------------------------           ldy  thispch          ldx  thispcl                      inx            bcc  go          inygo        #locate 1,regline+2          jsr putyxhex   ; pc    ;-----------------------------------           lda  ar          #locate 6,regline+2          jsr putahex    ; reg x    ;-----------------------------------           lda  xr          #locate 9,regline+2          jsr  putahex    ; reg x    ;-----------------------------------           lda  yr          #locate 12,regline+2          jsr  putahex    ; reg y    ;-----------------------------------           lda  sr          #locate 15,regline+2          jsr putahex    ; status reg    ;-----------------------------------           lda  sp          txa          #locate 18,regline+2          jsr putahex    ; sp    ;-----------------------------------           lda #$18  ; [CTRL][X]          jsr waitkey          jsr scrnrest          lda  ar          ldx  xr          ldy  yr          lda  sr          pha          plp          rts;-------------------------------------- regline   =9ar        .byte     0xr        .byte     0yr        .byte     0sr        .byte     0sp        .byte     0thispcl       .byte     0thispch       .byte     0          .bend;**************************************;;**************************************showstack .block          sta ra          php          pla          sta sr          stx rx          sty ry          sec          ldy  #$10          tsx          inx          txa          jsr showra          #outcar 13          #outcar 13          morey     lda $0100,x          jsr showra          #outcar 13          inx          dey          bne morey          lda sr          pha          lda ra          ldx rx          ldy ry          plp          rtssr        .byte 0ra        .byte 0rx        .byte 0ry        .byte 0          .bend;**************************************prnligne  .macro lcar, rcar, pointeur          jsr  pushregs          lda #\lcar          sta \pointeur+0          lda #\rcar          sta \pointeur+24          ldx  #<\pointeur          ldy  #>\pointeur          jsr  putsyx          jsr  popregs          .endm