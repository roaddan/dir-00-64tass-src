;--------------------------------------
; Scripteur ......: Daniel Lafrance
; Nom du fichier .: e-v20-vic.asm
; Dernière m.à j. : 
; Inspiration ....: 
;--------------------------------------
; e-v20-vic.asm - Carthographie 
; memoire et declaration de constantes 
; pour le vic du commodore Vic 20.
;--------------------------------------
; Segmentation principales de la mémoire
;--------------------------------------
; Pour l'utilisation de ce fichier dans
; turbo-macro-pro ou sans 64tass 
; utilisez la syntaxes ...
;
;     .include "e-v20-vic.asm"
;
; ... en prenant soin de placer le 
; fichier dans le meme disque ou 
; répertoire que votre programme.
;--------------------------------------
; CONSTANTES  IMPORTANTS
;--------------------------------------
;--------------------------------------
;vic - registres de contrôle
;--------------------------------------
vic       = $9000;debut du vic
vic0      = $9000;ABBBBBBB 
                ;A =interlace 
                ;B =screen hor. origin
vic1      = $9001;CCCCCCCC 
                ;C =screen vert. origin 
vic2      = $9002;HDDDDDDD 
                ;H =Screen mem location
                ;D =Number video column
vic3      = $9003;GEEEEEEF
                ;G =Raster Value
                ;E =Number video rows
                ;F =Character size
                ;  0 = 8 x 8
                ;  1 = 8 x 16
vic4      = $9004;GGGGGGGG
                ;G =Raster Value
vic5      = $9005;HHHHIIII
                ;H =Screen mem location
                ;I =Character mem loc.
vic6      = $9006;JJJJJJJJ
                ;J =Light pen hor. pos.
vic7      = $9007;KKKKKKKK
                ;K =Light pen ver. pos.
vic8      = $9008;LLLLLLLL
                ;L =paddle 1
vic9      = $9009;MMMMMMMM
                ;M =paddle 2
vicbas    = $900a;NRRRRRRR
vic10     = $900a;NRRRRRRR
                ;N =Bas sound switch
                ;R =Bas Frequency
vicalt    = $900b;OSSSSSSS
vic11     = $900b;OSSSSSSS
                ;O =Alto sound switch
                ;S =Alto Frequency
vicsop    = $900c;PTTTTTTT
vic12     = $900c;PTTTTTTT
                ;P =Soprano sound switch
                ;T =Soprano Frequency
vicnoi    = $900d;QUUUUUUU
vic13     = $900d;QUUUUUUU
                ;Q =Noise switch
                ;U =Noise Frequency
vicvol    = $900e;WWWWVVVV
vic14     = $900e;WWWWVVVV
                ;W =Auxiliary colour
                ;V =Loudness of sound
vic15     = $900f;XXXXYZZZ
                ;X =Screen colour (16)
                ;Y =Reverse mode 0 =on
                ;Z =Border colour (8)
;--------------------------------------
;* vic code couleur en francais *
; couleur 
; %XXXXYZZZ   X=Couleur de l'ecran
;  ||||||||  
;  |||||+++-> Z bit 0-2:Couleur bordure
;  ||||+----> Y bit 3  : Inverse video         
;  ||||
;   \/
;-------Couleurs bordure et fond-------
;  0000=noir   0100=mauve
;  0001=Blanc  0101=vert
;  0010=rouge  0110=vleu
;  0011=Cyan   0111=jaune
;--------Couleur fond seulement--------
;  1000=orange 1100=gris1
;  1001=brun   1101=vert1
;  1010=rose   1110=bleu1
;  1011=gris   1111=jaune
;--------------------------------------
vnoir   =   %00000000
vblanc  =   %00000001
vrouge  =   %00000010
vocean  =   %00000011
vmauve  =   %00000100
vvert   =   %00000101
vbleu   =   %00000110
vjaune  =   %00000111
vorange =   %00001000
vbrun   =   %00001001
vrose   =   %00001010
vgris   =   %00001011
vgris1  =   %00001100
vvert1  =   %00001101
vbleu1  =   %00001110
vgris2  =   %00001111
vinv      = vorange
colecran  .macro bd,bg,fg,inv
          php
          pha
          lda #$00
          lda #\inv
          and #%00001000
          ora #\bd
          and #%00001111
          ora #\bg*16
          sta vic15
          lda #\fg
          sta kcol
          pla
          plp
          .endm

volume    .macro value
          lda #\value
          and #%00001111
          sta vicvol
          .endm

voicesoff .macro
          lda  vicbas
          and  #%01111111
          sta  vicbas
          lda  vicalt
          and  #%01111111
          sta  vicalt
          lda  vicsop
          and  #%01111111
          sta  vicsop
          lda  vicnoi
          and  #%01111111
          sta  vicnoi
          .endm

basplay   .macro note
          lda  #\note
          ora  #%10000000
          sta  vicbas
          .endm
altplay   .macro note
          lda  #\note
          ora  #%10000000
          sta  vicbas
          .endm
sopplay   .macro note
          lda  #\note
          ora  #%10000000
          sta  vicbas
          .endm
noiplay   .macro note
          lda  #\note
          ora  #%10000000
          sta  vicbas
          .endm
;--------------------------------------
; Notes NTSC
;--------------------------------------
;Notes    =   value   expect-actual  error %
v1do1     =    133  ; 32.703-  32.746- 0.131 %
v1dod1    =    140  ; 34.648-  34.739- 0.264 %
v1re1     =    146  ; 36.708-  36.651- 0.155 %
v1red1    =    152  ; 38.891-  38.786- 0.269 %
v1mi1     =    158  ; 41.203-  41.186- 0.043 %
v1fa1     =    163  ; 43.654-  43.424- 0.526 %
v1fad1    =    169  ; 46.249-  46.453- 0.442 %
v1so1     =    173  ; 48.999-  48.720- 0.571 %
v1so1d    =    178  ; 51.913-  51.883- 0.058 %
v1la1     =    182  ; 55.000-  54.726- 0.498 %
v1lad1    =    186  ; 58.270-  57.899- 0.638 %
v1si1     =    190  ; 61.735-  61.462- 0.444 %
v1do2     =    194  ; 65.406-  65.492- 0.131 %
v1dod2    =    197  ; 69.296-  69.478- 0.264 %
v1re2     =    201  ; 73.416-  73.303- 0.155 %
v1red2    =    204  ; 77.782-  77.573- 0.269 %
v1mi2     =    207  ; 82.407-  82.371- 0.043 %
v1fa2     =    209  ; 87.307-  86.848- 0.526 %
v1fad2    =    212  ; 92.499-  92.907- 0.442 %
v1so2     =    214  ; 97.999-  97.439- 0.571 %
v1so2d    =    217  ;103.826- 103.766- 0.058 %
v1la2     =    219  ;110.000- 109.452- 0.498 %
v1lad2    =    221  ;116.541- 115.797- 0.638 %
v1si2     =    223  ;123.471- 122.923- 0.444 %
v1do3     =    224  ;130.813- 130.984- 0.131 %
v1dod3    =    226  ;138.591- 138.957- 0.264 %
v1re3     =    228  ;146.832- 146.606- 0.155 %
v1red3    =    229  ;155.563- 155.146- 0.269 %
v1mi3     =    231  ;164.814- 164.742- 0.043 %
v1fa3     =    232  ;174.614- 173.696- 0.526 %
v1fad3    =    233  ;184.997- 185.814- 0.442 %
v1so3     =    235  ;195.998- 194.878- 0.571 %
v1sod3    =    236  ;207.652- 207.532- 0.058 %
v1la3     =    237  ;220.000- 218.904- 0.498 %
v1lad3    =    238  ;233.082- 231.594- 0.638 %
v1si3     =    239  ;246.942- 245.846- 0.444 %
v1do4     =    240  ;261.626- 261.967- 0.131 %
v1dod4    =      0  ;277.183- 275.517- 0.601 %
v1re4     =      0  ;293.665- 295.926- 0.770 %
v1red4    =    242  ;311.127- 313.333- 0.709 %
v1mi4     =    243  ;329.628- 332.917- 0.998 %
v1fa4     =      0  ;349.228- 347.391- 0.526 %
v1fad4    =    244  ;369.994- 371.628- 0.442 %
v1so4     =    245  ;391.995- 389.756- 0.571 %
v1sod4    =      0  ;415.305- 420.526- 1.257 %
v1la4     =    246  ;440.000- 443.889- 0.884 %
v1lad4    =      0  ;466.164- 470.000- 0.823 %
v1si4     =    247  ;493.883- 499.375- 1.112 %
v1do5     =      0  ;523.251- 515.484- 1.484 %
v1dod5    =      0  ;554.365- 551.034- 0.601 %
v1re5     =      0  ;587.329- 591.852- 0.770 %
v1red5    =      0  ;622.254- 614.615- 1.228 %
v1mi5     =    249  ;659.255- 665.833- 0.998 %
v1fa5     =      0  ;698.456- 694.783- 0.526 %
v1fad5    =      0  ;739.989- 726.364- 1.841 %
v1so5     =    250  ;783.991- 799.000- 1.914 %
v1sod5    =      0  ;830.609- 841.053- 1.257 %
v1la5     =      0  ;880.000- 887.778- 0.884 %
v1lad5    =      0  ;932.327- 940.000- 0.823 %
;Voie 2
v2do2     =    133  ; 65.406-  65.492- 0.131 %
v2dod2    =    140  ; 69.296-  69.478- 0.264 %
v2re2     =    146  ; 73.416-  73.303- 0.155 %
v2red2    =    152  ; 77.782-  77.573- 0.269 %
v2mi2     =    158  ; 82.407-  82.371- 0.043 %
v2fa2     =    163  ; 87.307-  86.848- 0.526 %
v2fad2    =    169  ; 92.499-  92.907- 0.442 %
v2so2     =    173  ; 97.999-  97.439- 0.571 %
v2sod2    =    178  ;103.826- 103.766- 0.058 %
v2la2     =    182  ;110.000- 109.452- 0.498 %
v2lad2    =    186  ;116.541- 115.797- 0.638 %
v2si2     =    190  ;123.471- 122.923- 0.444 %
v2do3     =    194  ;130.813- 130.984- 0.131 %
v2dod3    =    197  ;138.591- 138.957- 0.264 %
v2re3     =    201  ;146.832- 146.606- 0.155 %
v2red3    =    204  ;155.563- 155.146- 0.269 %
v2mi3     =    207  ;164.814- 164.742- 0.043 %
v2fa3     =    209  ;174.614- 173.696- 0.526 %
v2fad3    =    212  ;184.997- 185.814- 0.442 %
v2so3     =    214  ;195.998- 194.878- 0.571 %
v2sod3    =    217  ;207.652- 207.532- 0.058 %
v2la3     =    219  ;220.000- 218.904- 0.498 %
v2lad3    =    221  ;233.082- 231.594- 0.638 %
v2si3     =    223  ;246.942- 245.846- 0.444 %
v2do4     =    225  ;261.626- 261.967- 0.131 %
v2dod4    =    226  ;277.183- 275.517- 0.601 %
v2re4     =    228  ;293.665- 295.926- 0.770 %
v2red4    =    229  ;311.127- 313.333- 0.709 %
v2mi4     =    231  ;329.628- 332.917- 0.998 %
v2fa4     =    232  ;349.228- 347.391- 0.526 %
v2fad4    =    233  ;369.994- 371.628- 0.442 %
v2so4     =    235  ;391.995- 389.756- 0.571 %
v2sod4    =    236  ;415.305- 420.526- 1.257 %
v2la4     =    237  ;440.000- 443.889- 0.884 %
v2lad4    =    238  ;466.164- 470.000- 0.823 %
v2si4     =    239  ;493.883- 499.375- 1.112 %
v2do5     =    240  ;523.251- 515.484- 1.484 %
v2dod5    =      0  ;554.365- 551.034- 0.601 %
v2re5     =      0  ;587.329- 591.852- 0.770 %
v2red5    =    242  ;622.254- 614.615- 1.228 %
v2mi5     =    243  ;659.255- 665.833- 0.998 %
v2fa5     =      0  ;698.456- 694.783- 0.526 %
v2fad5    =    244  ;739.989- 726.364- 1.841 %
v2so5     =    245  ;783.991- 799.000- 1.914 %
v2sod5    =      0  ;830.609- 841.053- 1.257 %
v2la5     =    246  ;880.000- 887.778- 0.884 %
v2lad5    =      0  ;932.327- 940.000- 0.823 %

;voie3
v3do3     =    133  ;130.813- 130.984- 0.131 %
v3dod3    =    140  ;138.591- 138.957- 0.264 %
v3re3     =    146  ;146.832- 146.606- 0.155 %
v3red3    =    152  ;155.563- 155.146- 0.269 %
v3mi3     =    158  ;164.814- 164.742- 0.043 %
v3fa3     =    163  ;174.614- 173.696- 0.526 %
v3fad3    =    169  ;184.997- 185.814- 0.442 %
v3so3     =    173  ;195.998- 194.878- 0.571 %
v3sod3    =    178  ;207.652- 207.532- 0.058 %
v3la3     =    182  ;220.000- 218.904- 0.498 %
v3lad3    =    186  ;233.082- 231.594- 0.638 %
v3si3     =    190  ;246.942- 245.846- 0.444 %
v3do4     =    194  ;261.626- 261.967- 0.131 %
v3dod4    =    197  ;277.183- 275.517- 0.601 %
v3re4     =    201  ;293.665- 295.926- 0.770 %
v3red4    =    204  ;311.127- 313.333- 0.709 %
v3mi4     =    207  ;329.628- 332.917- 0.998 %
v3fa4     =    209  ;349.228- 347.391- 0.526 %
v3fad4    =    212  ;369.994- 371.628- 0.442 %
v3so4     =    214  ;391.995- 389.756- 0.571 %
v3sod4    =    217  ;415.305- 420.526- 1.257 %
v3la4     =    219  ;440.000- 443.889- 0.884 %
v3lad4    =    221  ;466.164- 470.000- 0.823 %
v3si4     =    223  ;493.883- 499.375- 1.112 %
v3do5     =    224  ;523.251- 515.484- 1.484 %
v3dod5    =    226  ;554.365- 551.034- 0.601 %
v3re5     =    228  ;587.329- 591.852- 0.770 %
v3red5    =    229  ;622.254- 614.615- 1.228 %
v3mi5     =    231  ;659.255- 665.833- 0.998 %
v3fa5     =    232  ;698.456- 694.783- 0.526 %
v3fad5    =    233  ;739.989- 726.364- 1.841 %
v3so5     =    235  ;783.991- 799.000- 1.914 %
v3sod5    =    236  ;830.609- 841.053- 1.257 %
v3la5     =    237  ;880.000- 887.778- 0.884 %
v3lad5    =    238  ;932.327- 940.000- 0.823 %
