
; 64tass Turbo Assembler Macro V1.54.1900 listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib -i -L template.txt -o template.prg template.asm
; Fri Jan 16 00:52:15 2026

;Offset	;Hex		;Source

;******  Processing input file: template.asm

="20240704-2343040"	Version = "20240704-2343040"

;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-bashead-v20e.asm

>1201	0b 08		bcmd1    .word $080b ;adresse de la pro-
>1203	0a 00		         .word $0a   ;no. ligne basic.
>1205	9e		         .byte $9e   ;jeton pour la
>1206	34 36 32 31	         .text "4621";adresse du debut
>120a	00		         .byte $00   ;fin de cmd basic.
>120b	00 00		bcmd2    .word $00   ;adresse de la pro-
.120d	20 13 12	        jsr bhscrini
.1210	4c 3a 12	basnold jmp main
.1213			bhscrini
.1213	08		        php
.1214	48		        pha
.1215	ad 0f 90	bord    lda $900f    ;place la couleur
.1218	29 08		        and #%0001000
.121a	09 65		        ora #$65
.121c	8d 0f 90	        sta $900f
.121f	a9 01		text    lda #$01    ;place la couleur
.1221	8d 86 02	        sta $0286   ; du texte.
.1224	a9 93		        lda #$93    ;efface l'ecran par
.1226	20 d2 ff	        jsr $ffd2   ; chrout du kernal.
.1229	68		        pla
.122a	28		        plp
.122b	60		        rts
.122c			bhprint
.122c	a0 00		        ldy #$00
.122e	b1 fb		nextc   lda ($fb),y
.1230	f0 07		        beq end
.1232	c8		        iny
.1233	20 d2 ff	        jsr $ffd2
.1236	4c 2e 12	        jmp nextc
.1239	60		end     rts

;******  Return to file: template.asm

=1			TLINE=1
=5			BLINE=5
=6			BCOLM=6
=$00			XVAL=$00
=$00			XCPX=$00
=$5			DIFF=$5
.123a			main
.123a	08		               php
.123b	48		               pha
.123c	a9 0e		               lda  #14
.123e	20 d2 ff	               jsr  $ffd2
.1241	68		               pla
.1242	28		               plp
.1243	08		               php
.1244	48		               pha
.1245	a9 0e		               lda #(vnoir*16+(vbleu|8))
.1247	8d 0f 90	               sta  vic15
.124a	68		               pla
.124b	28		               plp
.124c	08		               php
.124d	48		               pha
.124e	a9 05		               lda  #5
.1250	8d 86 02	               sta  kcol
.1253	68		               pla
.1254	28		               plp
.1255	08		        php
.1256	48		        pha
.1257	a9 12		        lda #revson
.1259	20 7a f2	        jsr chrout
.125c	68		        pla
.125d	28		        plp
.125e	20 45 17	               jsr  pushregs
.1261	a2 40		               ldx  #<string3
.1263	a0 16		               ldy  #>string3
.1265	20 c3 17	               jsr  putsxy
.1268	20 72 17	               jsr  popregs
.126b	08		        php
.126c	48		        pha
.126d	a9 92		        lda #revsoff
.126f	20 7a f2	        jsr chrout
.1272	68		        pla
.1273	28		        plp
.1274	08		        php
.1275	48		        pha
.1276	a9 12		        lda #revson
.1278	20 7a f2	        jsr chrout
.127b	68		        pla
.127c	28		        plp
.127d	08		               php
.127e	48		               pha
.127f	a9 03		               lda  #vocean
.1281	8d 86 02	               sta  kcol
.1284	68		               pla
.1285	28		               plp
.1286	20 45 17	               jsr  pushregs
.1289	a2 18		               ldx  #<string1
.128b	a0 16		               ldy  #>string1
.128d	20 c3 17	               jsr  putsxy
.1290	20 72 17	               jsr  popregs
.1293	08		        php
.1294	48		        pha
.1295	a9 92		        lda #revsoff
.1297	20 7a f2	        jsr chrout
.129a	68		        pla
.129b	28		        plp
.129c	08		               php
.129d	48		               pha
.129e	a9 01		               lda  #vblanc
.12a0	8d 86 02	               sta  kcol
.12a3	68		               pla
.12a4	28		               plp
.12a5	20 45 17	               jsr  pushregs
.12a8	a2 2f		               ldx  #<string2
.12aa	a0 16		               ldy  #>string2
.12ac	20 c3 17	               jsr  putsxy
.12af	20 72 17	               jsr  popregs
.12b2	08		               php
.12b3	48		               pha
.12b4	a9 05		               lda  #vvert
.12b6	8d 86 02	               sta  kcol
.12b9	68		               pla
.12ba	28		               plp
.12bb	20 45 17	               jsr  pushregs
.12be	a2 5f		               ldx  #<string5
.12c0	a0 16		               ldy  #>string5
.12c2	20 c3 17	               jsr  putsxy
.12c5	20 72 17	               jsr  popregs
.12c8	08		               php
.12c9	48		               pha
.12ca	a9 05		               lda  #vvert
.12cc	8d 86 02	               sta  kcol
.12cf	68		               pla
.12d0	28		               plp
.12d1	20 45 17	               jsr  pushregs
.12d4	a2 6a		               ldx  #<string6
.12d6	a0 16		               ldy  #>string6
.12d8	20 c3 17	               jsr  putsxy
.12db	20 72 17	               jsr  popregs
.12de	08		               php
.12df	48		               pha
.12e0	a9 04		               lda  #vmauve
.12e2	8d 86 02	               sta  kcol
.12e5	68		               pla
.12e6	28		               plp
.12e7	20 45 17	               jsr  pushregs
.12ea	a2 57		               ldx  #<string4
.12ec	a0 16		               ldy  #>string4
.12ee	20 c3 17	               jsr  putsxy
.12f1	20 72 17	               jsr  popregs
.12f4	08		               php
.12f5	48		               pha
.12f6	a9 07		               lda  #vjaune
.12f8	8d 86 02	               sta  kcol
.12fb	68		               pla
.12fc	28		               plp
.12fd	20 45 17	               jsr  pushregs
.1300	a2 75		               ldx  #<string7
.1302	a0 16		               ldy  #>string7
.1304	20 c3 17	               jsr  putsxy
.1307	20 72 17	               jsr  popregs
.130a	08		               php
.130b	48		               pha
.130c	a9 07		               lda  #vjaune
.130e	8d 86 02	               sta  kcol
.1311	68		               pla
.1312	28		               plp
.1313	20 45 17	               jsr  pushregs
.1316	a2 84		               ldx  #<string8
.1318	a0 16		               ldy  #>string8
.131a	20 c3 17	               jsr  putsxy
.131d	20 72 17	               jsr  popregs
.1320	08		               php
.1321	48		               pha
.1322	a9 01		               lda  #vblanc
.1324	8d 86 02	               sta  kcol
.1327	68		               pla
.1328	28		               plp
.1329	a9 00		          lda #XVAL      ; initialise ...
.132b	8d cb 16	          sta count      ; ...le compteur
.132e	ad cb 16	next      lda count      ; Charge le compteur
.1331	38		          sec
.1332	ed cc 16	          sbc tstval     ; On on soustrait tstval de count
.1335	8d cd 16	          sta result     ;
.1338	ad cd 16	          lda  result
.133b	08		          php
.133c	68		          pla
.133d	20 1c 1a	          jsr atobin
.1340	08		               php
.1341	48		               pha
.1342	a9 07		               lda  #vjaune
.1344	8d 86 02	               sta  kcol
.1347	68		               pla
.1348	28		               plp
.1349	20 45 17	               jsr  pushregs
.134c	20 45 17	        jsr pushregs
.134f	a0 06		        ldy #BCOLM
.1351	a2 05		        ldx #BLINE
.1353	18		        clc
.1354	20 0a e5	        jsr plot
.1357	20 72 17	        jsr popregs
.135a	20 45 17	               jsr  pushregs
.135d	a9 25		               lda  #"%"
.135f	20 7a f2	               jsr  chrout
.1362	20 45 17	               jsr  pushregs
.1365	a2 ed		               ldx  #<binstr
.1367	a0 27		               ldy  #>binstr
.1369	20 b5 17	               jsr  putsyx
.136c	20 72 17	               jsr  popregs
.136f	20 72 17	               jsr  popregs
.1372	20 72 17	               jsr  popregs
.1375	20 01 1a	          jsr atohex
.1378	08		               php
.1379	48		               pha
.137a	a9 07		               lda  #vjaune
.137c	8d 86 02	               sta  kcol
.137f	68		               pla
.1380	28		               plp
.1381	20 45 17	               jsr  pushregs
.1384	20 45 17	        jsr pushregs
.1387	a0 10		        ldy #BCOLM+10
.1389	a2 05		        ldx #BLINE
.138b	18		        clc
.138c	20 0a e5	        jsr plot
.138f	20 72 17	        jsr popregs
.1392	20 45 17	               jsr  pushregs
.1395	a9 24		               lda  #"$"
.1397	20 7a f2	               jsr  chrout
.139a	20 45 17	               jsr  pushregs
.139d	a2 fa		               ldx  #<hexstr
.139f	a0 27		               ldy  #>hexstr
.13a1	20 b5 17	               jsr  putsyx
.13a4	20 72 17	               jsr  popregs
.13a7	20 72 17	               jsr  popregs
.13aa	20 72 17	               jsr  popregs
.13ad	ad cb 16	          lda count
.13b0	20 01 1a	          jsr atohex
.13b3	08		               php
.13b4	48		               pha
.13b5	a9 03		               lda  #vocean
.13b7	8d 86 02	               sta  kcol
.13ba	68		               pla
.13bb	28		               plp
.13bc	20 45 17	               jsr  pushregs
.13bf	20 45 17	        jsr pushregs
.13c2	a0 05		        ldy #5
.13c4	a2 09		        ldx #9
.13c6	18		        clc
.13c7	20 0a e5	        jsr plot
.13ca	20 72 17	        jsr popregs
.13cd	20 45 17	               jsr  pushregs
.13d0	a9 24		               lda  #"$"
.13d2	20 7a f2	               jsr  chrout
.13d5	20 45 17	               jsr  pushregs
.13d8	a2 fa		               ldx  #<hexstr
.13da	a0 27		               ldy  #>hexstr
.13dc	20 b5 17	               jsr  putsyx
.13df	20 72 17	               jsr  popregs
.13e2	20 72 17	               jsr  popregs
.13e5	20 72 17	               jsr  popregs
.13e8	ad cb 16	          lda count
.13eb	20 1c 1a	          jsr atobin
.13ee	08		               php
.13ef	48		               pha
.13f0	a9 03		               lda  #vocean
.13f2	8d 86 02	               sta  kcol
.13f5	68		               pla
.13f6	28		               plp
.13f7	20 45 17	               jsr  pushregs
.13fa	20 45 17	        jsr pushregs
.13fd	a0 0a		        ldy #10
.13ff	a2 09		        ldx #9
.1401	18		        clc
.1402	20 0a e5	        jsr plot
.1405	20 72 17	        jsr popregs
.1408	20 45 17	               jsr  pushregs
.140b	a9 25		               lda  #"%"
.140d	20 7a f2	               jsr  chrout
.1410	20 45 17	               jsr  pushregs
.1413	a2 ed		               ldx  #<binstr
.1415	a0 27		               ldy  #>binstr
.1417	20 b5 17	               jsr  putsyx
.141a	20 72 17	               jsr  popregs
.141d	20 72 17	               jsr  popregs
.1420	20 72 17	               jsr  popregs
.1423	ad cc 16	          lda tstval
.1426	20 01 1a	          jsr atohex
.1429	08		               php
.142a	48		               pha
.142b	a9 03		               lda  #vocean
.142d	8d 86 02	               sta  kcol
.1430	68		               pla
.1431	28		               plp
.1432	20 45 17	               jsr  pushregs
.1435	20 45 17	        jsr pushregs
.1438	a0 05		        ldy #5
.143a	a2 0a		        ldx #10
.143c	18		        clc
.143d	20 0a e5	        jsr plot
.1440	20 72 17	        jsr popregs
.1443	20 45 17	               jsr  pushregs
.1446	a9 24		               lda  #"$"
.1448	20 7a f2	               jsr  chrout
.144b	20 45 17	               jsr  pushregs
.144e	a2 fa		               ldx  #<hexstr
.1450	a0 27		               ldy  #>hexstr
.1452	20 b5 17	               jsr  putsyx
.1455	20 72 17	               jsr  popregs
.1458	20 72 17	               jsr  popregs
.145b	20 72 17	               jsr  popregs
.145e	ad cc 16	          lda tstval
.1461	20 1c 1a	          jsr atobin
.1464	08		               php
.1465	48		               pha
.1466	a9 03		               lda  #vocean
.1468	8d 86 02	               sta  kcol
.146b	68		               pla
.146c	28		               plp
.146d	20 45 17	               jsr  pushregs
.1470	20 45 17	        jsr pushregs
.1473	a0 0a		        ldy #10
.1475	a2 0a		        ldx #10
.1477	18		        clc
.1478	20 0a e5	        jsr plot
.147b	20 72 17	        jsr popregs
.147e	20 45 17	               jsr  pushregs
.1481	a9 25		               lda  #"%"
.1483	20 7a f2	               jsr  chrout
.1486	20 45 17	               jsr  pushregs
.1489	a2 ed		               ldx  #<binstr
.148b	a0 27		               ldy  #>binstr
.148d	20 b5 17	               jsr  putsyx
.1490	20 72 17	               jsr  popregs
.1493	20 72 17	               jsr  popregs
.1496	20 72 17	               jsr  popregs
.1499	ad cd 16	          lda result
.149c	20 01 1a	          jsr atohex
.149f	08		               php
.14a0	48		               pha
.14a1	a9 03		               lda  #vocean
.14a3	8d 86 02	               sta  kcol
.14a6	68		               pla
.14a7	28		               plp
.14a8	20 45 17	               jsr  pushregs
.14ab	20 45 17	        jsr pushregs
.14ae	a0 05		        ldy #5
.14b0	a2 0c		        ldx #12
.14b2	18		        clc
.14b3	20 0a e5	        jsr plot
.14b6	20 72 17	        jsr popregs
.14b9	20 45 17	               jsr  pushregs
.14bc	a9 24		               lda  #"$"
.14be	20 7a f2	               jsr  chrout
.14c1	20 45 17	               jsr  pushregs
.14c4	a2 fa		               ldx  #<hexstr
.14c6	a0 27		               ldy  #>hexstr
.14c8	20 b5 17	               jsr  putsyx
.14cb	20 72 17	               jsr  popregs
.14ce	20 72 17	               jsr  popregs
.14d1	20 72 17	               jsr  popregs
.14d4	ad cd 16	          lda result
.14d7	20 1c 1a	          jsr atobin
.14da	08		               php
.14db	48		               pha
.14dc	a9 03		               lda  #vocean
.14de	8d 86 02	               sta  kcol
.14e1	68		               pla
.14e2	28		               plp
.14e3	20 45 17	               jsr  pushregs
.14e6	20 45 17	        jsr pushregs
.14e9	a0 0a		        ldy #10
.14eb	a2 0c		        ldx #12
.14ed	18		        clc
.14ee	20 0a e5	        jsr plot
.14f1	20 72 17	        jsr popregs
.14f4	20 45 17	               jsr  pushregs
.14f7	a9 25		               lda  #"%"
.14f9	20 7a f2	               jsr  chrout
.14fc	20 45 17	               jsr  pushregs
.14ff	a2 ed		               ldx  #<binstr
.1501	a0 27		               ldy  #>binstr
.1503	20 b5 17	               jsr  putsyx
.1506	20 72 17	               jsr  popregs
.1509	20 72 17	               jsr  popregs
.150c	20 72 17	               jsr  popregs
.150f	ad cb 16	          lda count
.1512	18		          clc
.1513	69 05		          adc #DIFF
.1515	8d cb 16	          sta count
.1518	ad cc 16	          lda tstval
.151b	38		          sec
.151c	e9 05		          sbc #DIFF
.151e	8d cc 16	          sta tstval
.1521	20 9a 1b	          jsr getkey
.1524	c9 5f		          cmp  #$5f
.1526	d0 03		          bne continue
.1528	4c 77 15	          jmp out
.152b			continue
.152b	20 45 17	        jsr pushregs
.152e	a0 06		        ldy #6
.1530	a2 12		        ldx #18
.1532	18		        clc
.1533	20 0a e5	        jsr plot
.1536	20 72 17	        jsr popregs
.1539	20 01 1a	          jsr atohex
.153c	20 45 17	               jsr  pushregs
.153f	20 45 17	        jsr pushregs
.1542	a0 0f		        ldy #15
.1544	a2 12		        ldx #18
.1546	18		        clc
.1547	20 0a e5	        jsr plot
.154a	20 72 17	        jsr popregs
.154d	20 45 17	               jsr  pushregs
.1550	a9 24		               lda  #"$"
.1552	20 7a f2	               jsr  chrout
.1555	20 45 17	               jsr  pushregs
.1558	a2 fa		               ldx  #<hexstr
.155a	a0 27		               ldy  #>hexstr
.155c	20 b5 17	               jsr  putsyx
.155f	20 72 17	               jsr  popregs
.1562	20 72 17	               jsr  popregs
.1565	20 72 17	               jsr  popregs
.1568	08		        php
.1569	48		        pha
.156a	a9 20		        lda #32
.156c	20 7a f2	        jsr chrout
.156f	68		        pla
.1570	28		        plp
.1571	20 7a f2	          jsr chrout
.1574	4c 2e 13	          jmp next
.1577			out
.1577	08		        php
.1578	48		        pha
.1579	a9 93		        lda #147
.157b	20 7a f2	        jsr chrout
.157e	68		        pla
.157f	28		        plp
.1580	20 d3 16	               jsr  pushall
.1583	ad d1 16	               lda  adresse
.1586	85 fb		               sta  $fb
.1588	ad d2 16	               lda  adresse+1
.158b	85 fc		               sta  $fb+1
.158d	a0 01		               ldy  #$01
.158f	b1 fb		               lda  ($fb),y
.1591	20 1c 1a	               jsr  atobin
.1594	20 45 17	               jsr  pushregs
.1597	a9 25		               lda  #"%"
.1599	20 7a f2	               jsr  chrout
.159c	20 45 17	               jsr  pushregs
.159f	a2 ed		               ldx  #<binstr
.15a1	a0 27		               ldy  #>binstr
.15a3	20 b5 17	               jsr  putsyx
.15a6	20 72 17	               jsr  popregs
.15a9	20 72 17	               jsr  popregs
.15ac	88		               dey
.15ad	b1 fb		               lda  ($fb),y
.15af	20 1c 1a	               jsr  atobin
.15b2	20 45 17	               jsr  pushregs
.15b5	a2 ed		               ldx  #<binstr
.15b7	a0 27		               ldy  #>binstr
.15b9	20 b5 17	               jsr  putsyx
.15bc	20 72 17	               jsr  popregs
.15bf	20 0c 17	               jsr  popall
.15c2	20 9a 1b	          jsr getkey
.15c5	08		        php
.15c6	48		        pha
.15c7	a9 93		        lda #147
.15c9	20 7a f2	        jsr chrout
.15cc	68		        pla
.15cd	28		        plp
.15ce	a2 07		          ldx  #$7
.15d0	8a		more      txa
.15d1	49 0f		          eor #$0f
.15d3	29 0f		          and #$0f
.15d5	8d 86 02	          sta kcol
.15d8	20 d3 16	        jsr pushall
.15db	a0 16		        ldy #>teststr
.15dd	84 fc		        sty zp1+1
.15df	a2 b6		        ldx #<teststr
.15e1	86 fb		        stx zp1
.15e3	20 9f 17	        jsr puts
.15e6	20 0c 17	        jsr popall
.15e9	20 d3 16	        jsr pushall
.15ec	a0 16		        ldy #>teststr
.15ee	84 fc		        sty zp1+1
.15f0	a2 b6		        ldx #<teststr
.15f2	86 fb		        stx zp1
.15f4	20 9f 17	        jsr puts
.15f7	20 0c 17	        jsr popall
.15fa	ca		          dex
.15fb	10 d3		          bpl more
.15fd	08		               php
.15fe	48		               pha
.15ff	a9 01		               lda  #vblanc
.1601	8d 86 02	               sta  kcol
.1604	68		               pla
.1605	28		               plp
.1606	60		          rts
.1607			delay65536
.1607	20 45 17	          jsr pushregs
.160a	a2 00		          ldx #$00
.160c	a0 00		          ldy #$00
.160e	88		waity     dey
.160f	d0 fd		          bne waity
.1611	ca		waitx     dex
.1612	d0 fa		          bne waity
.1614	20 72 17	          jsr popregs
.1617	60		          rts
>1618	01 00 d4 45	string1   .text     1,0,"Test de Drapeaux CPU",0
>161c	53 54 20 44 45 20 c4 52 41 50 45 41 55 58 20 c3
>162c	d0 d5 00
>162f	01 02 c6 cc	string2   .text     BCOLM-5,BLINE-3,"FLAGS:NV-BDIZC",0
>1633	c1 c7 d3 3a ce d6 2d c2 c4 c9 da c3 00
>1640	01 15 d0 41	string3   .text     1,21,"Par: Daniel Lafrance",0
>1644	52 3a 20 c4 41 4e 49 45 4c 20 cc 41 46 52 41 4e
>1654	43 45 00
>1657	0f 05 28 20	string4   .text     BCOLM+9,BLINE,"(   )",0
>165b	20 20 29 00
>165f	07 03 5e 5e	string5   .byte     BCOLM+1,BLINE-2,94,94,32,94,94,94,94,94,0
>1663	20 5e 5e 5e 5e 5e 00
>166a	07 04 7d 7d	string6   .byte     BCOLM+1,BLINE-1,125,125,'?'
>166e	3f
>166f	7d 7d 7d 7d	          .byte     125,125,125,125,125,0
>1673	7d 00
>1675	04 12 c7 45	string7   .text     4,18,"Getkey() = $",0
>1679	54 4b 45 59 28 29 20 3d 20 24 00
>1684	00 09		string8   .byte     0,9
>1686	20 20 20 20	          .text     '    $',13
>168a	24 0d
>168c	20 20 20 2d	          .text     '   -','$    -'
>1690	24 20 20 20 20 2d
>1696	0d 20 20 20	          .byte     13,32,32,32,32,32,45,45,45,32
>169a	20 20 2d 2d 2d 20
>16a0	20 2d 2d 2d	          .byte     32,45,45,45,45,45,45,45,45,45,13
>16a4	2d 2d 2d 2d 2d 2d 0d
>16ab	20 20 20	          .byte     32,32,32
>16ae	3d 24 20 20	          .null     "=$    ="
>16b2	20 20 3d 00
>16b6	12 20 20	teststr   .byte     revson,32,32
>16b9	20 20 20 20	          .text     "               "
>16bd	20 20 20 20 20 20 20 20 20 20 20
>16c8	92 0d 00	          .byte     revsoff,$0d,eot
>16cb	00		count     .byte     XVAL
>16cc	00		tstval    .byte     XCPX
>16cd	00		result    .byte     0
>16ce	00		flags     .byte     0
>16cf	00		row       .byte     0
>16d0	00		lin       .byte     0
>16d1	3a 12		adresse   .word     main

;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-push.asm

.16d3			pushall
.16d3	08		         php     ;s;rp,pcl,pch
.16d4	8d 0c 28	         sta ra  ;sauve a
.16d7	68		         pla     ;s:pcl,pch
.16d8	8d 0d 28	         sta rp  ;sauve rp
.16db	68		         pla     ;s:pch
.16dc	8d 07 28	         sta pc  ;sauve pcl
.16df	68		         pla     ;s:
.16e0	8d 08 28	         sta pc+1;sauve pch
.16e3	a5 fb		         lda $fb ;sauve fb
.16e5	48		         pha     ;s:fb
.16e6	a5 fc		         lda $fc ;sauve fc
.16e8	48		         pha     ;s:fc,fb
.16e9	a5 fd		         lda $fd ;sauve fd
.16eb	48		         pha     ;s:fd,fc,fb
.16ec	a5 fe		         lda $fe ;sauve fe
.16ee	48		         pha     ;s:fe,fd,fc,fb
.16ef	ad 0d 28	         lda rp  ;sauve rp
.16f2	48		         pha     ;s:rp,fe,fd,fc,fb
.16f3	ad 0c 28	         lda ra  ;sauve ra
.16f6	48		         pha     ;s:ra,rp,fe,fd,fc,fb
.16f7	8a		         txa     ;sauve rx
.16f8	48		         pha     ;s:rx,ra,rp,fe-fb
.16f9	98		         tya     ;sauve y
.16fa	48		         pha     ;s:ry,rx,ra,rp,fe-fb
.16fb	ad 08 28	         lda pc+1;replace l'adresse
.16fe	48		         pha     ;s:pch,ry,rx,ra,...
.16ff	ad 07 28	         lda pc  ; de retour.
.1702	48		         pha     ;s:pcl,pch,ru,rx,ra,...
.1703	ad 0d 28	         lda rp  ;place les flags
.1706	48		         pha     ; sur le stack.
.1707	ad 0c 28	         lda ra  ;recupere ra
.170a	28		         plp     ;recupere les flags.
.170b	60		         rts
.170c			popall
.170c	08		         php     ;s:rp,pcl,pch,ry,rx,...
.170d	8d 0c 28	         sta ra
.1710	68		         pla     ;s:pcl,pch,ry,rx,...
.1711	8d 0d 28	         sta rp  ;s:pch,ry,rx,ra,rp,...
.1714	68		         pla
.1715	8d 07 28	         sta pc  ;sauve pcl
.1718	68		         pla     ;s:ry,rx,ra,rp,fe...fb
.1719	8d 08 28	         sta pc+1;sauve pch
.171c	68		         pla     ;s:rx,ra,rp,fe,fd,fc,fb
.171d	a8		         tay     ;recupere ry
.171e	68		         pla     ;s:ra,rp,fe,fd,fc,fb
.171f	aa		         tax     ;recupere rx
.1720	68		         pla     ;s:rp,fe,fd,fc,fb
.1721	8d 0c 28	         sta ra  ;recupere ra
.1724	68		         pla     ;s:fe,fd,fc,fb
.1725	8d 0d 28	         sta rp  ;recupere les flags.
.1728	68		         pla     ;s:fd,fc,fb
.1729	85 fe		         sta $fe ;reccupere fe
.172b	68		         pla     ;s:fc,fb
.172c	85 fd		         sta $fd ;recupere fd
.172e	68		         pla     ;s:fb
.172f	85 fc		         sta $fc ;recupere fc
.1731	68		         pla     ;s:
.1732	85 fb		         sta $fb ;recupere fb
.1734	ad 08 28	         lda pc+1;replaace l'adresse de
.1737	48		         pha     ;s:pch
.1738	ad 07 28	         lda pc  ;retour sur la pile
.173b	48		         pha     ;s:pcl,pch
.173c	ad 0d 28	         lda rp  ;recupere les flags
.173f	48		         pha     ;s:rp,pcl,pch
.1740	ad 0c 28	         lda ra  ;recupere ra
.1743	28		         plp     ;s:pcl,pch
.1744	60		         rts
.1745			pushregs
.1745	08		         php     ;s;rp,pcl,pch
.1746	8d 0c 28	         sta ra  ; -- sauve a
.1749	68		         pla     ;s:pcl,pch
.174a	8d 0d 28	         sta rp  ; -- sauve rp
.174d	68		         pla     ;s:pch
.174e	8d 07 28	         sta pc  ; -- sauve pcl
.1751	68		         pla     ;s:
.1752	8d 08 28	         sta pc+1; -- sauve pch
.1755	ad 0d 28	         lda rp  ; -- sauve rp
.1758	48		         pha     ;s:rp
.1759	ad 0c 28	         lda ra  ; -- sauve ra
.175c	48		         pha     ;s:ra,rp
.175d	8a		         txa     ; -- tfr rx
.175e	48		         pha     ;s:rx,ra,rp
.175f	98		         tya     ; -- tfr ry
.1760	48		         pha     ;s:ry,rx,ra,rp
.1761	ad 08 28	         lda pc+1; -- replace l'adresse
.1764	48		         pha     ;s:pch,ry,rx,ra,rp
.1765	ad 07 28	         lda pc  ; -- de retour.
.1768	48		         pha     ;s:pcl,pch,ru,rx,ra,rp
.1769	ad 0d 28	         lda rp  ; -- place les flags
.176c	48		         pha     ;    sur le stack.
.176d	ad 0c 28	         lda ra  ; -- recupere ra
.1770	28		         plp     ; -- recupere flags.
.1771	60		         rts     ;s:pcl,pch,ru,rx,ra,rp
.1772			popregs
.1772	08		         php
.1773	8d 0c 28	         sta ra
.1776	68		         pla
.1777	8d 0d 28	         sta rp
.177a	68		         pla     ;s:pch,ry,rx,ra,rp
.177b	8d 07 28	         sta pc  ; -- sauve pcl
.177e	68		         pla     ;s:ry,rx,ra,rp
.177f	8d 08 28	         sta pc+1; -- sauve pch
.1782	68		         pla     ;s:rx,ra,rp
.1783	a8		         tay     ;recupere ry
.1784	68		         pla     ;s:ra,rp
.1785	aa		         tax     ;recupere rx
.1786	68		         pla     ;s:rp
.1787	8d 0c 28	         sta ra  ;recupere ra
.178a	68		         pla     ;s:
.178b	8d 0d 28	         sta rp  ;recupere les flags.
.178e	ad 08 28	         lda pc+1;replace l'adresse de
.1791	48		         pha     ;s:pch
.1792	ad 07 28	         lda pc  ;retour sur la pile
.1795	48		         pha     ;s:pcl,pch
.1796	ad 0d 28	         lda rp  ;recupere les flags
.1799	48		         pha     ;s:rp,pcl,pch
.179a	ad 0c 28	         lda ra  ;recupere ra
.179d	28		         plp     ;s:pcl,pch
.179e	60		         rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-string.asm

.179f			puts
.179f	20 d3 16	        jsr pushall
.17a2	a0 00		        ldy #$00   ; y = offset
.17a4	b1 fb		nextc   lda ($fb),y;lit un caractere
.17a6	f0 09		        beq out    ;si 0 on sort
.17a8	20 7a f2	        jsr chrout ;on l'affiche
.17ab	20 d9 18	        jsr inczp1 ;pointe le prochain
.17ae	4c a4 17	        jmp nextc  ; et l'affiche
.17b1	20 0c 17	out     jsr popall
.17b4	60		        rts
.17b5			putsyx
.17b5	20 d3 16	        jsr pushall;sauve reg + zps
.17b8	86 fb		        stx $fb    ;$yyxx dans
.17ba	84 fc		        sty $fb+1  ; zp1
.17bc	20 9f 17	        jsr puts
.17bf	20 0c 17	        jsr popall ;recup reg + zps
.17c2	60		        rts
.17c3			putsxy
.17c3	20 d3 16	        jsr pushall;sauve reg + zps
.17c6	86 fb		        stx $fb    ;$yyxx dans
.17c8	84 fc		        sty $fb+1  ; zp1
.17ca	a0 00		        ldy #$00
.17cc	b1 fb		        lda ($fb),y
.17ce	aa		        tax
.17cf	20 d9 18	        jsr inczp1
.17d2	b1 fb		        lda ($fb),y
.17d4	20 d9 18	        jsr inczp1
.17d7	a8		        tay
.17d8	20 2d 18	        jsr gotoxy
.17db	20 9f 17	        jsr puts
.17de	20 0c 17	        jsr popall ;recup reg + zps
.17e1	60		        rts
.17e2			putsc
.17e2	08		        php        ;flag sur stack
.17e3	48		        pha        ;acc sur stack
.17e4	48		        pha        ;sauvegarde acc
.17e5	ad 86 02	        lda kcol   ;recup coul. carac.
.17e8	8d 06 28	        sta curcol ; et la sauvegarde
.17eb	68		        pla        ;recup. acc
.17ec	8d 86 02	        sta kcol   ;place coul. voulue
.17ef	20 9f 17	        jsr puts   ;affiche la chaine
.17f2	ad 06 28	        lda curcol ;recup coul. carac.
.17f5	8d 86 02	        sta kcol   ; et la replace
.17f8	68		        pla        ;recup acc
.17f9	28		        plp        ;recup flag
.17fa	60		        rts
.17fb			putscyx
.17fb	08		        php       ;sauve registres
.17fc	48		        pha       ; ...
.17fd	48		        pha       ;sauve acc
.17fe	ad 86 02	        lda kcol  ;recup couleur carac.
.1801	8d 06 28	        sta curcol; et sauvegarde
.1804	68		        pla       ;recup acc
.1805	8d 86 02	        sta kcol  ;place couleur carac.
.1808	20 b5 17	        jsr putsyx;affiche la chaine
.180b	ad 06 28	        lda curcol
.180e	8d 86 02	        sta kcol
.1811	68		        pla
.1812	28		        plp
.1813	60		        rts
.1814			putscxy
.1814	08		        php       ;sauve registres
.1815	48		        pha       ; ...
.1816	48		        pha       ;sauve acc
.1817	ad 86 02	        lda kcol  ;recup couleur carac.
.181a	8d 06 28	        sta curcol; et sauvegarde
.181d	68		        pla       ;recup acc
.181e	8d 86 02	        sta kcol   ;place couleur carac.
.1821	20 b5 17	        jsr putsyx ;affiche la chaine
.1824	ad 06 28	        lda curcol
.1827	8d 86 02	        sta kcol
.182a	68		        pla
.182b	28		        plp
.182c	60		        rts
.182d			gotoxy
.182d	20 45 17	        jsr pushregs
.1830	8a		        txa ; interchange x et y
.1831	48		        pha ; ...
.1832	98		        tya ; ...
.1833	aa		        tax ; ...
.1834	68		        pla ; ...
.1835	a8		        tay ; ...
.1836	c0 00		txlow   cpy #0
.1838	10 02		        bpl txhigh
.183a	a2 00		        ldx #0
.183c	e0 19		txhigh  cpx #25
.183e	30 02		        bmi tylow
.1840	a2 18		        ldx #24
.1842	c0 00		tylow   cpy #0
.1844	10 02		        bpl tyhigh
.1846	a0 00		        ldy #0
.1848	c0 28		tyhigh  cpy #40
.184a	30 02		        bmi allok
.184c	a0 27		        ldy #39
.184e	18		allok   clc
.184f	20 0a e5	        jsr plot
.1852	20 72 17	        jsr popregs
.1855	60		        rts
.1856			putnch
.1856	20 45 17	        jsr pushregs
.1859	20 7a f2	again   jsr chrout
.185c	ca		        dex
.185d	d0 fa		        bne again
.185f	20 72 17	        jsr popregs
.1862	60		        rts
.1863			strlen
.1863	20 d3 16	        jsr pushall
.1866	84 fc		        sty zp1+1
.1868	86 fb		        stx zp1
.186a	a0 00		        ldy #$00
.186c	8c 98 27	        sty len
.186f	b1 fb		next    lda (zp1),y
.1871	f0 07		        beq out
.1873	ee 98 27	        inc len
.1876	c8		        iny
.1877	4c 6f 18	        jmp next
.187a	20 0c 17	out     jsr popall
.187d	ad 98 27	        lda len
.1880	60		        rts
.1881			cursor
.1881	20 45 17	        jsr  pushregs
.1884	90 12		        bcc  get    ;C=0 récupération.
.1886	20 0a e5	        jsr  plot  ;récupère position
.1889	8c 97 27	        sty  cx     ;curseur et sauve
.188c	8e 96 27	        stx  cy     ;dans vars locales.
.188f	ad 86 02	        lda  kcol   ;Sauve couleur
.1892	8d 95 27	        sta  bcol   ; BASIC du texte.
.1895	4c a7 18	        jmp  out    ;Fini on sort.
.1898	ae 96 27	get     ldx  cy     ;C=1, charge x
.189b	ac 97 27	        ldy  cx     ; ligne, y col.
.189e	20 0a e5	        jsr  plot  ;Position curseur.
.18a1	ad 95 27	        lda  bcol   ;replace couleur
.18a4	8d 86 02	        sta  kcol ; basic sauvegardé.
.18a7	20 72 17	out     jsr  popregs
.18aa	60		        rts
.18ab			cursave
.18ab	08		        php
.18ac	38		        sec
.18ad	20 81 18	        jsr  cursor
.18b0	28		        plp
.18b1	60		        rts
.18b2			curput
.18b2	08		        php
.18b3	18		        clc
.18b4	20 81 18	        jsr  cursor
.18b7	28		        plp
.18b8	60		        rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-mem.asm

.18b9			blkfill
.18b9	20 d3 16	bf0     jsr pushall
.18bc	84 fc		        sty zp1+1
.18be	a0 00		        ldy #$00
.18c0	84 fb		        sty zp1
.18c2	91 fb		bf1     sta (zp1),y
.18c4	c8		        iny
.18c5	d0 fb		        bne bf1
.18c7	20 0c 17	        jsr popall
.18ca	60		        rts
.18cb			memfill
.18cb	20 45 17	        jsr pushregs
.18ce	20 b9 18	mf1     jsr blkfill
.18d1	c8		        iny
.18d2	ca		        dex
.18d3	d0 f9		        bne mf1
.18d5	20 72 17	        jsr popregs
.18d8	60		        rts
.18d9			inczp1
.18d9	08		         php
.18da	e6 fb		         inc zp1
.18dc	d0 02		         bne repzp1
.18de	e6 fc		         inc zp1+1
.18e0	28		repzp1   plp
.18e1	60		         rts
.18e2			inczp2
.18e2	08		         php
.18e3	e6 fd		         inc zp2
.18e5	d0 02		         bne repzp2
.18e7	e6 fe		         inc zp2+1
.18e9	28		repzp2   plp
.18ea	60		         rts
.18eb			deczp1
.18eb	08		         php
.18ec	48		         pha
.18ed	a5 fb		         lda zp1
.18ef	d0 02		         bne noemp
.18f1	c6 fc		         dec zp1+1
.18f3	c6 fb		noemp    dec zp1
.18f5	68		         pla
.18f6	28		         plp
.18f7	60		         rts
.18f8			deczp2
.18f8	08		         php
.18f9	48		         pha
.18fa	a5 fd		         lda zp2
.18fc	d0 02		         bne noemp
.18fe	c6 fe		         dec zp2+1
.1900	c6 fd		noemp    dec zp2
.1902	68		         pla
.1903	28		         plp
.1904	60		         rts
.1905			rolzp1
.1905	08		        php
.1906	48		        pha
.1907	18		        clc
.1908	a5 fb		        lda zp1
.190a	2a		        rol
.190b	85 fb		        sta zp1
.190d	a5 fc		        lda zp1+1
.190f	2a		        rol
.1910	85 fc		        sta zp1+1
.1912	68		        pla
.1913	28		        plp
.1914			rorzp1
.1914	08		        php
.1915	48		        pha
.1916	18		        clc
.1917	a5 fc		        lda zp1+1
.1919	6a		        ror
.191a	85 fc		        sta zp1+1
.191c	a5 fb		        lda zp1
.191e	6a		        ror
.191f	85 fb		        sta zp1
.1921	68		        pla
.1922	28		        plp
.1923			rolzp2
.1923	08		        php
.1924	48		        pha
.1925	18		        clc
.1926	a5 fd		        lda zp2
.1928	2a		        rol
.1929	85 fd		        sta zp2
.192b	a5 fe		        lda zp2+1
.192d	2a		        rol
.192e	85 fe		        sta zp2+1
.1930	68		        pla
.1931	28		        plp
.1932			rorzp2
.1932	08		        php
.1933	48		        pha
.1934	18		        clc
.1935	a5 fe		        lda zp2+1
.1937	6a		        ror
.1938	85 fe		        sta zp2+1
.193a	a5 fd		        lda zp2
.193c	6a		        ror
.193d	85 fd		        sta zp2
.193f	68		        pla
.1940	28		        plp
.1941			yxtoptr
.1941	8c 06 28	        sty memptr+1
.1944	8e 05 28	        stx memptr
.1947	60		        rts
.1948			ptrtoyx
.1948	08		        php
.1949	ac 06 28	        ldy memptr+1
.194c	ae 05 28	        ldx memptr
.194f	28		        plp
.1950	60		        rts
.1951			incptr
.1951	08		        php
.1952	ee 05 28	        inc memptr
.1955	d0 03		        bne norep
.1957	ee 06 28	        inc memptr+1
.195a	28		norep   plp
.195b	60		        rts
.195c			decptr
.195c	08		        php
.195d	48		        pha
.195e	ad 05 28	        lda memptr
.1961	d0 03		        bne noemp
.1963	ee 06 28	        inc memptr+1
.1966	ee 05 28	noemp   inc memptr
.1969	68		        pla
.196a	28		        plp
.196b	60		        rts
.196c			incptr8
.196c	08		        php
.196d	48		        pha
.196e	98		        tya
.196f	48		        pha
.1970	a0 08		        ldy #8
.1972	20 51 19	again   jsr incptr
.1975	88		        dey
.1976	d0 fa		        bne again
.1978	68		        pla
.1979	a8		        tay
.197a	68		        pla
.197b	28		        plp
.197c	60		        rts
.197d			loop
.197d	ce ff 27	               dec  loopcount
.1980	d0 03		               bne  norep
.1982	ce 00 28	               dec  loopcount+1
.1985	ad ff 27	norep          lda  loopcount
.1988	c9 00		               cmp  #$00
.198a	d0 05		               bne  out
.198c	4d 00 28	               eor  loopcount+1
.198f	c9 ff		               cmp  #$ff
.1991	60		out            rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-math.asm

.1992			addtoword
.1992			addatoyx
.1992	08		        php
.1993	48		        pha
.1994	8c a6 27	        sty reponse+1
.1997	8e a5 27	        stx reponse
.199a	18		        clc
.199b	6d a5 27	        adc reponse
.199e	90 03		        bcc norep
.19a0	ee a6 27	        inc reponse+1
.19a3	8d a5 27	norep   sta reponse
.19a6	ac a6 27	        ldy reponse+1
.19a9	ae a5 27	        ldx reponse
.19ac	68		        pla
.19ad	28		        plp
.19ae	60		        rts
.19af			subtoword
.19af			subatoyx
.19af	08		        php
.19b0	48		        pha
.19b1	8c a6 27	        sty reponse+1
.19b4	8e a5 27	        stx reponse
.19b7	38		        sec
.19b8	ed a5 27	        sbc reponse
.19bb	b0 03		        bcs noemp
.19bd	ce a6 27	        dec reponse+1
.19c0	8d a5 27	noemp   sta reponse
.19c3	ac a6 27	        ldy reponse+1
.19c6	ae a5 27	        ldx reponse
.19c9	68		        pla
.19ca	28		        plp
.19cb	60		        rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-conv.asm

.19cc			putyxhex
.19cc	20 d3 16	        jsr pushall
.19cf	98		        tya
.19d0	48		        pha
.19d1	20 3e 1a	        jsr lsr4bits
.19d4	20 45 1a	        jsr nibtohex
.19d7	8d fa 27	        sta hexstr+0
.19da	68		        pla
.19db	20 45 1a	        jsr nibtohex
.19de	8d fb 27	        sta hexstr+1
.19e1	8a		        txa
.19e2	20 01 1a	        jsr atohex
.19e5	a2 fa		        ldx #<hexstr+0
.19e7	a0 27		        ldy #>hexstr+0
.19e9	20 b5 17	        jsr putsyx
.19ec	20 0c 17	        jsr popall
.19ef	60		        rts
.19f0			putahex
.19f0	20 45 17	        jsr pushregs
.19f3	20 01 1a	        jsr atohex
.19f6	a2 fc		        ldx #<hexstr+2
.19f8	a0 27		        ldy #>hexstr+2
.19fa	20 b5 17	        jsr putsyx
.19fd	20 72 17	        jsr popregs
.1a00	60		        rts
.1a01			atohex
.1a01	08		        php
.1a02	48		        pha
.1a03	48		        pha
.1a04	20 3e 1a	        jsr lsr4bits
.1a07	20 45 1a	        jsr nibtohex
.1a0a	8d fa 27	        sta hexstr
.1a0d	68		        pla
.1a0e	20 45 1a	        jsr nibtohex
.1a11	8d fb 27	        sta hexstr+1
.1a14	a9 00		        lda #$00
.1a16	8d fc 27	        sta hexstr+2
.1a19	68		        pla
.1a1a	28		        plp
.1a1b	60		        rts
.1a1c			atobin
.1a1c	20 45 17	               jsr  pushregs
.1a1f	a2 08		               ldx  #8
.1a21	a0 00		               ldy  #0
.1a23	18		               clc
.1a24	2a		nextbit        rol
.1a25	48		               pha
.1a26	69 00		               adc  #$00
.1a28	29 01		               and  #$01
.1a2a	20 45 1a	               jsr  nibtohex
.1a2d	99 ed 27	               sta  binstr,y
.1a30	68		               pla
.1a31	c8		               iny
.1a32	ca		               dex
.1a33	d0 ef		               bne  nextbit
.1a35	a9 00		               lda  #0
.1a37	99 ed 27	               sta  binstr,y
.1a3a	20 72 17	               jsr  popregs
.1a3d	60		               rts
.1a3e			lsr4bits
.1a3e	08		        php
.1a3f	4a		        lsr a
.1a40	4a		        lsr a
.1a41	4a		        lsr a
.1a42	4a		        lsr a
.1a43	28		        plp
.1a44	60		        rts
.1a45			nibtohex
.1a45	08		        php
.1a46	29 0f		        and    #$0f
.1a48	f8		        sed
.1a49	18		        clc
.1a4a	69 90		        adc #$90
.1a4c	69 40		        adc #$40
.1a4e	28		        plp
.1a4f	60		        rts
.1a50			bytestohex
.1a50	20 d3 16	        jsr pushall
.1a53	84 fc		        sty zp1+1
.1a55	86 fb		        stx zp1
.1a57	08		        php
.1a58	48		        pha
.1a59	a9 20		        lda #32
.1a5b	20 7a f2	        jsr chrout
.1a5e	68		        pla
.1a5f	28		        plp
.1a60	08		        php
.1a61	48		        pha
.1a62	a9 05		        lda #5
.1a64	20 7a f2	        jsr chrout
.1a67	68		        pla
.1a68	28		        plp
.1a69	08		        php
.1a6a	48		        pha
.1a6b	a9 24		        lda #36
.1a6d	20 7a f2	        jsr chrout
.1a70	68		        pla
.1a71	28		        plp
.1a72	20 cc 19	        jsr putyxhex   ; prn adreponsese
.1a75	08		        php
.1a76	48		        pha
.1a77	a9 20		        lda #$20
.1a79	20 7a f2	        jsr chrout
.1a7c	68		        pla
.1a7d	28		        plp
.1a7e	08		        php
.1a7f	48		        pha
.1a80	a9 9f		        lda #159
.1a82	20 7a f2	        jsr chrout
.1a85	68		        pla
.1a86	28		        plp
.1a87	a0 00		        ldy #$00
.1a89	aa		        tax
.1a8a	8c de 27	another sty offset
.1a8d	b1 fb		        lda (zp1),y
.1a8f	20 f0 19	        jsr putahex
.1a92	48		        pha
.1a93	20 b2 1a	        jsr petsciiaddr
.1a96	68		        pla
.1a97	8d 00 04	petscii sta $0400
.1a9a	48		        pha
.1a9b	a9 0d		        lda #$0d
.1a9d	8d 00 d8	petcol  sta $d800
.1aa0	68		        pla
.1aa1	08		        php
.1aa2	48		        pha
.1aa3	a9 20		        lda #$20
.1aa5	20 7a f2	        jsr chrout
.1aa8	68		        pla
.1aa9	28		        plp
.1aaa	c8		        iny
.1aab	ca		        dex
.1aac	d0 dc		        bne another
.1aae	20 0c 17	        jsr popall
.1ab1	60		        rts
.1ab2			petsciiaddr
.1ab2	20 45 17	        jsr pushregs
.1ab5	08		        php
.1ab6	a4 d2		        ldy scrnlin+1
.1ab8	a6 d1		        ldx scrnlin
.1aba	28		        plp
.1abb	a9 1f		        lda #31
.1abd	18		        clc
.1abe	6d de 27	        adc offset
.1ac1	20 92 19	        jsr addatoyx
.1ac4	8c 99 1a	        sty petscii+2
.1ac7	8e 98 1a	        stx petscii+1
.1aca	8e 9e 1a	        stx petcol+1
.1acd	98		        tya
.1ace	29 fb		        and #%11111011 ;#%00000100
.1ad0	09 d8		        ora #$d8
.1ad2	8d 9f 1a	        sta petcol+2
.1ad5	a8		        tay
.1ad6	20 72 17	        jsr popregs
.1ad9	60		        rts
.1ada			strhexval
.1ada	20 d3 16	        jsr pushall ; sauve registre
.1add	84 fc		        sty zp1+1   ; ptr dans zp1
.1adf	86 fb		        stx zp1
.1ae1	20 63 18	        jsr strlen  ;len de $(yyxx)->a
.1ae4	f0 3d		        beq oute    ; si 0 erreur C=1
.1ae6	a0 00		        ldy #$00    ; offset a 0
.1ae8	8c a6 27	        sty reponse+1; reponse a zero
.1aeb	8c a5 27	        sty reponse ;    ...
.1aee	b1 fb		nextc   lda (zp1),y ;charge un caractere
.1af0	f0 26		        beq out     ;On  a fini
.1af2	c0 00		        cpy #$00    ;si c'est le premier
.1af4	f0 07		        beq norol   ; pas de rol
.1af6	48		        pha         ;
.1af7	a9 04		        lda #$04    ;rol de 4 pos
.1af9	20 53 1b	        jsr rolword ;
.1afc	68		        pla         ;
.1afd	09 20		norol   ora #%00100000
.1aff	38		        sec
.1b00	e9 30		        sbc #$30
.1b02	c9 0a		        cmp #$0a
.1b04	90 07		        bcc lt10
.1b06	38		        sec
.1b07	e9 27		        sbc #$27
.1b09	c9 10		        cmp #$10
.1b0b	b0 16		        bcs oute
.1b0d	0d a5 27	lt10    ora reponse
.1b10	8d a5 27	        sta reponse
.1b13	c8		        iny
.1b14	c0 04		        cpy #$04
.1b16	d0 d6		        bne nextc
.1b18	20 0c 17	out     jsr popall
.1b1b	18		        clc          ;Carry 0 = good
.1b1c	ac a6 27	        ldy reponse+1
.1b1f	ae a5 27	        ldx reponse
.1b22	60		        rts
.1b23	20 0c 17	oute    jsr popall
.1b26	38		        sec
.1b27	60		        rts
.1b28			putahexdec
.1b28	20 45 17	        jsr pushregs
.1b2b	08		        php
.1b2c	48		        pha
.1b2d	a9 9e		        lda #sjaune
.1b2f	20 7a f2	        jsr chrout
.1b32	68		        pla
.1b33	28		        plp
.1b34	20 f0 19	        jsr putahex
.1b37	08		        php
.1b38	48		        pha
.1b39	a9 20		        lda #$20
.1b3b	20 7a f2	        jsr chrout
.1b3e	68		        pla
.1b3f	28		        plp
.1b40	08		        php
.1b41	48		        pha
.1b42	a9 9f		        lda #socean
.1b44	20 7a f2	        jsr chrout
.1b47	68		        pla
.1b48	28		        plp
.1b49	aa		        tax
.1b4a	a9 00		        lda #$00
.1b4c	20 cd bd	        jsr fiaxtf1
.1b4f	20 72 17	        jsr popregs
.1b52	60		        rts
.1b53			rolword
.1b53	20 45 17	        jsr pushregs
.1b56	a8		        tay
.1b57	18		again   clc
.1b58	2e a5 27	        rol reponse
.1b5b	2e a6 27	        rol reponse+1
.1b5e	88		        dey
.1b5f	d0 f6		        bne again
.1b61	20 72 17	        jsr popregs
.1b64	60		        rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/l-keyb.asm

.1b65			clrkbbuf
.1b65	08		            php
.1b66	48		            pha
.1b67	a9 00		            lda #0
.1b69	85 c6		            sta 198
.1b6b	68		            pla
.1b6c	28		            plp
.1b6d	60		            rts
.1b6e			waitstop
.1b6e	08		          php    ;\ sauve les flags
.1b6f	48		          pha    ;/  et l'acc.
.1b70	20 65 1b	          jsr clrkbbuf
.1b73	20 70 f7	wait      jsr stop ; Veri [run/stop]
.1b76	d0 fb		          bne wait ;loop pas pesee.
.1b78	68		          pla    ;\ recup. acc et
.1b79	28		          plp    ;/  les flags.
.1b7a	60		          rts
.1b7b			anykey
.1b7b	08		        php
.1b7c	48		        pha
.1b7d	20 65 1b	        jsr clrkbbuf
.1b80	a5 cb		wait    lda 203    ;lit la matrice de
.1b82	c9 40		        cmp #64    ; 64 = aucune clef
.1b84	f0 fa		        beq wait   ; on en attend une.
.1b86	20 8f 1b	        jsr kbfree ; Clavier relache.
.1b89	20 65 1b	        jsr clrkbbuf
.1b8c	68		        pla
.1b8d	28		        plp
.1b8e	60		        rts
.1b8f			kbfree
.1b8f	08		        php
.1b90	48		        pha
.1b91	a5 cb		wait    lda 203    ; lit la matrice
.1b93	c9 40		        cmp #64    ; 64 = aucune clef
.1b95	d0 fa		        bne wait   ; attend la relache
.1b97	68		        pla
.1b98	28		        plp
.1b99	60		        rts
.1b9a			getkey
.1b9a	08		        php
.1b9b	20 f5 f1	try     jsr getin  ;tente de lire
.1b9e	c9 00		        cmp #0     ; 0 si aucune.
.1ba0	f0 f9		        beq try    ; on reessaye
.1ba2	28		        plp
.1ba3	60		        rts
.1ba4			waitkey
.1ba4	08		        php
.1ba5	48		        pha
.1ba6	8d 99 27	        sta clef   ;Sauve clef voulue
.1ba9	20 65 1b	        jsr clrkbbuf
.1bac	20 f5 f1	wait    jsr getin  ;Sonde le clavier
.1baf	cd 99 27	        cmp clef   ;Compare avec clef
.1bb2	d0 f8		        bne wait   ;Pas la bonne.
.1bb4	68		        pla
.1bb5	28		        plp
.1bb6	60		        rts
.1bb7			waitspace
.1bb7	a9 20		            lda #$20
.1bb9	20 a4 1b	            jsr waitkey
.1bbc	20 65 1b	            jsr clrkbbuf
.1bbf	60		            rts
.1bc0			showkey
.1bc0	20 45 17	        jsr pushregs
.1bc3	38		        sec
.1bc4	20 0a e5	        jsr plot
.1bc7	8e 9b 27	        stx curx
.1bca	8c 9a 27	        sty cury
.1bcd	20 45 17	        jsr pushregs
.1bd0	a0 1c		        ldy #39-11
.1bd2	a2 18		        ldx #24
.1bd4	18		        clc
.1bd5	20 0a e5	        jsr plot
.1bd8	20 72 17	        jsr popregs
.1bdb	20 7a f2	        jsr chrout
.1bde	08		        php
.1bdf	48		        pha
.1be0	a9 20		        lda #32
.1be2	20 7a f2	        jsr chrout
.1be5	68		        pla
.1be6	28		        plp
.1be7	08		        php
.1be8	48		        pha
.1be9	a9 24		        lda #36
.1beb	20 7a f2	        jsr chrout
.1bee	68		        pla
.1bef	28		        plp
.1bf0	20 28 1b	        jsr putahexdec
.1bf3	18		        clc
.1bf4	ac 9a 27	        ldy cury
.1bf7	ae 9b 27	        ldx curx
.1bfa	20 0a e5	        jsr plot
.1bfd	20 72 17	        jsr popregs
.1c00	60		        rts

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/e-vars.asm

=10254			libre    = *+3085
=10253			rp       = libre-$01;1 byte $cfff
=10252			ra       = rp-1     ;1 byte $cffe
=10251			rx       = ra-1     ;1 byte $cffd
=10250			ry       = rx-1     ;1 byte $cffc
=10249			rs       = ry-1     ;1 byte $cffb
=10247			pc       = rs-2     ;2 byte $cff9-$cffa
=10246			curcol   = pc-1     ;1 byte $cff6
=10245			memptr   = curcol-1;1 word $cff7-$cff8
=10243			src      = memptr-2
=10241			dst      = memptr-4
=10239			loopcount = memptr-6
=10239			hexv     = loopcount
.1c01			a2hexstr
=10234			hexstr   = hexv-$05 ;5 byte
=10233			a2hexpfx = hexv-$06 ;1 byte
=10232			a2hexpy  = hexv-$07 ;1 byte
=10231			a2hexpx  = hexv-$08 ;1 byte
=10231			a2hexpos = hexv-$08 ;0 byte
=10230			a2hexcol = hexv-$09 ;1 byte
=10230			binv     = a2hexcol
=10221			binstr   = binv-$09 ;9 byte
=10220			a2binpfx = binv-$0a ;1 byte
=10219			a2binpy  = binv-$0b ;1 byte
=10218			a2binpx  = binv-$0c ;1 byte
=10218			a2binpos = binv-$0c ;0 byte
=10217			a2bincol = binv-$0d ;1 byte
=10217			decv     = a2bincol
=10211			decstr   = decv-$06 ;6 byte
=10210			a2decpfx = decv-$07 ;1 byte
=10209			a2decpy  = decv-$08 ;1 byte
=10208			a2decpx  = decv-$09 ;1 byte
=10208			a2decpos = decv-$09 ;0 byte
=10207			a2deccol = decv-$0a ;1 byte
=10206			offset   = decv-$0b ;1 byte
=10206			fltv     = offset
=10200			fvar1    = fltv-6  ; 6 byte
=10194			fvar2    = fltv-12 ; 6 byte
=10174			float1   = fltv-32 ;20 byte
=10154			float2   = fltv-52 ;20 byte
=10153			tval1    = fltv-53 ; 1 byte
=10151			tval2    = fltv-55 ; 2 byte
=10149			reponse  = tval2-2 ; 2 byte
=10149			edbox    = reponse
=10148			cleft    = edbox-1 ;1 byte
=10147			cright   = edbox-2 ;1 byte
=10146			cmid     = edbox-3 ;1 byte
=10145			dbtop    = edbox-4 ;1 byte
=10144			dbleft   = edbox-5 ;1 byte
=10143			dbwdth   = edbox-6 ;1 byte
=10142			dbhght   = edbox-7 ;1 byte
=10141			dbcoul   = edbox-8 ;1 byte
=10140			dbclin   = edbox-9 ;1 byte
=10140			ekeyb    = dbclin
=10139			curx     = ekeyb-1 ;1 byte
=10138			cury     = ekeyb-2 ;1 byte
=10137			clef     = ekeyb-3 ;1 byte
=10136			len      = clef-1  ;1 byte
=10135			cx       = clef-2  ;1 byte
=10134			cy       = clef-3  ;1 byte
=10133			bcol     = clef-4  ;1 byte
=10133			escr     = bcol          ;   2051 bytes
=10132			loops    = escr-1       ; 1 byte
=10130			loop16   = loops-2      ; 2 byte
=9106			scrncar  = loop16-1024  ;1k byte
=8082			scrncol  = scrncar-1024 ;1k byte
=8082			diskvar = scrncol
=8080			ddatas  = diskvar-2 ;2 byte Data start
=8078			ddatae  = diskvar-4 ;2 byte Data end
=8077			ddev    = diskvar-5 ;1 byte Dev number
=8076			dlfsno  = diskvar-6 ;1 byte Lfs
=8074			dfnptr  = diskvar-8 ;2 byte Ptrnfichier
=8073			dfnlen  = diskvar-9 ;1 byte lenfilename
=8072			genbyte1 = dfnlen-1 ; 1 byte
=8070			genword1 = dfnlen-3 ; 2 byte
=8069			endofvars = genword1-1

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/m-v20-utils.asm


;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/e-float.asm

=$ba8c			ffvtf2   = $ba8c ;copie 4 byt $(yyaa) f2
=$bba2			ffvtf1   = $bba2 ;copie fp $(yyaa) to f1
=$bbc7			ff1t5c   = $bbc7 ;copie f1 to $5c-$60
=$bbca			ff1t57   = $bbca ;copie f1 to $57-$5b
=$bbd0			ff1t49   = $bbd0 ;copie f1 to $49.
=$bbd4			ff1tyx   = $bbd4 ;copie f1 mem $yyxx.
=$bbfc			ff2tf1   = $bbfc ;copie f2 to f1
=$bc0c			ff1tf2   = $bc0c ;copie f1 to f2
=$b849			ff1p05   = $b849 ;f1=f1+0.5
=$b850			ffvsf1   = $b850 ;f1=fv-f1 ($yyaa)
=$b853			ff2sf1   = $b853 ;f1=f2-f1
=$b867			ffvpf1   = $b867 ;f1=fv+f1 ($yyaa)
=$b86a			ff2pf1   = $b86a ;f1=f2+f1
=$bd7e			ff1pac   = $bd7e ;f1=f1+ra val ra=0-9
=$ba28			ff1xfv   = $ba28 ;f1=f1*fv ($yyaa)
=$ba2b			ff1xf2   = $ba2b ;f1=f1*f2
=$bae2			ff1x10   = $bae2 ;f1=f1*10
=$bafe			ff1d10   = $bafe ;f1=f1/10
=$bb0f			ffvdf1   = $bb0f ;f1=fv/f1 ($yyaa)
=$bb12			ff2df1   = $bb12 ;f1=f2/f1
=$afe6			ffpor    = $afe6 ;f1=f1 or f2
=$afe9			ffpand   = $afe9 ;f1=f1 and f2
=$b947			ff1com2  = $b947 ;f1=two's compl f1
=$bc1b			ff1rnd   = $bc1b ;f1=round(f1)
=$bc39			ff1sign  = $bc39 ;f1=sgn(f1)
=$bc58			ff1abs   = $bc58 ;f1=abs(f1)
=$bc5b			ffvcmp   = $bc5b ;f1=f1 comp fv ($yyaa)
=$bccc			ff1int   = $bccc ;f1=int(f1)
=$bf71			ff1sqr   = $bf71 ;f1=sqrt(f1)
=$bf7b			ff1ef2   = $bf7b ;f1=fac1^f2
=$b3a2			fiyytf1  = $b3a2 ;f1=float(y)
=$bc3c			fiaatf1  = $bc3c ;conv acc to fp in f1
=$bc44			fi62tf1  = $bc44 ;conv f1 word 62,63
=$bdcd			fiaxtf1  = $bdcd ;f1=float($aaxx)+print
=$bcf3			fasctf1  = $bcf3 ;f1=float(ascii)
=$bddd			ff1tasc  = $bddd ;f1 to ascii ($yyaa)
=$bc9b			ff1tudw  = $bc9b ;f1=unsighed dw(f1)
=$b1bf			ff1swd64 = $b1bf ;f1=sw(f1)->64
=$b1d2			ff1wrd64 = $b1d2 ;f1=uw(f1)->64
=$b1aa			ff1wrday = $b1aa ;f1=word->$aayy
=$b7a1			ff1bytxx = $b7a1 ;f1 to byte in x
=$b79e			ff1evalx = $b79e ;eval. expr. f1 to x
=$e264			ff1cos   = $e264 ;f1=sin(f1+(pi/2))
=$e26b			ff1sin   = $e26b ;f1=sin(f1)
=$e2b4			ff1tan   = $e2b4 ;f1=sin(f1)/cos(f1)
=$e30e			ff1atn   = $e30e ;f1=atn(f1)
=$bc2b			fsngf1   = $bc2b ;check f1 sign

;******  Return to file: template.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/V20/lib/e-v20-kernal-map.asm

=$00			eot       = $00
=$01			memmapreg = $01
=$73			chrget    = $73     ;Recup Basic car texte
=$79			chrgot    = $79     ;...une seconde fois.
=$7c			chrtst    = $7c
=$90			kiostatus = $90     ; Kernal I/O status word (st) (byte)
=$b7			curfnlen  = $b7     ; Current filename length (byte)
=$b9			cursecadd = $b9     ; Current secondary address (byte)
=$ba			curdevno  = $ba     ; Current device number (byte)
=$bb			curfptr   = $bb     ; Current file pointer (word)
=$c1			stal      = $c1     ;word
=$d1			scrnlin   = $d1     ;pnt cur-scrn-line
=$fb			zp1       = $fb     ;1er Zpage prog. usager address (word)
=$fb			zpage1    = $fb     ; zero page 1
=$fd			zp2       = $fd     ;2em Zpage prog. usager address (word)
=$fd			zpage2    = $fd     ; zero page 2 address (word)
=$0100			fascii    = $0100;region conv FP a ascii
=$0286			kcol      = $0286;Couleur car affiche.
=$1001			basstart  = $1001     ;basic start address std
=$1201			basstartx = $1201     ;basic start address exram
=$a000			basicrom  = $a000
=$d000			chargen   = $d000
=$d000			vicii     = $d000
=$d400			sid       = $d400     ;sid base address
=$9110			via1      = $9110     ;cia1  base address
=$dd00			via2      = $dd00     ;cia2 base address
=$e000			kernalrom = $e000
=8			discase   =    8
=9			enacase   =    9
=14			locase    =    14
=17			crsdown   =    17
=18			revson    =    18
=19			gohome    =    19
=20			delete    =    20
=29			crsright  =    29
=142			upcase    =    142
=145			crsup     =    145
=157			crsleft   =    157
=146			revsoff   =    146
=147			clrhome   =    147
=$03			bstop     =   $03      ;stop
=$05			bwhite    =   $05      ;set colour white
=$08			block     =   $08      ;lock the charset
=$09			bunlock   =   $09      ;unlock the charset
=$0d			bcarret   =   $0d
=$0e			btext     =   $0e
=$11			bcrsdn    =   $11      ;cursor down 1 line
=$12			brevcol   =   $12
=$13			bhome     =   $13
=$14			bdelete   =   $14
=$1c			bred      =   $1c
=$1d			bcuright  =   $1d
=$1e			bgreen    =   $1e
=$1f			bblue     =   $1f
=$81			borange   =   $81
=$83			blrun     =   $83
=$85			bfkey1    =   $85
=$86			bfkey2    =   $86
=$87			bfkey3    =   $87
=$88			bfkey4    =   $88
=$89			bfkey5    =   $89
=$8a			bfkey6    =   $8a
=$8b			bfkey7    =   $8b
=$8c			bfkey8    =   $8c
=$8d			bcarret1  =   $8d
=$8e			bgraph    =   $8e
=$90			bblack    =   $90
=$91			bcuup     =   $91
=$92			brevoff   =   $92
=$93			bclear    =   $93
=$94			binsert   =   $94
=$95			bbrown    =   $95
=$96			bltred    =   $96
=$97			bdkgrey   =   $97
=$98			bmdgrey   =   $98
=$99			bltgreen  =   $99
=$9a			bltblue   =   $9a
=$9b			bltgrey   =   $9b
=$9c			bmagenta  =   $9c
=$9d			bculeft   =   $9d
=$9e			byellow   =   $9e
=$9f			bcyan     =   $9f
=$0286			carcol  = $0286
=$030a			ieval   = $030a
=$0			enoir       = $0
=$1			eblanc      = $1
=$2			erouge      = $2
=$3			eocean      = $3
=$4			emauve      = $4
=$5			evert       = $5
=$6			ebleu       = $6
=$7			ejaune      = $7
=$8			eorange     = $8
=$9			ebrun       = $9
=$a			erose       = $a
=$b			egrisfonce  = $b
=$c			egrismoyen  = $c
=$d			evertpale   = $d
=$e			ebleupale   = $e
=$f			egrispale   = $f
=144			snoir       = 144
=5			sblanc      = 5
=28			srouge      = 28
=159			socean      = 159
=156			smauve      = 156
=30			svert       = 30
=31			sbleu       = 31
=158			sjaune      = 158
=$9000			vic       = $9000;debut du vic
=$9000			vic0      = $9000;ABBBBBBB
=$9001			vic1      = $9001;CCCCCCCC
=$9002			vic2      = $9002;HDDDDDDD
=$9003			vic3      = $9003;GEEEEEEF
=$9004			vic4      = $9004;GGGGGGGG
=$9005			vic5      = $9005;HHHHIIII
=$9006			vic6      = $9006;JJJJJJJJ
=$9007			vic7      = $9007;KKKKKKKK
=$9008			vic8      = $9008;LLLLLLLL
=$9009			vic9      = $9009;MMMMMMMM
=$900a			vic10     = $900a;NRRRRRRR
=$900b			vic11     = $900b;OSSSSSSS
=$900c			vic12     = $900c;PTTTTTTT
=$900d			vic13     = $900d;QUUUUUUU
=$900e			vic14     = $900e;WWWWVVVV
=$900f			vic15     = $900f;XXXXYZZZ
=$00			vnoir   =   %00000000
=$01			vblanc  =   %00000001
=$02			vrouge  =   %00000010
=$03			vocean  =   %00000011
=$04			vmauve  =   %00000100
=$05			vvert   =   %00000101
=$06			vbleu   =   %00000110
=$07			vjaune  =   %00000111
=$08			vorange =   %00001000
=$09			vbrun   =   %00001001
=$0a			vrose   =   %00001010
=$0b			vgris   =   %00001011
=$0c			vgris1  =   %00001100
=$0d			vvert1  =   %00001101
=$0e			vbleu1  =   %00001110
=$0f			vgris2  =   %00001111
=$00			bknoir  =   %00000000
=$10			bkblanc =   %00010000
=$20			bkrouge =   %00100000
=$30			bkocean =   %00110000
=$40			bkmauve =   %01000000
=$50			bkvert  =   %01010000
=$60			bkbleu  =   %01100000
=$70			bkjaune =   %01110000
=$80			bkorange=   %10000000
=$90			bkrose  =   %10010000
=$a0			bkgris  =   %10100000
=$b0			bkgris1 =   %10110000
=$c0			bkgris2 =   %11000000
=$d0			bkvert1 =   %11010000
=$e0			bkbleu1 =   %11100000
=$f0			bkjaune2=   %11110000
=$e4a0			serout1 = $e4a0 ; Serial: Output a 1 on the serial data line.
=$e4a9			serout0 = $e4a9 ; Serial: Output a 0 on the serial data line.
=$e4b2			serget  = $e4b2 ; Serial: Get an input bit from VIA1 and stabilize.
=$e4bc			patches = $e4bc ; Program patch area.
=$e500			iobase  = $e500 ; ($e500) Define i/o memory page
=$e505			screen  = $e505 ; Return screen format
=$e50a			plot    = $e50a ; Set or retrieve cursor location x=column, y=line
=$e518			initsk  = $e518 ; Initialize 6550 Vic Chip, screen and related pointers.
=$e55f			clsr    = $e55f ; Clear the screen.
=$e55f			home    = $e55f ; Move the cursor to the screen home position.
=$e587			setslink= $e587 ; Reset the screen line link table pointers.
=$e5b5			unusdnmi= $e5b5 ; NMI entry for restore key (No entry for this routine found.)
=$e5bb			setiodef= $e5bb ; Reset the default device number.
=$e5c3			initvic = $e5c3 ; Reset the vic chip registers.
=$e5cf			lp2     = $e5cf ; Get a character from the keyboard queue and shift it down.
=$e5e5			getque  = $e5e5 ; Wait for character to appear in the keyboard buffer.
=$e619			get2rtn = $e619 ; Empty the keyboard buffer up to a carriage return.
=$e64f			getscrn = $e64f ; Optain input from screen.
=$e6b8			quoteck = $e6b8 ; Test for quote and set flag.
=$e6c5			setchar = $e6c5 ; Set up diaplay of a character on the screen.
=$e6ea			scroll  = $e6ea ; advance the cursor on the screen, adds lines, and scroll.
=$e72d			retreat = $e72d ; Backup the cursor into the previous ligical screen line from
=$e742			scrnout = $e742 ; Handle characters going to the screen.
=$e8c3			nxtline = $e8c3 ; Advance cursor to the next logical line.
=$e8d8			rtrn    = $e8d8 ; Handle the carriage return key.
=$e8e8			backup  = $e8e8 ; Move the corsor to the end of the previoud physical screen
=$e8fa			forward = $e8fa ; Move the cursor to the start of the next screen line if the
=$e912			colourset=$e912 ; Set the current foreground colour code.
=$e921			colourtbl=$e921 ; Colour code key table.
=$e929			cnvrtcd = $e929 ; Code conversion table.
=$e975			scrl    = $e975 ; Scroll the screen.
=$e9ee			openlin = $e9ee ; Open up a blank physical line on the screen for inserts.
=$ea56			movline = $ea56 ; Move screen line.
=$ea6e			setaddr = $ea6e ; The address of the screen line + color line is set in memory.
=$ea7e			linptr  = $ea7e ; Set a pointer to the address of the start of the screen line.
=$ea8d			clraline= $ea8d ; Blank out a physical screen line.
=$eaa1			synptr  = $eaa1 ; Synchronize color to byte and store character on screen.
=$eaaa			putscrn = $eaaa ; store a character on the screen.
=$eab2			colorsyn= $eab2 ; The address of the color map byte for screen map byte is
=$eabf			irq     = $eabf ; IRQ interupt handler.
=$eb1e			scnkey  = $eb1e ; Scan the keyboard
=$ebdc			setkeys = $ebdc ; Set keyboard decode table address in 245-246 ($f6-$f6).
=$ec46			keyvctrs= $ec46 ; Keyboard decode table addresses.
=$ec5e			normkeys= $ec5e ; Table used for decoding unshifted keys into ascii.
=$ec9f			shftkeys= $ec9f ; Table used for decoding SHIFTed keys into ascii.
=$ece0			logokeys= $ece0 ; Table used for decoding Commodore SHIFTed keys into ascii.
=$ed21			charset = $ed21 ; Used to set uppercase/graphics character set.
=$ed30			graphmode=$ed30 ; Set the environment specified by graphics control characters.
=$ed5b			wrapline= $ed5b ;
=$ed69			whatkeys= $ed69 ; Apparently unused keyboard decoding table.
=$eda3			ctrlkeys= $eda3 ; Table used for decoding CTRL SHIFT keys into ascii.
=$ede4			vicinit = $ede4 ; Initial values for VIC chip registers.
=$edf4			runtb   = $edf4 ; LOAD and RUN words for the SHIFT and RUN keys.
=$edfd			ldtb2   = $edfd ; Screen line link table LSB of line in screen map.
=$ee14			talk    = $ee14 ; Send Talk command to serial bus.
=$ee17			listen  = $ee17 ; Command a device on the serial bus to listen.
=$ee1c			listi   = $ee1c ; Serial: Prepare to send serial command with attention.
=$ee49			srsend  = $ee49 ; Serial: Send command or data to serial device.
=$eeb4			srbad   = $eeb4 ; Serial: Set ST for timeout or DEVICE NOT PRESENT.
=$eec0			second  = $eec0 ; Send secondary address after listen
=$eec5			scatn   = $eec5 ; Serial: Clear attention.
=$eece			tksa    = $eece ; Send a secondary address to a device commanded to talk
=$eee4			ciout   = $eee4 ; Transmit a byte over the serial bus
=$eef6			untlk   = $eef6 ; Send an untalk command
=$ef04			unlsn   = $ef04 ; Send an unlisten command
=$ef19			acptr   = $ef19 ; Recoit un caractere provenant du port serie
=$ef84			srclkhi = $ef84 ; Serial: Set clock line high.
=$ef8d			srclklo = $ef8d ; Serial: Set clock line low.
=$ef96			waitabit= $ef96 ; Serial: Delay one millisecond.
=$efa3			rsnxtbit= $efa3 ; RS-232: Send the next bin (NMI continuation routine).
=$efbf			rsprty  = $efbf ; RS-232: Calculate barity and stop bits value.
=$efe8			rsstops = $efe8 ; RS-232: Transmit stop bits.
=$efee			rsnxtbyt= $efee ; RS-232: Prepare the next byte to be send from send buffer.
=$f016			rsmissing=$f016 ; RS-232: Set Clear To Send or Data Set Ready Missing status.
=$f027			rscptbit= $f027 ; RS-232: Compute desire word lenght bit count.
=$f036			rsinbit = $f036 ; RS-232: Recieve an input bit (NMI driven).
=$f04b			rsstpbit= $f04b ; RS-232: Determine if all the stop bits have been recieved yet.
=$f05b			rsprepin= $f05b ; RS-232: Prepare to recieve the next input byte.
=$f068			rsstrbit= $f068 ; RS-232: Check for start bit in recieve mode.
=$f06f			rsinbyte= $f06f ; RS-232: Put constructed byte into reciebe buffer.
=$f08b			rsinprty= $f08b ; RS-232: Parity checking of the input byte.
=$f09d			rsprtyer= $f09d ; RS-232: Parity error on input byte.
=$f0a2			rsoverun= $f0a2 ; RS-232: Buffer overrun on input byte.
=$f0a5			rsbreak = $f0a5 ; RS-232: Break detected on input.
=$f0a8			rsframer= $f0a8 ; RS-232: Framing error on input.
=$f0aa			rsinerr = $f0aa ; RS-232: Set input error status and continue.
=$f0b9			rsdvcerr= $f0b9 ; RS-232: ILLEGAL DEVICE message for LOAD or SAVE.
=$f0bc			rsopnout= $f0bc ; RS-232: Open an RS-232 channel for output.
=$f0ed			rsoutsav= $f0ed ; RS-232: Store a character in the transmit buffer.
=$f102			rsprepot= $f102 ; RS-232: Set up NMI for transmission.
=$f116			rsopnin = $f116 ; RS-232: Open an RS-232 channel for input.
=$f14f			rsnxtin = $f14f ; RS-232: Retrieve the next character from the recieve buffer.
=$f160			rspause = $f160 ; RS-232: Check if serial and tape are idle, protect from RS232.
=$f174			kmsgtbl = $f174 ; Table of KERNAL messages.
=$f1e2			spmsg   = $F1e2 ; Display LOADING or VERIFYING if control messages wanted.
=$f1e6			kmsgshow= $f1e6 ; Print KERNAL control messages.
=$f1f5			getin   = $f1f5 ; Get a character.
=$f20e			ibasin  = $f20e ; Get a character from the input channel
=$f20e			chrin   = $f20e ; Description:
=$f230			chrintp = $f230 ; Obtain a byte from the tape buffer.
=$f250			chrintp2= $f250 ; Load .A with next tape character, getting block when needed.
=$f264			chrinsr = $f264 ; Obtain a byte from the serial line.
=$f26f			chrinrs = $f26f ; RS-232: Obtain a byte from the rs-232 device.
=$f27a			chrout  = $f27a ; Output character to current output device.
=$f290			chrouttp= $f290 ; Output a character to tape.
=$f2c7			chkin   = $f2c7 ; Define an input channel.
=$f309			chkout  = $f309 ; Define an output channel.
=$f34a			close   = $f34a ; (Close a logical file
=$f3cf			fndflno = $f3cf ; Find file number (.x) in file table at 601 ($0259).
=$f3df			setflch = $f3df ; Set file characteristics of file (.x) into 184-186 ($b8-$ba).
=$f3ef			clall   = $f3ef ; Close all open files
=$f3f3			clrchn  = $f3f3 ; Clear all i/o channels.
=$f40a			open    = $f40a ; Open a logical file
=$f495			sername = $f495 ; Send secondary address and filename to serial device.
=$f4c7			openrs  = $f4c7 ; RS-232: open RS-232 device.
=$f542			load    = $f542 ; Load device to RAM.
=$f55c			loadser = $f55c ; Load or Verify from serial device.
=$f5d1			loadtp  = $f5d1 ; Load or Verify from tape.
=$f647			srching = $f647 ; Display SEARCHING message for tape device.
=$f659			filename= $f659 ; Display the filename.
=$f66a			ldvrmsg = $f66a ; Display LOADING or VERIFYING message.
=$f675			save    = $f675 ; Save memory to a device.
=$f692			saveser = $f692 ; Save RAM to serial device (except: RS-232,screen or keyboard).
=$f6f1			savetp  = $f6f1 ; Save RAM to tape.
=$f728			saving  = $f728 ; Display SAVING message.
=$f734			udtim   = $f734 ; Update the system clock
=$f760			rdtim   = $f760 ; Read system clock
=$f767			settim  = $f767 ; Set the system clock.
=$f770			stop    = $f770 ; Check if stop key is pressed.
=$f77e			filemsg = $f77e ; I/O error file error message handler.
=$f7af			fah     = $f7af ; Tape: find next tape header, .X back contains header ID#.
=$f7e7			tapeh   = $f7e7 ; Tape: Build an output tape header in the tape buffer area.
=$f84d			tpbufa  = $f84d ; Tape: Load tape buffer address from 178-179($b2-$b3) in .X .Y.
=$f854			ldad1   = $f854 ; Tape: Set Load/Save starting and ending pointers to the tape.
=$f867			fndhrd  = $f867 ; Tape: Find the tape header for a specified filename (or next).
=$f88a			jtp20   = $f88a ; Tape: Increment the tape buffer character counter.
=$f894			cstel   = $f894 ; Tape: Display PRESS PLAY ON TAPE message.
=$f8ab			csio    = $f8ab ; Tape: Check Tape's play/rewind/forward button status.
=$f8b7			cste2   = $f8b7 ; Tape: Display PRESS RECORD & PLAY ON TAPE message.
=$f8c0			rdtpblks= $f8c0 ; Tape: Initiate tape header read.
=$f8c9			rblk    = $f8c9 ; Tape: Read blocks from tape.
=$f8e3			wblk    = $f8e3 ; Tape: Write blocks to tape.
=$f8f4			tape    = $f8f4 ; Tape: Common tape read/write, start tape operations,
=$f94b			tstop   = $f94b ; Tape: Check for the STOP key.
=$f95d			stti    = $f95d ; Tape: Set time limit for tape dispole.
=$f98e			readt   = $f98e ; Tape: Read tape data bits into location 191 ($bf) (IRQ driven)
=$faad			tpstore = $faad ; Tape: Determin if to store the input character from tape.
=$fbd2			rd300   = $fbd2 ; Tape: Called to reset the tape read pointer.
=$fbdb			newch   = $fbdb ; Tape: New tape character setup.
=$fbea			tptogle = $fbea ; Tape: Toggle the tape write line to invert the output signal.
=$fc06			blkend  = $fc06 ; Tape: End of block write processing.
=$fc0b			write   = $fc0b ; Tape: Data write (IRQ driven).
=$fc95			wrtni   = $fc95 ; Tape: Block leader write (IRQ driven).
=$fca8			wrtz    = $fca8 ; Tape: Leader write (IRQ driven).
=$fccf			tnif    = $fccf ; Tape: Restore IRQ vector.
=$fcf6			bsiv    = $fcf6 ; Tape: Reset the current IRQ vector.
=$fd08			tnoff   = $fd08 ; Tape: Kill motor.
=$fd11			vrpty   = $fd11 ; Comnpare current to end of load/save pointers (tape & serial).
=$fd1b			wrt62   = $fd1b ; Increment current load/save pointer (tape & serial).
=$fd22			start   = $fd22 ; Power-on/reset routine (check for autostart cartridge).
=$fd3f			chkauto = $fd3f ; Check for an autostarting program at $a000. if equ a0cbm
=$fd4d			a0cbm   = $fd4d ; A0CBM characters with the high order bit on in the last 3
=$fd52			restor  = $fd52 ; Restore default I/O vectors.
=$fd57			vector  = $fd57 ; ($fd1a) Read/set I/O vectors.
=$fd6d			vectors = $fd6d ; Default system vector address storage table.
=$fd8d			initmem = $fd8d ; Initialize system memory.
=$fdf1			irqvctrs= $fdf1 ; IRQ vectors table.
=$fdf9			initvis = $fdf9 ; Initialize the 6522 VIA registers.
=$fe49			setnam  = $fe49 ; Set up file name
=$fe50			setlfs  = $fe50 ; Set up a logical file
=$fe57			readst  = $fe57 ; Read i/o status word
=$fe66			setmsg  = $fe66 ; Set kernal message output flag
=$fe68			readiost= $fe68 ; Load .A with the non-RE-232 I/O status ST.
=$fe6f			settmo  = $fe6f ; Set ieee bus card timeout flag
=$fe73			memtop  = $fe73 ; Get/Set top of ram
=$fe82			membot  = $fe82 ; Get/set bottom of memory.
=$fe91			tstmem  = $fe91 ; Test a memory location.
=$fea9			nmi     = $fea9 ; NMI handler routine.
=$fed2			break   = $fed2 ; BREAK interupt entry.
=$fede			rsnmi   = $fede ; RS-232: nmi sequence.
=$ff56			krti    = $ff56 ; Restore 6502 registers frm the stack and return frm interrupt.
=$ff5c			baudtbl = $ff5c ; RS-232: VIA timer 2 values for baud rate table.
=$ff72			irqrout = $ff72 ; irq routine initial 6502 entry point.
=$ff85			c4ffs   = $ff85 ; five unused bytes of 255 ($ff).
=$ff8a			crestor = $ff8a ; Jump to 64850 ($fd52) RESTOR.
=$ff8d			cvector = $ff8d ; Jump to 64855 ($fd57) VECTOR.
=$ff90			csetmsg = $ff90 ; Jump to 65126 ($fe66) SETMSG.
=$ff93			csecond = $ff93 ; Jump to 61120 ($eec0) SECOND.
=$ff96			ctksa   = $ff96 ; Jump to 61134 ($eece) TKSA.
=$ff99			cmemtop = $ff99 ; Jump to 65139 ($fe73) MEMTOP.
=$ff9c			cmembot = $ff9c ; Jump to 65154 ($fe82) MEMBOT.
=$ff9f			cscnkey = $ff9f ; Jump to 60190 ($eb1e) SCNKEY.
=$ffa2			csettmo = $ffa2 ; Jump to 65135 ($fe6f) SETTMO.
=$ffa5			cacptr  = $ffa5 ; Jump to 61209 ($ef19) ACPTR.
=$ffa8			cciout  = $ffa8 ; Jump to 61156 ($eee4) CIOUT.
=$ffab			cuntlk  = $ffab ; Jump to 61174 ($eef6) UNTLK.
=$ffae			cunlsn  = $ffae ; Jump to 61188 ($ef04) UNLSN.
=$ffb1			clisten = $ffb1 ; Jump to 60951 ($ee17) LISTEN.
=$ffb4			ctalk   = $ffb4 ; Jump to 60948 ($ee14) TALK.
=$ffb7			crdst   = $ffb7 ; Jump to 65111 ($fe57) READST.
=$ffba			csetlfs = $ffba ; Jump to 65104 ($fe50) SETLFS.
=$ffbd			csetnam = $ffbd ; Jump to 65097 ($fe49) SETNAM.
=$ffc0			copen   = $ffc0 ; Jump off 794-795 ($031a-$031b) IOPEN.
=$ffc3			cclos   = $ffc3 ; Jump off 796-797 ($031c-$031d) ICLOSE.
=$ffc6			inpchn  = $ffc6 ; Jump off 798-799 ($031e-$031f) ICHKIN.
=$ffc9			outchn  = $ffc9 ; Jump off 800-801 ($0320-$0321) ICKOUT.
=$ffcc			cclrchn = $ffcc ; Jump off 802-803 ($0322-$0323) ICLRCH.
=$ffcf			cinch   = $ffcf ; Jump off 804-805 ($0324-$0325) IBASIN.
=$ffd2			cchrout = $ffd2 ; Jump to 62074 ($f27a) CHROUT.
=$ffd5			cload   = $ffd5 ; Jump to 67286 ($f542) LOAD.
=$ffd8			csave   = $ffd8 ; Jump to 63093 ($f675) SAVE.
=$ffdb			csettim = $ffdb ; Jump to 63335 ($f767) SETTIM.
=$ffde			crdtim  = $ffde ; Jump to 63328 ($f760) RDTIM.
=$ffe1			iscntc  = $ffe1 ; Jump off 808-809 ($0328-$0329) ISTOP.
=$ffe4			cgetl   = $ffe4 ; Jump off 810-811 ($032a-$032b) IGETIN.
=$ffe7			ccall   = $ffe7 ; Jump off 812-813 ($032c-$032d) ICALL.
=$ffea			cudtim  = $ffea ; Jump to 63284 ($f734) UDTIM.
=$ffed			cscreen = $ffed ; Jump to 58629 ($e505) SCRN.
=$fff0			cplot   = $fff0 ; Jump to 58634 ($e50a) PLOT.
=$fff3			ciobase = $fff3 ; Jump to 58624 ($e500) IOBASE.
=$fffa			vctrnmi = $fffa ; 6502 vector to 65193 ($fea9) NMI.
=$fffc			vctrrst = $fffc ; 6502 vector to 64802 ($fd22) START.
=$fffe			vctrirq = $fffe ; 6502 vector to 65394 ($ff72) BREAK.
=$e043			kd_poly1     =   $e043
=$e059			kd_poly2     =   $e059
=$e08d			kd_rmulc     =   $e08d       ;
=$e092			kd_raddc     =   $e092       ;
=$e097			kd_rnd       =   $e097
=$e12a			kd_sys       =   $e12a
=$e156			kd_save      =   $e156
=$e165			kd_verify    =   $e165
=$e168			kd_load      =   $e168
=error			kcint       =   cint        ;   , init vic + ecran.
=error			kioinit     =   ioinit      ;   , init i/o dev.
=error			kramtas     =   ramtas      ;   , test de memoire.
=$eee4			kciout      =   ciout       ;a  ,tx byte  acia
=$fd52			krestor     =   restor      ;   , set ram plafond
=$fd57			kvector     =   vector      ;
=$fe66			ksetmsg     =   setmsg      ;a  , set sys. msg. out
=$eec0			ksecond     =   second      ;a  , tx adresse sec.
=$eece			ktksa       =   tksa        ;a  , talk adresse sec.
=$fe73			kmemtop     =   memtop      ; yx, (c) get mem high
=$fe82			kmembot     =   membot      ; yx, (c) get mem low
=error			kscankey    =   scankey     ;   , scan clavier
=$fe6f			ksettmo     =   settmo      ;a  , set ieee timeout
=$ef19			kacptr      =   acptr       ;a  ,rx serie.
=$eef6			kuntlk      =   untlk       ;   , iec-cmc stop talk
=$ef04			kunlsn      =   unlsn       ;   , iec-cmd stop lsn
=$ee17			klisten     =   listen      ;a  , iec-cmd dev ecout
=$ee14			ktalk       =   talk        ;a  , iec-cmd dev parle
=$fe57			kreadst     =   readst      ;a  , lecture i/o stats
=$fe50			ksetlfs     =   setlfs      ;ayx, init fich logi.
=$fe49			ksetnam     =   setnam      ;ayx, init num.nom.fich
=$f40a			kopen       =   open        ;axy, ouvre fich-nom
=$f34a			kclose      =   close       ;a  , ferme fichier #a.
=$f2c7			kchkin      =   chkin       ;  x,open canal in.
=$f309			kchkout     =   chkout      ;  x,open canal out
=$f3f3			kclrchn     =   clrchn      ;   , ferme canaux i/o.
=$f20e			kchrin      =   chrin       ;a  ,recup. un car.
=$f27a			kchrout     =   chrout      ;a  ,sort un car.
=$f1ca			kd_chrout    =   $f1ca
=$f542			kload       =   load        ;ayx, dev->ram
=$f675			ksave       =   save        ;   , sauve mem->dev
=$f767			ksettim     =   settim      ;axy, init sysclock
=$f760			krdtim      =   rdtim       ;axy, lecture sysclock
=$f770			kstop       =   stop        ;a  , ret. stopkey stat
=$f1f5			kgetin      =   getin       ;a  , recup. car. #dev.
=$f3ef			kclall      =   clall       ;   , ferme fichiers.
=$f734			kudtim      =   udtim       ;   , maj sysclock
=$e505			kscreen     =   screen      ; yx, get format ecran
=$e50a			kplot       =   plot        ; yx, (c) get csr pos.
=$e500			kiobase     =   iobase      ; yx, def. i/o mem page
=$e39a			k_echostartup = $e39a
=$e716			k_putch       = $e716 ; 52) Print a character.          ;a--;---; a = char
=$e7a0			k_cls         = $e7a0
=$e87c			k_cursordown  = $e87c
=$e8ea			k_scrollup    = $e8ea
=$e94e			k_home        = $e94e
=$e965			k_insertline  = $e965
=$e9c8			k_screlldown  = $e9c8
=$ed0c			k_devsndlstn  = $ed0c ; 55) Send 'LISTEN'>IEEE/Serial.  ;a--;---; a = dev #
=$ee13			k_ieeein      = $ee13 ; 60) Input from IEEE/Serial.     ;---;a--; a = Data byte
=$eef6			k_devsndutalk = $eef6 ; 58) Send 'UNTALK'>IEEE/Serial.  ;---;---;
=$ef04			k_devsndulstn = $ef04 ; 59) Send 'UNLISTEN'>IEEE/Serial.;---;---;
=$f12f			k_putsysmsg   = $f12f ; 53) Print system message.       ;--y;---; y = msg offset
=$f291			k_cloself     = $f291 ; 61) Close logical file .        ;a--;---; a = file #
=$f49e			k_loadsub     = $f49e ; 63) LOAD subroutine.            ;axy;---; a = # start=yyxx
=$f5af			k_prnsrch     = $f5af ; 64) Print SEARCHING if imm mode.;---;---;
=$f5b3			k_echosearch  = $f5b3 ; 64b) Skipping test part of 64.  ;---;---;
=$f5c1			k_prnfnam     = $f5c1 ; 65) Print filename.             ;---;---;
=$f6ed			k_stop        = $f6ed ; 62) Check for STOP key.         ;---;---; z = 1 pressed
=$f7ea			k_gettaphdblk = $f7ea ; 66) Find a tape hdr blk.        ;a--;---; a = len
=$f7ea			k_fndtaphdblk = $f7ea ; 67) Find any tape hdr blk.      ;---;---;
=$f817			k_waittapplay = $f817 ; 68) Press PLAY... (wait)        ;---;---;
=$f841			k_rdtape2buff = $f841 ; 69) Read tape to buffer.        ;---;---;
=$f847			k_readtape    = $f847 ; 70) Read tape.                  ;---;---;
=$f864			k_wrbuff2tape = $f864 ; 71) write buffer to tape.       ;---;---;
=$f869			k_wrtape      = $f869 ; 72) write tape.                 ;a--;---; a = ldr len
=$fb8e			k_resettapeio = $fb8e ; 73) Reset tape I/O.             ;---;---;
=$fcbd			k_setintvect  = $fcbd ; 74) set interupt vector.        ;---;---;
=$fce2			k_coldreset   = $fce2 ; 75) Power on reset.             ;---;---;
=$fce2			k_coldstart   = $fce2 ; 75) Power on reset.             ;---;---;
=$fce2			k_coldboot    = $fce2 ; 75) Power on reset.             ;---;---;
=$fe66			k_warmreset   = $fe66 ;     Warm resetstart
=$fe66			k_warmboot    = $fe66 ;     Warm resetstart
=$ff93			k_devsndaddr2 = $ff93 ; 56) Send second address.        ;a--;---; a = SA or #$60
=0			kerr00 = 0      ; routine ended by the stop key.
=1			kerr01 = 1      ; too many files open.
=2			kerr02 = 2      ; file already open.
=3			kerr03 = 3      ; file not open.
=4			kerr04 = 4      ; file not found.
=5			kerr05 = 5      ; device not present.
=6			kerr06 = 6      ; file is not an input file.
=7			kerr07 = 7      ; file is not an output file.
=8			kerr08 = 8      ; file name is missing.
=9			kerr09 = 9      ; illegal device number.
=240			kerrf0 = 240    ; top-of-memory change rs-232 buffer allocation.
.1c01	4c 3a 12	pgmstart        jmp      main  ; le programme principale doit s'appeler "main"

;******  Return to file: template.asm


;******  End of listing
