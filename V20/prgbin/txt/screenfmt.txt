
; 64tass Turbo Assembler Macro V1.54.1900 listing file
; 64tass -C -m -a -I /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib -i -L screenfmt.txt -o screenfmt.prg screenfmt.asm
; Tue Feb  3 10:50:08 2026

;Offset	;Hex		;Source

;******  Processing input file: screenfmt.asm

="20260203-103448"	Version = "20260203-103448"

;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/l-v20-bashead-ex.asm

=$1000			scrtxt    = $1000
=$9400			scrcol    = $9400
=$0200			scrlen    = $0200
>1201	0b 08		bcmd1    .word $080b ;adresse de la pro-
>1203	0a 00		         .word $0a   ;no. ligne basic.
>1205	9e		         .byte $9e   ;jeton pour la
>1206	20 34 36 32	         .text format("%5d", bhstart)
>120a	32
>120b	00		         .byte $00   ;fin de cmd basic.
>120c	00 00		bcmd2    .word $00   ;adresse de la pro-
.120e	20 1a 12	bhstart   jsr bhscrini
.1211	ea		          nop
.1212	ea		          nop
.1213	ea		          nop
.1214	ea		          nop
.1215	ea		          nop
.1216	20 46 12	basnold   jsr main
.1219	60		          rts
.121a			bhscrini
.121a	08		        php
.121b	48		        pha
.121c	a9 84		        lda #(128+4)
.121e	8d 00 90	        sta vic0
.1221	ad 0f 90	bord    lda $900f    ;place la couleur
.1224	29 08		        and #%00001000
.1226	09 e3		        ora #%11100011
.1228	8d 0f 90	        sta $900f
.122b	a9 00		text    lda #$00    ;place la couleur
.122d	8d 86 02	        sta $0286   ; du texte.
.1230	a9 93		        lda #$93    ;efface l'ecran par
.1232	20 d2 ff	        jsr $ffd2   ; chrout du kernal.
.1235	68		        pla
.1236	28		        plp
.1237	60		        rts
.1238			bhprint
.1238	a0 00		        ldy #$00
.123a	b1 fb		nextc   lda ($fb),y
.123c	f0 07		        beq end
.123e	c8		        iny
.123f	20 d2 ff	        jsr $ffd2
.1242	4c 3a 12	        jmp nextc
.1245	60		end     rts

;******  Return to file: screenfmt.asm

.1246			main
.1246	08		            php
.1247	48		            pha
.1248	a9 05		            lda #vvert
.124a	29 07		            and #%00000111
.124c	8d 77 7b	            sta freevar
.124f	ad 0f 90	            lda vic15
.1252	29 f8		            and #%11111000
.1254	0d 77 7b	            ora freevar
.1257	8d 0f 90	            sta vic15
.125a	68		            pla
.125b	28		            plp
.125c	08		            php
.125d	48		            pha
.125e	a9 01		            lda  #vblanc
.1260	0a		            asl
.1261	0a		            asl
.1262	0a		            asl
.1263	0a		            asl
.1264	8d 77 7b	            sta freevar
.1267	ad 0f 90	            lda vic15
.126a	29 0f		            and #%00001111
.126c	0d 77 7b	            ora freevar
.126f	8d 0f 90	            sta vic15
.1272	68		            pla
.1273	28		            plp
.1274	08		            php
.1275	48		            pha
.1276	a9 06		            lda  #vbleu
.1278	8d 86 02	            sta  kcol
.127b	68		            pla
.127c	28		            plp
.127d	08		            php
.127e	48		            pha
.127f	a9 93		            lda #147
.1281	20 7a f2	            jsr chrout
.1284	68		            pla
.1285	28		            plp
.1286	60		               rts

;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/l-v20-push.asm

.1287			pushall
.1287	08		         php     ;s;rp,pcl,pch
.1288	8d fe 7f	         sta ra  ;sauve a
.128b	68		         pla     ;s:pcl,pch
.128c	8d ff 7f	         sta rp  ;sauve rp
.128f	68		         pla     ;s:pch
.1290	8d f9 7f	         sta pc  ;sauve pcl
.1293	68		         pla     ;s:
.1294	8d fa 7f	         sta pc+1;sauve pch
.1297	a5 fb		         lda $fb ;sauve fb
.1299	48		         pha     ;s:fb
.129a	a5 fc		         lda $fc ;sauve fc
.129c	48		         pha     ;s:fc,fb
.129d	a5 fd		         lda $fd ;sauve fd
.129f	48		         pha     ;s:fd,fc,fb
.12a0	a5 fe		         lda $fe ;sauve fe
.12a2	48		         pha     ;s:fe,fd,fc,fb
.12a3	ad ff 7f	         lda rp  ;sauve rp
.12a6	48		         pha     ;s:rp,fe,fd,fc,fb
.12a7	ad fe 7f	         lda ra  ;sauve ra
.12aa	48		         pha     ;s:ra,rp,fe,fd,fc,fb
.12ab	8a		         txa     ;sauve rx
.12ac	48		         pha     ;s:rx,ra,rp,fe-fb
.12ad	98		         tya     ;sauve y
.12ae	48		         pha     ;s:ry,rx,ra,rp,fe-fb
.12af	ad fa 7f	         lda pc+1;replace l'adresse
.12b2	48		         pha     ;s:pch,ry,rx,ra,...
.12b3	ad f9 7f	         lda pc  ; de retour.
.12b6	48		         pha     ;s:pcl,pch,ru,rx,ra,...
.12b7	ad ff 7f	         lda rp  ;place les flags
.12ba	48		         pha     ; sur le stack.
.12bb	ad fe 7f	         lda ra  ;recupere ra
.12be	28		         plp     ;recupere les flags.
.12bf	60		         rts
.12c0			popall
.12c0	08		         php     ;s:rp,pcl,pch,ry,rx,...
.12c1	8d fe 7f	         sta ra
.12c4	68		         pla     ;s:pcl,pch,ry,rx,...
.12c5	8d ff 7f	         sta rp  ;s:pch,ry,rx,ra,rp,...
.12c8	68		         pla
.12c9	8d f9 7f	         sta pc  ;sauve pcl
.12cc	68		         pla     ;s:ry,rx,ra,rp,fe...fb
.12cd	8d fa 7f	         sta pc+1;sauve pch
.12d0	68		         pla     ;s:rx,ra,rp,fe,fd,fc,fb
.12d1	a8		         tay     ;recupere ry
.12d2	68		         pla     ;s:ra,rp,fe,fd,fc,fb
.12d3	aa		         tax     ;recupere rx
.12d4	68		         pla     ;s:rp,fe,fd,fc,fb
.12d5	8d fe 7f	         sta ra  ;recupere ra
.12d8	68		         pla     ;s:fe,fd,fc,fb
.12d9	8d ff 7f	         sta rp  ;recupere les flags.
.12dc	68		         pla     ;s:fd,fc,fb
.12dd	85 fe		         sta $fe ;reccupere fe
.12df	68		         pla     ;s:fc,fb
.12e0	85 fd		         sta $fd ;recupere fd
.12e2	68		         pla     ;s:fb
.12e3	85 fc		         sta $fc ;recupere fc
.12e5	68		         pla     ;s:
.12e6	85 fb		         sta $fb ;recupere fb
.12e8	ad fa 7f	         lda pc+1;replaace l'adresse de
.12eb	48		         pha     ;s:pch
.12ec	ad f9 7f	         lda pc  ;retour sur la pile
.12ef	48		         pha     ;s:pcl,pch
.12f0	ad ff 7f	         lda rp  ;recupere les flags
.12f3	48		         pha     ;s:rp,pcl,pch
.12f4	ad fe 7f	         lda ra  ;recupere ra
.12f7	28		         plp     ;s:pcl,pch
.12f8	60		         rts
.12f9			pushregs
.12f9	08		         php     ;s;rp,pcl,pch
.12fa	8d fe 7f	         sta ra  ; -- sauve a
.12fd	68		         pla     ;s:pcl,pch
.12fe	8d ff 7f	         sta rp  ; -- sauve rp
.1301	68		         pla     ;s:pch
.1302	8d f9 7f	         sta pc  ; -- sauve pcl
.1305	68		         pla     ;s:
.1306	8d fa 7f	         sta pc+1; -- sauve pch
.1309	ad ff 7f	         lda rp  ; -- sauve rp
.130c	48		         pha     ;s:rp
.130d	ad fe 7f	         lda ra  ; -- sauve ra
.1310	48		         pha     ;s:ra,rp
.1311	8a		         txa     ; -- tfr rx
.1312	48		         pha     ;s:rx,ra,rp
.1313	98		         tya     ; -- tfr ry
.1314	48		         pha     ;s:ry,rx,ra,rp
.1315	ad fa 7f	         lda pc+1; -- replace l'adresse
.1318	48		         pha     ;s:pch,ry,rx,ra,rp
.1319	ad f9 7f	         lda pc  ; -- de retour.
.131c	48		         pha     ;s:pcl,pch,ru,rx,ra,rp
.131d	ad ff 7f	         lda rp  ; -- place les flags
.1320	48		         pha     ;    sur le stack.
.1321	ad fe 7f	         lda ra  ; -- recupere ra
.1324	28		         plp     ; -- recupere flags.
.1325	60		         rts     ;s:pcl,pch,ru,rx,ra,rp
.1326			popregs
.1326	08		         php
.1327	8d fe 7f	         sta ra
.132a	68		         pla
.132b	8d ff 7f	         sta rp
.132e	68		         pla     ;s:pch,ry,rx,ra,rp
.132f	8d f9 7f	         sta pc  ; -- sauve pcl
.1332	68		         pla     ;s:ry,rx,ra,rp
.1333	8d fa 7f	         sta pc+1; -- sauve pch
.1336	68		         pla     ;s:rx,ra,rp
.1337	a8		         tay     ;recupere ry
.1338	68		         pla     ;s:ra,rp
.1339	aa		         tax     ;recupere rx
.133a	68		         pla     ;s:rp
.133b	8d fe 7f	         sta ra  ;recupere ra
.133e	68		         pla     ;s:
.133f	8d ff 7f	         sta rp  ;recupere les flags.
.1342	ad fa 7f	         lda pc+1;replace l'adresse de
.1345	48		         pha     ;s:pch
.1346	ad f9 7f	         lda pc  ;retour sur la pile
.1349	48		         pha     ;s:pcl,pch
.134a	ad ff 7f	         lda rp  ;recupere les flags
.134d	48		         pha     ;s:rp,pcl,pch
.134e	ad fe 7f	         lda ra  ;recupere ra
.1351	28		         plp     ;s:pcl,pch
.1352	60		         rts

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/l-v20-string.asm

.1353			puts
.1353	20 87 12	          jsr pushall
.1356	a0 00		          ldy #$00   ; y = offset
.1358	b1 fb		nextc     lda ($fb),y;lit un caractere
.135a	f0 09		          beq out    ;si 0 on sort
.135c	20 7a f2	          jsr chrout ;on l'affiche
.135f	20 a0 14	          jsr inczp1 ;pointe le prochain
.1362	4c 58 13	          jmp nextc  ; et l'affiche
.1365	20 c0 12	out       jsr popall
.1368	60		          rts
.1369			putsyx
.1369	20 87 12	          jsr pushall;sauve reg + zps
.136c	86 fb		          stx $fb    ;$yyxx dans
.136e	84 fc		          sty $fb+1  ; zp1
.1370	20 53 13	          jsr puts
.1373	20 c0 12	          jsr popall ;recup reg + zps
.1376	60		          rts
.1377			putsxy
.1377	20 87 12	        jsr pushall;sauve reg + zps
.137a	86 fb		        stx $fb    ;$yyxx dans
.137c	84 fc		        sty $fb+1  ; zp1
.137e	a0 00		        ldy #$00
.1380	b1 fb		        lda ($fb),y
.1382	aa		        tax
.1383	20 a0 14	        jsr inczp1
.1386	b1 fb		        lda ($fb),y
.1388	20 a0 14	        jsr inczp1
.138b	a8		        tay
.138c	20 e1 13	        jsr gotoxy
.138f	20 53 13	        jsr puts
.1392	20 c0 12	        jsr popall ;recup reg + zps
.1395	60		        rts
.1396			putsc
.1396	08		          php       ;flag sur stack
.1397	48		          pha       ;acc sur stack
.1398	48		          pha       ;sauvegarde acc
.1399	ad 86 02	          lda kcol  ;recup coul. carac.
.139c	8d f8 7f	          sta curcol; et la sauvegarde
.139f	68		          pla       ;recup. acc
.13a0	8d 86 02	          sta kcol  ;place coul. voulue
.13a3	20 53 13	          jsr puts  ;affiche la chaine
.13a6	ad f8 7f	          lda curcol;recup coul. carac.
.13a9	8d 86 02	          sta kcol  ; et la replace
.13ac	68		          pla       ;recup acc
.13ad	28		          plp       ;recup flag
.13ae	60		          rts
.13af			putscyx
.13af	08		          php       ;sauve registres
.13b0	48		          pha       ; ...
.13b1	48		          pha       ;sauve acc
.13b2	ad 86 02	          lda kcol  ;recup couleur carac.
.13b5	8d f8 7f	          sta curcol; et sauvegarde
.13b8	68		          pla       ;recup acc
.13b9	8d 86 02	          sta kcol  ;place couleur carac.
.13bc	20 69 13	          jsr putsyx;affiche la chaine
.13bf	ad f8 7f	          lda curcol
.13c2	8d 86 02	          sta kcol
.13c5	68		          pla
.13c6	28		          plp
.13c7	60		          rts
.13c8			putscxy
.13c8	08		          php       ;sauve registres
.13c9	48		          pha       ; ...
.13ca	48		          pha       ;sauve acc
.13cb	ad 86 02	          lda kcol  ;recup couleur carac.
.13ce	8d f8 7f	          sta curcol; et sauvegarde
.13d1	68		          pla       ;recup acc
.13d2	8d 86 02	          sta kcol   ;place couleur carac.
.13d5	20 69 13	          jsr putsyx ;affiche la chaine
.13d8	ad f8 7f	          lda curcol
.13db	8d 86 02	          sta kcol
.13de	68		          pla
.13df	28		          plp
.13e0	60		          rts
.13e1			gotoxy
.13e1	20 f9 12	          jsr pushregs
.13e4	8a		          txa ; interchange x et y
.13e5	48		          pha ; ...
.13e6	98		          tya ; ...
.13e7	aa		          tax ; ...
.13e8	68		          pla ; ...
.13e9	a8		          tay ; ...
.13ea	c0 00		txlow     cpy #0
.13ec	10 02		          bpl txhigh
.13ee	a2 00		          ldx #0
.13f0	e0 19		txhigh    cpx #25
.13f2	30 02		          bmi tylow
.13f4	a2 18		          ldx #24
.13f6	c0 00		tylow     cpy #0
.13f8	10 02		          bpl tyhigh
.13fa	a0 00		          ldy #0
.13fc	c0 28		tyhigh    cpy #40
.13fe	30 02		          bmi allok
.1400	a0 27		          ldy #39
.1402	18		allok     clc
.1403	20 0a e5	          jsr plot
.1406	20 26 13	          jsr popregs
.1409	60		          rts
.140a			putnch
.140a	20 f9 12	        jsr pushregs
.140d	20 7a f2	again   jsr chrout
.1410	ca		        dex
.1411	d0 fa		        bne again
.1413	20 26 13	        jsr popregs
.1416	60		        rts
.1417			strlen
.1417	20 87 12	        jsr pushall
.141a	84 fc		        sty zp1+1
.141c	86 fb		        stx zp1
.141e	a0 00		        ldy #$00
.1420	8c 8a 7f	        sty len
.1423	b1 fb		next    lda (zp1),y
.1425	f0 07		        beq out
.1427	ee 8a 7f	        inc len
.142a	c8		        iny
.142b	4c 23 14	        jmp next
.142e	20 c0 12	out     jsr popall
.1431	ad 8a 7f	        lda len
.1434	60		        rts
.1435			cursor
.1435	20 f9 12	          jsr  pushregs
.1438	90 12		          bcc  get    ;C=0 récupération.
.143a	20 0a e5	          jsr  plot  ;récupère position
.143d	8c 89 7f	          sty  cx     ;curseur et sauve
.1440	8e 88 7f	          stx  cy     ;dans vars locales.
.1443	ad 86 02	          lda  kcol   ;Sauve couleur
.1446	8d 87 7f	          sta  bcol   ; BASIC du texte.
.1449	4c 5b 14	          jmp  out    ;Fini on sort.
.144c	ae 88 7f	get       ldx  cy     ;C=1, charge x
.144f	ac 89 7f	          ldy  cx     ; ligne, y col.
.1452	20 0a e5	          jsr  plot  ;Position curseur.
.1455	ad 87 7f	          lda  bcol   ;replace couleur
.1458	8d 86 02	          sta  kcol ; basic sauvegardé.
.145b	20 26 13	out       jsr  popregs
.145e	60		          rts
.145f			curget
.145f			cursave
.145f	08		          php
.1460	38		          sec
.1461	20 35 14	          jsr  cursor
.1464	28		          plp
.1465	60		          rts
.1466			curput
.1466			currest
.1466	08		          php
.1467	18		          clc
.1468	20 35 14	          jsr  cursor
.146b	28		          plp
.146c	60		          rts
.146d			isprnable
.146d	08		          php
.146e	c9 a0		          cmp  #160
.1470	b0 0b		          bcs  yes
.1472	c5 85		          cmp  133
.1474	b0 04		          bcs  no
.1476	c9 20		          cmp  #32
.1478	b0 03		          bcs  yes
.147a	28		no        plp
.147b	18		          clc
.147c	60		          rts
.147d	28		yes       plp
.147e	38		          sec
.147f	60		          rts

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/l-v20-mem.asm

.1480			blkfill
.1480	20 87 12	bf0     jsr pushall
.1483	84 fc		        sty zp1+1
.1485	a0 00		        ldy #$00
.1487	84 fb		        sty zp1
.1489	91 fb		bf1     sta (zp1),y
.148b	c8		        iny
.148c	d0 fb		        bne bf1
.148e	20 c0 12	        jsr popall
.1491	60		        rts
.1492			memfill
.1492	20 f9 12	        jsr pushregs
.1495	20 80 14	mf1     jsr blkfill
.1498	c8		        iny
.1499	ca		        dex
.149a	d0 f9		        bne mf1
.149c	20 26 13	        jsr popregs
.149f	60		        rts
.14a0			inczp1
.14a0	08		         php
.14a1	e6 fb		         inc zp1
.14a3	d0 02		         bne repzp1
.14a5	e6 fc		         inc zp1+1
.14a7	28		repzp1   plp
.14a8	60		         rts
.14a9			inczp2
.14a9	08		         php
.14aa	e6 fd		         inc zp2
.14ac	d0 02		         bne repzp2
.14ae	e6 fe		         inc zp2+1
.14b0	28		repzp2   plp
.14b1	60		         rts
.14b2			deczp1
.14b2	08		         php
.14b3	48		         pha
.14b4	a5 fb		         lda zp1
.14b6	d0 02		         bne noemp
.14b8	c6 fc		         dec zp1+1
.14ba	c6 fb		noemp    dec zp1
.14bc	68		         pla
.14bd	28		         plp
.14be	60		         rts
.14bf			deczp2
.14bf	08		         php
.14c0	48		         pha
.14c1	a5 fd		         lda zp2
.14c3	d0 02		         bne noemp
.14c5	c6 fe		         dec zp2+1
.14c7	c6 fd		noemp    dec zp2
.14c9	68		         pla
.14ca	28		         plp
.14cb	60		         rts
.14cc			rolzp1
.14cc	08		        php
.14cd	48		        pha
.14ce	18		        clc
.14cf	a5 fb		        lda zp1
.14d1	2a		        rol
.14d2	85 fb		        sta zp1
.14d4	a5 fc		        lda zp1+1
.14d6	2a		        rol
.14d7	85 fc		        sta zp1+1
.14d9	68		        pla
.14da	28		        plp
.14db			rorzp1
.14db	08		        php
.14dc	48		        pha
.14dd	18		        clc
.14de	a5 fc		        lda zp1+1
.14e0	6a		        ror
.14e1	85 fc		        sta zp1+1
.14e3	a5 fb		        lda zp1
.14e5	6a		        ror
.14e6	85 fb		        sta zp1
.14e8	68		        pla
.14e9	28		        plp
.14ea			rolzp2
.14ea	08		        php
.14eb	48		        pha
.14ec	18		        clc
.14ed	a5 fd		        lda zp2
.14ef	2a		        rol
.14f0	85 fd		        sta zp2
.14f2	a5 fe		        lda zp2+1
.14f4	2a		        rol
.14f5	85 fe		        sta zp2+1
.14f7	68		        pla
.14f8	28		        plp
.14f9			rorzp2
.14f9	08		        php
.14fa	48		        pha
.14fb	18		        clc
.14fc	a5 fe		        lda zp2+1
.14fe	6a		        ror
.14ff	85 fe		        sta zp2+1
.1501	a5 fd		        lda zp2
.1503	6a		        ror
.1504	85 fd		        sta zp2
.1506	68		        pla
.1507	28		        plp
.1508			yxtoptr
.1508	8c f8 7f	        sty memptr+1
.150b	8e f7 7f	        stx memptr
.150e	60		        rts
.150f			ptrtoyx
.150f	08		        php
.1510	ac f8 7f	        ldy memptr+1
.1513	ae f7 7f	        ldx memptr
.1516	28		        plp
.1517	60		        rts
.1518			incptr
.1518	08		        php
.1519	ee f7 7f	        inc memptr
.151c	d0 03		        bne norep
.151e	ee f8 7f	        inc memptr+1
.1521	28		norep   plp
.1522	60		        rts
.1523			decptr
.1523	08		        php
.1524	48		        pha
.1525	ad f7 7f	        lda memptr
.1528	d0 03		        bne noemp
.152a	ee f8 7f	        inc memptr+1
.152d	ee f7 7f	noemp   inc memptr
.1530	68		        pla
.1531	28		        plp
.1532	60		        rts
.1533			incptr8
.1533	08		        php
.1534	48		        pha
.1535	98		        tya
.1536	48		        pha
.1537	a0 08		        ldy #8
.1539	20 18 15	again   jsr incptr
.153c	88		        dey
.153d	d0 fa		        bne again
.153f	68		        pla
.1540	a8		        tay
.1541	68		        pla
.1542	28		        plp
.1543	60		        rts
.1544			loop
.1544	ce f1 7f	               dec  loopcount
.1547	d0 03		               bne  norep
.1549	ce f2 7f	               dec  loopcount+1
.154c	ad f1 7f	norep          lda  loopcount
.154f	c9 00		               cmp  #$00
.1551	d0 05		               bne  out
.1553	4d f2 7f	               eor  loopcount+1
.1556	c9 ff		               cmp  #$ff
.1558	60		out            rts

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/e-v20-page0.asm

=$01			kvar1     = $01
=$02			kvar2     = $02
=$13			channl    = $13
=$37			memsiz    = $37     ; WORD: Pointeur vers la fin de la mémoire BASIC.
=$57			tmpfp3    = $57     ; 10 octets i.e. 2 fp $57-$5b et $5c-$60
=$61			fac1      = $61     ;  5 octets i.e.      $61-$66
=$69			fac2      = $69     ;  5 octets i.e.      $69-$6e
=$73			chrget    = $73     ; Recup Basic car texte 24 octets i.e. $73-$8a
=$79			chrgot    = $79     ;  ...une seconde fois.
=$7c			chrtst    = $7c
=$90			kiostatus = $90     ; Kernal I/O status word (st) (byte)
=$93			verck     = $93     ; 0=LOAD, 1=VERIFY
=$99			dfltn     = $99     ; Numéro du périphérique d'entrée actuel.
=$9d			msgflg    = $9d     ; Indicateur de contrôle des messages du noyau.
=$a0			time      = $a0     ; 3 octets i.e. HR:$a0, MN:$a1, SC:$a2
=$b7			curfnlen  = $b7     ; Longueur actuelle du nom de fichier (octets).
=$b8			la        = $b8     ; Numéro de fichier logique actuel utilisé.
=$b9			sa        = $b9     ; Adresse secondaire actuellement utilisée.
=$b9			cursecadd = $b9     ; Adresse secondaire actuellement utilisée. (octet).
=$ba			fa        = $ba     ; Numéro de périphérique actuel (octet).
=$ba			curdevno  = $ba     ; Numéro de périphérique actuel (octet).
=$bb			fnadr     = $bb     ; Pointeur de fichier actuel (mot).
=$bb			curfptr   = $bb     ; Pointeur de fichier actuel (mot).
=$c1			stal      = $c1     ;
=$c3			memuss    = $c3     ; Pointeur vers la zone de RAM en cours de chargement.(mot)
=$c6			ndx       = $c6     ; Nombre de caractères (0-10) dans le tampon du clavier.
=$c7			rvs       = $c7     ; Indicateur pour caractères d'écran inversés.
=$d1			scrnlin   = $d1     ; pnt cur-scrn-line
=$d6			tblx      = $d6     ; Curseur : numéro de la ligne physique actuelle sur
=$fb			zp1       = $fb     ; 1er Zpage prog. usager address (word)
=$fb			zpage1    = $fb     ; zero page 1
=$fd			zp2       = $fd     ; 2em Zpage prog. usager address (word)
=$fd			zpage2    = $fd     ; zero page 2 address (word)

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/e-v20-vars.asm

=$8000			libre    = $8000   ; *+3085
=32767			rp       = libre-$01;1 byte $cfff
=32766			ra       = rp-1     ;1 byte $cffe
=32765			rx       = ra-1     ;1 byte $cffd
=32764			ry       = rx-1     ;1 byte $cffc
=32763			rs       = ry-1     ;1 byte $cffb
=32761			pc       = rs-2     ;2 byte $cff9-$cffa
=32760			curcol   = pc-1     ;1 byte $cff6
=32759			memptr   = curcol-1;1 word $cff7-$cff8
=32757			src      = memptr-2
=32755			dst      = memptr-4
=32753			loopcount = memptr-6
=32753			hexv     = loopcount
.1559			a2hexstr
=32748			hexstr   = hexv-$05 ;5 byte
=32747			a2hexpfx = hexv-$06 ;1 byte
=32746			a2hexpy  = hexv-$07 ;1 byte
=32745			a2hexpx  = hexv-$08 ;1 byte
=32745			a2hexpos = hexv-$08 ;0 byte
=32744			a2hexcol = hexv-$09 ;1 byte
=32744			binv     = a2hexcol
=32735			binstr   = binv-$09 ;9 byte
=32734			a2binpfx = binv-$0a ;1 byte
=32733			a2binpy  = binv-$0b ;1 byte
=32732			a2binpx  = binv-$0c ;1 byte
=32732			a2binpos = binv-$0c ;0 byte
=32731			a2bincol = binv-$0d ;1 byte
=32731			decv     = a2bincol
=32725			decstr   = decv-$06 ;6 byte
=32724			a2decpfx = decv-$07 ;1 byte
=32723			a2decpy  = decv-$08 ;1 byte
=32722			a2decpx  = decv-$09 ;1 byte
=32722			a2decpos = decv-$09 ;0 byte
=32721			a2deccol = decv-$0a ;1 byte
=32720			offset   = decv-$0b ;1 byte
=32720			fltv     = offset
=32714			fvar1    = fltv-6  ; 6 byte
=32708			fvar2    = fltv-12 ; 6 byte
=32688			float1   = fltv-32 ;20 byte
=32668			float2   = fltv-52 ;20 byte
=32667			tval1    = fltv-53 ; 1 byte
=32665			tval2    = fltv-55 ; 2 byte
=32663			reponse  = tval2-2 ; 2 byte
=32663			edbox    = reponse
=32662			cleft    = edbox-1 ;1 byte
=32661			cright   = edbox-2 ;1 byte
=32660			cmid     = edbox-3 ;1 byte
=32659			dbtop    = edbox-4 ;1 byte
=32658			dbleft   = edbox-5 ;1 byte
=32657			dbwdth   = edbox-6 ;1 byte
=32656			dbhght   = edbox-7 ;1 byte
=32655			dbcoul   = edbox-8 ;1 byte
=32654			dbclin   = edbox-9 ;1 byte
=32654			ekeyb    = dbclin
=32653			curx     = ekeyb-1 ;1 byte
=32652			cury     = ekeyb-2 ;1 byte
=32651			clef     = ekeyb-3 ;1 byte
=32650			len      = clef-1  ;1 byte
=32649			cx       = clef-2  ;1 byte
=32648			cy       = clef-3  ;1 byte
=32647			bcol     = clef-4  ;1 byte
=32647			escr     = bcol         ;2051 bytes
=32646			loops    = escr-1       ;   1 byte
=32644			loop16   = loops-2      ;   2 byte
=32132			scrncar  = loop16-$200  ;  1k byte
=31620			scrncol  = scrncar-$200 ;  1k byte
=31620			diskvar = scrncol
=31618			ddatas  = diskvar-2 ;2 byte Data start
=31616			ddatae  = diskvar-4 ;2 byte Data end
=31615			ddev    = diskvar-5 ;1 byte Dev number
=31614			dlfsno  = diskvar-6 ;1 byte Lfs
=31612			dfnptr  = diskvar-8 ;2 byte Ptrnfichier
=31611			dfnlen  = diskvar-9 ;1 byte lenfilename
=31610			genbyte1 = dfnlen-1 ; 1 byte
=31608			genword1 = dfnlen-3 ; 2 byte
=31607			freevar  = genword1-1

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/m-v20-utils.asm

.1559			R

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/e-v20-kernal-map.asm

=$0100			fascii    = $0100;region conv FP a ascii
=$0286			kcol      = $0286;Couleur car affiche.
=$1001			basstart  = $1001     ;basic start address std
=$1201			basstartx = $1201     ;basic start address exram
=$a000			basicrom  = $a000
=$d000			chargen   = $d000
=$d000			vicii     = $d000
=$d400			sid       = $d400     ;sid base address
=$9110			via1      = $9110     ;cia1  base address
=$dd00			via2      = $dd00     ;cia2 base address
=$e000			kernalrom = $e000
=0			eot       =    0
=8			discase   =    8
=9			enacase   =    9
=14			locase    =    14
=17			crsdown   =    17
=18			revson    =    18
=19			gohome    =    19
=20			delete    =    20
=29			crsright  =    29
=142			upcase    =    142
=145			crsup     =    145
=157			crsleft   =    157
=146			revsoff   =    146
=147			clrhome   =    147
=$03			bstop     =   $03      ;stop
=$05			bwhite    =   $05      ;set colour white
=$08			block     =   $08      ;lock the charset
=$09			bunlock   =   $09      ;unlock the charset
=$0d			bcarret   =   $0d
=$0e			btext     =   $0e
=$11			bcrsdn    =   $11      ;cursor down 1 line
=$12			brevcol   =   $12
=$13			bhome     =   $13
=$14			bdelete   =   $14
=$1c			bred      =   $1c
=$1d			bcuright  =   $1d
=$1e			bgreen    =   $1e
=$1f			bblue     =   $1f
=$81			borange   =   $81
=$83			blrun     =   $83
=$85			bfkey1    =   $85
=$86			bfkey2    =   $86
=$87			bfkey3    =   $87
=$88			bfkey4    =   $88
=$89			bfkey5    =   $89
=$8a			bfkey6    =   $8a
=$8b			bfkey7    =   $8b
=$8c			bfkey8    =   $8c
=$8d			bcarret1  =   $8d
=$8e			bgraph    =   $8e
=$90			bblack    =   $90
=$91			bcuup     =   $91
=$92			brevoff   =   $92
=$93			bclear    =   $93
=$94			binsert   =   $94
=$95			bbrown    =   $95
=$96			bltred    =   $96
=$97			bdkgrey   =   $97
=$98			bmdgrey   =   $98
=$99			bltgreen  =   $99
=$9a			bltblue   =   $9a
=$9b			bltgrey   =   $9b
=$9c			bmagenta  =   $9c
=$9d			bculeft   =   $9d
=$9e			byellow   =   $9e
=$9f			bcyan     =   $9f
=$0286			carcol  = $0286
=$030a			ieval   = $030a
=$0			enoir       = $0
=$1			eblanc      = $1
=$2			erouge      = $2
=$3			eocean      = $3
=$4			emauve      = $4
=$5			evert       = $5
=$6			ebleu       = $6
=$7			ejaune      = $7
=$8			eorange     = $8
=$9			ebrun       = $9
=$a			erose       = $a
=$b			egrisfonce  = $b
=$c			egrismoyen  = $c
=$d			evertpale   = $d
=$e			ebleupale   = $e
=$f			egrispale   = $f
=144			snoir       = 144
=5			sblanc      = 5
=28			srouge      = 28
=159			socean      = 159
=156			smauve      = 156
=30			svert       = 30
=31			sbleu       = 31
=158			sjaune      = 158
=$e4a0			serout1 = $e4a0 ; Serial: Output a 1 on the serial data line.
=$e4a9			serout0 = $e4a9 ; Serial: Output a 0 on the serial data line.
=$e4b2			serget  = $e4b2 ; Serial: Get an input bit from VIA1 and stabilize.
=$e4bc			patches = $e4bc ; Program patch area.
=$e500			iobase  = $e500 ; ($e500) Define i/o memory page
=$e505			screen  = $e505 ; Return screen format
=$e50a			plot    = $e50a ; Set or retrieve cursor location x=column, y=line
=$e518			initsk  = $e518 ; Initialize 6550 Vic Chip, screen and related pointers.
=$e55f			clsr    = $e55f ; Clear the screen.
=$e55f			home    = $e55f ; Move the cursor to the screen home position.
=$e587			setslink= $e587 ; Reset the screen line link table pointers.
=$e5b5			unusdnmi= $e5b5 ; NMI entry for restore key (No entry for this routine found.)
=$e5bb			setiodef= $e5bb ; Reset the default device number.
=$e5c3			initvic = $e5c3 ; Reset the vic chip registers.
=$e5cf			lp2     = $e5cf ; Get a character from the keyboard queue and shift it down.
=$e5e5			getque  = $e5e5 ; Wait for character to appear in the keyboard buffer.
=$e619			get2rtn = $e619 ; Empty the keyboard buffer up to a carriage return.
=$e64f			getscrn = $e64f ; Optain input from screen.
=$e6b8			quoteck = $e6b8 ; Test for quote and set flag.
=$e6c5			setchar = $e6c5 ; Set up diaplay of a character on the screen.
=$e6ea			scroll  = $e6ea ; advance the cursor on the screen, adds lines, and scroll.
=$e72d			retreat = $e72d ; Backup the cursor into the previous ligical screen line from
=$e742			scrnout = $e742 ; Handle characters going to the screen.
=$e8c3			nxtline = $e8c3 ; Advance cursor to the next logical line.
=$e8d8			rtrn    = $e8d8 ; Handle the carriage return key.
=$e8e8			backup  = $e8e8 ; Move the corsor to the end of the previoud physical screen
=$e8fa			forward = $e8fa ; Move the cursor to the start of the next screen line if the
=$e912			colourset=$e912 ; Set the current foreground colour code.
=$e921			colourtbl=$e921 ; Colour code key table.
=$e929			cnvrtcd = $e929 ; Code conversion table.
=$e975			scrl    = $e975 ; Scroll the screen.
=$e9ee			openlin = $e9ee ; Open up a blank physical line on the screen for inserts.
=$ea56			movline = $ea56 ; Move screen line.
=$ea6e			setaddr = $ea6e ; The address of the screen line + color line is set in memory.
=$ea7e			linptr  = $ea7e ; Set a pointer to the address of the start of the screen line.
=$ea8d			clraline= $ea8d ; Blank out a physical screen line.
=$eaa1			synptr  = $eaa1 ; Synchronize color to byte and store character on screen.
=$eaaa			putscrn = $eaaa ; store a character on the screen.
=$eab2			colorsyn= $eab2 ; The address of the color map byte for screen map byte is
=$eabf			irq     = $eabf ; IRQ interupt handler.
=$eb1e			scnkey  = $eb1e ; Scan the keyboard
=$ebdc			setkeys = $ebdc ; Set keyboard decode table address in 245-246 ($f6-$f6).
=$ec46			keyvctrs= $ec46 ; Keyboard decode table addresses.
=$ec5e			normkeys= $ec5e ; Table used for decoding unshifted keys into ascii.
=$ec9f			shftkeys= $ec9f ; Table used for decoding SHIFTed keys into ascii.
=$ece0			logokeys= $ece0 ; Table used for decoding Commodore SHIFTed keys into ascii.
=$ed21			charset = $ed21 ; Used to set uppercase/graphics character set.
=$ed30			graphmode=$ed30 ; Set the environment specified by graphics control characters.
=$ed5b			wrapline= $ed5b ;
=$ed69			whatkeys= $ed69 ; Apparently unused keyboard decoding table.
=$eda3			ctrlkeys= $eda3 ; Table used for decoding CTRL SHIFT keys into ascii.
=$ede4			vicinit = $ede4 ; Initial values for VIC chip registers.
=$edf4			runtb   = $edf4 ; LOAD and RUN words for the SHIFT and RUN keys.
=$edfd			ldtb2   = $edfd ; Screen line link table LSB of line in screen map.
=$ee14			talk    = $ee14 ; Send Talk command to serial bus.
=$ee17			listen  = $ee17 ; Command a device on the serial bus to listen.
=$ee1c			listi   = $ee1c ; Serial: Prepare to send serial command with attention.
=$ee49			srsend  = $ee49 ; Serial: Send command or data to serial device.
=$eeb4			srbad   = $eeb4 ; Serial: Set ST for timeout or DEVICE NOT PRESENT.
=$eec0			second  = $eec0 ; Send secondary address after listen
=$eec5			scatn   = $eec5 ; Serial: Clear attention.
=$eece			tksa    = $eece ; Send a secondary address to a device commanded to talk
=$eee4			ciout   = $eee4 ; Transmit a byte over the serial bus
=$eef6			untlk   = $eef6 ; Send an untalk command
=$ef04			unlsn   = $ef04 ; Send an unlisten command
=$ef19			acptr   = $ef19 ; Recoit un caractere provenant du port serie
=$ef84			srclkhi = $ef84 ; Serial: Set clock line high.
=$ef8d			srclklo = $ef8d ; Serial: Set clock line low.
=$ef96			waitabit= $ef96 ; Serial: Delay one millisecond.
=$efa3			rsnxtbit= $efa3 ; RS-232: Send the next bin (NMI continuation routine).
=$efbf			rsprty  = $efbf ; RS-232: Calculate barity and stop bits value.
=$efe8			rsstops = $efe8 ; RS-232: Transmit stop bits.
=$efee			rsnxtbyt= $efee ; RS-232: Prepare the next byte to be send from send buffer.
=$f016			rsmissing=$f016 ; RS-232: Set Clear To Send or Data Set Ready Missing status.
=$f027			rscptbit= $f027 ; RS-232: Compute desire word lenght bit count.
=$f036			rsinbit = $f036 ; RS-232: Recieve an input bit (NMI driven).
=$f04b			rsstpbit= $f04b ; RS-232: Determine if all the stop bits have been recieved yet.
=$f05b			rsprepin= $f05b ; RS-232: Prepare to recieve the next input byte.
=$f068			rsstrbit= $f068 ; RS-232: Check for start bit in recieve mode.
=$f06f			rsinbyte= $f06f ; RS-232: Put constructed byte into reciebe buffer.
=$f08b			rsinprty= $f08b ; RS-232: Parity checking of the input byte.
=$f09d			rsprtyer= $f09d ; RS-232: Parity error on input byte.
=$f0a2			rsoverun= $f0a2 ; RS-232: Buffer overrun on input byte.
=$f0a5			rsbreak = $f0a5 ; RS-232: Break detected on input.
=$f0a8			rsframer= $f0a8 ; RS-232: Framing error on input.
=$f0aa			rsinerr = $f0aa ; RS-232: Set input error status and continue.
=$f0b9			rsdvcerr= $f0b9 ; RS-232: ILLEGAL DEVICE message for LOAD or SAVE.
=$f0bc			rsopnout= $f0bc ; RS-232: Open an RS-232 channel for output.
=$f0ed			rsoutsav= $f0ed ; RS-232: Store a character in the transmit buffer.
=$f102			rsprepot= $f102 ; RS-232: Set up NMI for transmission.
=$f116			rsopnin = $f116 ; RS-232: Open an RS-232 channel for input.
=$f14f			rsnxtin = $f14f ; RS-232: Retrieve the next character from the recieve buffer.
=$f160			rspause = $f160 ; RS-232: Check if serial and tape are idle, protect from RS232.
=$f174			kmsgtbl = $f174 ; Table of KERNAL messages.
=$f1e2			spmsg   = $F1e2 ; Display LOADING or VERIFYING if control messages wanted.
=$f1e6			kmsgshow= $f1e6 ; Print KERNAL control messages.
=$f1f5			getin   = $f1f5 ; Get a character.
=$f20e			ibasin  = $f20e ; Get a character from the input channel
=$f20e			chrin   = $f20e ; Description:
=$f230			chrintp = $f230 ; Obtain a byte from the tape buffer.
=$f250			chrintp2= $f250 ; Load .A with next tape character, getting block when needed.
=$f264			chrinsr = $f264 ; Obtain a byte from the serial line.
=$f26f			chrinrs = $f26f ; RS-232: Obtain a byte from the rs-232 device.
=$f27a			chrout  = $f27a ; Output character to current output device.
=$f290			chrouttp= $f290 ; Output a character to tape.
=$f2c7			chkin   = $f2c7 ; Define an input channel.
=$f309			chkout  = $f309 ; Define an output channel.
=$f34a			close   = $f34a ; (Close a logical file
=$f3cf			fndflno = $f3cf ; Find file number (.x) in file table at 601 ($0259).
=$f3df			setflch = $f3df ; Set file characteristics of file (.x) into 184-186 ($b8-$ba).
=$f3ef			clall   = $f3ef ; Close all open files
=$f3f3			clrchn  = $f3f3 ; Clear all i/o channels.
=$f40a			open    = $f40a ; Open a logical file
=$f495			sername = $f495 ; Send secondary address and filename to serial device.
=$f4c7			openrs  = $f4c7 ; RS-232: open RS-232 device.
=$f542			load    = $f542 ; Load device to RAM.
=$f55c			loadser = $f55c ; Load or Verify from serial device.
=$f5d1			loadtp  = $f5d1 ; Load or Verify from tape.
=$f647			srching = $f647 ; Display SEARCHING message for tape device.
=$f659			filename= $f659 ; Display the filename.
=$f66a			ldvrmsg = $f66a ; Display LOADING or VERIFYING message.
=$f675			save    = $f675 ; Save memory to a device.
=$f692			saveser = $f692 ; Save RAM to serial device (except: RS-232,screen or keyboard).
=$f6f1			savetp  = $f6f1 ; Save RAM to tape.
=$f728			saving  = $f728 ; Display SAVING message.
=$f734			udtim   = $f734 ; Update the system clock
=$f760			rdtim   = $f760 ; Read system clock
=$f767			settim  = $f767 ; Set the system clock.
=$f770			stop    = $f770 ; Check if stop key is pressed.
=$f77e			filemsg = $f77e ; I/O error file error message handler.
=$f7af			fah     = $f7af ; Tape: find next tape header, .X back contains header ID#.
=$f7e7			tapeh   = $f7e7 ; Tape: Build an output tape header in the tape buffer area.
=$f84d			tpbufa  = $f84d ; Tape: Load tape buffer address from 178-179($b2-$b3) in .X .Y.
=$f854			ldad1   = $f854 ; Tape: Set Load/Save starting and ending pointers to the tape.
=$f867			fndhrd  = $f867 ; Tape: Find the tape header for a specified filename (or next).
=$f88a			jtp20   = $f88a ; Tape: Increment the tape buffer character counter.
=$f894			cstel   = $f894 ; Tape: Display PRESS PLAY ON TAPE message.
=$f8ab			csio    = $f8ab ; Tape: Check Tape's play/rewind/forward button status.
=$f8b7			cste2   = $f8b7 ; Tape: Display PRESS RECORD & PLAY ON TAPE message.
=$f8c0			rdtpblks= $f8c0 ; Tape: Initiate tape header read.
=$f8c9			rblk    = $f8c9 ; Tape: Read blocks from tape.
=$f8e3			wblk    = $f8e3 ; Tape: Write blocks to tape.
=$f8f4			tape    = $f8f4 ; Tape: Common tape read/write, start tape operations,
=$f94b			tstop   = $f94b ; Tape: Check for the STOP key.
=$f95d			stti    = $f95d ; Tape: Set time limit for tape dispole.
=$f98e			readt   = $f98e ; Tape: Read tape data bits into location 191 ($bf) (IRQ driven)
=$faad			tpstore = $faad ; Tape: Determin if to store the input character from tape.
=$fbd2			rd300   = $fbd2 ; Tape: Called to reset the tape read pointer.
=$fbdb			newch   = $fbdb ; Tape: New tape character setup.
=$fbea			tptogle = $fbea ; Tape: Toggle the tape write line to invert the output signal.
=$fc06			blkend  = $fc06 ; Tape: End of block write processing.
=$fc0b			write   = $fc0b ; Tape: Data write (IRQ driven).
=$fc95			wrtni   = $fc95 ; Tape: Block leader write (IRQ driven).
=$fca8			wrtz    = $fca8 ; Tape: Leader write (IRQ driven).
=$fccf			tnif    = $fccf ; Tape: Restore IRQ vector.
=$fcf6			bsiv    = $fcf6 ; Tape: Reset the current IRQ vector.
=$fd08			tnoff   = $fd08 ; Tape: Kill motor.
=$fd11			vrpty   = $fd11 ; Comnpare current to end of load/save pointers (tape & serial).
=$fd1b			wrt62   = $fd1b ; Increment current load/save pointer (tape & serial).
=$fd22			start   = $fd22 ; Power-on/reset routine (check for autostart cartridge).
=$fd3f			chkauto = $fd3f ; Check for an autostarting program at $a000. if equ a0cbm
=$fd4d			a0cbm   = $fd4d ; A0CBM characters with the high order bit on in the last 3
=$fd52			restor  = $fd52 ; Restore default I/O vectors.
=$fd57			vector  = $fd57 ; ($fd1a) Read/set I/O vectors.
=$fd6d			vectors = $fd6d ; Default system vector address storage table.
=$fd8d			initmem = $fd8d ; Initialize system memory.
=$fdf1			irqvctrs= $fdf1 ; IRQ vectors table.
=$fdf9			initvis = $fdf9 ; Initialize the 6522 VIA registers.
=$fe49			setnam  = $fe49 ; Set up file name
=$fe50			setlfs  = $fe50 ; Set up a logical file
=$fe57			readst  = $fe57 ; Read i/o status word
=$fe66			setmsg  = $fe66 ; Set kernal message output flag
=$fe68			readiost= $fe68 ; Load .A with the non-RE-232 I/O status ST.
=$fe6f			settmo  = $fe6f ; Set ieee bus card timeout flag
=$fe73			memtop  = $fe73 ; Get/Set top of ram
=$fe82			membot  = $fe82 ; Get/set bottom of memory.
=$fe91			tstmem  = $fe91 ; Test a memory location.
=$fea9			nmi     = $fea9 ; NMI handler routine.
=$fed2			break   = $fed2 ; BREAK interupt entry.
=$fede			rsnmi   = $fede ; RS-232: nmi sequence.
=$ff56			krti    = $ff56 ; Restore 6502 registers frm the stack and return frm interrupt.
=$ff5c			baudtbl = $ff5c ; RS-232: VIA timer 2 values for baud rate table.
=$ff72			irqrout = $ff72 ; irq routine initial 6502 entry point.
=$ff85			c4ffs   = $ff85 ; five unused bytes of 255 ($ff).
=$ff8a			crestor = $ff8a ; Jump to 64850 ($fd52) RESTOR.
=$ff8d			cvector = $ff8d ; Jump to 64855 ($fd57) VECTOR.
=$ff90			csetmsg = $ff90 ; Jump to 65126 ($fe66) SETMSG.
=$ff93			csecond = $ff93 ; Jump to 61120 ($eec0) SECOND.
=$ff96			ctksa   = $ff96 ; Jump to 61134 ($eece) TKSA.
=$ff99			cmemtop = $ff99 ; Jump to 65139 ($fe73) MEMTOP.
=$ff9c			cmembot = $ff9c ; Jump to 65154 ($fe82) MEMBOT.
=$ff9f			cscnkey = $ff9f ; Jump to 60190 ($eb1e) SCNKEY.
=$ffa2			csettmo = $ffa2 ; Jump to 65135 ($fe6f) SETTMO.
=$ffa5			cacptr  = $ffa5 ; Jump to 61209 ($ef19) ACPTR.
=$ffa8			cciout  = $ffa8 ; Jump to 61156 ($eee4) CIOUT.
=$ffab			cuntlk  = $ffab ; Jump to 61174 ($eef6) UNTLK.
=$ffae			cunlsn  = $ffae ; Jump to 61188 ($ef04) UNLSN.
=$ffb1			clisten = $ffb1 ; Jump to 60951 ($ee17) LISTEN.
=$ffb4			ctalk   = $ffb4 ; Jump to 60948 ($ee14) TALK.
=$ffb7			crdst   = $ffb7 ; Jump to 65111 ($fe57) READST.
=$ffba			csetlfs = $ffba ; Jump to 65104 ($fe50) SETLFS.
=$ffbd			csetnam = $ffbd ; Jump to 65097 ($fe49) SETNAM.
=$ffc0			copen   = $ffc0 ; Jump off 794-795 ($031a-$031b) IOPEN.
=$ffc3			cclos   = $ffc3 ; Jump off 796-797 ($031c-$031d) ICLOSE.
=$ffc6			inpchn  = $ffc6 ; Jump off 798-799 ($031e-$031f) ICHKIN.
=$ffc9			outchn  = $ffc9 ; Jump off 800-801 ($0320-$0321) ICKOUT.
=$ffcc			cclrchn = $ffcc ; Jump off 802-803 ($0322-$0323) ICLRCH.
=$ffcf			cinch   = $ffcf ; Jump off 804-805 ($0324-$0325) IBASIN.
=$ffd2			cchrout = $ffd2 ; Jump to 62074 ($f27a) CHROUT.
=$ffd5			cload   = $ffd5 ; Jump to 67286 ($f542) LOAD.
=$ffd8			csave   = $ffd8 ; Jump to 63093 ($f675) SAVE.
=$ffdb			csettim = $ffdb ; Jump to 63335 ($f767) SETTIM.
=$ffde			crdtim  = $ffde ; Jump to 63328 ($f760) RDTIM.
=$ffe1			iscntc  = $ffe1 ; Jump off 808-809 ($0328-$0329) ISTOP.
=$ffe4			cgetl   = $ffe4 ; Jump off 810-811 ($032a-$032b) IGETIN.
=$ffe7			ccall   = $ffe7 ; Jump off 812-813 ($032c-$032d) ICALL.
=$ffea			cudtim  = $ffea ; Jump to 63284 ($f734) UDTIM.
=$ffed			cscreen = $ffed ; Jump to 58629 ($e505) SCRN.
=$fff0			cplot   = $fff0 ; Jump to 58634 ($e50a) PLOT.
=$fff3			ciobase = $fff3 ; Jump to 58624 ($e500) IOBASE.
=$fffa			vctrnmi = $fffa ; 6502 vector to 65193 ($fea9) NMI.
=$fffc			vctrrst = $fffc ; 6502 vector to 64802 ($fd22) START.
=$fffe			vctrirq = $fffe ; 6502 vector to 65394 ($ff72) BREAK.
=$e043			kd_poly1     =   $e043
=$e059			kd_poly2     =   $e059
=$e08d			kd_rmulc     =   $e08d       ;
=$e092			kd_raddc     =   $e092       ;
=$e097			kd_rnd       =   $e097
=$e12a			kd_sys       =   $e12a
=$e156			kd_save      =   $e156
=$e165			kd_verify    =   $e165
=$e168			kd_load      =   $e168
=error			kcint       =   cint        ;   , init vic + ecran.
=error			kioinit     =   ioinit      ;   , init i/o dev.
=error			kramtas     =   ramtas      ;   , test de memoire.
=$eee4			kciout      =   ciout       ;a  ,tx byte  acia
=$fd52			krestor     =   restor      ;   , set ram plafond
=$fd57			kvector     =   vector      ;
=$fe66			ksetmsg     =   setmsg      ;a  , set sys. msg. out
=$eec0			ksecond     =   second      ;a  , tx adresse sec.
=$eece			ktksa       =   tksa        ;a  , talk adresse sec.
=$fe73			kmemtop     =   memtop      ; yx, (c) get mem high
=$fe82			kmembot     =   membot      ; yx, (c) get mem low
=error			kscankey    =   scankey     ;   , scan clavier
=$fe6f			ksettmo     =   settmo      ;a  , set ieee timeout
=$ef19			kacptr      =   acptr       ;a  ,rx serie.
=$eef6			kuntlk      =   untlk       ;   , iec-cmc stop talk
=$ef04			kunlsn      =   unlsn       ;   , iec-cmd stop lsn
=$ee17			klisten     =   listen      ;a  , iec-cmd dev ecout
=$ee14			ktalk       =   talk        ;a  , iec-cmd dev parle
=$fe57			kreadst     =   readst      ;a  , lecture i/o stats
=$fe50			ksetlfs     =   setlfs      ;ayx, init fich logi.
=$fe49			ksetnam     =   setnam      ;ayx, init num.nom.fich
=$f40a			kopen       =   open        ;axy, ouvre fich-nom
=$f34a			kclose      =   close       ;a  , ferme fichier #a.
=$f2c7			kchkin      =   chkin       ;  x,open canal in.
=$f309			kchkout     =   chkout      ;  x,open canal out
=$f3f3			kclrchn     =   clrchn      ;   , ferme canaux i/o.
=$f20e			kchrin      =   chrin       ;a  ,recup. un car.
=$f27a			kchrout     =   chrout      ;a  ,sort un car.
=$f1ca			kd_chrout    =   $f1ca
=$f542			kload       =   load        ;ayx, dev->ram
=$f675			ksave       =   save        ;   , sauve mem->dev
=$f767			ksettim     =   settim      ;axy, init sysclock
=$f760			krdtim      =   rdtim       ;axy, lecture sysclock
=$f770			kstop       =   stop        ;a  , ret. stopkey stat
=$f1f5			kgetin      =   getin       ;a  , recup. car. #dev.
=$f3ef			kclall      =   clall       ;   , ferme fichiers.
=$f734			kudtim      =   udtim       ;   , maj sysclock
=$e505			kscreen     =   screen      ; yx, get format ecran
=$e50a			kplot       =   plot        ; yx, (c) get csr pos.
=$e500			kiobase     =   iobase      ; yx, def. i/o mem page
=$e39a			k_echostartup = $e39a
=$e716			k_putch       = $e716 ; 52) Print a character.          ;a--;---; a = char
=$e7a0			k_cls         = $e7a0
=$e87c			k_cursordown  = $e87c
=$e8ea			k_scrollup    = $e8ea
=$e94e			k_home        = $e94e
=$e965			k_insertline  = $e965
=$e9c8			k_screlldown  = $e9c8
=$ed0c			k_devsndlstn  = $ed0c ; 55) Send 'LISTEN'>IEEE/Serial.  ;a--;---; a = dev #
=$ee13			k_ieeein      = $ee13 ; 60) Input from IEEE/Serial.     ;---;a--; a = Data byte
=$eef6			k_devsndutalk = $eef6 ; 58) Send 'UNTALK'>IEEE/Serial.  ;---;---;
=$ef04			k_devsndulstn = $ef04 ; 59) Send 'UNLISTEN'>IEEE/Serial.;---;---;
=$f12f			k_putsysmsg   = $f12f ; 53) Print system message.       ;--y;---; y = msg offset
=$f291			k_cloself     = $f291 ; 61) Close logical file .        ;a--;---; a = file #
=$f49e			k_loadsub     = $f49e ; 63) LOAD subroutine.            ;axy;---; a = # start=yyxx
=$f5af			k_prnsrch     = $f5af ; 64) Print SEARCHING if imm mode.;---;---;
=$f5b3			k_echosearch  = $f5b3 ; 64b) Skipping test part of 64.  ;---;---;
=$f5c1			k_prnfnam     = $f5c1 ; 65) Print filename.             ;---;---;
=$f6ed			k_stop        = $f6ed ; 62) Check for STOP key.         ;---;---; z = 1 pressed
=$f7ea			k_gettaphdblk = $f7ea ; 66) Find a tape hdr blk.        ;a--;---; a = len
=$f7ea			k_fndtaphdblk = $f7ea ; 67) Find any tape hdr blk.      ;---;---;
=$f817			k_waittapplay = $f817 ; 68) Press PLAY... (wait)        ;---;---;
=$f841			k_rdtape2buff = $f841 ; 69) Read tape to buffer.        ;---;---;
=$f847			k_readtape    = $f847 ; 70) Read tape.                  ;---;---;
=$f864			k_wrbuff2tape = $f864 ; 71) write buffer to tape.       ;---;---;
=$f869			k_wrtape      = $f869 ; 72) write tape.                 ;a--;---; a = ldr len
=$fb8e			k_resettapeio = $fb8e ; 73) Reset tape I/O.             ;---;---;
=$fcbd			k_setintvect  = $fcbd ; 74) set interupt vector.        ;---;---;
=$fce2			k_coldreset   = $fce2 ; 75) Power on reset.             ;---;---;
=$fce2			k_coldstart   = $fce2 ; 75) Power on reset.             ;---;---;
=$fce2			k_coldboot    = $fce2 ; 75) Power on reset.             ;---;---;
=$fe66			k_warmreset   = $fe66 ;     Warm resetstart
=$fe66			k_warmboot    = $fe66 ;     Warm resetstart
=$ff93			k_devsndaddr2 = $ff93 ; 56) Send second address.        ;a--;---; a = SA or #$60
=0			kerr00 = 0      ; routine ended by the stop key.
=1			kerr01 = 1      ; too many files open.
=2			kerr02 = 2      ; file already open.
=3			kerr03 = 3      ; file not open.
=4			kerr04 = 4      ; file not found.
=5			kerr05 = 5      ; device not present.
=6			kerr06 = 6      ; file is not an input file.
=7			kerr07 = 7      ; file is not an output file.
=8			kerr08 = 8      ; file name is missing.
=9			kerr09 = 9      ; illegal device number.
=240			kerrf0 = 240    ; top-of-memory change rs-232 buffer allocation.
.1559	4c 46 12	pgmstart        jmp      main  ; le programme principale doit s'appeler "main"

;******  Return to file: screenfmt.asm


;******  Processing file: /Users/Locals/CBM/00-usbkey32go/d-00-64tass-src/V20/lib/e-v20-vic.asm

=$9000			vic       = $9000;debut du vic
=$9000			vic0      = $9000;ABBBBBBB
=$9001			vic1      = $9001;CCCCCCCC
=$9002			vic2      = $9002;HDDDDDDD
=$9003			vic3      = $9003;GEEEEEEF
=$9004			vic4      = $9004;GGGGGGGG
=$9005			vic5      = $9005;HHHHIIII
=$9006			vic6      = $9006;JJJJJJJJ
=$9007			vic7      = $9007;KKKKKKKK
=$9008			vic8      = $9008;LLLLLLLL
=$9009			vic9      = $9009;MMMMMMMM
=$900a			vicbas    = $900a;NRRRRRRR
=$900a			vic10     = $900a;NRRRRRRR
=$900b			vicalt    = $900b;OSSSSSSS
=$900b			vic11     = $900b;OSSSSSSS
=$900c			vicsop    = $900c;PTTTTTTT
=$900c			vic12     = $900c;PTTTTTTT
=$900d			vicnoi    = $900d;QUUUUUUU
=$900d			vic13     = $900d;QUUUUUUU
=$900e			vicvol    = $900e;WWWWVVVV
=$900e			vic14     = $900e;WWWWVVVV
=$900f			vic15     = $900f;XXXXYZZZ
=$00			vnoir   =   %00000000
=$01			vblanc  =   %00000001
=$02			vrouge  =   %00000010
=$03			vocean  =   %00000011
=$04			vmauve  =   %00000100
=$05			vvert   =   %00000101
=$06			vbleu   =   %00000110
=$07			vjaune  =   %00000111
=$08			vorange =   %00001000
=$09			vbrun   =   %00001001
=$0a			vrose   =   %00001010
=$0b			vgris   =   %00001011
=$0c			vgris1  =   %00001100
=$0d			vvert1  =   %00001101
=$0d			vvertp  =   %00001101
=$0e			vbleu1  =   %00001110
=$0e			vbleup  =   %00001110
=$0f			vgris2  =   %00001111
=$08			vinv      = vorange
=133			v1do1     =    133  ; 32.703-  32.746- 0.131 %
=140			v1dod1    =    140  ; 34.648-  34.739- 0.264 %
=146			v1re1     =    146  ; 36.708-  36.651- 0.155 %
=152			v1red1    =    152  ; 38.891-  38.786- 0.269 %
=158			v1mi1     =    158  ; 41.203-  41.186- 0.043 %
=163			v1fa1     =    163  ; 43.654-  43.424- 0.526 %
=169			v1fad1    =    169  ; 46.249-  46.453- 0.442 %
=173			v1so1     =    173  ; 48.999-  48.720- 0.571 %
=178			v1so1d    =    178  ; 51.913-  51.883- 0.058 %
=182			v1la1     =    182  ; 55.000-  54.726- 0.498 %
=186			v1lad1    =    186  ; 58.270-  57.899- 0.638 %
=190			v1si1     =    190  ; 61.735-  61.462- 0.444 %
=194			v1do2     =    194  ; 65.406-  65.492- 0.131 %
=197			v1dod2    =    197  ; 69.296-  69.478- 0.264 %
=201			v1re2     =    201  ; 73.416-  73.303- 0.155 %
=204			v1red2    =    204  ; 77.782-  77.573- 0.269 %
=207			v1mi2     =    207  ; 82.407-  82.371- 0.043 %
=209			v1fa2     =    209  ; 87.307-  86.848- 0.526 %
=212			v1fad2    =    212  ; 92.499-  92.907- 0.442 %
=214			v1so2     =    214  ; 97.999-  97.439- 0.571 %
=217			v1so2d    =    217  ;103.826- 103.766- 0.058 %
=219			v1la2     =    219  ;110.000- 109.452- 0.498 %
=221			v1lad2    =    221  ;116.541- 115.797- 0.638 %
=223			v1si2     =    223  ;123.471- 122.923- 0.444 %
=224			v1do3     =    224  ;130.813- 130.984- 0.131 %
=226			v1dod3    =    226  ;138.591- 138.957- 0.264 %
=228			v1re3     =    228  ;146.832- 146.606- 0.155 %
=229			v1red3    =    229  ;155.563- 155.146- 0.269 %
=231			v1mi3     =    231  ;164.814- 164.742- 0.043 %
=232			v1fa3     =    232  ;174.614- 173.696- 0.526 %
=233			v1fad3    =    233  ;184.997- 185.814- 0.442 %
=235			v1so3     =    235  ;195.998- 194.878- 0.571 %
=236			v1sod3    =    236  ;207.652- 207.532- 0.058 %
=237			v1la3     =    237  ;220.000- 218.904- 0.498 %
=238			v1lad3    =    238  ;233.082- 231.594- 0.638 %
=239			v1si3     =    239  ;246.942- 245.846- 0.444 %
=240			v1do4     =    240  ;261.626- 261.967- 0.131 %
=0			v1dod4    =      0  ;277.183- 275.517- 0.601 %
=0			v1re4     =      0  ;293.665- 295.926- 0.770 %
=242			v1red4    =    242  ;311.127- 313.333- 0.709 %
=243			v1mi4     =    243  ;329.628- 332.917- 0.998 %
=0			v1fa4     =      0  ;349.228- 347.391- 0.526 %
=244			v1fad4    =    244  ;369.994- 371.628- 0.442 %
=245			v1so4     =    245  ;391.995- 389.756- 0.571 %
=0			v1sod4    =      0  ;415.305- 420.526- 1.257 %
=246			v1la4     =    246  ;440.000- 443.889- 0.884 %
=0			v1lad4    =      0  ;466.164- 470.000- 0.823 %
=247			v1si4     =    247  ;493.883- 499.375- 1.112 %
=0			v1do5     =      0  ;523.251- 515.484- 1.484 %
=0			v1dod5    =      0  ;554.365- 551.034- 0.601 %
=0			v1re5     =      0  ;587.329- 591.852- 0.770 %
=0			v1red5    =      0  ;622.254- 614.615- 1.228 %
=249			v1mi5     =    249  ;659.255- 665.833- 0.998 %
=0			v1fa5     =      0  ;698.456- 694.783- 0.526 %
=0			v1fad5    =      0  ;739.989- 726.364- 1.841 %
=250			v1so5     =    250  ;783.991- 799.000- 1.914 %
=0			v1sod5    =      0  ;830.609- 841.053- 1.257 %
=0			v1la5     =      0  ;880.000- 887.778- 0.884 %
=0			v1lad5    =      0  ;932.327- 940.000- 0.823 %
=133			v2do2     =    133  ; 65.406-  65.492- 0.131 %
=140			v2dod2    =    140  ; 69.296-  69.478- 0.264 %
=146			v2re2     =    146  ; 73.416-  73.303- 0.155 %
=152			v2red2    =    152  ; 77.782-  77.573- 0.269 %
=158			v2mi2     =    158  ; 82.407-  82.371- 0.043 %
=163			v2fa2     =    163  ; 87.307-  86.848- 0.526 %
=169			v2fad2    =    169  ; 92.499-  92.907- 0.442 %
=173			v2so2     =    173  ; 97.999-  97.439- 0.571 %
=178			v2sod2    =    178  ;103.826- 103.766- 0.058 %
=182			v2la2     =    182  ;110.000- 109.452- 0.498 %
=186			v2lad2    =    186  ;116.541- 115.797- 0.638 %
=190			v2si2     =    190  ;123.471- 122.923- 0.444 %
=194			v2do3     =    194  ;130.813- 130.984- 0.131 %
=197			v2dod3    =    197  ;138.591- 138.957- 0.264 %
=201			v2re3     =    201  ;146.832- 146.606- 0.155 %
=204			v2red3    =    204  ;155.563- 155.146- 0.269 %
=207			v2mi3     =    207  ;164.814- 164.742- 0.043 %
=209			v2fa3     =    209  ;174.614- 173.696- 0.526 %
=212			v2fad3    =    212  ;184.997- 185.814- 0.442 %
=214			v2so3     =    214  ;195.998- 194.878- 0.571 %
=217			v2sod3    =    217  ;207.652- 207.532- 0.058 %
=219			v2la3     =    219  ;220.000- 218.904- 0.498 %
=221			v2lad3    =    221  ;233.082- 231.594- 0.638 %
=223			v2si3     =    223  ;246.942- 245.846- 0.444 %
=225			v2do4     =    225  ;261.626- 261.967- 0.131 %
=226			v2dod4    =    226  ;277.183- 275.517- 0.601 %
=228			v2re4     =    228  ;293.665- 295.926- 0.770 %
=229			v2red4    =    229  ;311.127- 313.333- 0.709 %
=231			v2mi4     =    231  ;329.628- 332.917- 0.998 %
=232			v2fa4     =    232  ;349.228- 347.391- 0.526 %
=233			v2fad4    =    233  ;369.994- 371.628- 0.442 %
=235			v2so4     =    235  ;391.995- 389.756- 0.571 %
=236			v2sod4    =    236  ;415.305- 420.526- 1.257 %
=237			v2la4     =    237  ;440.000- 443.889- 0.884 %
=238			v2lad4    =    238  ;466.164- 470.000- 0.823 %
=239			v2si4     =    239  ;493.883- 499.375- 1.112 %
=240			v2do5     =    240  ;523.251- 515.484- 1.484 %
=0			v2dod5    =      0  ;554.365- 551.034- 0.601 %
=0			v2re5     =      0  ;587.329- 591.852- 0.770 %
=242			v2red5    =    242  ;622.254- 614.615- 1.228 %
=243			v2mi5     =    243  ;659.255- 665.833- 0.998 %
=0			v2fa5     =      0  ;698.456- 694.783- 0.526 %
=244			v2fad5    =    244  ;739.989- 726.364- 1.841 %
=245			v2so5     =    245  ;783.991- 799.000- 1.914 %
=0			v2sod5    =      0  ;830.609- 841.053- 1.257 %
=246			v2la5     =    246  ;880.000- 887.778- 0.884 %
=0			v2lad5    =      0  ;932.327- 940.000- 0.823 %
=133			v3do3     =    133  ;130.813- 130.984- 0.131 %
=140			v3dod3    =    140  ;138.591- 138.957- 0.264 %
=146			v3re3     =    146  ;146.832- 146.606- 0.155 %
=152			v3red3    =    152  ;155.563- 155.146- 0.269 %
=158			v3mi3     =    158  ;164.814- 164.742- 0.043 %
=163			v3fa3     =    163  ;174.614- 173.696- 0.526 %
=169			v3fad3    =    169  ;184.997- 185.814- 0.442 %
=173			v3so3     =    173  ;195.998- 194.878- 0.571 %
=178			v3sod3    =    178  ;207.652- 207.532- 0.058 %
=182			v3la3     =    182  ;220.000- 218.904- 0.498 %
=186			v3lad3    =    186  ;233.082- 231.594- 0.638 %
=190			v3si3     =    190  ;246.942- 245.846- 0.444 %
=194			v3do4     =    194  ;261.626- 261.967- 0.131 %
=197			v3dod4    =    197  ;277.183- 275.517- 0.601 %
=201			v3re4     =    201  ;293.665- 295.926- 0.770 %
=204			v3red4    =    204  ;311.127- 313.333- 0.709 %
=207			v3mi4     =    207  ;329.628- 332.917- 0.998 %
=209			v3fa4     =    209  ;349.228- 347.391- 0.526 %
=212			v3fad4    =    212  ;369.994- 371.628- 0.442 %
=214			v3so4     =    214  ;391.995- 389.756- 0.571 %
=217			v3sod4    =    217  ;415.305- 420.526- 1.257 %
=219			v3la4     =    219  ;440.000- 443.889- 0.884 %
=221			v3lad4    =    221  ;466.164- 470.000- 0.823 %
=223			v3si4     =    223  ;493.883- 499.375- 1.112 %
=224			v3do5     =    224  ;523.251- 515.484- 1.484 %
=226			v3dod5    =    226  ;554.365- 551.034- 0.601 %
=228			v3re5     =    228  ;587.329- 591.852- 0.770 %
=229			v3red5    =    229  ;622.254- 614.615- 1.228 %
=231			v3mi5     =    231  ;659.255- 665.833- 0.998 %
=232			v3fa5     =    232  ;698.456- 694.783- 0.526 %
=233			v3fad5    =    233  ;739.989- 726.364- 1.841 %
=235			v3so5     =    235  ;783.991- 799.000- 1.914 %
=236			v3sod5    =    236  ;830.609- 841.053- 1.257 %
=237			v3la5     =    237  ;880.000- 887.778- 0.884 %
=238			v3lad5    =    238  ;932.327- 940.000- 0.823 %

;******  Return to file: screenfmt.asm


;******  End of listing
