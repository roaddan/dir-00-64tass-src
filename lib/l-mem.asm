;--------------------------------------; nom fichier..: l-mem.asm (seq); type fichier.: code pour t.m.p.; auteur.......: daniel lafrance; version......: 0.0.1; revision.....: 20151119;--------------------------------------;--------------------------------------; Rempli la page mémoire Y avec le code; specifie dans Acc.;--------------------------------------blkfill .blockbf0     jsr pushall        sty zp1+1        ldy #$00        sty zp1bf1     sta (zp1),y        iny        bne bf1        jsr popall        rts        .bend;--------------------------------------; Rempli les pages de Y à Y+X avec le ; code de A;--------------------------------------memfill .block        jsr pushregsmf1     jsr blkfill        iny        dex        bne mf1        jsr popregs        rts        .bend;--------------------------------------; Incrementation 16 bits de $fcfb;--------------------------------------inczp1         .block         php         inc zp1         bne repzp1         inc zp1+1repzp1   plp         rts         .bend;--------------------------------------; Incrementation 16 bits de $fefd;--------------------------------------inczp2         .block         php         inc zp2         bne repzp2         inc zp2+1repzp2   plp         rts         .bend;--------------------------------------; Decrementation 16 bits de $fcfb;--------------------------------------deczp1         .block         php         pha         lda zp1         bne noemp         dec zp1+1noemp    dec zp1                  pla         plp         rts         .bend;--------------------------------------; Decrementation 16 bits de $fefd;--------------------------------------deczp2         .block         php         pha         lda zp2         bne noemp         dec zp2+1noemp    dec zp2                  pla         plp         rts         .bend;--------------------------------------; Rotation a gauche 16 bits de $fcfb;--------------------------------------rolzp1        .block        php        pha        clc        lda zp1        rol        sta zp1        lda zp1+1        rol        sta zp1+1        pla        plp        .bend;--------------------------------------; Rotation a droite 16 bits de $fcfb;--------------------------------------rorzp1        .block        php        pha        clc        lda zp1+1        ror        sta zp1+1        lda zp1        ror        sta zp1        pla        plp        .bend;--------------------------------------; Rotation a gauche 16 bits de $fefd;--------------------------------------rolzp2        .block        php        pha        clc        lda zp2        rol        sta zp2        lda zp2+1        rol        sta zp2+1        pla        plp        .bend;--------------------------------------; Rotation a droite 16 bits de $fefd;--------------------------------------rorzp2        .block        php        pha        clc        lda zp2+1        ror        sta zp2+1        lda zp2        ror        sta zp2        pla        plp        .bend;--------------------------------------; Place $yyxx dans memptr;--------------------------------------yxtoptr        .block        sty memptr+1        stx memptr        rts        .bend;--------------------------------------; Place memptr dans $yyxx;--------------------------------------ptrtoyx        .block        php        ldy memptr+1        ldx memptr        plp        rts        .bend;--------------------------------------; Incrementation 16 bits de memptr;--------------------------------------incptr        .block        php        inc memptr        bne norep        inc memptr+1norep   plp        rts        .bend;--------------------------------------; Decrementation 16 bits de memptr;--------------------------------------decptr        .block        php        pha        lda memptr        bne noemp        inc memptr+1noemp   inc memptr        pla        plp            rts        .bend;--------------------------------------; Multiplie memptr pas 256;--------------------------------------incptr8        .block        php        pha        tya        pha        ldy #8again   jsr incptr        dey        bne again        pla        tay        pla        plp        rts        .bend;--------------------------------------; Une forme de for-next sur 16 bits.; Placez le nombre nombre dans; loopcount à l'aide de la macro; setloop avant d'appeler la fonction. ; La loop fonction retournera le flag ; z a 1 si le décompte est terminé.;--------------------------------------loop           .block               dec  loopcount               bne  norep               dec  loopcount+1 norep          lda  loopcount               cmp  #$00               bne  out               eor  loopcount+1               cmp  #$ffout            rts               .bend;--------------------------------------