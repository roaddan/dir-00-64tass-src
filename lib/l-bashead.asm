;---------------------------------------; nom fichier..: l-bashead.asm (seq); type fichier.: code pour t.m.p.; auteur.......: daniel lafrance; version......: 0.0.1; revision.....: 20241013;---------------------------------------; entete pour demarrage basic 2 c64;---------------------------------------         *= $0801startbcmd1    .word $080b ;adresse de la pro-                     ; chaine commande.         .word $0a   ;no. ligne basic.                     ; 10 dans ce cas.         .byte $9e   ;jeton pour la                     ; commande sys.         .text "2061";adresse du debut                     ; du programme en                     ; decimal/ascii.         .byte $00   ;fin de cmd basic.bcmd2    .word $00   ;adresse de la pro-                     ; chaine commande.                     ; $00 si aucune.;---------------------------------------;pour faciliter la creation de progrm; la premiere action est de sauter vers; une routine nommee "main".;cette methode permet d'utiliser le meme; entete pour tous les programme.;la routine "main" doit se terminer par; un "rts" pour assurer un retour; adequat a basic.;---------------------------------------         ;lda #$90         ;sta $38         jsr initscr         lda #$08         sta ddev         jsr directory         jsr getkey         jsr ldlibs         jmp main         brk;---------------------------------------initscr         .block         php         phabord     lda #$05    ;place la couleur         sta $d020   ; de la bordure.back     lda #$06    ;place la couleur         sta $d021   ; du fond d'ecran.text     lda #$01    ;place la couleur         sta $0286   ; du texte.         lda #$93    ;efface l'ecran par         jsr $ffd2   ; chrout du kernal.         pla         plp         rts         .bend;---------------------------------------ldlibs  .block        ;#mpushrdoit    lda #<fname        sta dfnptr        lda #>fname        sta dfnptr+1        lda #7        sta dfnlen        lda #8        sta dlfsno        jsr filetomem        ;#mpopr        rtsmsg     .text "loading ... "fname   .null "romc000"        .bend