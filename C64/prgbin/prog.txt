
; 64tass Turbo Assembler Macro V1.54.1900 listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib -i -L prog.txt -o prog.prg prog.asm
; Tue Dec  9 01:10:23 2025

;Offset	;Hex		;Source

;******  Processing input file: prog.asm


;******  Processing file: m-utils.asm


;******  Return to file: prog.asm


;******  Processing file: e-vars.asm

=$cfff			libre    = $cfff
=$cfff			rp       = libre    ;1 byte $cfff
=53246			ra       = libre-$01;1 byte $cffe
=53245			rx       = libre-$02;1 byte $cffd
=53244			ry       = libre-$03;1 byte $cffc
=53243			rs       = libre-$04;1 byte $cffb
=53241			pc       = libre-$06;1 word $cff9-$cffa
=53238			curcol   = libre-$09;1 byte $cff6
=53239			memptr   = libre-$08;1 word $cff7-$cff8
=53238			hexv     = libre-$09
=53233			hexstr   = hexv-$05 ;5 byte $cff1-$cff5
=53232			a2hexpfx = hexv-$06 ;1 byte $cff0
=53231			a2hexpy  = hexv-$07 ;1 byte $cfef
=53230			a2hexpx  = hexv-$08 ;1 byte $cfee
=53230			a2hexpos = hexv-$08 ;0 byte $cfee
=53229			a2hexcol = hexv-$09 ;1 byte $cfed
=53229			binv     = hexv-$09
=53220			binstr   = binv-$09 ;9 byte $cfe4-$cfec
=53219			a2binpfx = binv-$0a ;1 byte $cfe3
=53218			a2binpy  = binv-$0b ;1 byte $cfe2
=53217			a2binpx  = binv-$0c ;1 byte $cfe1
=53216			a2binpos = binv-$0d ;0 byte $cfe1
=53215			a2bincol = binv-$0e ;1 byte $cfe0
=53215			decv     = binv-$0e
=53209			decstr   = decv-$06 ;6 byte $cfda-$cfdf
=53209			a2decpfx = decv-$06 ;1 byte $cfd9
=53208			a2decpy  = decv-$07 ;1 byte $cfd8
=53207			a2decpx  = decv-$08 ;1 byte $cfd7
=53207			a2decpos = decv-$08 ;0 byte $cfd7
=53206			a2deccol = decv-$09 ;1 byte $cfd6
=53206			fltv     = decv-$09
=53200			fvar1    = fltv-6  ; 6 byte $cfd0-$cfd5
=53194			fvar2    = fltv-12 ; 6 byte $cfca-$cfcf
=53174			float1   = fltv-32 ;20 byte $cfb6-$cfc9
=53154			float2   = fltv-52 ;20 byte $cfa2-$cfb5
=53153			tval1    = fltv-53 ; 1 byte $cfa1
=53151			tval2    = fltv-55 ; 2 byte $cf9f-$cfa0
=53150			loops    = tval2-1 ; 1 byte $cf9e
=53149			nextvar  = loops-1 ; 1 byte $cf9d

;******  Return to file: prog.asm


;******  Processing file: e-float.asm

=$ba8c			ffvtf2   = $ba8c ;copie 4 byt $(yyaa) f2
=$bba2			ffvtf1   = $bba2 ;copie fp $(yyaa) to f1
=$bbc7			ff1t5c   = $bbc7 ;copie f1 to $5c-$60
=$bbca			ff1t57   = $bbca ;copie f1 to $57-$5b
=$bbd0			ff1t49   = $bbd0 ;copie f1 to $49.
=$bbd4			ff1tyx   = $bbd4 ;copie f1 mem $yyxx.
=$bbfc			ff2tf1   = $bbfc ;copie f2 to f1
=$bc0c			ff1tf2   = $bc0c ;copie f1 to f2
=$b849			ff1p05   = $b849 ;f1=f1+0.5
=$b850			ffvsf1   = $b850 ;f1=fv-f1 ($yyaa)
=$b853			ff2sf1   = $b853 ;f1=f2-f1
=$b867			ffvpf1   = $b867 ;f1=fv+f1 ($yyaa)
=$b86a			ff2pf1   = $b86a ;f1=f2+f1
=$bd7e			ff1pac   = $bd7e ;f1=f1+ra val ra=0-9
=$ba28			ff1xfv   = $ba28 ;f1=f1*fv ($yyaa)
=$ba2b			ff1xf2   = $ba2b ;f1=f1*f2
=$bae2			ff1x10   = $bae2 ;f1=f1*10
=$bafe			ff1d10   = $bafe ;f1=f1/10
=$bb0f			ffvdf1   = $bb0f ;f1=fv/f1 ($yyaa)
=$bb12			ff2df1   = $bb12 ;f1=f2/f1
=$afe6			ffpor    = $afe6 ;f1=f1 or f2
=$afe9			ffpand   = $afe9 ;f1=f1 and f2
=$b947			ff1com2  = $b947 ;f1=two's compl f1
=$bc1b			ff1rnd   = $bc1b ;f1=round(f1)
=$bc39			ff1sign  = $bc39 ;f1=sgn(f1)
=$bc58			ff1abs   = $bc58 ;f1=abs(f1)
=$bc5b			ffvcmp   = $bc5b ;f1=f1 comp fv ($yyaa)
=$bccc			ff1int   = $bccc ;f1=int(f1)
=$bf71			ff1sqr   = $bf71 ;f1=sqrt(f1)
=$bf7b			ff1ef2   = $bf7b ;f1=fac1^f2
=$b3a2			fiyytf1  = $b3a2 ;f1=float(y)
=$bc3c			fiaatf1  = $bc3c ;conv acc to fp in f1
=$bc44			fi62tf1  = $bc44 ;conv f1 word 62,63
=$bdcd			fiaxtf1  = $bdcd ;f1=float($aaxx)+print
=$bcf3			fasctf1  = $bcf3 ;f1=float(ascii)
=$bddd			ff1tasc  = $bddd ;f1 to ascii ($yyaa)
=$bc9b			ff1tudw  = $bc9b ;f1=unsighed dw(f1)
=$b1bf			ff1swd64 = $b1bf ;f1=sw(f1)->64
=$b1d2			ff1wrd64 = $b1d2 ;f1=uw(f1)->64
=$b1aa			ff1wrday = $b1aa ;f1=word->$aayy
=$b7a1			ff1bytxx = $b7a1 ;f1 to byte in x
=$b79e			ff1evalx = $b79e ;eval. expr. f1 to x
=$e264			ff1cos   = $e264 ;f1=sin(f1+(pi/2))
=$e26b			ff1sin   = $e26b ;f1=sin(f1)
=$e2b4			ff1tan   = $e2b4 ;f1=sin(f1)/cos(f1)
=$e30e			ff1atn   = $e30e ;f1=atn(f1)
=$bc2b			fsngf1   = $bc2b ;check f1 sign

;******  Return to file: prog.asm


;******  Processing file: e-64map.asm

=$73			chrget   = $73   ;Recup Basic car texte
=$79			chrgot   = $79   ; ...une seconde fois.
=$fb			zp1      = $fb   ;1er Zpage prog. usager
=$fd			zp2      = $fd   ;2em Zpage prog. usager
=$00d1			scrnlin  = $00d1 ;acresse ligne courante
=$0100			fascii   = $0100 ;region conv FP a ascii
=$0286			kcol     = $0286 ;Couleur car affiche.
=$fce2			reboot   = $fce2 ;Redemarrage a froid
=$fe66			reset    = $fe66 ;Redemarrare a chaud
=$e3bf			intcgt   = $e3bf ;Initialize chrget
=$ffa5			acptr    = $ffa5 ;Recoit byte port serie
=$ffc6			chkin    = $ffc6 ;Definie canal entree
=$ffc9			chkout   = $ffc9 ;Definie canal sortie
=$ffcf			chrin    = $ffcf ;Entre car canal entree
=$ffd2			chrout   = $ffd2 ;Sort car canal sortie
=$ff81			cint     = $ff81 ;Init ecran edit+vicii
=$ffa8			ciout    = $ffa8 ;Sort car sur bus serie
=$ffe7			clall    = $ffe7 ;Ferme tout fichier ouv
=$ffc3			close    = $ffc3 ;Ferme fichier logique
=$ffcc			clrchn   = $ffcc ;Efface caneaux i/o
=$ffe4			getin    = $ffe4 ;Entre un car de entree
=$fff3			iobase   = $fff3 ;Definie page mem. i/o
=$ff84			ioinit   = $ff84 ;Init. Periph. i/o
=$ffb1			listen   = $ffb1 ;Cmd LISTEN a perip bus
=$ffd5			load     = $ffd5 ;Charge periph. en ram
=$ff9c			membot   = $ff9c ;Lec./Ecr. bas mem.
=$ff99			memtop   = $ff99 ;Lec./Ecr. haut mem.
=$ffc0			open     = $ffc0 ;Ouvre fichier logique.
=$fff0			plot     = $fff0 ;Lec./Ecr. pos. curseur
=$ff87			ramtas   = $ff87 ;Init ram tapebuf+ecran
=$ffde			rdtim    = $ffde ;Recup horloge systeme
=$ffb7			readst   = $ffb7 ;Recup mot status i/o
=$ff8a			restor   = $ff8a ;Replace vecteurs i/o
=$ffd8			save     = $ffd8 ;Sauve mem vers periph
=$ff9f			scnkey   = $ff9f ;Sonde le clavier
=$ffed			screen   = $ffed ;Recup format ecran
=$ff93			second   = $ff93 ;Trans adr secnd/listen
=$ffba			setlfs   = $ffba ;Prep. fichier logique
=$ff90			setmsg   = $ff90 ;Prep. kmesg outpt flag
=$ffbd			setnam   = $ffbd ;Prep. nom de fichier
=$ffdb			settim   = $ffdb ;Init. horloge systeme
=$ffa2			settmo   = $ffa2 ;Place ieee delai fin
=$ffe1			stop     = $ffe1 ;Verif. clef stop
=$ffb4			talk     = $ffb4 ;Cmd LISTEN periph/SB
=$ff96			tsks     = $ff96 ;Trans. TALK secnd adr
=$ffea			udtim    = $ffea ;Maj. horloge systeme
=$ffae			unlsn    = $ffae ;Trans. UNLISTEN
=$ffab			untlk    = $ffab ;Trans. UNTALK
=$ffd8			vector   = $ffd8 ;Lec/ecr vecteurs i/o
=$d000			vic      = $d000 ;debut du vic-ii
=$0340			sprtmem  = $0340 ;832
=$07f8			sprtloc  = $07f8 ;2040
=$2000			vidstart = $2000
=$3f3f			vidend   = $3f3f
=$0400			bakmem   = $0400 ;1024 end at $0800
=$abf9			prompt   = $abf9 ;prompt ? dans tampon.
=$ab24			strout   = $ab24 ;print string at $0022
=8			discase  = 8
=9			enacase  = 9
=14			locase   = 14
=142			upcase   = 142
=17			crsdown  = 17
=29			crsright = 29
=145			crsup    = 145
=157			crsleft  = 157
=18			enarevs  = 18
=146			disrevs  = 146
=19			gohome   = 19
=147			clrhome  = 147
=20			delete   = 20
=32			space    = 32
=144			knoir    = 144
=129			korange  = 129
=5			kblanc   = 5
=28			krouge   = 28
=30			kvert    = 30
=31			kbleu    = 31
=149			kbrun    = 149
=150			krose    = 150
=151			kgris1   = 151
=152			kgris2   = 152
=153			kvertp   = 153
=154			kbleup   = 154
=155			kgris3   = 155
=156			kmauve   = 156
=158			kjaune   = 158
=159			kcyan    = 159

;******  Return to file: prog.asm


;******  Processing file: l-bashead.asm

.0801			start
>0801	0b 08		bcmd1    .word $080b ;adresse de la pro-
>0803	0a 00		         .word $0a   ;no. ligne basic.
>0805	9e		         .byte $9e   ;jeton pour la
>0806	32 30 36 31	         .text "2061";adresse du debut
>080a	00		         .byte $00   ;fin de cmd basic.
>080b	00 00		bcmd2    .word $00   ;adresse de la pro-
.080d	20 14 08	         jsr initscr
.0810	4c 2d 08	         jmp main
.0813	00		         brk
.0814			initscr
.0814	08		         php
.0815	48		         pha
.0816	a9 05		bord     lda #$05    ;place la couleur
.0818	8d 20 d0	         sta $d020   ; de la bordure.
.081b	a9 06		back     lda #$06    ;place la couleur
.081d	8d 21 d0	         sta $d021   ; du fond d'ecran.
.0820	a9 01		text     lda #$01    ;place la couleur
.0822	8d 86 02	         sta $0286   ; du texte.
.0825	a9 93		         lda #$93    ;efface l'ecran par
.0827	20 d2 ff	         jsr chrout  ; chrout du kernal.
.082a	68		         pla
.082b	28		         plp
.082c	60		         rts

;******  Return to file: prog.asm

.082d			main
.082d	a2 00		         ldx #0
.082f	a0 18		         ldy #24
.0831	20 8d 0b	         jsr gotoxy
.0834	a2 c8		         ldx #200
.0836	a0 96		         ldy #150
.0838	20 e6 08	         jsr calcdot
.083b	ad 22 09	         lda row
.083e	20 bb 08	         jsr putahexdec
.0841	08		         php
.0842	48		         pha
.0843	a9 0e		         lda #14
.0845	20 d2 ff	         jsr chrout
.0848	68		         pla
.0849	28		         plp
.084a	08		         php
.084b	48		         pha
.084c	a9 0d		         lda #$0d
.084e	20 d2 ff	         jsr chrout
.0851	68		         pla
.0852	28		         plp
.0853	ad 23 09	         lda col
.0856	20 bb 08	         jsr putahexdec
.0859	08		         php
.085a	48		         pha
.085b	a9 0d		         lda #$0d
.085d	20 d2 ff	         jsr chrout
.0860	68		         pla
.0861	28		         plp
.0862	ad 24 09	         lda lin
.0865	20 bb 08	         jsr putahexdec
.0868	08		         php
.0869	48		         pha
.086a	a9 0d		         lda #$0d
.086c	20 d2 ff	         jsr chrout
.086f	68		         pla
.0870	28		         plp
.0871	ad 25 09	         lda sbit
.0874	20 bb 08	         jsr putahexdec
.0877			fptest
.0877	08		         php
.0878	48		         pha
.0879	a9 0d		         lda #$0d
.087b	20 d2 ff	         jsr chrout
.087e	68		         pla
.087f	28		         plp
.0880	a9 18		         lda #24
.0882	8d 9e cf	         sta loops
.0885	a0 a1		         ldy #$a1
.0887	a2 9e		         ldx #$9e
.0889	20 19 0a	         jsr yxtoptr
.088c	08		         php
.088d	48		         pha
.088e	a9 0d		         lda #$0d
.0890	20 d2 ff	         jsr chrout
.0893	68		         pla
.0894	28		         plp
.0895	20 20 0a	again    jsr ptrtoyx
.0898	a9 08		         lda #$08
.089a	20 b7 0a	         jsr bytestohex
.089d	08		         php
.089e	48		         pha
.089f	a9 0d		         lda #$0d
.08a1	20 d2 ff	         jsr chrout
.08a4	68		         pla
.08a5	28		         plp
.08a6	20 44 0a	         jsr incptr8
.08a9	ce 9e cf	         dec loops
.08ac	d0 e7		         bne again
.08ae	20 0a 0c	         jsr anykey
.08b1	08		         php
.08b2	48		         pha
.08b3	a9 0d		         lda #$0d
.08b5	20 d2 ff	         jsr chrout
.08b8	68		         pla
.08b9	28		         plp
.08ba	60		         rts
.08bb			putahexdec
.08bb	20 99 09	         jsr pushregs
.08be	08		         php
.08bf	48		         pha
.08c0	a9 9e		         lda #kjaune
.08c2	20 d2 ff	         jsr chrout
.08c5	68		         pla
.08c6	28		         plp
.08c7	20 79 0a	         jsr putahex
.08ca	08		         php
.08cb	48		         pha
.08cc	a9 20		         lda #$20
.08ce	20 d2 ff	         jsr chrout
.08d1	68		         pla
.08d2	28		         plp
.08d3	08		         php
.08d4	48		         pha
.08d5	a9 9f		         lda #kcyan
.08d7	20 d2 ff	         jsr chrout
.08da	68		         pla
.08db	28		         plp
.08dc	aa		         tax
.08dd	a9 00		         lda #$00
.08df	20 cd bd	         jsr fiaxtf1
.08e2	20 c7 09	         jsr popregs
.08e5	60		         rts
.08e6			calcdot
.08e6	20 2d 09	         jsr pushall
.08e9	98		         tya     ;y contien la ligne
.08ea	4a		         lsr a   ; on divise par 8
.08eb	4a		         lsr a
.08ec	4a		         lsr a
.08ed	8d 22 09	         sta row ; et on sauvegarde
.08f0	8a		         txa     ;x contien la colonne
.08f1	4a		         lsr a   ; on divise par 8
.08f2	4a		         lsr a
.08f3	4a		         lsr a
.08f4	8d 23 09	         sta col ; et on sauvegarde
.08f7	98		         tya     ; masque avec 7 donne
.08f8	29 07		         and #$07; la ligne caractere
.08fa	8d 24 09	         sta lin ; du pixel.
.08fd	8a		         txa     ;7-(x and 7) donne le
.08fe	29 07		         and #$07; no du bit de l'octet
.0900	8d 25 09	         sta sbit; du pixel.
.0903	a9 07		         lda #$07
.0905	38		         sec
.0906	ed 25 09	         sbc sbit
.0909	8d 25 09	         sta sbit
.090c	20 67 09	         jsr popall
.090f	60		         rts
.0910			floattest
.0910	08		         php
.0911	48		         pha
.0912	a9 07		         lda #$07
.0914	8d 86 02	         sta kcol
.0917	a0 37		         ldy #55
.0919	20 a2 b3	         jsr fiyytf1
.091c	20 e0 0b	         jsr prnfac1
.091f	68		         pla
.0920	28		         plp
.0921	60		         rts
>0922	00		row      .byte $00
>0923	00		col      .byte $00
>0924	00		lin      .byte $00
>0925	55		sbit     .byte $55
>0926	00 00		adrs     .word $00
>0928	00		counter  .byte $00
>0929	00 20		baseaddr .word $2000 ;8192
>092b	40 01		scrwidth .word $0140 ;320

;******  Processing file: l-push.asm

.092d			pushall
.092d	08		         php     ;s;p,pcl,pch
.092e	78		         sei
.092f	8d fe cf	         sta ra  ;save a
.0932	68		         pla     ;s:pcl,pch
.0933	8d ff cf	         sta rp  ;save rp
.0936	68		         pla     ;s:pch
.0937	8d f9 cf	         sta pc  ;save pcl
.093a	68		         pla     ;s:
.093b	8d fa cf	         sta pc+1;save pch
.093e	a5 fb		         lda $fb ;save fb
.0940	48		         pha     ;s:fb
.0941	a5 fc		         lda $fc ;save fc
.0943	48		         pha     ;s:fc,fb
.0944	a5 fd		         lda $fd ;save fd
.0946	48		         pha     ;s:fd,fc,fb
.0947	a5 fe		         lda $fe ;save fe
.0949	48		         pha     ;s:fe,fd,fc,fb
.094a	ad ff cf	         lda rp  ;save rp
.094d	48		         pha     ;s:rp,fe,fd,fc,fb
.094e	ad fe cf	         lda ra  ;save ra
.0951	48		         pha     ;s:ra,rp,fe,fd,fc,fb
.0952	8a		         txa     ;save rx
.0953	48		         pha     ;s:rx,ra,rp,fe-fb
.0954	98		         tya     ;save y
.0955	48		         pha     ;s:ry,rx,ra,rp,fe-fb
.0956	ad fa cf	         lda pc+1;replace l'adresse
.0959	48		         pha     ;s:pch,ry,rx,ra,...
.095a	ad f9 cf	         lda pc  ; de retour.
.095d	48		         pha     ;s:pcl,pch,ru,rx,ra,...
.095e	ad ff cf	         lda rp  ;place les flags
.0961	48		         pha     ; sur le stack.
.0962	ad fe cf	         lda ra  ;recupere ra
.0965	28		         plp     ;recupere les flags.
.0966	60		         rts
.0967			popall
.0967	78		         sei     ;s:pcl,pch,ry,rx,...
.0968	68		         pla     ;s:pch,ry,rx,ra,rp,...
.0969	8d f9 cf	         sta pc  ;sauve pcl
.096c	68		         pla     ;s:ry,rx,ra,rp,fe...fb
.096d	8d fa cf	         sta pc+1;sauve pch
.0970	68		         pla     ;s:rx,ra,rp,fe,fd,fc,fb
.0971	a8		         tay     ;recupere ry
.0972	68		         pla     ;s:ra,rp,fe,fd,fc,fb
.0973	aa		         tax     ;recupere rx
.0974	68		         pla     ;s:rp,fe,fd,fc,fb
.0975	8d fe cf	         sta ra  ;recupere ra
.0978	68		         pla     ;s:fe,fd,fc,fb
.0979	8d ff cf	         sta rp  ;recupere les flags.
.097c	68		         pla     ;s:fd,fc,fb
.097d	85 fe		         sta $fe ;reccupere fe
.097f	68		         pla     ;s:fc,fb
.0980	85 fd		         sta $fd ;recupere fd
.0982	68		         pla     ;s:fb
.0983	85 fc		         sta $fc ;recupere fc
.0985	68		         pla     ;s:
.0986	85 fb		         sta $fb ;recupere fb
.0988	ad fa cf	         lda pc+1;replaace l'adresse de
.098b	48		         pha     ;s:pch
.098c	ad f9 cf	         lda pc  ;retour sur la pile
.098f	48		         pha     ;s:pcl,pch
.0990	ad ff cf	         lda rp  ;recupere les flags
.0993	48		         pha     ;s:rp,pcl,pch
.0994	ad fe cf	         lda ra  ;recupere ra
.0997	28		         plp     ;s:pcl,pch
.0998	60		         rts
.0999			pushregs
.0999	08		         php     ;s;p,pcl,pch
.099a	78		         sei
.099b	8d fe cf	         sta ra  ;save a
.099e	68		         pla     ;s:pcl,pch
.099f	8d ff cf	         sta rp  ;save rp
.09a2	68		         pla     ;s:pch
.09a3	8d f9 cf	         sta pc  ;save pcl
.09a6	68		         pla     ;s:
.09a7	8d fa cf	         sta pc+1;save pch
.09aa	ad ff cf	         lda rp  ;save rp
.09ad	48		         pha     ;s:rp
.09ae	ad fe cf	         lda ra  ;save ra
.09b1	48		         pha     ;s:ra,rp
.09b2	8a		         txa     ;save rx
.09b3	48		         pha     ;s:rx,ra,rp
.09b4	98		         tya     ;save y
.09b5	48		         pha     ;s:ry,rx,ra,rp
.09b6	ad fa cf	         lda pc+1;replace l'adresse
.09b9	48		         pha     ;s:pch,ry,rx,ra,rp
.09ba	ad f9 cf	         lda pc  ; de retour.
.09bd	48		         pha     ;s:pcl,pch,ru,rx,ra,rp
.09be	ad ff cf	         lda rp  ;place les flags
.09c1	48		         pha     ; sur le stack.
.09c2	ad fe cf	         lda ra  ;recupere ra
.09c5	28		         plp     ;recupere les flags.
.09c6	60		         rts
.09c7			popregs
.09c7	78		         sei     ;s:pcl,pch,ry,rx,ra,rp
.09c8	68		         pla     ;s:pch,ry,rx,ra,rp
.09c9	8d f9 cf	         sta pc  ;sauve pcl
.09cc	68		         pla     ;s:ry,rx,ra,rp
.09cd	8d fa cf	         sta pc+1;sauve pch
.09d0	68		         pla     ;s:rx,ra,rp
.09d1	a8		         tay     ;recupere ry
.09d2	68		         pla     ;s:ra,rp
.09d3	aa		         tax     ;recupere rx
.09d4	68		         pla     ;s:rp
.09d5	8d fe cf	         sta ra  ;recupere ra
.09d8	68		         pla     ;s:
.09d9	8d ff cf	         sta rp  ;recupere les flags.
.09dc	ad fa cf	         lda pc+1;replaace l'adresse de
.09df	48		         pha     ;s:pch
.09e0	ad f9 cf	         lda pc  ;retour sur la pile
.09e3	48		         pha     ;s:pcl,pch
.09e4	ad ff cf	         lda rp  ;recupere les flags
.09e7	48		         pha     ;s:rp,pcl,pch
.09e8	ad fe cf	         lda ra  ;recupere ra
.09eb	28		         plp     ;s:pcl,pch
.09ec	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-mem.asm

.09ed			inczp1
.09ed	08		         php
.09ee	e6 fb		         inc zp1
.09f0	d0 02		         bne repzp1
.09f2	e6 fc		         inc zp1+1
.09f4	28		repzp1   plp
.09f5	60		         rts
.09f6			inczp2
.09f6	08		         php
.09f7	e6 fd		         inc zp2
.09f9	d0 02		         bne repzp2
.09fb	e6 fe		         inc zp2+1
.09fd	28		repzp2   plp
.09fe	60		         rts
.09ff			deczp1
.09ff	08		         php
.0a00	48		         pha
.0a01	a5 fb		         lda zp1
.0a03	d0 02		         bne noemp
.0a05	c6 fc		         dec zp1+1
.0a07	c6 fb		noemp    dec zp1
.0a09	68		         pla
.0a0a	28		         plp
.0a0b	60		         rts
.0a0c			deczp2
.0a0c	08		         php
.0a0d	48		         pha
.0a0e	a5 fd		         lda zp2
.0a10	d0 02		         bne noemp
.0a12	c6 fe		         dec zp2+1
.0a14	c6 fd		noemp    dec zp2
.0a16	68		         pla
.0a17	28		         plp
.0a18	60		         rts
.0a19			yxtoptr
.0a19	8c f8 cf	        sty memptr+1
.0a1c	8e f7 cf	        stx memptr
.0a1f	60		        rts
.0a20			ptrtoyx
.0a20	08		        php
.0a21	ac f8 cf	        ldy memptr+1
.0a24	ae f7 cf	        ldx memptr
.0a27	28		        plp
.0a28	60		        rts
.0a29			incptr
.0a29	08		        php
.0a2a	ee f7 cf	        inc memptr
.0a2d	d0 03		        bne norep
.0a2f	ee f8 cf	        inc memptr+1
.0a32	28		norep   plp
.0a33	60		        rts
.0a34			decptr
.0a34	08		        php
.0a35	48		        pha
.0a36	ad f7 cf	        lda memptr
.0a39	d0 03		        bne noemp
.0a3b	ee f8 cf	        inc memptr+1
.0a3e	ee f7 cf	noemp   inc memptr
.0a41	68		        pla
.0a42	28		        plp
.0a43	60		        rts
.0a44			incptr8
.0a44	08		        php
.0a45	48		        pha
.0a46	98		        tya
.0a47	48		        pha
.0a48	a0 08		        ldy #8
.0a4a	20 29 0a	again   jsr incptr
.0a4d	88		        dey
.0a4e	d0 fa		        bne again
.0a50	68		        pla
.0a51	a8		        tay
.0a52	68		        pla
.0a53	28		        plp
.0a54	60		        rts

;******  Return to file: prog.asm


;******  Processing file: l-conv.asm

.0a55			putyxhex
.0a55	20 2d 09	         jsr pushall
.0a58	98		         tya
.0a59	48		         pha
.0a5a	20 a5 0a	         jsr lsr4bits
.0a5d	20 ac 0a	         jsr nibtohex
.0a60	8d f1 cf	         sta hexstr+0
.0a63	68		         pla
.0a64	20 ac 0a	         jsr nibtohex
.0a67	8d f2 cf	         sta hexstr+1
.0a6a	8a		         txa
.0a6b	20 8a 0a	         jsr atohex
.0a6e	a2 f1		         ldx #<hexstr+0
.0a70	a0 cf		         ldy #>hexstr+0
.0a72	20 4d 0b	         jsr putsyx
.0a75	20 67 09	         jsr popall
.0a78	60		         rts
.0a79			putahex
.0a79	20 99 09	         jsr pushregs
.0a7c	20 8a 0a	         jsr atohex
.0a7f	a2 f3		         ldx #<hexstr+2
.0a81	a0 cf		         ldy #>hexstr+2
.0a83	20 4d 0b	         jsr putsyx
.0a86	20 c7 09	         jsr popregs
.0a89	60		         rts
.0a8a			atohex
.0a8a	08		         php
.0a8b	48		         pha
.0a8c	48		         pha
.0a8d	20 a5 0a	         jsr lsr4bits
.0a90	20 ac 0a	         jsr nibtohex
.0a93	8d f3 cf	         sta hexstr+2
.0a96	68		         pla
.0a97	20 ac 0a	         jsr nibtohex
.0a9a	8d f4 cf	         sta hexstr+3
.0a9d	a9 00		         lda #$00
.0a9f	8d f5 cf	         sta hexstr+4
.0aa2	68		         pla
.0aa3	28		         plp
.0aa4	60		         rts
.0aa5			lsr4bits
.0aa5	08		         php
.0aa6	4a		         lsr a
.0aa7	4a		         lsr a
.0aa8	4a		         lsr a
.0aa9	4a		         lsr a
.0aaa	28		         plp
.0aab	60		         rts
.0aac			nibtohex
.0aac	08		         php
.0aad	29 0f		         and #$0f
.0aaf	f8		         sed
.0ab0	18		         clc
.0ab1	69 90		         adc #$90
.0ab3	69 40		         adc #$40
.0ab5	28		         plp
.0ab6	60		         rts
.0ab7			bytestohex
.0ab7	20 2d 09	         jsr pushall
.0aba	84 fc		         sty zp1+1
.0abc	86 fb		         stx zp1
.0abe	08		         php
.0abf	48		         pha
.0ac0	a9 05		         lda #5
.0ac2	20 d2 ff	         jsr chrout
.0ac5	68		         pla
.0ac6	28		         plp
.0ac7	08		         php
.0ac8	48		         pha
.0ac9	a9 24		         lda #36
.0acb	20 d2 ff	         jsr chrout
.0ace	68		         pla
.0acf	28		         plp
.0ad0	20 55 0a	         jsr putyxhex   ; prn adresse
.0ad3	08		         php
.0ad4	48		         pha
.0ad5	a9 20		         lda #$20
.0ad7	20 d2 ff	         jsr chrout
.0ada	68		         pla
.0adb	28		         plp
.0adc	08		         php
.0add	48		         pha
.0ade	a9 9f		         lda #159
.0ae0	20 d2 ff	         jsr chrout
.0ae3	68		         pla
.0ae4	28		         plp
.0ae5	a0 00		         ldy #$00
.0ae7	aa		         tax
.0ae8	8c 38 0b	another  sty offset
.0aeb	b1 fb		         lda (zp1),y
.0aed	20 79 0a	         jsr putahex
.0af0	48		         pha
.0af1	20 10 0b	         jsr petsciiaddr
.0af4	68		         pla
.0af5	8d 00 04	petscii  sta $0400
.0af8	48		         pha
.0af9	a9 0d		         lda #$0d
.0afb	8d 00 d8	petcol   sta $d800
.0afe	68		         pla
.0aff	08		         php
.0b00	48		         pha
.0b01	a9 20		         lda #$20
.0b03	20 d2 ff	         jsr chrout
.0b06	68		         pla
.0b07	28		         plp
.0b08	c8		         iny
.0b09	ca		         dex
.0b0a	d0 dc		         bne another
.0b0c	20 67 09	         jsr popall
.0b0f	60		         rts
.0b10			petsciiaddr
.0b10	20 99 09	        jsr pushregs
.0b13	08		        php
.0b14	a4 d2		        ldy scrnlin+1
.0b16	a6 d1		        ldx scrnlin
.0b18	28		        plp
.0b19	a9 1f		        lda #31
.0b1b	18		        clc
.0b1c	6d 38 0b	        adc offset
.0b1f	20 a7 0c	        jsr addatoyx
.0b22	8c f7 0a	        sty petscii+2
.0b25	8e f6 0a	        stx petscii+1
.0b28	8e fc 0a	        stx petcol+1
.0b2b	98		        tya
.0b2c	29 fb		        and #%11111011 ;#%00000100
.0b2e	09 d8		        ora #$d8
.0b30	8d fd 0a	        sta petcol+2
.0b33	a8		        tay
.0b34	20 c7 09	        jsr popregs
.0b37	60		        rts
>0b38	00		offset  .byte $00

;******  Return to file: prog.asm


;******  Processing file: l-string.asm

.0b39			puts
.0b39	20 99 09	         jsr pushregs
.0b3c	a0 00		         ldy #$00   ; y = offset
.0b3e	b1 fb		nextc    lda ($fb),y;lit un caractere
.0b40	f0 07		         beq out    ;si 0 on sort
.0b42	20 d2 ff	         jsr chrout ;on l'affiche
.0b45	c8		         iny        ;pointe le prochain
.0b46	4c 3e 0b	         jmp nextc  ; et l'affiche
.0b49	20 c7 09	out      jsr popregs
.0b4c	60		         rts
.0b4d			putsyx
.0b4d	20 2d 09	         jsr pushall;sauve reg + zps
.0b50	86 fb		         stx $fb    ;$yyxx dans
.0b52	84 fc		         sty $fb+1  ; zp1
.0b54	20 39 0b	         jsr puts
.0b57	20 67 09	         jsr popall ;recup reg + zps
.0b5a	60		         rts
.0b5b			putsc
.0b5b	08		         php        ;flag sur stack
.0b5c	48		         pha        ;acc sur stack
.0b5d	48		         pha        ;sauvegarde acc
.0b5e	ad 86 02	         lda kcol   ;recup coul. carac.
.0b61	8d f6 cf	         sta curcol ; et la sauvegarde
.0b64	68		         pla        ;recup. acc
.0b65	8d 86 02	         sta kcol   ;place coul. voulue
.0b68	20 39 0b	         jsr puts   ;affiche la chaine
.0b6b	ad f6 cf	         lda curcol ;recup coul. carac.
.0b6e	8d 86 02	         sta kcol   ; et la replace
.0b71	68		         pla        ;recup acc
.0b72	28		         plp        ;recup flag
.0b73	60		         rts
.0b74			putxcxy
.0b74	08		         php       ;sauve registres
.0b75	48		         pha       ; ...
.0b76	48		         pha       ;sauve acc
.0b77	ad 86 02	         lda kcol  ;recup couleur carac.
.0b7a	8d f6 cf	         sta curcol; et sauvegarde
.0b7d	68		         pla       ;recup acc
.0b7e	8d 86 02	         sta kcol  ;place couleur carac.
.0b81	20 4d 0b	         jsr putsyx;affiche la chaine
.0b84	ad f6 cf	         lda curcol
.0b87	8d 86 02	         sta kcol
.0b8a	68		         pla
.0b8b	28		         plp
.0b8c	60		         rts
.0b8d			gotoxy
.0b8d	20 99 09	        jsr pushregs
.0b90	8a		        txa ; interchange x et y
.0b91	48		        pha ; ...
.0b92	98		        tya ; ...
.0b93	aa		        tax ; ...
.0b94	68		        pla ; ...
.0b95	a8		        tay ; ...
.0b96	c0 00		txlow   cpy #0
.0b98	10 02		        bpl txhigh
.0b9a	a2 00		        ldx #0
.0b9c	e0 28		txhigh  cpx #40
.0b9e	30 02		        bmi tylow
.0ba0	a2 27		        ldx #39
.0ba2	c0 00		tylow   cpy #0
.0ba4	10 02		        bpl tyhigh
.0ba6	a0 00		        ldy #0
.0ba8	c0 19		tyhigh  cpy #25
.0baa	30 02		        bmi allok
.0bac	a0 18		        ldy #24
.0bae	18		allok   clc
.0baf	20 f0 ff	        jsr plot
.0bb2	20 c7 09	        jsr popregs
.0bb5	60		        rts

;******  Return to file: prog.asm


;******  Processing file: l-float.asm

.0bb6			clrbasbuf
.0bb6	08		         php
.0bb7	48		         pha
.0bb8	98		         tya
.0bb9	48		         pha
.0bba	a9 00		         lda #$00
.0bbc	a0 59		         ldy #$59
.0bbe	99 00 02	again    sta $0200,y
.0bc1	88		         dey
.0bc2	d0 fa		         bne again
.0bc4	68		         pla
.0bc5	a8		         tay
.0bc6	68		         pla
.0bc7	28		         plp
.0bc8	60		         rts
.0bc9			getfac1
.0bc9	20 99 09	         jsr pushregs
.0bcc	20 b6 0b	         jsr clrbasbuf
.0bcf	20 f9 ab	         jsr prompt
.0bd2	86 7a		         stx $7a
.0bd4	84 7b		         sty $7b
.0bd6	20 73 00	         jsr chrget
.0bd9	20 f3 bc	         jsr fasctf1 ;conv. ascii->float
.0bdc	20 c7 09	         jsr popregs
.0bdf	60		         rts
.0be0			prnfac1
.0be0	20 99 09	         jsr pushregs
.0be3	20 dd bd	         jsr ff1tasc
.0be6	20 4d 0b	         jsr putsyx
.0be9	20 c7 09	         jsr popregs
.0bec	60		         rts
.0bed			prnfac2
.0bed	20 fc bb	         jsr ff2tf1
.0bf0	20 e0 0b	         jsr prnfac1
.0bf3	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-keyb.asm

.0bf4			clrkbbuf
.0bf4	08		            php
.0bf5	48		            pha
.0bf6	a9 00		            lda #0
.0bf8	85 c6		            sta 198
.0bfa	68		            pla
.0bfb	28		            plp
.0bfc	60		            rts
.0bfd			waitstop
.0bfd	08		          php    ;\ sauve les flags
.0bfe	48		          pha    ;/  et l'acc.
.0bff	20 f4 0b	          jsr clrkbbuf
.0c02	20 e1 ff	wait      jsr stop    ; Veri [run/stop]
.0c05	d0 fb		          bne  wait   ;loop pas pesee.
.0c07	68		          pla    ;\ recup. acc et
.0c08	28		          plp    ;/  les flags.
.0c09	60		          rts
.0c0a			anykey
.0c0a	08		        php     ;\ sauve les flags
.0c0b	48		        pha     ;/  et l'acc.
.0c0c	20 f4 0b	        jsr clrkbbuf
.0c0f	a5 cb		wait    lda 203 ;lit la matrice de
.0c11	c9 40		        cmp #64 ; si 64 alors aucune
.0c13	f0 fa		        beq wait; on attend qu'il y
.0c15	20 1e 0c	        jsr kbfree ; on attend que
.0c18	20 f4 0b	        jsr clrkbbuf
.0c1b	68		        pla     ;\ recup. l'acc et
.0c1c	28		        plp     ;/  les flags.
.0c1d	60		        rts
.0c1e			kbfree
.0c1e	08		            php     ;\ sauve les flags
.0c1f	48		            pha     ;/  et l'acc.
.0c20	a5 cb		wait        lda 203 ;lit la matrice de
.0c22	c9 40		            cmp #64 ; si 64 alors aucune
.0c24	d0 fa		            bne wait;on attend qu'il y
.0c26	68		            pla     ;\ recup. l'acc et
.0c27	28		            plp     ;/  les flags.
.0c28	60		            rts
.0c29			getkey
.0c29	08		            php     ; sauve les flags.
.0c2a	20 e4 ff	try         jsr getin ;tente de lire
.0c2d	c9 00		            cmp #0  ; 0 si aucune.
.0c2f	f0 f9		            beq try ; aucune, on attend.
.0c31	28		            plp     ; recup. les flags.
.0c32	60		            rts
.0c33			waitkey
.0c33	08		            php      ;\ sauve les flags
.0c34	48		            pha      ;/  et l'acc.
.0c35	8d 4f 0c	            sta clef ; sauve cle voulue.
.0c38	20 f4 0b	            jsr clrkbbuf
.0c3b	20 e4 ff	wait        jsr getin; tente lire clef.
.0c3e	cd 4f 0c	            cmp clef ;compare avec clef
.0c41	d0 f8		            bne wait ;pas la bonne.
.0c43	68		            pla      ;\ recup. l'acc et
.0c44	28		            plp      ;/  les flags.
.0c45	60		            rts
.0c46			waitspace
.0c46	a9 20		            lda #$20
.0c48	20 33 0c	            jsr waitkey
.0c4b	20 f4 0b	            jsr clrkbbuf
.0c4e	60		            rts
>0c4f	00		clef        .byte   0

;******  Return to file: prog.asm


;******  Processing file: l-bitmap.asm

.0c50			bmapinit
.0c50	08		         php
.0c51	48		         pha
.0c52	ad 18 d0	         lda vic+$18
.0c55	09 08		         ora #$08
.0c57	8d 18 d0	         sta vic+$18
.0c5a	ad 11 d0	         lda vic+$11
.0c5d	09 20		         ora #$20
.0c5f	8d 11 d0	         sta vic+$11
.0c62	68		         pla
.0c63	28		         plp
.0c64	60		         rts
.0c65			bmapclr
.0c65	20 2d 09	         jsr pushall
.0c68	a9 00		         lda #<vidstart
.0c6a	85 fb		         sta zp1
.0c6c	a9 20		         lda #>vidstart
.0c6e	85 fc		         sta zp1+1
.0c70	a0 00		         ldy #$00
.0c72	a9 00		more     lda #$00
.0c74	91 fb		         sta (zp1),y
.0c76	20 ed 09	         jsr inczp1
.0c79	a5 fc		         lda zp1+1
.0c7b	c9 3f		         cmp #$3f
.0c7d	d0 f3		         bne more
.0c7f	a5 fb		         lda zp1
.0c81	c9 3f		         cmp #$3f
.0c83	d0 ed		         bne more
.0c85	20 67 09	         jsr popall
.0c88	60		         rts
.0c89			bmpfillbk
.0c89	20 2d 09	         jsr pushall
.0c8c	a9 00		         lda #<bakmem
.0c8e	85 fb		         sta zp1
.0c90	a9 04		         lda #>bakmem
.0c92	85 fc		         sta zp1+1
.0c94	a2 08		         ldx #$08
.0c96	a0 00		         ldy #$00
.0c98	a9 01		         lda #$01
.0c9a	91 fb		more     sta (zp1),y
.0c9c	20 ed 09	         jsr inczp1
.0c9f	e4 fc		         cpx zp1+1
.0ca1	d0 f7		         bne more
.0ca3	20 67 09	         jsr popall
.0ca6	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-math.asm

.0ca7			addatoyx
.0ca7	08		        php
.0ca8	48		        pha
.0ca9	8c c5 0c	        sty reponse+1
.0cac	8e c4 0c	        stx reponse
.0caf	18		        clc
.0cb0	6d c4 0c	        adc reponse
.0cb3	90 03		        bcc norep
.0cb5	ee c5 0c	        inc reponse+1
.0cb8	8d c4 0c	norep   sta reponse
.0cbb	ac c5 0c	        ldy reponse+1
.0cbe	ae c4 0c	        ldx reponse
.0cc1	68		        pla
.0cc2	28		        plp
.0cc3	60		        rts
>0cc4	00 00		reponse .word $00

;******  Return to file: prog.asm


;******  End of listing
