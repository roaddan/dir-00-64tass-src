
; 64tass Turbo Assembler Macro V1.52.1237? listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib -i -L j2tester.txt -o j2tester.prg j2tester.asm
; Fri May 30 00:56:02 2025

;Offset	;Hex		;Source

;******  Processing input file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/header-c64.asm

>0801	29 08		bcmd1          .word bcmd2         ;Adresse de la commande basic suivante.
>0803	01 00		               .word 1             ;Numero de la ligne Basic.
>0805	8f		               .byte $8F           ;Le token de la commande REM du Basic
>0806	2a 50 52 4f	               .text "*programmation assembleur sur c64*"
>080a	47 52 41 4d 4d 41 54 49 4f 4e 20 41 53 53 45 4d
>081a	42 4c 45 55 52 20 53 55 52 20 43 36 34 2a
>0828	00		               .byte $00           ;Un zéro pour indiquer la fin de cette
>0829	44 08		bcmd2          .word bcmd3         ;Adresse de la commande basic suivante.
>082b	02 00		               .word 2             ;Numero de la ligne Basic.
>082d	8f		               .byte $8F           ;Le token de la commande REM du Basic
>082e	2a 50 41 52	               .text "*par daniel lafrance*"
>0832	20 44 41 4e 49 45 4c 20 4c 41 46 52 41 4e 43 45
>0842	2a
>0843	00		               .byte $00           ;Un zéro pour indiquer la fin de cette
>0844	4f 08		bcmd3          .word bcmd4         ;Adresse de la commande basic suivante.
>0846	03 00		               .word 3             ;Numero de la ligne Basic.
>0848	9e		               .byte $9e           ;Le token de la commande PRINT du Basic
>0849	30 32 31 32	               .text format("%05d",hpgmstart)
>084d	39
>084e	00		               .byte $00           ;Un zéro pour indiquer la fin de cette
>084f	00 00		bcmd4          .word $0000         ;L'adresse de la commande Basic suivante.
.0851	4c 54 08	hpgmstart     jmp   main           ; Le programme principale doit s'appeler "main"

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/macros-64tass.asm


;******  Return to file: j2tester.asm

.0854			main
.0854	20 a4 c5	               jsr  scrmaninit
.0857	20 b0 0a	               jsr  js_init
.085a	a9 80		               lda  #$80
.085c	8d 90 c5	               sta  curcol
.085f	a9 00		               lda  #0
.0861	8d 21 d0	               sta  vicback0col
.0864	a9 02		               lda  #vrouge
.0866	8d 91 c5	               sta  brdcol
.0869	8d 20 d0	               sta  vicbordcol
.086c	20 34 c6	               jsr  cls
.086f	a9 20		               lda  #$20
.0871	09 00		               ora  #%00000000
.0873	a0 04		               ldy  #$04
.0875	a2 04		               ldx  #$04
.0877	20 f0 c2	               jsr  memfill
.087a	a9 00		               lda  #$00
.087c	a0 d8		               ldy  #$d8
.087e	20 f0 c2	               jsr  memfill
.0881	20 27 0f	               jsr  sprt_init
.0884	20 91 c6	goagain        jsr  setinverse
.0887	20 82 c2	               jsr  pushreg
.088a	a2 6f		               ldx  #<bstring1
.088c	a0 09		               ldy  #>bstring1
.088e	20 3e c7	               jsr  putscxy
.0891	20 b1 c2	               jsr  popreg
.0894	20 82 c2	               jsr  pushreg
.0897	a2 9c		               ldx  #<bstring2
.0899	a0 09		               ldy  #>bstring2
.089b	20 3e c7	               jsr  putscxy
.089e	20 b1 c2	               jsr  popreg
.08a1	20 82 c2	               jsr  pushreg
.08a4	a2 c9		               ldx  #<bstring3
.08a6	a0 09		               ldy  #>bstring3
.08a8	20 3e c7	               jsr  putscxy
.08ab	20 b1 c2	               jsr  popreg
.08ae	20 82 c2	               jsr  pushreg
.08b1	a2 f6		               ldx  #<bstring4
.08b3	a0 09		               ldy  #>bstring4
.08b5	20 3e c7	               jsr  putscxy
.08b8	20 b1 c2	               jsr  popreg
.08bb	20 9b c6	               jsr  clrinverse
.08be	20 82 c2	               jsr  pushreg
.08c1	a2 0d		               ldx  #<js_status1
.08c3	a0 0a		               ldy  #>js_status1
.08c5	20 3e c7	               jsr  putscxy
.08c8	20 b1 c2	               jsr  popreg
.08cb	20 82 c2	               jsr  pushreg
.08ce	a2 25		               ldx  #<js_status2
.08d0	a0 0a		               ldy  #>js_status2
.08d2	20 3e c7	               jsr  putscxy
.08d5	20 b1 c2	               jsr  popreg
.08d8	20 82 c2	               jsr  pushreg
.08db	a2 3c		               ldx  #<js_status3
.08dd	a0 0a		               ldy  #>js_status3
.08df	20 3e c7	               jsr  putscxy
.08e2	20 b1 c2	               jsr  popreg
.08e5	20 82 c2	               jsr  pushreg
.08e8	a2 55		               ldx  #<js_status4
.08ea	a0 0a		               ldy  #>js_status4
.08ec	20 3e c7	               jsr  putscxy
.08ef	20 b1 c2	               jsr  popreg
.08f2	20 82 c2	               jsr  pushreg
.08f5	a2 6e		               ldx  #<js_status5
.08f7	a0 0a		               ldy  #>js_status5
.08f9	20 3e c7	               jsr  putscxy
.08fc	20 b1 c2	               jsr  popreg
.08ff	20 82 c2	               jsr  pushreg
.0902	a2 84		               ldx  #<js_status6
.0904	a0 0a		               ldy  #>js_status6
.0906	20 3e c7	               jsr  putscxy
.0909	20 b1 c2	               jsr  popreg
.090c	20 82 c2	               jsr  pushreg
.090f	a2 00		               ldx  #$00
.0911	a0 0f		               ldy  #$0f
.0913	20 01 c7	               jsr  gotoxy
.0916	20 b1 c2	               jsr  popreg
.0919	a9 07		               lda  #vjaune
.091b	20 6d c7	               jsr  setcurcol
.091e	a2 00		               ldx  #$00
.0920	20 82 c7	               jsr  setbkcol
.0923	20 c5 0a	looper         jsr  js_scan        ; ****** Un prob avec j2scan.
.0926	4c 26 09	INFINIE        jmp  INFINIE          ; Un branchement infinie.
.0929	20 d0 0c	               jsr  js_showvals
.092c	20 f3 0d	               jsr  js_updatecurs
.092f	20 b9 0f	               jsr  sprt_move
.0932	a2 16		               ldx  #$16
.0934	a0 11		               ldy  #$11
.0936	20 01 c7	               jsr  gotoxy
.0939	a9 03		               lda  #3
.093b	20 6d c7	               jsr  setcurcol
.093e	ad 98 0e	               lda  js_2fire
.0941	f0 e0		               beq  looper
.0943	ad 97 0e	               lda  js_2y
.0946	c9 04		               cmp  #$04
.0948	d0 1d		               bne  nochange
.094a	ad 96 0e	               lda  js_2x
.094d	c9 0b		               cmp  #$0b
.094f	30 16		               bmi  nochange
.0951	c9 1d		               cmp  #$1d
.0953	10 12		               bpl  nochange
.0955	ee 82 0f	               inc  sprt_ptr
.0958	ad 82 0f	               lda  sprt_ptr
.095b	c9 09		               cmp  #9
.095d	90 02		               bcc  drawsptr
.095f	a9 00		               lda  #$00
.0961	8d 82 0f	drawsptr       sta  sprt_ptr
.0964	20 27 0f	               jsr  sprt_init
.0967	4c 23 09	nochange       jmp  looper
.096a	20 e1 ff	out            jsr  kstop
.096d	60		               rts
>096e	00		onebyte        .byte     0
>096f	0e 40 00 00	bstring1       .byte     vbleu1,bkcol1,0,0
>0973	20 20 20 20	               .text     "      Visualisation du port jeu #2      "
>0977	20 20 56 09 13 15 01 0c 09 13 01 14 09 0f 0e 20
>0987	04 15 20 10 0f 12 14 20 0a 05 15 20 23 32 20 20
>0997	20 20 20 20
>099b	00		               .byte     0
>099c	0b 80 00 01	bstring2       .byte     vgris,bkcol2,0,1
>09a0	20 50 12 0f	               .text     " Programme assembleur pour 6510 sur C64 "
>09a4	07 12 01 0d 0d 05 20 01 13 13 05 0d 02 0c 05 15
>09b4	12 20 10 0f 15 12 20 36 35 31 30 20 13 15 12 20
>09c4	43 36 34 20
>09c8	00		               .byte     0
>09c9	0a c0 00 02	bstring3       .byte     vrose,bkcol3,0,2
>09cd	20 20 20 20	               .text     "     par Daniel Lafrance (2024-06) C    "
>09d1	20 10 01 12 20 44 01 0e 09 05 0c 20 4c 01 06 12
>09e1	01 0e 03 05 20 28 32 30 32 34 2d 30 36 29 20 43
>09f1	20 20 20 20
>09f5	00		               .byte     0
>09f6	07 c0 0b 04	bstring4       .byte     vjaune,bkcol3,11,4
>09fa	20 43 08 01	               .text     " Changer pointeur "
>09fe	0e 07 05 12 20 10 0f 09 0e 14 05 15 12 20
>0a0c	00		               .byte     0
>0a0d	0d 00 13 16	js_status1     .byte     vvert1,bkcol0,19,22
>0a11	20 20 20 15	               .text     "   up <----1> haut "
>0a15	10 20 3c 2d 2d 2d 2d 31 3e 20 08 01 15 14 20
>0a24	00		               .byte     0
>0a25	0e 00 13 15	js_status2     .byte     vbleu1,bkcol0,19,21
>0a29	20 04 0f 17	               .text     " down <---2-> bas "
>0a2d	0e 20 3c 2d 2d 2d 32 2d 3e 20 02 01 13 20
>0a3b	00		               .byte     0
>0a3c	0a 00 13 14	js_status3     .byte     vrose,bkcol0,19,20
>0a40	20 0c 05 06	               .text     " left <--4--> gauche"
>0a44	14 20 3c 2d 2d 34 2d 2d 3e 20 07 01 15 03 08 05
>0a54	00		               .byte     0
>0a55	07 00 13 13	js_status4     .byte     vjaune,bkcol0,19,19
>0a59	12 09 07 08	               .text     "right <-8---> droite"
>0a5d	14 20 3c 2d 38 2d 2d 2d 3e 20 04 12 0f 09 14 05
>0a6d	00		               .byte     0
>0a6e	01 00 13 12	js_status5     .byte     vblanc,bkcol0,19,18
>0a72	20 46 09 12	               .text     " Fire <1----> Feu"
>0a76	05 20 3c 31 2d 2d 2d 2d 3e 20 46 05 15
>0a83	00		               .byte     0
>0a84	03 00 01 17	js_status6     .byte     vcyan,bkcol0,1,23
>0a88	2b 2d 3e 20	               .text     "+-> Etat de JS2:     %---FRLDU EOR #$1F"
>0a8c	45 14 01 14 20 04 05 20 4a 53 32 3a 20 20 20 20
>0a9c	20 25 2d 2d 2d 46 52 4c 44 55 20 45 4f 52 20 23
>0aac	24 31 46
>0aaf	00		               .byte     0

;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-c64-joystick.asm

=$dc00			js_2port       =    $dc00          ; CIA #1 Port data A
=$dc01			js_1port       =    $dc01          ; CIA #1 Port data B
=$dc02			js_2dir        =    $dc02          ; CIA #1 Port de direction A
=$dc03			js_1dir        =    $dc03          ; CIA #1 port de direction B
=2			js_xoffset     =    2
=2			js_yoffset     =    2
=0			js_location    =    0
.0ab0			js_init
.0ab0	08		               php                 ; Sauvegarde le registre de
.0ab1	48		               pha                 ;   status et le registre a.
.0ab2	ad 03 dc	               lda  js_1dir        ; Place les bits de direction du port B
.0ab5	29 e0		               and  #$e0           ; 4-0 en entrées (0).
.0ab7	8d 03 dc	               sta  js_1dir
.0aba	ad 02 dc	               lda  js_2dir        ; Place les bits de direction du port A
.0abd	29 e0		               and  #$e0           ; 4-0 en entrées (0).
.0abf	8d 02 dc	               sta  js_2dir
.0ac2	68		               pla                 ; Récupère le registre a et
.0ac3	28		               plp                 ;   le registre de status.
.0ac4	60		               rts
.0ac5			js_scan
.0ac5	20 cc 0a	               jsr  js_1scan       ; Scan la manette du port B.
.0ac8	20 84 0b	               jsr  js_2scan       ; Scan la manette du port A.
.0acb	60		               rts
.0acc			js_1scan
.0acc	20 82 c2	               jsr  pushreg        ; Sauvegarde tous les registres.
.0acf	ad 01 dc	               lda  js_1port       ; Lecture du port d'entrées
.0ad2	29 1f		               and  #$1f           ; Masque les bits 7, 6 et 5.
.0ad4	48		               pha                 ; Copie sur la pile.
.0ad5	49 1f		               eor  #$1f           ; Inverse tous les bits.
.0ad7	8d 25 0f	               sta  js_1status     ; Sauvegarde le status.
.0ada	68		               pla                 ; Récupère une copie originale.
.0adb	c9 00		               cmp  #$00           ; Si les bits sont tous 0
.0add	d0 03		               bne  p1scan         ; On scan le port
.0adf	4c 73 0b	               jmp  port1_out
.0ae2	49 1f		p1scan         eor  #$1f
.0ae4	18		               clc
.0ae5	4a		js_1b0         lsr                 ; On decale js_2 bit 0 dans C
.0ae6	90 14		               bcc  js_1b1         ; Est-ce vers le haut (U)
.0ae8	48		               pha                 ; On stock la valeur
.0ae9	ee 8e 0e	               inc  js_1flag
.0aec	ad 8a 0e	               lda  js_1pixy       ; Oui!
.0aef	38		               sec                 ; On place la Carry a 1
.0af0	e9 02		               sbc  #js_yoffset    ; On reduit
.0af2	c9 f0		               cmp  #$f0
.0af4	90 02		               bcc  sto1ym
.0af6	a9 00		               lda  #$00
.0af8	8d 8a 0e	sto1ym         sta  js_1pixy       ; le y
.0afb	68		               pla                 ; On recupere la valeur
.0afc	4a		js_1b1         lsr                 ; On decale js_2 bit 0 dans C
.0afd	90 14		               bcc  js_1b2         ; Est-ce vers le bas (D)
.0aff	48		               pha                 ; On stack la valeur
.0b00	ee 8e 0e	               inc  js_1flag
.0b03	ad 8a 0e	               lda  js_1pixy       ; Oui!
.0b06	18		               clc                 ; On place la Carry a 0
.0b07	69 02		               adc  #js_yoffset    ; On augmente
.0b09	c9 c7		               cmp  #199
.0b0b	90 02		               bcc  sto1yp
.0b0d	a9 c7		               lda  #199
.0b0f	8d 8a 0e	sto1yp         sta  js_1pixy       ; le y
.0b12	68		               pla                 ; On recupere la valeur
.0b13	4a		js_1b2         lsr                 ; On decale js_1 bit 0 dans C
.0b14	90 20		               bcc  js_1b3         ; Est-ce vers la gauche (L)
.0b16	48		               pha                 ; On stack la valeur
.0b17	ee 8e 0e	               inc  js_1flag
.0b1a	ad 88 0e	               lda  js_1pixx       ; Oui!
.0b1d	0d 89 0e	               ora  js_1pixx+1
.0b20	f0 13		               beq  js_1b2out
.0b22	38		               sec                 ; On place la Carry a 1
.0b23	ad 88 0e	               lda  js_1pixx       ; Oui!
.0b26	e9 02		               sbc  #js_xoffset    ; On diminue
.0b28	8d 88 0e	               sta  js_1pixx       ; le X
.0b2b	b0 08		               bcs  js_1b2out      ; de offset
.0b2d	ad 89 0e	               lda  js_1pixx+1
.0b30	f0 03		               beq  js_1b2out
.0b32	ce 89 0e	               dec  js_1pixx+1     ; sur 16 bits
.0b35	68		js_1b2out      pla                 ; On recupere la valeur
.0b36	4a		js_1b3         lsr                 ; On decale js_1 bit 0 dans C
.0b37	90 22		               bcc  js_1b4         ; Est-ce vers la droite (R)
.0b39	48		               pha                 ; On stack la valeur
.0b3a	ee 8e 0e	               inc  js_1flag
.0b3d	ad 89 0e	               lda  js_1pixx+1
.0b40	f0 0a		               beq  incj1x
.0b42	ad 88 0e	               lda  js_1pixx
.0b45	c9 3c		               cmp  #$40-4
.0b47	30 03		               bmi  incj1x
.0b49	4c 5a 0b	               jmp  js_1b3out
.0b4c	18		incj1x         clc                 ; On place la Carry a 0
.0b4d	ad 88 0e	               lda  js_1pixx
.0b50	69 02		               adc  #js_xoffset    ; On augmente
.0b52	8d 88 0e	               sta  js_1pixx       ; le X
.0b55	90 03		               bcc  js_1b3out      ; de offset
.0b57	ee 89 0e	               inc  js_1pixx+1     ; sur 16 bits
.0b5a	68		js_1b3out      pla                 ; On recupere la valeur
.0b5b	68		js_1b4         pla                 ; On recupere la valeur
.0b5c	4a		               lsr                 ; Est-ce le bbouton fire (F)
.0b5d	90 14		               bcc  port1_out      ; Oui!
.0b5f	ee 8e 0e	               inc  js_1flag
.0b62	ee 8d 0e	               inc  js_1fire       ; On augmente le nombre de tir
.0b65	a2 01		js_1wait       ldx  #$01
.0b67	a0 ff		               ldy  #$ff
.0b69	c8		js_1rel        iny
.0b6a	ad 01 dc	               lda  js_1port
.0b6d	49 ff		               eor  #$ff
.0b6f	29 10		               and  #$10
.0b71	d0 f6		               bne  js_1rel        ; On attend le relachement des boutons.
.0b73	ad 8e 0e	port1_out      lda  js_1flag
.0b76	f0 08		               beq  out
.0b78	20 66 0c	               jsr  js_1correct
.0b7b	a9 00		               lda  #0
.0b7d	8d 8e 0e	               sta  js_1flag
.0b80	20 b1 c2	out            jsr  popreg         ; Récupère tous les registres.
.0b83	60		               rts
.0b84			js_2scan
.0b84	20 82 c2	               jsr  pushreg        ; Sauvegarde tous les registres.
.0b87	ad 00 dc	port2          lda  js_2port       ; Lecture du port d'entrées.
.0b8a	29 1f		               and  #$1f           ; Masque les bits 7, 6 et 5.
.0b8c	49 1f		               eor  #$1f           ; Inverse les bits 4 à 0.
.0b8e	8d 26 0f	               sta  js_2status     ; Sauvegarde le status en mémoire.
.0b91	c9 00		               cmp  #$00           ; Si des interrupteurs sont appuyé ...
.0b93	d0 03		               bne  p2scan         ; ... on cherche lesquels.
.0b95	4c 3c 0c	               jmp  port2_out      ; Si non on sort.
.0b98	ee 99 0e	p2scan         inc  js_2flag       ; On incrémente le témoin de changement.
.0b9b	18		               clc                 ; On met le Carry à 0.
.0b9c	4a		js_2b0         lsr                 ; On decale js_2 bit 0 dans Carry.
.0b9d	48		               pha                 ; On stack la valeur décalée.
.0b9e	90 0f		               bcc  js_2b1         ; Si pas BTNUP, on vérifi le prochain.
.0ba0	ad 95 0e	               lda  js_2pixy       ; Oui!
.0ba3	38		               sec                 ; On place la Carry a 1.
.0ba4	e9 02		               sbc  #js_yoffset    ; Déplace le crs vrs le haut de offset.
.0ba6	c9 f0		               cmp  #$f0           ; Si posy plus basse que Viewport NTSC ...
.0ba8	90 02		               bcc  sto2ym         ; Si le crs dépasse le bas du viewport ...
.0baa	a9 00		               lda  #$00           ; On le replace en haut.
.0bac	8d 95 0e	sto2ym         sta  js_2pixy       ; Sauvegarde La pos. pixel de Y.
.0baf	68		js_2b1         pla                 ; On recupere la valeur du scan décalé.
.0bb0	4a		               lsr                 ; On decale js_2 bit 0 dans Carry.
.0bb1	48		               pha                 ; On stack la valeur décalée.
.0bb2	90 0f		               bcc  js_2b2         ; Si pas BTN-BAS, on vérifi le prochain.
.0bb4	ad 95 0e	               lda  js_2pixy       ; Oui!
.0bb7	18		               clc                 ; On place la Carry a 0.
.0bb8	69 02		               adc  #js_yoffset    ; Déplace le crs vrs le bas de offset.
.0bba	c9 c7		               cmp  #199           ; Sommes nous dépassé le bas de l'écran?
.0bbc	90 02		               bcc  sto2yp         ; Non, on sauvegarde la position.
.0bbe	a9 c7		               lda  #199           ; Oui,
.0bc0	8d 95 0e	sto2yp         sta  js_2pixy       ; On bloque le Y à 199.
.0bc3	68		js_2b2         pla                 ; On recupere la valeur du scan décalé.
.0bc4	4a		               lsr                 ; On decale js_2 bit 0 dans C
.0bc5	48		               pha                 ; On stack la valeur décalée.
.0bc6	90 1b		               bcc  js_2b3         ; Est-ce le bouton gauche (L)
.0bc8	ad 93 0e	               lda  js_2pixx       ; Oui!
.0bcb	0d 94 0e	               ora  js_2pixx+1
.0bce	f0 13		               beq  js_2b2out
.0bd0	38		               sec                 ; On place la Carry a 1
.0bd1	ad 93 0e	               lda  js_2pixx       ; Oui!
.0bd4	e9 02		               sbc  #js_xoffset    ; On diminue
.0bd6	8d 93 0e	               sta  js_2pixx       ;  le X
.0bd9	b0 08		               bcs  js_2b2out      ; de offset
.0bdb	ad 94 0e	               lda  js_2pixx+1
.0bde	f0 03		               beq  js_2b2out
.0be0	ce 94 0e	               dec  js_2pixx+1     ; sur 16 bits
.0be3			js_2b2out
.0be3	68		js_2b3         pla                 ; On recupere la valeur du scan décalé.
.0be4	4a		               lsr                 ; On decale js_2 bit 0 dans C
.0be5	48		               pha                 ; On stack la valeur décalée.
.0be6	90 1d		               bcc  js_2b4         ; Est-ce vers la droite (R)
.0be8	ad 94 0e	               lda  js_2pixx+1
.0beb	f0 0a		               beq  incj2x
.0bed	ad 93 0e	               lda  js_2pixx
.0bf0	c9 3e		               cmp  #$40-js_xoffset
.0bf2	30 03		               bmi  incj2x
.0bf4	4c 05 0c	               jmp  js_2b3out
.0bf7	18		incj2x         clc                 ; On place la Carry a 0
.0bf8	ad 93 0e	               lda  js_2pixx       ; Oui!
.0bfb	69 02		               adc  #js_xoffset    ; On augmente
.0bfd	8d 93 0e	               sta  js_2pixx       ;   le X
.0c00	90 03		               bcc  js_2b3out      ; de offset
.0c02	ee 94 0e	               inc  js_2pixx+1     ; sur 16 bits
.0c05			js_2b3out
.0c05	68		js_2b4         pla                 ; On recupere la valeur du scan décalé.
.0c06	4a		               lsr                 ;Estce le bbouton fire (F)
.0c07	90 33		               bcc  port2_out      ;Oui!
.0c09	ee 98 0e	               inc  js_2fire       ; On augmente le nombre de tir
.0c0c	a9 01		               lda  #%00000001
.0c0e	8d 9d 0e	               sta  js_2events
.0c11	ad 93 0e	               lda  js_2pixx
.0c14	8d 9a 0e	               sta  js_2clickx
.0c17	ad 94 0e	               lda  js_2pixx+1
.0c1a	8d 9b 0e	               sta  js_2clickx+1
.0c1d	ad 95 0e	               lda  js_2pixy
.0c20	8d 9c 0e	               sta  js_2clicky
.0c23	ad ff 0e	               lda  js_2val16a+1
.0c26	49 40		               eor  #%01000000
.0c28	8d ff 0e	               sta  js_2val16a+1
.0c2b	a2 00		js_2wait       ldx  #$00
.0c2d	a0 ff		               ldy  #$ff
.0c2f	c8		js_2rel        iny
.0c30	d0 01		               bne  sr1
.0c32	e8		               inx
.0c33	ad 00 dc	sr1            lda  js_2port
.0c36	49 ff		               eor  #$ff
.0c38	29 10		               and  #$10
.0c3a	d0 f3		               bne  js_2rel        ; On attend le relachement du bouton FEU.
.0c3c			port2_out
.0c3c	20 9b 0c	               jsr  js_2correct
.0c3f	a9 00		               lda  #0
.0c41	8d 99 0e	               sta  js_2flag
.0c44	20 b1 c2	out            jsr  popreg         ; Récupère tous les registres.
.0c47			js_corrector
.0c47	08		               php
.0c48	48		               pha
.0c49	ad 8e 0e	               lda  js_1flag
.0c4c	f0 08		               beq  check2
.0c4e	20 66 0c	               jsr  js_1correct
.0c51	a9 00		               lda  #0
.0c53	8d 8e 0e	               sta  js_1flag
.0c56	ad 99 0e	check2         lda  js_2flag
.0c59	f0 08		               beq  no_update
.0c5b	20 9b 0c	               jsr  js_2correct
.0c5e	a9 00		               lda  #0
.0c60	8d 99 0e	               sta  js_2flag
.0c63	68		no_update      pla
.0c64	28		               plp
.0c65	60		               rts
.0c66			js_1correct
.0c66	08		               php
.0c67	48		               pha
.0c68	ad 88 0e	               lda  js_1pixx
.0c6b	8d 99 0c	               sta  vallsb
.0c6e	ad 89 0e	               lda  js_1pixx+1
.0c71	6a		               ror                 ; ex = %0000000100000001 = 257 pixel
.0c72	6e 99 0c	               ror  vallsb         ; Cnnnnnnn      On divise par 8 pc les
.0c75	4e 99 0c	               lsr  vallsb         ; 0Cnnnnnn      caracteres de 8 pixels
.0c78	4e 99 0c	               lsr  vallsb         ; 00Cnnnnn
.0c7b	ad 99 0c	               lda  vallsb         ; devient = %00100000 = 32
.0c7e	8d 8b 0e	               sta  js_1x
.0c81	ad 8a 0e	               lda  js_1pixy
.0c84	8d 99 0c	               sta  vallsb
.0c87	4e 99 0c	               lsr  vallsb         ; Cnnnnnnn     On divise par 8 pc les
.0c8a	4e 99 0c	               lsr  vallsb         ; 0Cnnnnnn     caracteres de 8 pixels
.0c8d	4e 99 0c	               lsr  vallsb         ; 00Cnnnnn
.0c90	ad 99 0c	               lda  vallsb         ; devient = %00100000 = 32
.0c93	8d 8c 0e	               sta  js_1y
.0c96	68		               pla
.0c97	28		               plp
.0c98	60		               rts
>0c99	00		vallsb          .byte     0
>0c9a	00		regx            .byte     0
.0c9b			js_2correct
.0c9b	08		               php
.0c9c	48		               pha
.0c9d	ad 93 0e	               lda  js_2pixx
.0ca0	8d ce 0c	               sta  vallsb
.0ca3	ad 94 0e	               lda  js_2pixx+1
.0ca6	6a		               ror                 ; ex = %0000000100000001 = 257 pixel
.0ca7	6e ce 0c	               ror  vallsb         ; Cnnnnnnn     On divise par 8 pc les
.0caa	4e ce 0c	               lsr  vallsb         ; 0Cnnnnnn     caracteres de 8 pixels
.0cad	4e ce 0c	               lsr  vallsb         ; 00Cnnnnn
.0cb0	ad ce 0c	               lda  vallsb         ; devient = %00100000 = 32
.0cb3	8d 96 0e	               sta  js_2x
.0cb6	ad 95 0e	               lda  js_2pixy
.0cb9	8d ce 0c	               sta  vallsb
.0cbc	4e ce 0c	               lsr  vallsb         ; Cnnnnnnn     On divise par 8 pc les
.0cbf	4e ce 0c	               lsr  vallsb         ; 0Cnnnnnn     caracteres de 8 pixels
.0cc2	4e ce 0c	               lsr  vallsb         ; 00Cnnnnn
.0cc5	ad ce 0c	               lda  vallsb         ; devient = %00100000 = 32
.0cc8	8d 97 0e	               sta  js_2y
.0ccb	68		               pla
.0ccc	28		               plp
.0ccd	60		               rts
>0cce	00		vallsb          .byte     0
>0ccf	00		regx            .byte     0
.0cd0			js_showvals
.0cd0	20 60 0d	               jsr  js_2showvals
.0cd3	60		               rts
.0cd4			js_1showvals
.0cd4	20 82 c2	               jsr  pushreg        ; Sauvegarde tous les registres.
.0cd7	ad 8b 0e	               lda  js_1x
.0cda	20 a0 c4	               jsr  atohex
.0cdd	ad 40 c4	               lda  a2hexstr+1
.0ce0	8d b1 0e	               sta  js_1val8+19
.0ce3	ad 41 c4	               lda  a2hexstr+2
.0ce6	8d b2 0e	               sta  js_1val8+20
.0ce9	ad 88 0e	               lda  js_1pixx
.0cec	20 a0 c4	               jsr  atohex
.0cef	ad 40 c4	               lda  a2hexstr+1
.0cf2	8d d0 0e	               sta  js_1val16+14
.0cf5	ad 41 c4	               lda  a2hexstr+2
.0cf8	8d d1 0e	               sta  js_1val16+15
.0cfb	ad 89 0e	               lda  js_1pixx+1
.0cfe	20 a0 c4	               jsr  atohex
.0d01	ad 40 c4	               lda  a2hexstr+1
.0d04	8d ce 0e	               sta  js_1val16+12
.0d07	ad 41 c4	               lda  a2hexstr+2
.0d0a	8d cf 0e	               sta  js_1val16+13
.0d0d	ad 8c 0e	               lda  js_1y
.0d10	20 a0 c4	               jsr  atohex
.0d13	ad 40 c4	               lda  a2hexstr+1
.0d16	8d b5 0e	               sta  js_1val8+23
.0d19	ad 41 c4	               lda  a2hexstr+2
.0d1c	8d b6 0e	               sta  js_1val8+24
.0d1f	ad 8a 0e	               lda  js_1pixy
.0d22	20 a0 c4	               jsr  atohex
.0d25	ad 40 c4	               lda  a2hexstr+1
.0d28	8d d6 0e	               sta  js_1val16+20
.0d2b	ad 41 c4	               lda  a2hexstr+2
.0d2e	8d d7 0e	               sta  js_1val16+21
.0d31	a9 00		               lda  #0
.0d33	20 a0 c4	               jsr  atohex
.0d36	ad 40 c4	               lda  a2hexstr+1
.0d39	8d d4 0e	               sta  js_1val16+18
.0d3c	ad 41 c4	               lda  a2hexstr+2
.0d3f	8d d5 0e	               sta  js_1val16+19
.0d42	ad 8d 0e	               lda  js_1fire
.0d45	20 a0 c4	               jsr  atohex
.0d48	ad 41 c4	               lda  a2hexstr+2
.0d4b	8d bf 0e	               sta  js_1val8+33
.0d4e	a2 9e		               ldx  #<js_1val8
.0d50	a0 0e		               ldy  #>js_1val8
.0d52	20 3e c7	               jsr  putscxy
.0d55	a2 c2		               ldx  #<js_1val16
.0d57	a0 0e		               ldy  #>js_1val16
.0d59	20 3e c7	               jsr  putscxy
.0d5c	20 b1 c2	out            jsr  popreg         ; Récupère tous les registres.
.0d5f	60		               rts
.0d60			js_2showvals
.0d60	20 82 c2	               jsr  pushreg        ; Sauvegarde tous les registres.
.0d63	ad 96 0e	               lda  js_2x
.0d66	20 a0 c4	               jsr  atohex
.0d69	ad 3f c4	               lda  a2hexstr
.0d6c	8d ed 0e	               sta  js_2val8+19
.0d6f	ad 40 c4	               lda  a2hexstr+1
.0d72	8d ee 0e	               sta  js_2val8+20
.0d75	ad 9a 0e	               lda  js_2clickx
.0d78	20 a0 c4	               jsr  atohex
.0d7b	ad 3f c4	               lda  a2hexstr
.0d7e	8d 1b 0f	               sta  js_2val16+14
.0d81	ad 40 c4	               lda  a2hexstr+1
.0d84	8d 1c 0f	               sta  js_2val16+15
.0d87	ad 9b 0e	               lda  js_2clickx+1
.0d8a	20 a0 c4	               jsr  atohex
.0d8d	ad 3f c4	               lda  a2hexstr
.0d90	8d 19 0f	               sta  js_2val16+12
.0d93	ad 40 c4	               lda  a2hexstr+1
.0d96	8d 1a 0f	               sta  js_2val16+13
.0d99	ad 97 0e	               lda  js_2y
.0d9c	20 a0 c4	               jsr  atohex
.0d9f	ad 3f c4	               lda  a2hexstr
.0da2	8d f1 0e	               sta  js_2val8+23
.0da5	ad 40 c4	               lda  a2hexstr+1
.0da8	8d f2 0e	               sta  js_2val8+24
.0dab	ad 9c 0e	               lda  js_2clicky
.0dae	20 a0 c4	               jsr  atohex
.0db1	ad 3f c4	               lda  a2hexstr
.0db4	8d 21 0f	               sta  js_2val16+20
.0db7	ad 40 c4	               lda  a2hexstr+1
.0dba	8d 22 0f	               sta  js_2val16+21
.0dbd	a9 00		               lda  #0
.0dbf	20 a0 c4	               jsr  atohex
.0dc2	ad 3f c4	               lda  a2hexstr
.0dc5	8d 1f 0f	               sta  js_2val16+18
.0dc8	ad 40 c4	               lda  a2hexstr+1
.0dcb	8d 20 0f	               sta  js_2val16+19
.0dce	ad 98 0e	               lda  js_2fire
.0dd1	20 a0 c4	               jsr  atohex
.0dd4	ad 40 c4	               lda  a2hexstr+1
.0dd7	8d fb 0e	               sta  js_2val8+33
.0dda	a2 da		               ldx  #<js_2val8
.0ddc	a0 0e		               ldy  #>js_2val8
.0dde	20 3e c7	               jsr  putscxy
.0de1	a2 fe		               ldx  #<js_2val16a
.0de3	a0 0e		               ldy  #>js_2val16a
.0de5	20 3e c7	               jsr  putscxy
.0de8	a2 0d		               ldx  #<js_2val16
.0dea	a0 0f		               ldy  #>js_2val16
.0dec	20 3e c7	               jsr  putscxy
.0def	20 b1 c2	out            jsr  popreg         ; Récupère tous les registres.
.0df2	60		               rts
.0df3			js_updatecurs
.0df3	20 82 c2	               jsr  pushreg        ; Sauvegarde tous les registres.
.0df6	ad 96 0e	running        lda  js_2x
.0df9	cd 82 0e	               cmp  js_x
.0dfc	f0 06		               beq     chky
.0dfe	8d 82 0e	               sta  js_x
.0e01	ee 55 0e	               inc     flag
.0e04	ad 97 0e	chky           lda  js_2y
.0e07	cd 83 0e	               cmp  js_y
.0e0a	f0 06		               beq     chkflag
.0e0c	8d 83 0e	               sta  js_y
.0e0f	ee 55 0e	               inc     flag
.0e12	ad 55 0e	chkflag        lda  flag
.0e15	f0 1e		               beq     showit
.0e17	ae 84 0e	               ldx  js_oldx
.0e1a	ac 85 0e	               ldy  js_oldy
.0e1d	20 56 0e	               jsr  js_eoraddrxy
.0e20	ae 82 0e	               ldx  js_x
.0e23	ac 83 0e	               ldy  js_y
.0e26	20 56 0e	               jsr  js_eoraddrxy
.0e29	ad 82 0e	               lda  js_x
.0e2c	8d 84 0e	               sta  js_oldx
.0e2f	ad 83 0e	               lda  js_y
.0e32	8d 85 0e	               sta  js_oldy
.0e35	a9 00		showit         lda  #0
.0e37	8d 55 0e	               sta  flag
.0e3a	8d 2e c4	               sta  addr1
.0e3d	a9 04		               lda  #$04
.0e3f	8d 2f c4	               sta  addr1+1
.0e42	ae 82 0e	               ldx  js_x
.0e45	ac 83 0e	               ldy  js_y
.0e48	20 df c3	               jsr  xy2addr
.0e4b	ac 30 c4	               ldy  addr2
.0e4e	ae 31 c4	               ldx  addr2+1
.0e51	20 b1 c2	out            jsr  popreg         ; Récupère tous les registres.
.0e54	60		               rts
>0e55	00		flag            .byte   0
.0e56			js_eoraddrxy
.0e56	20 14 c2	               jsr  pushall
.0e59	20 c1 c3	               jsr  savezp2
.0e5c	a9 04		               lda  #$04
.0e5e	8d 2f c4	               sta  addr1+1
.0e61	a9 00		               lda  #0
.0e63	8d 2e c4	               sta  addr1
.0e66	20 df c3	               jsr  xy2addr
.0e69	ac 30 c4	               ldy  addr2
.0e6c	84 fd		               sty  zpage2
.0e6e	ae 31 c4	               ldx  addr2+1
.0e71	86 fe		               stx  zpage2+1
.0e73	a0 00		               ldy  #0
.0e75	b1 fd		               lda  (zpage2),y
.0e77	49 40		               eor     #%01000000
.0e79	91 fd		               sta  (zpage2),y
.0e7b	20 d0 c3	               jsr  restzp2
.0e7e	20 4f c2	               jsr  popall
.0e81	60		               rts
>0e82	00		js_x           .byte   0
>0e83	00		js_y           .byte   0
>0e84	ff		js_oldx        .byte   $ff
>0e85	ff		js_oldy        .byte   $ff
>0e86	00		js_oldcar      .byte   0
>0e87	00		js_oldcol      .byte   0
>0e88	00 00		js_1pixx       .word   0
>0e8a	00		js_1pixy       .byte   0
>0e8b	00		js_1x          .byte   0
>0e8c	00		js_1y          .byte   0
>0e8d	00		js_1fire       .byte   0
>0e8e	00		js_1flag       .byte   0
>0e8f	00 00		js_1clickx     .word   0
>0e91	00		js_1clicky     .byte   0
>0e92	00		js_1events     .byte   0
>0e93	00 00		js_2pixx       .word   0
>0e95	00		js_2pixy       .byte   0
>0e96	00		js_2x          .byte   0
>0e97	00		js_2y          .byte   0
>0e98	00		js_2fire       .byte   0
>0e99	00		js_2flag       .byte   0
>0e9a	00 00		js_2clickx     .word   0
>0e9c	00		js_2clicky     .byte   0
>0e9d	00		js_2events     .byte   0
=$03			js_txtcol      =       vcyan
=$00			js_txtbak      =       bkcol0
>0e9e	03 00 04 05	js_1val8       .byte     js_txtcol,js_txtbak,4,5
>0ea2	50 0f 12 14	               .null     "Port 1 (x,y):($00,$00) Fire:(0)"
>0ea6	20 31 20 28 18 2c 19 29 3a 28 24 30 30 2c 24 30
>0eb6	30 29 20 46 09 12 05 3a 28 30 29 00
>0ec2	03 00 0b 07	js_1val16      .byte     js_txtcol,js_txtbak,11,7
>0ec6	28 18 2c 19	               .null     "(x,y):($0000,$0000)"
>0eca	29 3a 28 24 30 30 30 30 2c 24 30 30 30 30 29 00
>0eda	03 00 04 0a	js_2val8       .byte     js_txtcol,js_txtbak,4,10
>0ede	43 01 12 50	               .null     "CarPos (x,y):($00,$00) Fire:(0)"
>0ee2	0f 13 20 28 18 2c 19 29 3a 28 24 30 30 2c 24 30
>0ef2	30 29 20 46 09 12 05 3a 28 30 29 00
>0efe	01 00 04 0c	js_2val16a     .byte     vblanc,js_txtbak,4,12
>0f02	43 0c 09 03	               .null     "Click pos."
>0f06	0b 20 10 0f 13 2e 00
>0f0d	03 00 10 0c	js_2val16      .byte     js_txtcol,js_txtbak,16,12
>0f11	28 18 2c 19	               .null     "(x,y):($0000,$0000)"
>0f15	29 3a 28 24 30 30 30 30 2c 24 30 30 30 30 29 00
>0f25	00		js_1status     .byte 0
>0f26	00		js_2status     .byte 0

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-c64-spriteman.asm

.0f27			sprt_init
.0f27	20 14 c2	               jsr  pushall
.0f2a	ac 4d 13	               ldy  sprt_ptr6+1
.0f2d	ae 4c 13	               ldx  sprt_ptr6
.0f30	ad 82 0f	               lda  sprt_ptr
.0f33	20 64 10	               jsr  sprt_loadptr
.0f36	20 a3 c3	               jsr  savezp1
.0f39	20 c1 c3	               jsr  savezp2
.0f3c	ad 15 d0	               lda  vic+$15 ; enable sprite 2
.0f3f	09 04		               ora  #%00000100
.0f41	8d 15 d0	               sta  vic+$15
.0f44	a9 0d		               lda  #$0d
.0f46	8d fa 07	               sta  $7fa
.0f49	ad 40 13	               lda  sprt_ptr0
.0f4c	85 fb		               sta  zpage1
.0f4e	ad 41 13	               lda  sprt_ptr0+1
.0f51	85 fc		               sta  zpage1+1
.0f53	a9 40		               lda  #$40
.0f55	85 fd		               sta  zpage2
.0f57	a9 03		               lda  #$03
.0f59	85 fe		               sta  zpage2+1
.0f5b	a0 41		               ldy  #65
.0f5d	b1 fb		               lda  (zpage1),y      ; sprite y offset
.0f5f	8d a7 10	               sta  sprt_yoffset
.0f62	88		               dey
.0f63	b1 fb		               lda  (zpage1),y      ; sprite x offset
.0f65	8d a6 10	               sta  sprt_xoffset
.0f68	88		               dey
.0f69	b1 fb		               lda  (zpage1),y      ; sprite color
.0f6b	8d 29 d0	               sta  $d029
.0f6e	88		               dey
.0f6f	a0 3e		               ldy  #62
.0f71	b1 fb		nextbyte       lda  (zpage1),y
.0f73	91 fd		               sta  (zpage2),y
.0f75	88		               dey
.0f76	d0 f9		               bne  nextbyte
.0f78	20 b2 c3	               jsr  restzp1
.0f7b	20 d0 c3	               jsr  restzp2
.0f7e	20 4f c2	               jsr  popall
.0f81	60		               rts
>0f82	01		sprt_ptr       .byte   $01
.0f83			sprt_calcpos
.0f83	20 82 c2	               jsr  pushreg
.0f86	a9 00		               lda  #0
.0f88	8d a9 10	               sta  sprt_x+1
.0f8b	8d ab 10	               sta  sprt_y+1
.0f8e	ad 94 0e	               lda  js_2pixx+1
.0f91	18		               clc
.0f92	2a		               rol
.0f93	2a		               rol
.0f94	8d a9 10	               sta  sprt_x+1
.0f97	ad 93 0e	               lda  js_2pixx
.0f9a	18		               clc
.0f9b	6d a6 10	               adc  sprt_xoffset
.0f9e	8d a8 10	               sta  sprt_x
.0fa1	90 08		               bcc  norepx
.0fa3	ad a9 10	               lda  sprt_x+1
.0fa6	09 04		               ora  #$04
.0fa8	8d a9 10	               sta  sprt_x+1
.0fab	ad 95 0e	norepx         lda  js_2pixy
.0fae	18		               clc
.0faf	6d a7 10	               adc  sprt_yoffset
.0fb2	8d aa 10	               sta  sprt_y
.0fb5	20 b1 c2	               jsr  popreg
.0fb8	60		               rts
.0fb9			sprt_move
.0fb9	20 82 c2	               jsr  pushreg
.0fbc	20 83 0f	               jsr  sprt_calcpos
.0fbf	ad a8 10	               lda  sprt_x
.0fc2	8d 04 d0	               sta  vic+$04
.0fc5	ad a9 10	               lda  sprt_x+1
.0fc8	8d 10 d0	               sta  vic+$10
.0fcb	ad aa 10	               lda  sprt_y
.0fce	8d 05 d0	               sta  vic+$05
.0fd1	20 d8 0f	               jsr  sprt_showpos
.0fd4	20 b1 c2	               jsr  popreg
.0fd7	60		               rts
.0fd8			sprt_showpos
.0fd8	20 14 c2	               jsr  push
.0fdb	ad a8 10	               lda  sprt_x
.0fde	20 a0 c4	               jsr  atohex
.0fe1	ad 3f c4	               lda  a2hexstr
.0fe4	8d 6f 13	               sta  sprite_pos+26
.0fe7	ad 40 c4	               lda  a2hexstr+1
.0fea	8d 70 13	               sta  sprite_pos+27
.0fed	ad a9 10	               lda  sprt_x+1
.0ff0	20 a0 c4	               jsr  atohex
.0ff3	ad 3f c4	               lda  a2hexstr
.0ff6	8d 6d 13	               sta  sprite_pos+24
.0ff9	ad 40 c4	               lda  a2hexstr+1
.0ffc	8d 6e 13	               sta  sprite_pos+25
.0fff	ad aa 10	               lda  sprt_y
.1002	20 a0 c4	               jsr  atohex
.1005	ad 3f c4	               lda  a2hexstr
.1008	8d 75 13	               sta  sprite_pos+32
.100b	ad 40 c4	               lda  a2hexstr+1
.100e	8d 76 13	               sta  sprite_pos+33
.1011	a9 00		               lda  #0
.1013	20 a0 c4	               jsr  atohex
.1016	ad 3f c4	               lda  a2hexstr
.1019	8d 73 13	               sta  sprite_pos+30
.101c	ad 40 c4	               lda  a2hexstr+1
.101f	8d 74 13	               sta  sprite_pos+31
.1022	a2 55		               ldx  #<sprite_pos
.1024	a0 13		               ldy  #>sprite_pos
.1026	20 3e c7	               jsr  putscxy
.1029	20 4f c2	               jsr  pop
.102c	60		               rts
.102d			sprt_loadptr2
.102d	20 14 c2	               jsr  push
.1030	aa		               tax
.1031	8e 82 0f	               stx  sprt_ptr
.1034	ad 41 13	               lda  sprt_ptr0+1
.1037	8d 63 10	               sta  calcbuff+1
.103a	ad 40 13	               lda  sprt_ptr0
.103d	8d 62 10	               sta  calcbuff
.1040	e0 00		               cpx  #0
.1042	f0 11		               beq  addrok
.1044	ad 62 10	               lda  calcbuff
.1047	18		nextx          clc
.1048	69 42		               adc  #66
.104a	90 03		               bcc  nocarry
.104c	ee 63 10	               inc  calcbuff+1
.104f	8d 62 10	nocarry        sta  calcbuff
.1052	ca		               dex
.1053	d0 f2		               bne  nextx
.1055	ac 63 10	addrok         ldy  calcbuff+1
.1058	ae 62 10	               ldx  calcbuff
.105b	20 7e 10	               jsr  sprt_setimage
.105e	20 4f c2	               jsr  pop
.1061	60		               rts
>1062	00 00		calcbuff        .word   $0
.1064			sprt_loadptr
.1064	20 14 c2	               jsr  push
.1067	ad 82 0f	               lda  sprt_ptr
.106a	18		               clc
.106b	2a		               rol
.106c	a8		               tay
.106d	b9 40 13	               lda  sprt_ptr0,y
.1070	aa		               tax
.1071	b9 41 13	               lda  sprt_ptr0+1,y
.1074	a8		               tay
.1075	20 7e 10	               jsr  sprt_setimage
.1078	20 4f c2	               jsr  pop
.107b	60		               rts
>107c	00 00		calcbuff        .word   $0
.107e			sprt_setimage
.107e	20 14 c2	               jsr  push
.1081	20 a3 c3	               jsr  savezp1
.1084	20 c1 c3	               jsr  savezp2
.1087	84 fc		               sty  zpage1+1
.1089	86 fb		               stx  zpage1
.108b	a0 10		               ldy  #>sprt_image
.108d	84 fe		               sty  zpage2+1
.108f	a0 ac		               ldy  #<sprt_image
.1091	84 fd		               sty  zpage2
.1093	a0 42		               ldy  #66
.1095	b1 fb		nextbyte       lda  (zpage1),y
.1097	91 fd		               sta  (zpage2),y
.1099	88		               dey
.109a	d0 f9		               bne  nextbyte
.109c	20 d0 c3	               jsr  restzp2
.109f	20 b2 c3	               jsr  restzp1
.10a2	20 4f c2	               jsr  pop
.10a5	60		               rts
>10a6	00		sprt_xoffset   .byte     $00
>10a7	00		sprt_yoffset   .byte     $00
>10a8	00 00		sprt_x         .word     $0000
>10aa	00 00		sprt_y         .word     $0000
>10ac			sprt_image      .fill    66
>10ee	00 00 00 00	sprt_crxair    .byte     $00, $00, $00, $00, $00, $00 ; 6
>10f2	00 00
>10f4	00 66 00 00	               .byte     $00, $66, $00, $00, $3c, $00 ; 12
>10f8	3c 00
>10fa	00 18 00 00	               .byte     $00, $18, $00, $00, $00, $00 ; 18
>10fe	00 00
>1100	00 00 00 00	               .byte     $00, $00, $00, $00, $18, $00 ; 24
>1104	18 00
>1106	80 00 01 c0	               .byte     $80, $00, $01, $c0, $18, $03 ; 30
>110a	18 03
>110c	66 66 66 c0	               .byte     $66, $66, $66, $c0, $18, $03 ; 36
>1110	18 03
>1112	80 00 01 00	               .byte     $80, $00, $01, $00, $18, $00 ; 42
>1116	18 00
>1118	00 00 00 00	               .byte     $00, $00, $00, $00, $00, $00 ; 48
>111c	00 00
>111e	00 18 00 00	               .byte     $00, $18, $00, $00, $3c, $00 ; 54
>1122	3c 00
>1124	00 66 00 00	               .byte     $00, $66, $00, $00, $00, $00 ; 60
>1128	00 00
>112a	00 00 00 01	               .byte     $00, $00, $00, $01, $0c, $28 ; 66,
>112e	0c 28
>1130	80 00 00 e0	sprt_mouse     .byte     $80, $00, $00, $e0, $00, $00 ; 6
>1134	00 00
>1136	b8 00 00 ce	               .byte     $b8, $00, $00, $ce, $00, $00 ; 12
>113a	00 00
>113c	83 80 00 c0	               .byte     $83, $80, $00, $c0, $e0, $00 ; 18
>1140	e0 00
>1142	80 18 00 c0	               .byte     $80, $18, $00, $c0, $3c, $00 ; 24
>1146	3c 00
>1148	80 e0 00 c0	               .byte     $80, $e0, $00, $c0, $60, $00 ; 30
>114c	60 00
>114e	98 30 00 fc	               .byte     $98, $30, $00, $fc, $18, $00 ; 36
>1152	18 00
>1154	c6 0c 00 03	               .byte     $c6, $0c, $00, $03, $06, $00 ; 42
>1158	06 00
>115a	01 9c 00 00	               .byte     $01, $9c, $00, $00, $f0, $00 ; 48
>115e	f0 00
>1160	00 40 00 00	               .byte     $00, $40, $00, $00, $00, $00 ; 54
>1164	00 00
>1166	00 00 00 00	               .byte     $00, $00, $00, $00, $00, $00 ; 60
>116a	00 00
>116c	00 00 00 01	               .byte     $00, $00, $00, $01, $18, $31 ; 66
>1170	18 31
>1172	00 7c 00 01	sprt_pointer   .byte     $00, $7c, $00, $01, $83, $00 ; 6
>1176	83 00
>1178	06 10 c0 08	               .byte     $06, $10, $c0, $08, $00, $30 ; 12
>117c	00 30
>117e	12 10 88 20	               .byte     $12, $10, $88, $20, $00, $08 ; 18
>1182	00 08
>1184	40 ba 04 40	               .byte     $40, $ba, $04, $40, $6c, $04 ; 24
>1188	6c 04
>118a	80 c6 02 aa	               .byte     $80, $c6, $02, $aa, $82, $aa ; 30
>118e	82 aa
>1190	80 c6 02 40	               .byte     $80, $c6, $02, $40, $6c, $04 ; 36
>1194	6c 04
>1196	40 ba 04 20	               .byte     $40, $ba, $04, $20, $00, $08 ; 42
>119a	00 08
>119c	12 10 90 08	               .byte     $12, $10, $90, $08, $00, $20 ; 48
>11a0	00 20
>11a2	06 10 c0 01	               .byte     $06, $10, $c0, $01, $83, $00 ; 54
>11a6	83 00
>11a8	00 7c 00 00	               .byte     $00, $7c, $00, $00, $00, $00 ; 60
>11ac	00 00
>11ae	00 00 00 01	               .byte     $00, $00, $00, $01, $0c, $28 ; 66
>11b2	0c 28
>11b4	55 55 55 aa	sprt_pointer2  .byte     $55, $55, $55, $aa, $aa, $aa ; 6
>11b8	aa aa
>11ba	55 55 55 aa	               .byte     $55, $55, $55, $aa, $aa, $aa ; 12
>11be	aa aa
>11c0	55 55 55 aa	               .byte     $55, $55, $55, $aa, $aa, $aa ; 18
>11c4	aa aa
>11c6	54 00 55 aa	               .byte     $54, $00, $55, $aa, $00, $2a ; 24
>11ca	00 2a
>11cc	54 00 55 aa	               .byte     $54, $00, $55, $aa, $00, $2a ; 30
>11d0	00 2a
>11d2	54 00 55 aa	               .byte     $54, $00, $55, $aa, $00, $2a ; 36
>11d6	00 2a
>11d8	54 00 55 aa	               .byte     $54, $00, $55, $aa, $00, $2a ; 42
>11dc	00 2a
>11de	54 00 55 aa	               .byte     $54, $00, $55, $aa, $aa, $aa ; 48
>11e2	aa aa
>11e4	55 55 55 aa	               .byte     $55, $55, $55, $aa, $aa, $aa ; 54
>11e8	aa aa
>11ea	55 55 55 aa	               .byte     $55, $55, $55, $aa, $aa, $aa ; 60
>11ee	aa aa
>11f0	55 55 55 01	               .byte     $55, $55, $55, $01, $0c, $28 ; 66
>11f4	0c 28
>11f6	06 00 00 0f	sprt_hand      .byte     $06, $00, $00, $0f, $00, $00 ; 6
>11fa	00 00
>11fc	19 80 00 10	               .byte     $19, $80, $00, $10, $80, $00 ; 12
>1200	80 00
>1202	19 80 00 16	               .byte     $19, $80, $00, $16, $b1, $8c ; 18
>1206	b1 8c
>1208	10 ca 52 10	               .byte     $10, $ca, $52, $10, $84, $21 ; 24
>120c	84 21
>120e	10 84 21 30	               .byte     $10, $84, $21, $30, $84, $21 ; 30
>1212	84 21
>1214	50 84 21 90	               .byte     $50, $84, $21, $90, $84, $21 ; 36
>1218	84 21
>121a	90 00 01 90	               .byte     $90, $00, $01, $90, $00, $01 ; 42
>121e	00 01
>1220	90 7f c1 90	               .byte     $90, $7f, $c1, $90, $00, $01 ; 48
>1224	00 01
>1226	40 ff e2 40	               .byte     $40, $ff, $e2, $40, $00, $02 ; 54
>122a	00 02
>122c	3c 00 04 02	               .byte     $3c, $00, $04, $02, $00, $08 ; 60
>1230	00 08
>1232	03 ff f8 01	               .byte     $03, $ff, $f8, $01, $12, $31 ; 66
>1236	12 31
>1238	00 3e 00 01	sprt_ultraman  .byte     $00, $3e, $00, $01, $c1, $c0 ; 6
>123c	c1 c0
>123e	0e 3e 30 08	               .byte     $0e, $3e, $30, $08, $41, $08 ; 12
>1242	41 08
>1244	10 1c 04 10	               .byte     $10, $1c, $04, $10, $22, $04 ; 18
>1248	22 04
>124a	24 1c 12 23	               .byte     $24, $1c, $12, $23, $00, $62 ; 24
>124e	00 62
>1250	20 08 02 47	               .byte     $20, $08, $02, $47, $c1, $f1 ; 30
>1254	c1 f1
>1256	6a aa ab 47	               .byte     $6a, $aa, $ab, $47, $c9, $f1 ; 36
>125a	c9 f1
>125c	20 08 02 20	               .byte     $20, $08, $02, $20, $14, $02 ; 42
>1260	14 02
>1262	20 00 02 10	               .byte     $20, $00, $02, $10, $00, $04 ; 48
>1266	00 04
>1268	10 7f 04 08	               .byte     $10, $7f, $04, $08, $00, $08 ; 54
>126c	00 08
>126e	06 3e 30 01	               .byte     $06, $3e, $30, $01, $c1, $c0 ; 60
>1272	c1 c0
>1274	00 3e 00 01	               .byte     $00, $3e, $00, $01, $0c, $28 ; 66
>1278	0c 28
>127a	00 1c 00 00	sprt_male      .byte     $00, $1c, $00, $00, $3e, $00 ; 6
>127e	3e 00
>1280	00 3e 00 00	               .byte     $00, $3e, $00, $00, $3e, $00 ; 12
>1284	3e 00
>1286	00 1c 00 00	               .byte     $00, $1c, $00, $00, $08, $00 ; 18
>128a	08 00
>128c	00 ff 80 00	               .byte     $00, $ff, $80, $00, $ff, $80 ; 24
>1290	ff 80
>1292	00 be 80 00	               .byte     $00, $be, $80, $00, $9c, $80 ; 30
>1296	9c 80
>1298	00 88 80 00	               .byte     $00, $88, $80, $00, $be, $80 ; 36
>129c	be 80
>129e	00 be 80 01	               .byte     $00, $be, $80, $01, $9c, $c0 ; 42
>12a2	9c c0
>12a4	01 94 c0 00	               .byte     $01, $94, $c0, $00, $14, $00 ; 48
>12a8	14 00
>12aa	00 14 00 00	               .byte     $00, $14, $00, $00, $14, $00 ; 54
>12ae	14 00
>12b0	00 36 00 00	               .byte     $00, $36, $00, $00, $77, $00 ; 60
>12b4	77 00
>12b6	00 77 00 01	               .byte     $00, $77 ,$00, $01, $0c, $2f ; 66
>12ba	0c 2f
>12bc	00 3c 00 00	sprt_robot     .byte     $00, $3c, $00, $00, $24, $00 ; 6
>12c0	24 00
>12c2	00 66 18 00	               .byte     $00, $66, $18, $00, $66, $38 ; 12
>12c6	66 38
>12c8	00 24 38 00	               .byte     $00, $24, $38, $00, $3c, $10 ; 18
>12cc	3c 10
>12ce	00 18 10 00	               .byte     $00, $18, $10, $00, $18, $10 ; 24
>12d2	18 10
>12d4	0f ff f0 08	               .byte     $0f, $ff, $f0, $08, $7e, $00 ; 30
>12d8	7e 00
>12da	08 7e 00 08	               .byte     $08, $7e, $00, $08, $18, $00 ; 36
>12de	18 00
>12e0	1c 18 00 1c	               .byte     $1c, $18, $00, $1c, $18, $00 ; 42
>12e4	18 00
>12e6	18 3c 00 00	               .byte     $18, $3c, $00, $00, $3c, $00 ; 48
>12ea	3c 00
>12ec	00 24 00 00	               .byte     $00, $24, $00, $00, $24, $00 ; 54
>12f0	24 00
>12f2	00 24 00 03	               .byte     $00, $24, $00, $03, $e7, $c0 ; 60
>12f6	e7 c0
>12f8	03 e7 c0 01	               .byte     $03, $e7, $c0, $01, $0c, $28 ; 66
>12fc	0c 28
>12fe	00 1c 00 00	sprt_femme     .byte     $00, $1c, $00, $00, $3e, $00 ; 6
>1302	3e 00
>1304	00 3e 00 00	               .byte     $00, $3e, $00, $00, $3e, $00 ; 12
>1308	3e 00
>130a	00 1c 00 00	               .byte     $00, $1c, $00, $00, $08, $00 ; 18
>130e	08 00
>1310	00 7f 00 00	               .byte     $00, $7f, $00, $00, $ff, $80 ; 24
>1314	ff 80
>1316	00 be 80 00	               .byte     $00, $be, $80, $00, $9c, $80 ; 30
>131a	9c 80
>131c	00 88 80 00	               .byte     $00, $88, $80, $00, $9c, $80 ; 36
>1320	9c 80
>1322	00 be 80 01	               .byte     $00, $be, $80, $01, $be, $c0 ; 42
>1326	be c0
>1328	01 be c0 00	               .byte     $01, $be, $c0, $00, $7f, $00 ; 48
>132c	7f 00
>132e	00 7f 00 00	               .byte     $00, $7f, $00, $00, $ff, $80 ; 54
>1332	ff 80
>1334	00 36 00 00	               .byte     $00, $36, $00, $00, $77, $00 ; 60
>1338	77 00
>133a	00 55 00 01	               .byte     $00, $55 ,$00, $01, $0c, $2f ; 66
>133e	0c 2f
>1340	ac 10		sprt_ptr0      .word     sprt_image + (0*66)
>1342	ee 10		sprt_ptr1      .word     sprt_image + (1*66)
>1344	30 11		sprt_ptr2      .word     sprt_image + (2*66)
>1346	72 11		sprt_ptr3      .word     sprt_image + (3*66)
>1348	b4 11		sprt_ptr4      .word     sprt_image + (4*66)
>134a	f6 11		sprt_ptr5      .word     sprt_image + (5*66)
>134c	38 12		sprt_ptr6      .word     sprt_image + (6*66)
>134e	7a 12		sprt_ptr7      .word     sprt_image + (7*66)
>1350	bc 12		sprt_ptr8      .word     sprt_image + (8*66)
>1352	fe 12		sprt_ptr9      .word     sprt_image + (9*66)
>1354	ff		testbyte       .byte     255
=$07			sprt_txtcol    =         vjaune
=$00			sprt_txtbak    =         bkcol0
=$01			sprt_color     =         vwhite
>1355	07 00 04 0e	sprite_pos     .byte     sprt_txtcol,sprt_txtbak,4,14
>1359	53 10 12 09	               .null     "Sprite pos. (x,y):($0000,$0000)"
>135d	14 05 20 10 0f 13 2e 20 28 18 2c 19 29 3a 28 24
>136d	30 30 30 30 2c 24 30 30 30 30 29 00

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-c64-showregs.asm

.c000			showregs
=23			line    =   23
=0			coln    =   0
=$01			colr    =   vblanc
.c000	08		               php                 ; Sauvegarde le registre de status sur stack.
.c001	8d fb c1	               sta  rega           ; Sauvegarde Acc en mémoire.
.c004	68		               pla                 ; Récupère le registre de status du stack.
.c005	8d fe c1	               sta  regp           ; Sauvegarde le registre de status en mémoire.
.c008	8e fc c1	               stx  regx           ; Sauvegarde le registre X en mémoire.
.c00b	8c fd c1	               sty  regy           ; Sauvegarde le registre Y en mémoire.
.c00e	ba		               tsx                 ; Copie le registre S dans X.
.c00f	8e ff c1	               stx  regs           ; Sauvegarde le registre S en mémoire.
.c012	68		               pla                 ; Récupère le MSB de l'adresse de retour ...
.c013	8d 01 c2	               sta  regpcl         ; ... et le sauvegarde en mémoire ...
.c016	8d 03 c2	               sta  regpcl2        ; ... une seconde fois.
.c019	68		               pla                 ; Récupère le LSB de l'adresse de retour ...
.c01a	8d 00 c2	               sta  regpch         ; ... et le sauvegarde en mémoire ...
.c01d	8d 02 c2	               sta  regpch2        ; ... une seconde fois.
.c020	ad fb c1	               lda  rega           ; On commence par le registre Acc.
.c023	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c024	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c027	8d 98 c1	               sta  vala+1         ; ... et le place dans la chaine.
.c02a	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c02b	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c02e	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c031	8d 97 c1	               sta  vala           ; ... et le place dans la chaine.
.c034	ad fd c1	               lda  regy           ; Ensuite, le registre Y.
.c037	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c038	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c03b	8d af c1	               sta  valy+1         ; ... et le place dans la chaine.
.c03e	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c03f	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c042	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c045	8d ae c1	               sta  valy           ; ... et le place dans la chaine.
.c048	ad fc c1	               lda  regx           ; Ensuite, le registre X.
.c04b	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c04c	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c04f	8d a3 c1	               sta  valx+1         ; ... et le place dans la chaine.
.c052	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c053	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c056	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c059	8d a2 c1	               sta  valx           ; ... et le place dans la chaine.
.c05c	ad fe c1	               lda  regp           ; Ensuite, le registre de status.
.c05f	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c060	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c063	8d ba c1	               sta  valp+1         ; ... et le place dans la chaine.
.c066	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c067	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c06a	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c06d	8d b9 c1	               sta  valp           ; ... et le place dans la chaine.
.c070	ad ff c1	               lda  regs           ; Ensuite, le pointeur de stack.
.c073	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c074	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c077	8d c5 c1	               sta  vals+1         ; ... et le place dans la chaine.
.c07a	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c07b	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c07e	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c081	8d c4 c1	               sta  vals           ; ... et le place dans la chaine.
.c084	38		               sec                 ; Prépade le ADC en plaçant 0 dans Carry.
.c085	ad 03 c2	               lda  regpcl2        ; On charge la LSB de l'adresse de retour.
.c088	69 00		               adc  #$00           ; On y ajoute 1.
.c08a	90 03		               bcc  noreport       ; Si pas de Carry on ne fait pas de report.
.c08c	ee 02 c2	               inc  regpch2        ; ... en incrémentant le MSB.
.c08f	8d 03 c2	noreport       sta  regpcl2        ; On le sauvegarde.
.c092	ad 03 c2	               lda  regpcl2        ; On récupère la partie basse du compteur.
.c095	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c096	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c099	8d d5 c1	               sta  valpcl+1       ; ... et lace le code à la position "---X".
.c09c	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c09d	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c0a0	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c0a3	8d d4 c1	               sta  valpcl         ; ... et lace le code à la position "--X-".
.c0a6	ad 02 c2	               lda regpch2         ; On récupère la partie haute du compteur.
.c0a9	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c0aa	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c0ad	8d d3 c1	               sta  valpch+1       ; ... et lace le code à la position "-X--".
.c0b0	68		               pla                 ; Récupère la valeur de l'Acc temporaire.
.c0b1	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c0b4	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c0b7	8d d2 c1	               sta  valpch         ; ... et lace le code à la position "X---".
.c0ba	a5 fb		               lda  zpage1         ; On charge le LSB de ZP1 ($fb).
.c0bc	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c0bd	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c0c0	8d e6 c1	               sta  valz1l+1       ; ... et lace le code à la position "---X".
.c0c3	68		               pla
.c0c4	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c0c7	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c0ca	8d e5 c1	               sta  valz1l         ; ... et lace le code à la position "--X-".
.c0cd	a5 fc		               lda  zpage1+1         ; On charge le MSB de ZP1 ($fc).
.c0cf	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c0d0	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c0d3	8d e4 c1	               sta  valz1h+1       ; ... et lace le code à la position "-X--".
.c0d6	68		               pla
.c0d7	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c0da	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c0dd	8d e3 c1	               sta  valz1h         ; ... et lace le code à la position "X---".
.c0e0	a5 fd		               lda  zpage2         ; On charge le LSB de ZP2 ($fd).
.c0e2	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c0e3	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c0e6	8d f7 c1	               sta  valz2l+1       ; ... et lace le code à la position "---X".
.c0e9	68		               pla
.c0ea	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c0ed	20 8d c4	               jsr  nibtohex       ; Converti le second quartet (0-F) ...
.c0f0	8d f6 c1	               sta  valz2l         ; ... et lace le code à la position "--X-".
.c0f3	a5 fe		               lda  zpage2+1       ; On charge le MSB de ZP2 ($fc).
.c0f5	48		               pha                 ; Sauvegarde temporaire de la valeur de Acc.
.c0f6	20 8d c4	               jsr  nibtohex       ; Converti le premier quartet (0-F) ...
.c0f9	8d f5 c1	               sta  valz2h+1       ; ... et lace le code à la position "-X--".
.c0fc	68		               pla
.c0fd	20 99 c4	               jsr  lsra4bits      ; Divise par 16 la valeur de l'Acc.
.c100	20 8d c4	               jsr  nibtohex
.c103	8d f4 c1	               sta  valz2h         ; ... et lace le code à la position "X---".
.c106	20 91 c6	               jsr  setinverse     ; On se place en mode inverse vidéo.
.c109	20 82 c2	               jsr  pushreg
.c10c	a2 8f		               ldx  #<srega
.c10e	a0 c1		               ldy  #>srega
.c110	20 3e c7	               jsr  putscxy
.c113	20 b1 c2	               jsr  popreg
.c116	20 82 c2	               jsr  pushreg
.c119	a2 9b		               ldx  #<sregx
.c11b	a0 c1		               ldy  #>sregx
.c11d	20 3e c7	               jsr  putscxy
.c120	20 b1 c2	               jsr  popreg
.c123	20 82 c2	               jsr  pushreg
.c126	a2 a6		               ldx  #<sregy
.c128	a0 c1		               ldy  #>sregy
.c12a	20 3e c7	               jsr  putscxy
.c12d	20 b1 c2	               jsr  popreg
.c130	20 82 c2	               jsr  pushreg
.c133	a2 b2		               ldx  #<sregp
.c135	a0 c1		               ldy  #>sregp
.c137	20 3e c7	               jsr  putscxy
.c13a	20 b1 c2	               jsr  popreg
.c13d	20 82 c2	               jsr  pushreg
.c140	a2 bd		               ldx  #<sregs
.c142	a0 c1		               ldy  #>sregs
.c144	20 3e c7	               jsr  putscxy
.c147	20 b1 c2	               jsr  popreg
.c14a	20 82 c2	               jsr  pushreg
.c14d	a2 c9		               ldx  #<sregpc
.c14f	a0 c1		               ldy  #>sregpc
.c151	20 3e c7	               jsr  putscxy
.c154	20 b1 c2	               jsr  popreg
.c157	20 82 c2	               jsr  pushreg
.c15a	a2 d9		               ldx  #<sregz1
.c15c	a0 c1		               ldy  #>sregz1
.c15e	20 3e c7	               jsr  putscxy
.c161	20 b1 c2	               jsr  popreg
.c164	20 82 c2	               jsr  pushreg
.c167	a2 ea		               ldx  #<sregz2
.c169	a0 c1		               ldy  #>sregz2
.c16b	20 3e c7	               jsr  putscxy
.c16e	20 b1 c2	               jsr  popreg
.c171	20 9b c6	               jsr  clrinverse     ; On quitte le mode inverse vidéo.
.c174	ad 00 c2	               lda  regpch         ; On replace ls MSB l'adresse de retour ...
.c177	48		               pha                 ; ... à la bonne position sur la pile.
.c178	ad 01 c2	               lda  regpcl         ; On replace ls LSB l'adresse de retour ...
.c17b	48		               pha                 ; ... à la bonne position sur la pile.
.c17c	ae ff c1	               ldx  regs           ; On replace tous les registre à leurs ...
.c17f	9a		               txs                 ; ...
.c180	ac fd c1	               ldy  regy           ; ...
.c183	ae fc c1	               ldx  regx           ; ...
.c186	ad fe c1	               lda  regp           ; ...
.c189	48		               pha                 ; ...
.c18a	ad fb c1	               lda  rega           ; ...
.c18d	28		               plp                 ; ... valeurs initiales
.c18e	60		               rts
>c18f	07 01 17	srega   .byte   cyellow,coln+1,line
>c192	20 20 01 3a	        .text   '  a:$' ;4,24
>c196	24
>c197	00 00 20 00	vala    .byte   0,0,32,0
>c19b	03 09 17	sregx   .byte   ccyan,coln+9,line
>c19e	20 18 3a 24	        .text   ' x:$' ;4,24
>c1a2	00 00 20 00	valx    .byte   0,0,32,0
>c1a6	0d 10 17	sregy   .byte   clightgreen,coln+16,line
>c1a9	20 19 3a 20	        .text   ' y: $' ;4,24
>c1ad	24
>c1ae	00 00 20 00	valy    .byte   0,0,32,0
>c1b2	08 18 17	sregp   .byte   corange,coln+24,line
>c1b5	20 10 3a 24	        .text   ' p:$' ;4,24
>c1b9	00 00 20 00	valp    .byte   0,0,32,0
>c1bd	0a 1f 17	sregs   .byte   clightred,coln+31,line
>c1c0	20 13 3a 24	        .text   ' s:$' ;4,24
>c1c4	00 00 20 20	vals    .byte   0,0,32,32,0
>c1c8	00
>c1c9	0e 01 18 20	sregpc  .byte   clightblue,coln+1,line+1,32
>c1cd	20 10 03 3a	        .text   ' pc:$' ;4,24
>c1d1	24
>c1d2	00 00		valpch  .byte   0,0
>c1d4	00 00 20 20	valpcl  .byte   0,0,32,32,0
>c1d8	00
>c1d9	04 0d 18 20	sregz1  .byte   cpurple,coln+13,line+1,32
>c1dd	20 1a 10 31	        .text   ' zp1:$' ;4,24
>c1e1	3a 24
>c1e3	00 00		valz1h  .byte   0,0
>c1e5	00 00 20 20	valz1l  .byte   0,0,32,32,0
>c1e9	00
>c1ea	0f 1a 18 20	sregz2  .byte   clightgray,coln+26,line+1,32
>c1ee	20 1a 10 32	        .text   ' zp2:$' ;4,24
>c1f2	3a 24
>c1f4	00 00		valz2h  .byte   0,0
>c1f6	00 00 20 20	valz2l  .byte   0,0,32,32,0
>c1fa	00
>c1fb	00		rega    .byte   0
>c1fc	00		regx    .byte   0
>c1fd	00		regy    .byte   0
>c1fe	00		regp    .byte   0
>c1ff	00		regs    .byte   0
>c200	00		regpch  .byte   0
>c201	00		regpcl  .byte   0
>c202	00		regpch2 .byte   0
>c203	00		regpcl2 .byte   0
>c204	00		vzp1h   .byte   0
>c205	00		vzp1l   .byte   0
>c206	00		vzp2h   .byte   0
>c207	00		vzp2l   .byte   0

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/map-c64-kernal.asm

=$00			u6510ddr       =    $00       ; 0       6510 port data dir. reg. (def: %xx101111)
=$01			u6510map       =    $01       ; 1       6510 port used as memory map reg.
=$02			unused2        =    $02       ; 2       Unused.
=$03			adray1         =    $03       ; 3-4     Vector to routine to convert a number ...
=$05			adray2         =    $05       ; 5-6     Vector to routine to convert a number ...
=$07			b_charac       =    $07       ; 7       Search character for scanning ...
=$08			b_endchr       =    $08       ; 8       Search character for scanning ...
=$09			b_trmpos       =    $09       ; 9       Cursor column position before the ...
=$0a			verck          =    $0a       ; 10      Flag: 0=Load or 1=Check
=$0b			b_count        =    $0b       ; 11      Index into the Text Input Buffer ...
=$0c			dimflg         =    $0c       ; 12      Flags for routine that locate or build array.
=$0d			valtyp         =    $0d       ; 13 Flag: Type of data ($ff=string or $00=numeric)
=$0e			intflg         =    $0e       ; 14 Numeric data Type ($80=Integer or $00=Float)
=$0f			garbfl         =    $0f       ; 15 Flag for list, Garbage collection, ...
=$10			subflg         =    $10       ; 16 Flag: Subscript reference to an array or ...
=$11			inpflg         =    $11       ; 17 Flag: Is data input to GET, READ or INPUT.
=$12			tansgn         =    $12       ; 18 Flag: Sign of result of TAN or SIN.
=$13			channl         =    $13       ; 19 Current i/o channel # (CMD logical file).
=$14			linnum         =    $14       ; 20-21 Integer line number value.
=$16			temppt         =    $16       ; 22      Ptr to next space in temp. string stack.
=$17			lastpt         =    $17       ; 23-24 Ptr to last string in temp. string stack.
=$2b			txttab         =    $2b       ; 43-44 Ptr to start of BASIC Program text.
=$2d			vartab         =    $2d       ; 45-46 Ptr to start of BASIC Variable area.
=$2f			arytab         =    $2f       ; 47-48 Ptr to start of BASIC Array area.
=$31			strebd         =    $31       ; 49-50 Ptr to END of BASIC Array area(+1) ...
=$33			fretop         =    $33       ; 51-52 Ptr to bottom of string text area.
=$35			frespc         =    $35       ; 53-54 Temp. ptr for string.
=$37			memsiz         =    $37       ; 55-56 Ptr to highest address used by BASIC.
=$39			curlib         =    $39       ; 57-58 Current BASIC line number.
=$3b			oldlin         =    $3b       ; 59-60 Previous BASIC line number.
=$3d			oldtxt         =    $3d       ; 61-62 Ptr to current BASIC statement address.
=$3f			datlin         =    $3f       ; 63-64 Current DATA line number.
=$41			datptr         =    $41       ; 65-66 Current DATA item address ptr.
=$43			impptr         =    $43       ; 67-68 GET, READ or INPUT info. source ptr.
=$45			varnam         =    $45       ; 69-70 Current BASIC variable name.
=$47			varpnt         =    $47       ; 71-72 Ptr to current BASIC variable value.
=$49			forpnt         =    $49       ; 73-74 Temp Ptr to index variable used by FOR.
=$4b			opptr          =    $4b       ; 75-76 Math operator table displacement.
=$4d			opmask         =    $4d       ; 77 Mask for comparison operation.
=$4e			defpnt         =    $4e       ; 78-79 Pointer to current FN descriptor.
=$50			dscpnt         =    $50       ; 80-82 Tmp ptr to current string descriptor.
=$53			four6          =    $53       ;  83 Constant of garbage collector.
=$54			jmper          =    $54       ;  84-86 Jump to function Instruction.
=$61			fac1           =    $61       ;  97-102 Floating point Accumulator #1
=$73			chrget         =    $73       ;  115
=$79			chrgot         =    $79       ;  121
=$90			kiostatus      =    $90       ;  144 Kernal I/O status word (st) (byte)
=$b7			curfnlen       =    $b7       ;  183 Current filename length (byte)
=$b9			cursecadd      =    $b9       ;  185 Current secondary address (byte)
=$ba			curdevno       =    $ba       ;  186 Current device number (byte)
=$bb			curfptr        =    $bb       ;  187 Current file pointer (word)
=$c1			stal           =    $c1       ;  $c1-$c2 (193-194) ptr to ram address to load/save
=$c5			lstx           =    $c5       ;  197 matrix coordinate of last key pressed
=$c6			ndx            =    $c6       ;  198 Number of character in keyboard buffer
=$fb			zpage1         =    $fb       ;  251 zero page 1 address (word)
=$fd			zpage2         =    $fd       ;  253 zero page 2 address (word)
=$fb			zeropage       =    zpage1
=$fd			zonepage       =    zpage2
=$277			kbbuff         =    $277      ;  631
=$286			carcol         =    $286      ;  646 basic next chr colscreenram (byte)
=$288			hibase         =    $288      ;  648
=$286			kcarcol        =    carcol
=$286			bascol         =    carcol
=$28d			shflag         =    $28d      ; 653
=$30a			ieval          =    $30a
=$314			cinv           =    $314      ; $314-$315 brk instruction interupt
=$33c			tbuffer        =    $33c      ; 828-1019 Cassette i/o buffer
=$326			ibsout         =    $326      ; 806
=$33c			tpbuff         =    $33c      ; $033c-$03fb (828-1019)
=$400			scrnram        =    $400      ; 1024 video character ram
=$400			scrram0        =    scrnram   ; 1024
=$500			scrram1        =    $500      ; 1280
=$600			scrram2        =    $600      ; 1536
=$700			scrram3        =    $700      ; 1792
=$801			basicsta       =    $801      ; 2049  basic start address
=$a000			basicrom       =    $a000     ; 40960 Basic rom base address
=$d400			sid            =    $d400     ; 54272 sid base address
=$d800			colorram       =    $d800     ; 55296 video color ram
=$d800			colram         =    $d800     ; 55296 video color ram
=$d800			colram0        =    colorram  ; 55296
=$d900			colram1        =    $d900     ; 55552
=$da00			colram2        =    $da00     ; 55808
=$db00			colram3        =    $db00     ; 56064
>c208	00 d8 00 d9	colorptr  .word     colram0,colram1,colram2,colram3
>c20c	00 da 00 db
=$dc00			cia1           =    $dc00     ; 56320 cia1 base address
=$dc00			cia1pra        =    $dc00     ; 56320 cia1 dataport A (keyboard column Write)
=$dc01			cia1prb        =    $dc01     ; 56321 cia1 dataport B (keyboard row read)
=$dc02			cia1ddra       =    $dc02     ; 56322 cia1 data direction A
=$dc03			cia1ddrb       =    $dc03     ; 56323 cia1 data direction B
=$dc04			cia1tmalo      =    $dc04     ; 56324 cia1 timer A low byte
=$dc05			cia1tmahi      =    $dc05     ; 56325 cia1 timer A high byte
=$dc06			cia1tmblo      =    $dc06     ; 56326 cia1 timer B low byte
=$dc07			cia1tmbhi      =    $dc07     ; 56327 cia1 timer B high byte
=$dc08			cia1todten     =    $dc08     ; 56328 cia1 time of day clock seconds/10
=$dc09			cia1todsec     =    $dc09     ; 56329 cia1 time of day clock seconds
=$dc0a			cia1todmin     =    $dc0a     ; 56330 cia1 time of day clock minutes
=$dc0b			cia1todhrs     =    $dc0b     ; 56331 cia1 time of day clock hours
=$dc0c			cia1sdr        =    $dc0c     ; 56332 cia1 serial data port
=$dc0d			cia1icr        =    $dc0d     ; 56333 cia1 Interupt control register
=$dc0e			cia1cra        =    $dc0e     ; 56334 cia1 control register A
=$dc0f			cia1crb        =    $dc0f     ; 56335 cia1 control register B
=$dd00			cia2           =    $dd00     ; 56576 cia2 base address
=$dd00			cia2pra        =    $dd00     ; 56576 cia2 dataport A
=$dd01			cia2prb        =    $dd01     ; 56577 cia2 dataport B
=$dd02			cia2ddra       =    $dd02     ; 56578 cia2 data direction A
=$dd03			cia2ddrb       =    $dd03     ; 56579 cia2 data direction B
=$dd04			cia2tmalo      =    $dd04     ; 56580 cia2 timer A low byte
=$dd05			cia2tmahi      =    $dd05     ; 56581 cia2 timer A high byte
=$dd06			cia2tmblo      =    $dd06     ; 56582 cia2 timer B low byte
=$dd07			cia2tmbhi      =    $dd07     ; 56583 cia2 timer B high byte
=$dd08			cia2todten     =    $dd08     ; 56584 cia2 time of day clock seconds/10
=$dd09			cia2todsec     =    $dd09     ; 56585 cia2 time of day clock seconds
=$dd0a			cia2todmin     =    $dd0a     ; 56586 cia2 time of day clock minutes
=$dd0b			cia2todhrs     =    $dd0b     ; 56587 cia2 time of day clock hours
=$dd0c			cia2sdr        =    $dd0c     ; 56588 cia2 serial data port
=$dd0d			cia2icr        =    $dd0d     ; 56589 cia2 Interupt control register
=$dd0e			cia2cra        =    $dd0e     ; 56590 cia2 control register A
=$dd0f			cia2crb        =    $dd0f     ; 56501 cia2 control register B
=$e000			kernalrom      =    $e000     ; 57344 start of kernal rom
=$ea31			irq            =    $ea31     ; 59953 irq entry point
=$03			bstop          =    $03       ;  03 [STOP],     [CTRL]-[C]
=$05			bwhite         =    $05       ;  05 [CTRL]+[2], [CTRL]-[E], Set colour to WHITE
=$08			block          =    $08       ;  08 Disable char map switch with [SHIFT]+[C=]
=$09			bunlock        =    $09       ;  09 Enabled char map switch with [SHIFT]+[C=]
=$0d			bcarret        =    $0d       ;  11 [RETURN]
=$0e			btext          =    $0e       ;  14 CTRL]-[N] select Upper/lowercase charset
=$11			bcrsdn         =    $11       ;  17 [CRS-D]           Cursor DOWN 1 line
=$12			brevcol        =    $12       ;  18 [CTRL]+[9]        REVERSE VIDEO ON
=$13			bhome          =    $13       ;  19 [HOME]            Cursor HOME
=$14			bdelete        =    $14       ;  20 [DELETE]          Delete 1 char
=$1c			bred           =    $1c       ;  28 [CTRL]+[3]        Set colour to RED
=$1d			bcuright       =    $1d       ;  29 [CRS-R]           Cursor RIGHT
=$1e			bgreen         =    $1e       ;  30 [CTRL]+[6]        Set colour to GREEN
=$1f			bblue          =    $1f       ;  31 [CTRL]+[7]        Set colour to BLUE
=$81			borange        =    $81       ; 129 [C=]+[1]          Set colour to ORANGE
=$85			f1key          =    $85       ; 133 [F1]
=$86			f2key          =    $86       ; 134 [F2]
=$87			f3key          =    $87       ; 135 [F3]
=$88			f4key          =    $88       ; 136 [F4]
=$89			f5key          =    $89       ; 137 [F5]
=$8a			f6key          =    $8a       ; 138 [F6]
=$8b			f7key          =    $8b       ; 139 [F7]
=$8c			f8key          =    $8c       ; 140 [F8]
=17			dcurkey        =    17
=145			ucurkey        =    145
=29			rcurkey        =    29
=157			lcurkey        =    157
=95			larrowkey      =    95
=94			uarrowkey      =    94
=19			homekey        =    19
=147			clearkey       =    147
=20			delkey         =    20
=148			inskey         =    148
=$8d			bcarret1       =    $8d       ; 141 [SHIFT]+[RETURN]
=$8e			bgraph         =    $8e       ; 142 select Uppercase+graphics charset
=$90			bblack         =    $90       ; 144 [CTRL]+[1]        Set colour to BLACK
=$91			bcuup          =    $91       ; 145 [SHIFT]+[CRS-D]   cursor UP 1 line
=$92			brevoff        =    $92       ; 146 [CTRL]+[0]        REVERSE VIDEO OFF
=$93			bclear         =    $93       ; 147 [SHIFT]+[HOME]    CLEAR SCREEN
=$94			binsert        =    $94       ; 148 [SHIFT]+[DELETE]  INSERT a char
=$95			bbrown         =    $95       ; 149 [C=]+[2]          Set colour to BROWN
=$96			bltred         =    $96       ; 150 [C=]+[3]          Set colour to PINK
=$97			bdkgrey        =    $97       ; 151 [C=]+[4]          Set colour to DARK GREY
=$98			bmdgrey        =    $98       ; 152 [C=]+[5]          Set colour to MEDIUM GREY
=$99			bltgreen       =    $99       ; 153 [C=]+[6]          Set colour to LIGHT GREEN
=$9a			bltblue        =    $9a       ; 154 [C=]+[7]          Set colour to LIGHT BLUE
=$9b			bltgrey        =    $9b       ; 155 [C=]+[8]          Set colour to LIGHT GREY
=$9c			bmagenta       =    $9c       ; 156 [CTRL]+[5]        Set colour to MAGENTA
=$9d			bculeft        =    $9d       ; 157 [SHIFT]+[CRS-R]   cursor RIGHT 1 pos
=$9e			byellow        =    $9e       ; 158 [CTRL]+[8]        Set colour to YELLOW
=$9f			bcyan          =    $9f       ; 159 [CTRL]+[4]        Set colour to CYAN
=$a0			bspace1        =    $a0       ; 169                   space
=$e0			bspace2        =    $e0       ; 224                   space
=$0			cnoir          =    $0
=$1			cblanc         =    $1
=$2			crouge         =    $2
=$3			cocean         =    $3
=$4			cmauve         =    $4
=$5			cvert          =    $5
=$6			cbleu          =    $6
=$7			cjaune         =    $7
=$8			corange        =    $8
=$9			cbrun          =    $9
=$a			crose          =    $a
=$b			cgrisfonce     =    $b
=$c			cgrismoyen     =    $c
=$b			cgris0         =    $b
=$c			cgris1         =    $c
=$d			cvertpale      =    $d
=$e			cbleupale      =    $e
=$f			cgrispale      =    $f
=$f			cgris3          =    $f
=$0			cblack         =    $0
=$1			cwhite         =    $1
=$2			cred           =    $2
=$3			ccyan          =    $3
=$4			cpurple        =    $4
=$5			cgreen         =    $5
=$6			cblue          =    $6
=$7			cyellow        =    $7
=$9			cbrown         =    $9
=$a			clightred      =    $a
=$b			cdarkgray      =    $b
=$c			cmidgray       =    $c
=$d			clightgreen    =    $d
=$e			clightblue     =    $e
=$f			clightgray     =    $f
=$00			vnoir          =    %00000000
=$00			vblack         =    %00000000
=$01			vblanc         =    %00000001
=$01			vwhite         =    %00000001
=$02			vrouge         =    %00000010
=$02			vred           =    %00000010
=$03			vocean         =    %00000011
=$03			vcyan          =    %00000011
=$04			vmauve         =    %00000100
=$04			vpurple        =    %00000100
=$05			vvert          =    %00000101
=$05			vgreen         =    %00000101
=$06			vbleu          =    %00000110
=$06			vblue          =    %00000110
=$07			vjaune         =    %00000111
=$07			vyellow        =    %00000111
=$08			vorange        =    %00001000
=$09			vbrun          =    %00001001
=$09			vbrown         =    %00001001
=$0a			vrose          =    %00001010
=$0a			vpink          =    %00001010
=$0b			vgris          =    %00001011
=$0b			vgray          =    %00001011
=$0b			vgrey          =    %00001011
=$0c			vgris1         =    %00001100
=$0c			vgray1         =    %00001100
=$0c			vgrey1         =    %00001100
=$0d			vvert1         =    %00001101
=$0d			vgreen1        =    %00001101
=$0e			vbleu1         =    %00001110
=$0e			vblue1         =    %00001110
=$0f			vgris2         =    %00001111
=$0f			vgray2         =    %00001111
=$0f			vgrey2         =    %00001111
=$e1d4			setprms= $e1d4 ; Set parameters for LOAD, SAVE, and verify
=$ed09			stalk  = $ed09 ; Send Talk command to serial bus.
=$ed0c			slisten= $ed0c ; Send LISTEN command to serial bus.
=$ed40			sflush = $ed40 ; Flush serial bus output cache at memory address $0095, to
=$edb9			slisten2= $edb9 ; Send LISTEN secondary addressto serial bus.
=$edb9			stalk2 = $edb9 ; Send TALK secondary addressto serial bus.
=$eddd			sbout  = $eddd ; Write byte to serial bus.
=$edef			sutalk = $edef ; Send UNTalk command to serial bus.
=$edfe			sulisten= $edfe ; Send UNLISTEN command to serial bus.
=$ee85			sclkhigh= $ee85 ; Set CLOCK OUT to High
=$ee8e			sclklow= $ee8e ; Set CLOCK OUT to low
=$ee97			sdathigh= $ee97 ; Set DATA OUT to High
=$eea0			sdatlow= $eea0 ; Set DATA OUT to low
=$eea9			sclkdta= $eea9 ; Read CLOCK IN and DATA IN.
=$f1ad			sbread = $f1ad ; Read one byte from serial port.
=$f237			sstdin = $F237 ; Define serial bus as standard input; do not send TALK
=$f279			sstdout= $F279 ; Define serial bus as standard output; do not send LISTEN
=$f3d5			sfopen = $F3D5 ; Open file on serial bus; do not send file name if secondary
=$f528			sutclose= $F528 ; Send UNTALK and CLOSE command to serial bus.
=$f63f			sulclose= $F63F ; Send UNLISTEN and CLOSE command to serial bus.
=$f642			sfclose= $F642 ; Close file on serial bus; do not send CLOSE secondary address
=$fe21			stimeout= $FE21 ; Unknown. (Set serial bus timeout.)
=$ffa5			acptr  = $ffa5 ; jmp $ee13 Recoit un caractere provenant du port serie
=$ffc6			chkin  = $ffc6 ; jmp ($031e) Define an input channel.
=$ffc9			chkout = $ffc9 ; jmp ($0320) Define an output channel.
=$ffcf			chrin  = $ffcf ; jmp ($0324) Get a character from the input channel
=$ffd2			chrout = $ffd2 ; jmp ($0326) Output a character
=$ff81			cint   = $ff81 ; jsr $e518 Initialize the screen editor and vic-ii chip
=$ffa8			ciout  = $ffa8 ; jmp $eddd Transmit a byte over the serial bus
=$ffe7			clall  = $ffe7 ; jmp ($032c) Close all open files
=$ffc3			close  = $ffc3 ; jmp ($031c) Close a logical file
=$ffcc			clrchn = $ffcc ; jmp ($0322) - Clear all i/o channels.
=$ffe4			getin  = $ffe4 ; jmp ($032a) Get a character.
=$fff3			iobase = $fff3 ; jmp $e500 Define i/o memory page
=$ff84			ioinit = $ff84 ; ($fda3) Initialize i/o devices.
=$ffb1			listen = $ffb1 ; jmp ($ed0c) Command a device on the serial bus to listen.
=$ffd5			load   = $ffd5 ; jmp $f4e9 Load device to RAM.
=$ff9c			membot = $ff9c ; jmp $fe34 Get/set bottom of memory.
=$ff99			memtop = $ff99 ; jmp $fe25 Get/Set top of ram
=$ffc0			open   = $ffc0 ; jmp ($031a) Open a logical file
=$fff0			plot   = $fff0 ; jmp $e50a Set or retrieve cursor location x=column, y=line
=$ff87			ramtas = $ff87 ; ($fd50) Initialise ram, tape buffer and screen.
=$ffde			rdtim  = $ffde ; jmp $f6dd Read system clock
=$ffb7			readst = $ffb7 ; jmp $fe07 Read i/o status word
=$ff8a			restor = $ff8a ; jmp $fd15 Restore default I/O vectors.
=$ffd8			save   = $ffd8 ; jmp $f5dd Save memory to a device.
=$ff9f			scnkey = $ff9f ; jmp $ea87 Scan the keyboard
=$ffed			screen = $ffed ; jmp $e505 Return screen format
=$ff93			second = $ff93 ; jmp $edb9 Send secondary address after listen
=$ffba			setlfs = $ffba ; jmp $fe00 Set up a logical file
=$ff90			setmsg = $ff90 ; jmp $fe18 Set kernal message output flag
=$ffbd			setnam = $ffbd ; jmp $fdf9 Set up file name
=$ffdb			settim = $ffdb ; jmp $f6e4 Set the system clock.
=$ffa2			settmo = $ffa2 ; jmp $fe21 Set ieee bus card timeout flag
=$ffe1			stop   = $ffe1 ; jmp ($0328) Check if stop key is pressed.
=$ffb4			talk   = $ffb4 ; jmp $ed09 Command a device on the serial bus to talk
=$ff96			tksa   = $ff96 ; jmp $edc7 Send a secondary address to a device commanded to talk
=$ffea			udtim  = $ffea ; jmp $f69b Update the system clock
=$ffae			unlsn  = $ffae ; jmp $edfe Send an unlisten command
=$ffab			untlk  = $ffab ; jmp $edef Send an untalk command
=$ff8d			vector = $ff8d ; jmp $fd1a Read/set I/O vectors.
=$e043			kd_poly1       =    $e043
=$e059			kd_poly2       =    $e059
=$e08d			kd_rmulc       =    $e08d       ;
=$e092			kd_raddc       =    $e092       ;
=$e097			kd_rnd         =    $e097
=$e12a			kd_sys         =    $e12a
=$e156			kd_save        =    $e156
=$e165			kd_verify      =    $e165
=$e168			kd_load        =    $e168
=$f1ca			kd_chrout      =    $f1ca
=$ff81			kcint          =    cint           ;   , init vic + ecran.
=$ff84			kioinit        =    ioinit         ;   , init i/o dev.
=$ff87			kramtas        =    ramtas         ;   , test de memoire.
=$ffa8			kciout         =    ciout          ;a  ,tx byte  acia
=$ff8a			krestor        =    restor         ;   , set ram plafond
=$ff8d			kvector        =    vector         ;
=$ff90			ksetmsg        =    setmsg         ;a  , set sys. msg. out
=$ff93			ksecond        =    second         ;a  , tx adresse sec.
=$ff96			ktksa          =    tksa           ;a  , talk adresse sec.
=$ff99			kmemtop        =    memtop         ; yx, (c) get mem high
=$ff9c			kmembot        =    membot         ; yx, (c) get mem low
=$ff9f			kscankey       =    scnkey         ;   , scan clavier
=$ffa2			ksettmo        =    settmo         ;a  , set ieee timeout
=$ffa5			kacptr         =    acptr          ;a  ,rx serie.
=$ffab			kuntlk         =    untlk          ;   , iec-cmc stop talk
=$ffae			kunlsn         =    unlsn          ;   , iec-cmd stop lsn
=$ffb1			klisten        =    listen         ;a  , iec-cmd dev ecout
=$ffb4			ktalk          =    talk           ;a  , iec-cmd dev parle
=$ffb7			kreadst        =    readst         ;a  , lecture i/o stats
=$ffba			ksetlfs        =    setlfs         ;ayx, init fich logi.
=$ffbd			ksetnam        =    setnam         ;ayx, init num.nom.fich
=$ffc0			kopen          =    open           ;axy, ouvre fich-nom
=$ffc3			kclose         =    close          ;a  , ferme fichier #a.
=$ffc6			kchkin         =    chkin          ;  x,open canal in.
=$ffc9			kchkout        =    chkout         ;  x,open canal out
=$ffcc			kclrchn        =    clrchn         ;   , ferme canaux i/o.
=$ffcf			kchrin         =    chrin          ;a  ,recup. un car.
=$ffd2			kchrout        =    chrout         ;a  ,sort un car.
=$ffd5			kload          =    load           ;ayx, dev->ram
=$ffd8			ksave          =    save           ;   , sauve mem->dev
=$ffdb			ksettim        =    settim         ;axy, init sysclock
=$ffde			krdtim         =    rdtim          ;axy, lecture sysclock
=$ffe1			kstop          =    stop           ;a  , ret. stopkey stat
=$ffe4			kgetin         =    getin          ;a  , recup. car. #dev.
=$ffe7			kclall         =    clall          ;   , ferme fichiers.
=$ffea			kudtim         =    udtim          ;   , maj sysclock
=$ffed			kscreen        =    screen         ; yx, get format ecran
=$fff0			kplot          =    plot           ; yx, (c) get csr pos.
=$fff3			kiobase        =    iobase         ; yx, def. i/o mem page
=$e39a			k_echostartup  =    $e39a
=$e716			k_putch        =    $e716; 52) Print a character.          ;a--;---; a= char
=$e7a0			k_cls          =    $e7a0
=$e87c			k_cursordown   =    $e87c
=$e8ea			k_scrollup     =    $e8ea
=$e94e			k_home         =    $e94e
=$e965			k_insertline   =    $e965
=$e9c8			k_screlldown   =    $e9c8
=$ed0c			k_devsndlstn   =    $ed0c; 55) Send 'LISTEN'>IEEE/Serial.  ;a--;---; a= dev #
=$ee13			k_ieeein       =    $ee13; 60) Input from IEEE/Serial.     ;---;a--; a= Data byte
=$eef6			k_devsndutalk  =    $eef6; 58) Send 'UNTALK'>IEEE/Serial.  ;---;---;
=$ef04			k_devsndulstn  =    $ef04; 59) Send 'UNLISTEN'>IEEE/Serial.;---;---;
=$f12f			k_putsysmsg    =    $f12f; 53) Print system message.       ;--y;---; y= msg offset
=$f291			k_cloself      =    $f291; 61) Close logical file .        ;a--;---; a= file #
=$f49e			k_loadsub      =    $f49e; 63) LOAD subroutine.            ;axy;---; a= # start=yyxx
=$f5af			k_prnsrch      =    $f5af; 64) Print SEARCHING if imm mode.;---;---;
=$f5b3			k_echosearch   =    $f5b3; 64b) Skipping test part of 64.  ;---;---;
=$f5c1			k_prnfnam      =    $f5c1; 65) Print filename.             ;---;---;
=$f6ed			k_stop         =    $f6ed; 62) Check for STOP key.         ;---;---; z= 1 pressed
=$f7ea			k_gettaphdblk  =    $f7ea; 66) Find a tape hdr blk.        ;a--;---; a= len
=$f7ea			k_fndtaphdblk  =    $f7ea; 67) Find any tape hdr blk.      ;---;---;
=$f817			k_waittapplay  =    $f817; 68) Press PLAY... (wait)        ;---;---;
=$f841			k_rdtape2buff  =    $f841; 69) Read tape to buffer.        ;---;---;
=$f847			k_readtape     =    $f847; 70) Read tape.                 ;---;---;
=$f864			k_wrbuff2tape  =    $f864; 71) write buffer to tape.       ;---;---;
=$f869			k_wrtape       =    $f869; 72) write tape.                ;a--;---; a= ldr len
=$fb8e			k_resettapeio  =    $fb8e; 73) Reset tape I/O.             ;---;---;
=$fcbd			k_setintvect   =    $fcbd; 74) set interupt vector.        ;---;---;
=$fce2			k_coldreset    =    $fce2; 75) Power on reset.             ;---;---;
=$fce2			k_coldstart    =    $fce2; 75) Power on reset.             ;---;---;
=$fce2			k_coldboot     =    $fce2; 75) Power on reset.             ;---;---;
=$fe66			k_warmreset    =    $fe66;     Warm resetstart
=$fe66			k_warmboot     =    $fe66;     Warm resetstart
=$fe66			k_warmstart    =    $fe66;     Warm resetstart
=$ff93			k_devsndaddr2  =    $ff93; 56) Send second address.        ;a--;---; a= SA or #$60
=0			kerr00         =    0    ; routine ended by the stop key.
=1			kerr01         =    1    ; too many files open.
=2			kerr02         =    2    ; file already open.
=3			kerr03         =    3    ; file not open.
=4			kerr04         =    4    ; file not found.
=5			kerr05         =    5    ; device not present.
=6			kerr06         =    6    ; file is not an input file.
=7			kerr07         =    7    ; file is not an output file.
=8			kerr08         =    8    ; file name is missing.
=9			kerr09         =    9    ; illegal device number.
=240			kerrf0         =    240  ; top-of-memory change rs-232 buffer allocation.
.c210			libtart

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/map-c64-vicii.asm

=$0400			viciiscn    =   $0400
=$0400			viciiscn0   =   $0400
=$04f0			viciiscn1   =   $04f0
=$05e0			viciiscn2   =   $05e0
=$06d0			viciiscn3   =   $06d0
=$d000			vic = $d000			; VicII C64 memorymap base address
=53248			vicsprt0x = vic+$00	; $d000, 53248 Sprt 0 Horizontal position (X)
=53249			vicsprt0y = vic+$01	; $d001, 53249 Sprt 0 Vertical position (Y)
=53250			vicsprt1x = vic+$02	; $d002, 53250 Sprt 1 Horizontal position (X)
=53251			vicsprt1y = vic+$03	; $d003, 53251 Sprt 1 Vertical position (Y)
=53252			vicsprt2x = vic+$04	; $d004, 53252 Sprt 2 Horizontal position (X)
=53253			vicsprt2y = vic+$05	; $d005, 53253 Sprt 2 Vertical position (Y)
=53254			vicsprt3x = vic+$06	; $d006, 53254 Sprt 3 Horizontal position (X)
=53255			vicsprt3y = vic+$07	; $d007, 53255 Sprt 3 Vertical position (Y)
=53256			vicsprt4x = vic+$08	; $d008, 53256 Sprt 4 Horizontal position (X)
=53257			vicsprt4y = vic+$09	; $d009, 53257 Sprt 4 Vertical position (Y)
=53258			vicsprt5x = vic+$0a	; $d00a, 53258 Sprt 5 Horizontal position (X)
=53259			vicsprt5y = vic+$0b	; $d00b, 53259 Sprt 5 Vertical position (Y)
=53260			vicsprt6x = vic+$0c	; $d00c, 53260 Sprt 6 Horizontal position (X)
=53261			vicsprt6y = vic+$0d	; $d00d, 53261 Sprt 6 Vertical position (Y)
=53262			vicsprt7x = vic+$0e	; $d00e, 53262 Sprt 7 Horizontal position (X)
=53263			vicsprt7y = vic+$0f	; $d00f, 53263 Sprt 7 Vertical position (Y)
=53264			vicspxmsb = vic+$10	; $D010, 53264
=53265			vicctrl0v  = vic+$11	; $d011, 53265
=53265			vicmiscfnc = vicctrl0v
=53266			vicraster = vic+$12	; $d012, 53266	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53267			viclpenhp = vic+$13	; $d013, 53267	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53268			viclpenvp = vic+$14	; $d014, 53268	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53269			vicsprctl = vic+$15	; $d015, 53269	     	|s7|s6|s5|s4|s3|s2|s1|s0|
=53270			vicctrl1h = vic+$16	; $d016, 53270
=53271			vicsprtexv = vic+$17	; $d017, 53271	     |s7|s6|s5|s4|s3|s2|s1|s0|
=53272			vicmemptr  = vic+$18	; $d018, 53272
=53273			vicirqreg  = vic+$19	; $d019, 53273
=53274			vicirqena  = vic+$1a	; $d01a, 53274
=53275			vicsprtprio = vic+$1b 	; $d01b, 53275		|s7|s6|s5|s4|s3|s2|s1|s0|
=53276			vicsprtmcol = vic+$1c 	; $d01c, 53276		|s7|s6|s5|s4|s3|s2|s1|s0|
=53277			vicsprtexh = vic+$1d 	; $d01d, 53277		|s7|s6|s5|s4|s3|s2|s1|s0|
=53278			vicsprscol = vic+$1e 	; $d01e, 53278		|s7|s6|s5|s4|s3|s2|s1|s0|
=53279			vicsprbakcol = vic+$1f ; $d01f, 53279		|s7|s6|s5|s4|s3|s2|s1|s0|
=53280			vicbordcol = vic+$20 	; $d020, 53280		|--|--|--|--|c3|c2|c1|c0|
=53281			vicbackcol  = vic+$21 	; $d021, 53281
=53281			vicback0col = vic+$21 	; $d021, 53281		|--|--|--|--|c3|c2|c1|c0|
=53281			vicbackcol0 = vic+$21 	; $d021, 53281		|--|--|--|--|c3|c2|c1|c0|
=53282			vicback1col = vic+$22 	; $d022, 53282		|--|--|--|--|c3|c2|c1|c0|
=53282			vicbackcol1 = vic+$22 	; $d022, 53282		|--|--|--|--|c3|c2|c1|c0|
=53283			vicback2col = vic+$23 	; $d023, 53283		|--|--|--|--|c3|c2|c1|c0|
=53283			vicbackcol2 = vic+$23 	; $d023, 53283		|--|--|--|--|c3|c2|c1|c0|
=53284			vicback3col = vic+$24 	; $d024, 53284		|--|--|--|--|c3|c2|c1|c0|
=53284			vicbackcol3 = vic+$24 	; $d024, 53284		|--|--|--|--|c3|c2|c1|c0|
=53285			vicsprtmcol0 = vic+$25 	; $d025, 53285		|--|--|--|--|c3|c2|c1|c0|
=53286			vicsprtmcol1 = vic+$26 	; $d026, 53286		|--|--|--|--|c3|c2|c1|c0|
=53287			vicsprt0col = vic+$27 	; $d027, 53287		|--|--|--|--|c3|c2|c1|c0|
=53288			vicsprt1col = vic+$28 	; $d028, 53288		|--|--|--|--|c3|c2|c1|c0|
=53289			vicsprt2col = vic+$29 	; $d029, 53289		|--|--|--|--|c3|c2|c1|c0|
=53290			vicsprt3col = vic+$2a 	; $d02a, 53290		|--|--|--|--|c3|c2|c1|c0|
=53291			vicsprt4col = vic+$2b 	; $d02b, 53291		|--|--|--|--|c3|c2|c1|c0|
=53292			vicsprt5col = vic+$2c 	; $d02c, 53292		|--|--|--|--|c3|c2|c1|c0|
=53293			vicsprt6col = vic+$2d 	; $d02d, 53293		|--|--|--|--|c3|c2|c1|c0|
=53294			vicsprt7col = vic+$2e 	; $d02e, 53294		|--|--|--|--|c3|c2|c1|c0|

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-cbm-pushpop.asm

>c210	00		rp        .byte     0
>c211	00		ra        .byte     0
>c212	00 00		pc        .word     0
.c214			pushall
.c214			push
.c214	08		          php            ; stack : flg, pcl, pch
.c215	78		          sei
.c216	8d 11 c2	          sta  ra        ; save a
.c219	68		          pla            ; stack : pcl, pch
.c21a	8d 10 c2	          sta  rp        ; save rp
.c21d	68		          pla            ; stack : pch
.c21e	8d 12 c2	          sta  pc        ; save pcl
.c221	68		          pla            ; stack : -
.c222	8d 13 c2	          sta  pc+1      ; save pch
.c225	a5 fb		          lda  zpage1    ; get zpage1 low byte
.c227	48		          pha            ; stack : zp1l
.c228	a5 fc		          lda  zpage1+1  ; get zpage1 High byte
.c22a	48		          pha            ; stack : zp1h, zp1l
.c22b	a5 fd		          lda  zpage2    ; get zpage2 low byte
.c22d	48		          pha            ; stack : zp2l, zp1h, zp1l
.c22e	a5 fe		          lda  zpage2+1  ; get zpage2 High byte
.c230	48		          pha            ; stack : zp2h, zp2l, zp1h, zp1l
.c231	ad 10 c2	          lda  rp        ; get rp
.c234	48		          pha            ; stack : flg, zp2h, zp2l, zp1h, zp1l
.c235	ad 11 c2	          lda  ra        ; get a
.c238	48		          pha            ; stack : a, flg, zp2h, zp2l, zp1h, zp1l
.c239	8a		          txa            ; get x
.c23a	48		          pha            ; stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.c23b	98		          tya            ; get y
.c23c	48		          pha            ; stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c23d	ad 13 c2	          lda  pc+1      ; get pch
.c240	48		          pha            ; stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c241	ad 12 c2	          lda  pc        ; get pcl
.c244	48		          pha            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c245	ad 10 c2	          lda  rp        ; get rp
.c248	48		          pha            ; stack : flg, pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c249	ad 11 c2	          lda  ra        ; get a
.c24c	28		          plp            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c24d	58		          cli
.c24e	60		          rts
.c24f			pullall
.c24f			pull
.c24f			popall
.c24f			pop
.c24f	78		          sei
.c250	68		          pla            ; get pcl stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c251	8d 12 c2	          sta  pc        ; save pcl
.c254	68		          pla            ; get pch stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c255	8d 13 c2	          sta  pc+1      ; save pch
.c258	68		          pla            ; get y stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.c259	a8		          tay            ; set y
.c25a	68		          pla            ; get x stack : a, flg, zp2h, zp2l, zp1h, zp1l
.c25b	aa		          tax            ; set x
.c25c	68		          pla            ; get a stack : flg, zp2h, zp2l, zp1h, zp1l
.c25d	8d 11 c2	          sta  ra        ; save a
.c260	68		          pla            ; get flag stack : zp2h, zp2l, zp1h, zp1l
.c261	8d 10 c2	          sta  rp        ; save rp
.c264	68		          pla            ; stack : zp2l, zp1h, zp1l
.c265	85 fe		          sta  zpage2+1  ; get zpage1 low byte
.c267	68		          pla            ; stack : zp1h, zp1l
.c268	85 fd		          sta  zpage2    ; get zpage2 High byte
.c26a	68		          pla            ; stack : zp1l
.c26b	85 fc		          sta  zpage1+1  ; get zpage2 low byte
.c26d	68		          pla            ; stack :
.c26e	85 fb		          sta  zpage1    ; get zpage1 High byte
.c270	ad 13 c2	          lda  pc+1      ; get pch
.c273	48		          pha            ; stack : pch
.c274	ad 12 c2	          lda  pc
.c277	48		          pha            ; stack : pcl, pch
.c278	ad 10 c2	          lda  rp        ; get rp
.c27b	48		          pha            ; stack : rp, pcl, pch
.c27c	ad 11 c2	          lda  ra        ; set ra
.c27f	58		          cli
.c280	28		          plp            ; stack : pcl, pch
.c281	60		          rts
.c282			pushreg
.c282	08		          php            ; stack : flg, pcl, pch
.c283	78		          sei
.c284	8d 11 c2	          sta  ra        ; save a
.c287	68		          pla            ; stack : pcl, pch
.c288	8d 10 c2	          sta  rp        ; save rp
.c28b	68		          pla            ; stack : pch
.c28c	8d 12 c2	          sta  pc        ; save pcl
.c28f	68		          pla            ; stack : -
.c290	8d 13 c2	          sta  pc+1      ; save pch
.c293	ad 10 c2	          lda  rp        ; get rp
.c296	48		          pha            ; stack : flg, zp2h, zp2l, zp1h, zp1l
.c297	ad 11 c2	          lda  ra        ; get a
.c29a	48		          pha            ; stack : a, flg, zp2h, zp2l, zp1h, zp1l
.c29b	8a		          txa            ; get x
.c29c	48		          pha            ; stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.c29d	98		          tya            ; get y
.c29e	48		          pha            ; stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c29f	ad 13 c2	          lda  pc+1      ; get pch
.c2a2	48		          pha            ; stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2a3	ad 12 c2	          lda  pc        ; get pcl
.c2a6	48		          pha            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2a7	ad 10 c2	          lda  rp        ; get rp
.c2aa	48		          pha            ; stack : flg, pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2ab	ad 11 c2	          lda  ra        ; get a
.c2ae	28		          plp            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2af	58		          cli
.c2b0	60		          rts
.c2b1			pullreg
.c2b1			popreg
.c2b1	78		          sei
.c2b2	68		          pla            ; get pcl stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2b3	8d 12 c2	          sta  pc        ; save pcl
.c2b6	68		          pla            ; get pch stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2b7	8d 13 c2	          sta  pc+1      ; save pch
.c2ba	68		          pla            ; get y stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.c2bb	a8		          tay            ; set y
.c2bc	68		          pla            ; get x stack : a, flg, zp2h, zp2l, zp1h, zp1l
.c2bd	aa		          tax            ; set x
.c2be	68		          pla            ; get a stack : flg, zp2h, zp2l, zp1h, zp1l
.c2bf	8d 11 c2	          sta  ra        ; save a
.c2c2	68		          pla            ; get flag stack : zp2h, zp2l, zp1h, zp1l
.c2c3	8d 10 c2	          sta  rp        ; save rp
.c2c6	ad 13 c2	          lda  pc+1      ; get pch
.c2c9	48		          pha            ; stack : pch
.c2ca	ad 12 c2	          lda  pc
.c2cd	48		          pha            ; stack : pcl, pch
.c2ce	ad 10 c2	          lda  rp        ; get rp
.c2d1	48		          pha            ; stack : rp, pcl, pch
.c2d2	ad 11 c2	          lda  ra        ; set ra
.c2d5	58		          cli
.c2d6	28		          plp            ; stack : pcl, pch
.c2d7	60		          rts

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-cbm-mem.asm

.c2d8			blkfill
.c2d8	20 14 c2	bf0            jsr  push
.c2db	20 a3 c3	               jsr  savezp1
.c2de	84 fc		               sty  zpage1+1
.c2e0	a0 00		               ldy  #$00
.c2e2	84 fb		               sty  zpage1
.c2e4	91 fb		bf1            sta  (zpage1),y
.c2e6	c8		               iny
.c2e7	d0 fb		               bne  bf1
.c2e9	20 b2 c3	               jsr  restzp1
.c2ec	20 4f c2	               jsr  pop
.c2ef	60		               rts
.c2f0			memfill
.c2f0	20 14 c2	               jsr  push
.c2f3	20 d8 c2	mf1            jsr  blkfill
.c2f6	c8		               iny
.c2f7	ca		               dex
.c2f8	d0 f9		               bne  mf1
.c2fa	20 4f c2	               jsr  pop
.c2fd	60		               rts
.c2fe			memmove
.c2fe	20 14 c2	               jsr  push
.c301	ba		               tsx            ; On se crée un pointeur ...
.c302	8a		               txa
.c303	18		               clc
.c304	69 0b		               adc  #11
.c306	a8		               tay
.c307	a2 06		               ldx  #$06
.c309	b9 00 01	nextbyte       lda  $0100,y
.c30c	99 58 c3	               sta  words,y
.c30f	c8		               iny
.c310	ca		               dex
.c311	d0 f6		               bne  nextbyte
.c313	ad 58 c3	               lda  s
.c316	8d 2f c3	               sta  source+1
.c319	ad 59 c3	               lda  s+1
.c31c	8d 30 c3	               sta  source+2
.c31f	ad 5a c3	               lda  d
.c322	8d 2c c3	               sta  destin+1
.c325	ad 5b c3	               lda  d+1
.c328	8d 2d c3	               sta  destin+2
.c32b	ad ff ff	destin         lda  $ffff
.c32e	8d ff ff	source         sta  $ffff
.c331	ee 2c c3	               inc  destin+1
.c334	d0 03		               bne  src
.c336	ee 2d c3	               inc  destin+2
.c339	ee 2f c3	src            inc  source+1
.c33c	d0 03		               bne  cnt
.c33e	ee 30 c3	               inc  source+2
.c341	ad 5c c3	cnt            lda  compte
.c344	d0 08		               bne  decit
.c346	ad 5d c3	               lda  compte+1
.c349	f0 09		               beq  fini
.c34b	ce 5d c3	               dec  compte+1
.c34e	ce 5c c3	decit          dec  compte
.c351	4c 2b c3	               jmp  destin
.c354	20 4f c2	fini           jsr  pop
.c357	60		               rts
.c358			words
>c358	00 00		s         .word     $0000
>c35a	00 00		d         .word     $0000
>c35c	00 00		compte    .word     $0000
.c35e			decword
.c35e	20 14 c2	               jsr  push
.c361	86 fd		               stx  zpage2
.c363	84 fe		               sty  zpage2+1
.c365	20 4f c2	               jsr  pop
.c368	60		               rts
.c369			inczpage1
.c369			inczp1
.c369	08		               php
.c36a	48		               pha
.c36b	e6 fb		               inc  zpage1
.c36d	a5 fb		               lda  zpage1
.c36f	d0 02		               bne  nopage
.c371	e6 fc		               inc  zpage1+1
.c373	68		nopage         pla
.c374	28		               plp
.c375	60		               rts
.c376			deczpage1
.c376			deczp1
.c376	08		               php
.c377	48		               pha
.c378	c6 fb		               dec  zpage1
.c37a	a5 fb		               lda  zpage1
.c37c	c9 ff		               cmp  #$ff
.c37e	f0 02		               beq  report
.c380	d0 02		               bne  nopage
.c382	c6 fc		report         dec  zpage1+1
.c384	68		nopage         pla
.c385	28		               plp
.c386	60		               rts
.c387			inczpage2
.c387			inczp2
.c387	08		               php
.c388	48		               pha
.c389	e6 fd		               inc  zpage2
.c38b	a5 fd		               lda  zpage2
.c38d	d0 02		               bne  nopage
.c38f	e6 fe		               inc  zpage2+1
.c391	68		nopage         pla
.c392	28		               plp
.c393	60		               rts
.c394			deczpage2
.c394			deczp2
.c394	08		               php
.c395	c6 fd		               dec  zpage2
.c397	a5 fd		               lda  zpage2
.c399	c9 ff		               cmp  #$ff
.c39b	f0 02		               beq  report
.c39d	d0 02		               bne  nopage
.c39f	c6 fe		report         dec  zpage2+1
.c3a1	28		nopage         plp
.c3a2	60		               rts
.c3a3			savezp1
.c3a3	08		               php
.c3a4	48		               pha
.c3a5	a5 fb		               lda  zpage1
.c3a7	8d 34 c4	               sta  zp1
.c3aa	a5 fc		               lda  zpage1+1
.c3ac	8d 35 c4	               sta  zp1+1
.c3af	68		               pla
.c3b0	28		               plp
.c3b1	60		               rts
.c3b2			restzp1
.c3b2	08		               php
.c3b3	48		               pha
.c3b4	ad 34 c4	               lda  zp1
.c3b7	85 fb		               sta  zpage1
.c3b9	ad 35 c4	               lda  zp1+1
.c3bc	85 fc		               sta  zpage1+1
.c3be	68		               pla
.c3bf	28		               plp
.c3c0	60		               rts
.c3c1			savezp2
.c3c1	08		               php
.c3c2	48		               pha
.c3c3	a5 fd		               lda  zpage2
.c3c5	8d 36 c4	               sta  zp2
.c3c8	a5 fe		               lda  zpage2+1
.c3ca	8d 37 c4	               sta  zp2+1
.c3cd	68		               pla
.c3ce	28		               plp
.c3cf	60		               rts
.c3d0			restzp2
.c3d0	08		               php
.c3d1	48		               pha
.c3d2	ad 36 c4	               lda  zp2
.c3d5	85 fd		               sta  zpage2
.c3d7	ad 37 c4	               lda  zp2+1
.c3da	85 fe		               sta  zpage2+1
.c3dc	68		               pla
.c3dd	28		               plp
.c3de	60		               rts
.c3df			xy2addr
.c3df	08		               php
.c3e0	48		               pha
.c3e1	8a		               txa
.c3e2	48		               pha
.c3e3	98		               tya
.c3e4	48		               pha
.c3e5	ad 2f c4	               lda  addr1+1
.c3e8	8d 31 c4	               sta  addr2+1
.c3eb	ad 2e c4	               lda  addr1
.c3ee	8d 30 c4	               sta  addr2
.c3f1	c0 00		               cpy  #$00
.c3f3	f0 0f		               beq  addx
.c3f5	18		moreline       clc
.c3f6	6d 2d c4	               adc  ymult
.c3f9	90 03		               bcc  norepy
.c3fb	ee 31 c4	               inc  addr2+1
.c3fe	8d 30 c4	norepy         sta  addr2
.c401	88		               dey
.c402	d0 f1		               bne  moreline
.c404	8a		addx           txa
.c405	18		               clc
.c406	6d 30 c4	               adc  addr2
.c409	90 03		               bcc  thatsit
.c40b	ee 31 c4	               inc  addr2+1
.c40e	8d 30 c4	thatsit        sta  addr2
.c411	68		               pla
.c412	a8		               tay
.c413	68		               pla
.c414	aa		               tax
.c415	68		               pla
.c416	28		               plp
.c417	60		               rts
.c418			loop
.c418	ce 38 c4	               dec  loopcount
.c41b	d0 03		               bne  norep
.c41d	ce 39 c4	               dec  loopcount+1
.c420	ad 38 c4	norep          lda  loopcount
.c423	c9 00		               cmp  #$00
.c425	d0 05		               bne  out
.c427	4d 39 c4	               eor  loopcount+1
.c42a	c9 ff		               cmp  #$ff
.c42c	60		out            rts
>c42d	28		ymult          .byte     40
>c42e	00 00		addr1          .word     $0000
>c430	00 00		addr2          .word     $0000
>c432	00 00		bytecnt        .word     $0000
>c434	00 00		zp1            .word     $0000
>c436	00 00		zp2            .word     $0000
>c438	00 00		loopcount      .word     $0000

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-cbm-hex.asm

>c43a	01		a2hexcol       .byte     1              ; pour aputscxy
>c43b	00		a2hexbkcol     .byte     %00000000
.c43c			a2hexpos
>c43c	00		a2hexpx        .byte     0              ; pour aputsxy
>c43d	00		a2hexpy        .byte     0
>c43e	24		a2hexprefix    .byte     "$"            ; pour aputs
>c43f	00 00		a2hexstr       .word     $00
>c441	00 00		               .word     $00
>c443	00		               .byte     0              ; 0 end string
>c444	30 30 30 30	abin           .null     "00000000"
>c448	30 30 30 30 00
>c44d	20 20 20 00	adec           .null     "   "
.c451			putahexfmtxy
.c451	20 14 c2	               jsr  push
.c454	20 a0 c4	               jsr  atohex
.c457	ae 3c c4	               ldx  a2hexpx
.c45a	ac 3d c4	               ldy  a2hexpy
.c45d	20 01 c7	               jsr  gotoxy
.c460	a2 3e		               ldx  #<a2hexprefix
.c462	a0 c4		               ldy  #>a2hexprefix
.c464	20 f3 c6	               jsr  puts
.c467	20 4f c2	               jsr  pop
.c46a	60		               rts
.c46b			putahexfmt
.c46b	20 14 c2	               jsr  push
.c46e	20 a0 c4	               jsr  atohex
.c471	a2 3e		               ldx  #<a2hexprefix
.c473	a0 c4		               ldy  #>a2hexprefix
.c475	20 f3 c6	               jsr  puts
.c478	20 4f c2	               jsr  pop
.c47b	60		               rts
.c47c			putahex
.c47c	20 14 c2	               jsr  push
.c47f	20 a0 c4	               jsr  atohex
.c482	a2 3f		               ldx  #<a2hexstr
.c484	a0 c4		               ldy  #>a2hexstr
.c486	20 f3 c6	               jsr  puts
.c489	20 4f c2	               jsr  pop
.c48c	60		               rts
.c48d			nibtohex
.c48d	08		               php
.c48e	29 0f		               and  #$0f
.c490	f8		               sed
.c491	18		               clc
.c492	69 90		               adc  #$90
.c494	69 40		               adc  #$40
.c496	d8		               cld
.c497	28		               plp
.c498	60		               rts
.c499			lsra4bits
.c499	08		               php
.c49a	4a		               lsr
.c49b	4a		               lsr
.c49c	4a		               lsr
.c49d	4a		               lsr
.c49e	28		               plp
.c49f	60		               rts
.c4a0			atohex
.c4a0	08		               php
.c4a1	48		               pha
.c4a2	48		               pha
.c4a3	20 99 c4	               jsr  lsra4bits
.c4a6	20 8d c4	               jsr  nibtohex
.c4a9	8d 3f c4	               sta  a2hexstr
.c4ac	68		               pla
.c4ad	20 8d c4	               jsr  nibtohex
.c4b0	8d 40 c4	               sta  a2hexstr+1
.c4b3	a9 00		               lda  #$00                ; set end of string
.c4b5	8d 41 c4	               sta  a2hexstr+2
.c4b8	68		               pla
.c4b9	28		               plp
.c4ba	60		               rts
.c4bb			xy2hex
.c4bb	20 14 c2	               jsr  push
.c4be	20 a0 c4	               jsr  atohex
.c4c1	8a		               txa
.c4c2	48		               pha
.c4c3	20 99 c4	               jsr  lsra4bits
.c4c6	20 8d c4	               jsr  nibtohex
.c4c9	8d 3f c4	               sta  a2hexstr
.c4cc	68		               pla
.c4cd	20 8d c4	               jsr  nibtohex
.c4d0	8d 40 c4	               sta  a2hexstr+1
.c4d3	98		               tya
.c4d4	48		               pha
.c4d5	20 99 c4	               jsr  lsra4bits
.c4d8	20 8d c4	               jsr  nibtohex
.c4db	8d 41 c4	               sta  a2hexstr+2
.c4de	68		               pla
.c4df	20 8d c4	               jsr  nibtohex
.c4e2	8d 42 c4	               sta  a2hexstr+3
.c4e5	a9 00		               lda  #$00                ; 0 ended string
.c4e7	8d 43 c4	               sta  a2hexstr+4
.c4ea	20 4f c2	               jsr  pop
.c4ed			atobin
.c4ed	20 14 c2	               jsr  push
.c4f0	a2 08		               ldx  #8
.c4f2	a0 00		               ldy  #0
.c4f4	18		               clc
.c4f5	2a		nextbit        rol
.c4f6	48		               pha
.c4f7	69 00		               adc  #$00
.c4f9	29 01		               and  #$01
.c4fb	20 8d c4	               jsr  nibtohex
.c4fe	99 44 c4	               sta  abin,y
.c501	68		               pla
.c502	c8		               iny
.c503	ca		               dex
.c504	d0 ef		               bne  nextbit
.c506	a9 00		               lda  #0
.c508	99 44 c4	               sta  abin,y
.c50b	20 4f c2	               jsr  pull
.c50e	60		               rts
.c50f			putabin
.c50f	20 ed c4	               jsr     atobin
.c512	20 14 c2	               jsr     push
.c515	a2 44		               ldx     #<abin
.c517	a0 c4		               ldy     #>abin
.c519	20 f3 c6	               jsr     puts
.c51c	20 4f c2	               jsr     pop
.c51f	60		               rts
.c520			printabin
.c520	20 14 c2	               jsr     push
.c523	a2 44		               ldx     #<abin
.c525	a0 c4		               ldy     #>abin
.c527	20 f3 c6	               jsr     puts
.c52a	20 4f c2	               jsr     pop
.c52d	60		               rts
.c52e			putabinfmt
.c52e	08		               php
.c52f	48		               pha
.c530	a9 25		               lda     #"%"
.c532	20 a5 c6	               jsr     putch
.c535	68		               pla
.c536	20 0f c5	               jsr     putabin
.c539	28		               plp
.c53a	60		               rts
.c53b			putabinxy
.c53b	20 01 c7	               jsr     gotoxy
.c53e	20 0f c5	               jsr     putabin
.c541	60		               rts
.c542			putabinfmtxy
.c542	20 01 c7	               jsr     gotoxy
.c545	20 2e c5	               jsr     putabinfmt
.c548	60		               rts
.c549			atodec
.c549	20 14 c2	               jsr  push
.c54c	f8		               sed            ; On se place en mode décimal.
.c54d	aa		               tax            ; On déplace a dans x.
.c54e	a0 00		               ldy  #$00      ; On pointe Y au début de la str.
.c550	a9 00		               lda  #$00      ; 0 dans A.
.c552	18		nextbit        clc            ; Bit carry a 0.
.c553	69 01		               adc  #$01      ; Ajoute 1 a A.
.c555	90 01		               bcc  decx      ; Pas de carry, pas de report.
.c557	c8		               iny            ; On incrémente Y
.c558	ca		decx           dex            ; X=X-1
.c559	d0 f7		               bne  nextbit   ; Pas encore a 0, on boucle.
.c55b	48		               pha            ; A sur le stack.
.c55c	98		               tya            ; Y dans A (MSB)
.c55d	20 8d c4	               jsr  nibtohex  ; a hex petsci ...
.c560	8d 4d c4	               sta  adec      ; ... dans tampon.
.c563	68		               pla            ; Récupere A
.c564	48		               pha            ;
.c565	20 8d c4	               jsr  nibtohex
.c568	8d 4f c4	               sta  adec+2
.c56b	68		               pla
.c56c	6a		               ror
.c56d	6a		               ror
.c56e	6a		               ror
.c56f	6a		               ror
.c570	20 8d c4	               jsr  nibtohex
.c573	8d 4e c4	               sta  adec+1
.c576	d8		               cld            ; On revient en mode binaire.
.c577	20 4f c2	               jsr  pull
.c57a	60		               rts
.c57b			putadec
.c57b	20 14 c2	               jsr  push
.c57e	20 49 c5	               jsr  atodec
.c581	a2 4d		               ldx  #<adec
.c583	a0 c4		               ldy  #>adec+1
.c585	20 f3 c6	               jsr  puts
.c588	20 4f c2	               jsr  pop
.c58b	60		               rts

;******  Return to file: j2tester.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/lib-c64-text-mc.asm

>c58c	00 00		scrptr         .word     $00            ; ... pointe position ecran, ...
>c58e	00 00		colptr         .word     $00            ; ... pointe position couleur, ...
>c590	01		curcol         .byte     $01            ; ... la couleur du caractère, ...
>c591	06		brdcol         .byte     vbleu          ; ... la couleur de la bordure et
>c592	00		vicbkcol0      .byte     vnoir  ;$0b    ; 0,
>c593	02		vicbkcol1      .byte     vrouge ;$0b    ; 1,
>c594	05		vicbkcol2      .byte     vvert  ;$0b    ; 2,
>c595	06		vicbkcol3      .byte     vbleu  ;$0b    ; et 3.
>c596	00		inverse        .byte     $00
>c597	00 00 00 00	scraddr        .byte     0,0,0,0,0
>c59b	00
>c59c	00 00 00 00	coladdr        .byte     0,0,0,0,0
>c5a0	00
>c5a1	00		bkcol          .byte     %00000000      ; Pointeur de la couleur actuelle
>c5a2	00 04		virtaddr       .word     $0400          ; L'adresse de l'ecran virtuel
=$00			bkcol0         =         %00000000      ;
=$40			bkcol1         =         %01000000
=$80			bkcol2         =         %10000000
=$c0			bkcol3         =         %11000000
.c5a4			scrmaninit
.c5a4	08		               php            ; On sauvegarde les registres
.c5a5	48		               pha
.c5a6	a9 15		               lda  #%00010101; Selectionne la plage memoire video
.c5a8	8d 18 d0	               sta  $d018     ; et le jeu de caracteeres.
.c5ab	ad 16 d0	               lda  $d016     ; 53270 Lecture valeur actuelle pour ne
.c5ae	09 10		               ora  #%00010000; modifier que le bit 4.
.c5b0	29 ef		               and  #%11101111
.c5b2	8d 16 d0	               sta  $d016 ; 53270
.c5b5	ad 11 d0	               lda  $d011     ; On ne change que le bit 6 pour
.c5b8	09 40		               ora  #%01000000; selectionner le md. couleur de
.c5ba	8d 11 d0	               sta  $d011     ; 53270   ; fond etendu.
.c5bd	ad 92 c5	               lda  vicbkcol0
.c5c0	8d 21 d0	               sta  $d021     ; 53281
.c5c3	ad 93 c5	               lda  vicbkcol1
.c5c6	8d 22 d0	               sta  $d022     ; 53282
.c5c9	ad 94 c5	               lda  vicbkcol2
.c5cc	8d 23 d0	               sta  $d023     ; 53283
.c5cf	ad 95 c5	               lda  vicbkcol3
.c5d2	8d 24 d0	               sta  $d024     ; 54284
.c5d5	a5 00		               lda  bkcol0    ; On charge et utilise la couleur de ...
.c5d7	8d a1 c5	               sta  bkcol     ; ... fond par defaut des caracteres.
.c5da	20 34 c6	               jsr  cls       ; Finalement on efface l'ecran
.c5dd	68		               pla
.c5de	28		               plp
.c5df	60		               rts
.c5e0			curshome
.c5e0	08		               php                      ; Sauvegarde flags ...
.c5e1	48		               pha                      ; ... et accumulateur
.c5e2	ad a2 c5	               lda  virtaddr            ; In replace le pointeur ...
.c5e5	8d 8c c5	               sta  scrptr              ; ... d'écran virtuel à sa ...
.c5e8	ad a3 c5	               lda  virtaddr+1          ; ... position initiale.
.c5eb	8d 8d c5	               sta  scrptr+1
.c5ee	20 1f c6	               jsr  synccolptr          ; On synchronise le ptr couleur.
.c5f1	ad 92 c5	               lda  vicbkcol0
.c5f4	8d 21 d0	               sta  $d021               ; On recharge les couleurs ...
.c5f7	ad 93 c5	               lda  vicbkcol1           ; ... de fond par defaut tel ...
.c5fa	8d 22 d0	               sta  $d022               ; ... que specifie dans les ...
.c5fd	ad 94 c5	               lda  vicbkcol2           ; ... les variables globales.
.c600	8d 23 d0	               sta  $d023
.c603	ad 95 c5	               lda  vicbkcol3
.c606	8d 24 d0	               sta  $d024
.c609	68		               pla                      ; Récupère l'accumulateur ...
.c60a	28		               plp                      ; ... et les flags
.c60b	60		               rts
.c60c			incscrptr
.c60c	08		               php                      ; Sauvegarde flags ...
.c60d	48		               pha                      ; ... et accumulateur
.c60e	ee 8c c5	               inc  scrptr              ; Incremente le pointeur
.c611	ad 8c c5	               lda  scrptr              ; Regarde si on doit faire un ...
.c614	d0 03		               bne  pasdereport         ; ... report dans le MSB
.c616	ee 8d c5	               inc  scrptr+1            ; Si oui on fait le repport
.c619	20 1f c6	pasdereport    jsr  synccolptr          ; On synchronise le ptr couleur.
.c61c	68		               pla                      ; Récupère l'accumulateur ...
.c61d	28		               plp                      ; ... et les flags
.c61e	60		               rts
.c61f			synccolptr
.c61f	08		               php                      ; Sauvegarde flags ...
.c620	48		               pha                      ; ... et accumulateur
.c621	ad 8c c5	               lda  scrptr              ; Récupère le LSB du scrptr ...
.c624	8d 8e c5	               sta  colptr              ; ... pour le placer dans le colptr.
.c627	ad 8d c5	               lda  scrptr+1            ; Récupère le mSB du scrptr, ...
.c62a	29 03		               and  #%00000011          ; ... le converti pour pointer ...
.c62c	09 d8		               ora  #%11011000          ; ... la RAM couleur ...
.c62e	8d 8f c5	               sta  colptr+1            ; ... et le sauvegarde.
.c631	68		               pla                      ; Récupère l'accumulateur ...
.c632	28		               plp                      ; ... et les flags
.c633	60		               rts
.c634			cls
.c634	20 14 c2	               jsr  push                ; On sauvegarde les registres
.c637	ad a2 c5	               lda  virtaddr            ; On replace le curseur d'ecran à
.c63a	8d 8c c5	               sta  scrptr
.c63d	ad a3 c5	               lda  virtaddr+1          ; sa position initiale, ($0400).
.c640	8d 8d c5	               sta  scrptr+1
.c643	20 1f c6	               jsr  synccolptr          ; On synchronise la couleur.
.c646	20 f5 c7	               jsr  scrptr2zp1          ; L'adresse actuelle dans le ZP1.
.c649	ad 91 c5	               lda  brdcol              ; On place la couleur ...
.c64c	8d 20 d0	               sta  vicbordcol          ; ... de la bordure.
.c64f	ad a1 c5	               lda  bkcol               ; Associer couleur pour ...
.c652	8d 21 d0	               sta  vicbackcol          ; ... remplir l'ecran ...
.c655	a9 20		               lda  #$20                ; ... de caracteres espace.
.c657	a2 04		               ldx  #4                  ; Quatre blocs de ...
.c659	a0 00		nextline       ldy  #0                  ; ... 256 caracteres.
.c65b			nextcar
.c65b	91 fb		               sta  (zpage1),y          ;
.c65d	a5 fc		               lda  zpage1+1
.c65f	48		               pha
.c660	29 03		               and  #%00000011
.c662	09 d8		               ora  #%11011000
.c664	85 fc		               sta  zpage1+1
.c666	a9 00		               lda  #0
.c668	91 fb		               sta  (zpage1),y
.c66a	68		               pla
.c66b	85 fc		               sta  zpage1+1
.c66d	a9 20		               lda  #$20
.c66f	88		               dey
.c670	d0 e9		               bne  nextcar
.c672	e6 fc		               inc  zpage1+1
.c674	ca		               dex
.c675	d0 e4		               bne  nextcar
.c677	a9 00		               lda  #$00
.c679	8d 8c c5	               sta  scrptr
.c67c	a9 04		               lda  #$04
.c67e	8d 8d c5	               sta  scrptr+1
.c681	20 1f c6	               jsr  synccolptr
.c684	20 4f c2	               jsr  pop
.c687	60		               rts
.c688			setborder
.c688	08		               php
.c689	8d 91 c5	               sta  brdcol
.c68c	8d 20 d0	               sta  vicbordcol
.c68f	28		               plp
.c690	60		               rts
.c691			setinverse
.c691	08		               php
.c692	48		               pha
.c693	a9 80		               lda  #%10000000
.c695	8d 96 c5	               sta  inverse
.c698	68		               pla
.c699	28		               plp
.c69a	60		               rts
.c69b			clrinverse
.c69b	08		               php
.c69c	48		               pha
.c69d	a9 00		               lda  #%00000000
.c69f	8d 96 c5	               sta  inverse
.c6a2	68		               pla
.c6a3	28		               plp
.c6a4	60		               rts
.c6a5			putch
.c6a5	20 14 c2	               jsr  push           ; On sauvegarde les registres
.c6a8	20 f5 c7	               jsr  scrptr2zp1     ; Place le ptr d'ecran sur zp1
.c6ab	29 3f		               and  #%00111111     ; Masque des bits 6 et 7 pour la ouleur.
.c6ad	48		               pha
.c6ae	ad a1 c5	               lda  bkcol
.c6b1	29 c0		               and  #%11000000
.c6b3	8d a1 c5	               sta  bkcol
.c6b6	68		               pla
.c6b7	0d a1 c5	               ora  bkcol          ; On y ajoute la couleur du fond.
.c6ba	a0 00		               ldy  #$00           ; Met Y à 0
.c6bc	91 fb		               sta  (zpage1),y     ; Affiche le caractere
.c6be	ae 8f c5	               ldx  colptr+1       ; Place le MSB du ptr de couleur
.c6c1	86 fc		               stx  zpage1+1       ; ... dans le MSB du zp1.
.c6c3	ad 90 c5	               lda  curcol         ; Charge la couleur voulu dans.
.c6c6	91 fb		               sta  (zpage1),y     ; ... la ram de couleur.
.c6c8	20 0c c6	               jsr  incscrptr      ; Incremente le pointeur d'ecran.
.c6cb	20 4f c2	               jsr  pop            ; Replace tous les registres
.c6ce	60		               rts
.c6cf			z2putch
.c6cf	20 14 c2	               jsr  push           ; On sauvegarde les registres
.c6d2	a0 00		               ldy  #$0            ; Met Y à 0
.c6d4	b1 fd		               lda  (zpage2),y     ; Charge le caractere
.c6d6	20 a5 c6	               jsr  putch          ; Appel pour affichage
.c6d9	20 4f c2	               jsr  pop            ; Replace tous les registres
.c6dc	60		               rts
.c6dd			z2puts
.c6dd	20 14 c2	               jsr  push           ; On sauvegarde les registres
.c6e0	a0 00		               ldy  #$0            ; Met Y à 0
.c6e2	b1 fd		nextcar        lda  (zpage2),y     ; Charge le caractere
.c6e4	f0 09		               beq  endstr         ; Est-ce le 0 de fin de chaine ?
.c6e6	20 cf c6	               jsr  z2putch        ; Appel pour affichage
.c6e9	20 87 c3	               jsr  inczp2         ; On pointe zp2 sur le prochain caractere.
.c6ec	4c e2 c6	               jmp  nextcar        ; On passe au prochain
.c6ef	20 4f c2	endstr         jsr  pop            ; Replace tous les registres
.c6f2	60		               rts
.c6f3			puts
.c6f3	20 14 c2	               jsr  push           ; On sauvegarde les registres
.c6f6	86 fd		               stx  zpage2         ; On positionne xp2 en fonction de
.c6f8	84 fe		               sty  zpage2+1       ; l'adresse reçcu dans X et Y
.c6fa	20 dd c6	               jsr  z2puts         ; Appel pour affichage
.c6fd	20 4f c2	               jsr  pop            ; Replace tous les registres
.c700	60		               rts
.c701			gotoxy
.c701	20 14 c2	               jsr  push           ; On sauvegarde les registres
.c704	20 e0 c5	               jsr  curshome       ;  retourne le curseur virtuel a 0,0.
.c707	c0 00		yagain         cpy  #0             ; Devons nous changer de ligne ?
.c709	f0 09		               beq  setx           ; Si non, on verifi les colonnes.
.c70b	a9 28		               lda  #40            ; Si oui on ajoute 40
.c70d	20 92 c7	               jsr  saddscrptr     ;  à l'adresse du pointeur virtuel autant
.c710	88		               dey                 ;  de fois qu'il est spécifié dans y.
.c711	4c 07 c7	               jmp  yagain         ; On passe au prochain y.
.c714	8a		setx           txa                 ; On ajoute la valeur de X
.c715	20 92 c7	               jsr  saddscrptr     ;  à l'adresse di pointeur virtuel.
.c718	20 1f c6	               jsr  synccolptr     ; Synchro du pointeur des couleurs
.c71b	20 4f c2	               jsr  pop            ; Replace tous les registres
.c71e	60		               rts
.c71f			putsxy
.c71f	20 14 c2	               jsr  push           ; On sauvegarde les registres et le zp2
.c722	86 fd		               stx  zpage2         ; Place l'adr de chaine dans zp2
.c724	84 fe		               sty  zpage2+1       ; X = MSB, Y = LSB
.c726	a0 00		               ldy  #0             ; On place le compteur
.c728	b1 fd		               lda  (zpage2),y     ; Lecture de la position X
.c72a	aa		               tax                 ; de A à X
.c72b	20 87 c3	               jsr  inczp2         ; On deplace le pointeur
.c72e	b1 fd		               lda  (zpage2),y     ; Lecture de la position Y
.c730	a8		               tay                 ; de A à Y
.c731	20 01 c7	               jsr  gotoxy         ; gotoxy : X=col, Y=ligne
.c734	20 87 c3	               jsr  inczp2         ; On deplace le pointeur
.c737	20 dd c6	               jsr  z2puts         ; On imprime la chaine
.c73a	20 4f c2	               jsr  pop            ; Replace tous les registres
.c73d	60		               rts
.c73e			putscxy
.c73e	20 14 c2	               jsr  push           ; On Sauvegarde registres et zp2
.c741	86 fd		               stx  zpage2         ; On place l'adresse de chaine dans zp2
.c743	84 fe		               sty  zpage2+1       ; X = MSB, Y = LSB
.c745	a0 00		               ldy  #0             ; Place le compteur
.c747	b1 fd		               lda  (zpage2),y     ; Charge la couleur
.c749	8d 90 c5	               sta  curcol         ; ... et on la definie
.c74c	20 87 c3	               jsr  inczp2         ; Pointe le prochain byte
.c74f	b1 fd		               lda  (zpage2),y     ; Récupere et sauvegarde ...
.c751	8d a1 c5	               sta  bkcol          ; ... l'index de couleur de fond
.c754	20 87 c3	               jsr  inczp2         ; Deplace le pointeur
.c757	b1 fd		               lda  (zpage2),y     ; Lecture de la position X
.c759	aa		               tax                 ; ... de A à X
.c75a	20 87 c3	               jsr  inczp2         ; Deplace le pointeur
.c75d	b1 fd		               lda  (zpage2),y     ; Lecture de la position Y
.c75f	a8		               tay                 ; de A à Y
.c760	20 01 c7	               jsr  gotoxy         ; gotoxy : X=col, y=ligne
.c763	20 87 c3	               jsr  inczp2         ; Place le ptr en début de chaine
.c766	20 dd c6	               jsr  z2puts         ; On imprime la chaine
.c769	20 4f c2	               jsr  pop
.c76c	60		               rts
.c76d			setcurcol
.c76d	08		               php
.c76e	8d 90 c5	               sta  curcol
.c771	28		               plp
.c772	60		               rts
.c773			setvicbkcol
.c773	08		               php
.c774	48		               pha
.c775	8a		               txa
.c776	29 03		               and  #$03
.c778	aa		               tax
.c779	68		               pla
.c77a	9d 92 c5	               sta  vicbkcol0,x
.c77d	9d 21 d0	               sta  $d021,x
.c780	28		               plp
.c781	60		               rts
.c782			setbkcol
.c782	08		               php
.c783	48		               pha
.c784	0a		               asl
.c785	0a		               asl
.c786	0a		               asl
.c787	0a		               asl
.c788	0a		               asl
.c789	0a		               asl
.c78a	29 c0		               and  #$c0
.c78c	8d a1 c5	               sta  bkcol
.c78f	68		               pla
.c790	28		               plp
.c791	60		               rts
.c792			saddscrptr
.c792	08		               php
.c793	48		               pha
.c794	18		               clc
.c795	6d 8c c5	               adc  scrptr
.c798	8d 8c c5	               sta  scrptr
.c79b	90 03		               bcc  norep
.c79d	ee 8d c5	               inc  scrptr+1
.c7a0	68		norep          pla
.c7a1	28		               plp
.c7a2	60		               rts
.c7a3			scrptr2str
.c7a3	20 14 c2	               jsr  push
.c7a6	ad 8d c5	               lda  scrptr+1
.c7a9	48		               pha
.c7aa	20 99 c4	               jsr  lsra4bits
.c7ad	20 8d c4	               jsr  nibtohex
.c7b0	8d 97 c5	               sta  scraddr
.c7b3	68		               pla
.c7b4	20 99 c4	               jsr  lsra4bits
.c7b7	20 8d c4	               jsr  nibtohex
.c7ba	8d 98 c5	               sta  scraddr+1
.c7bd	ad 8d c5	               lda  scrptr+1
.c7c0	48		               pha
.c7c1	20 99 c4	               jsr  lsra4bits
.c7c4	20 8d c4	               jsr  nibtohex
.c7c7	8d 97 c5	               sta  scraddr
.c7ca	68		               pla
.c7cb	20 99 c4	               jsr  lsra4bits
.c7ce	20 8d c4	               jsr  nibtohex
.c7d1	8d 98 c5	               sta  scraddr+1
.c7d4	ad 8c c5	               lda  scrptr
.c7d7	48		               pha
.c7d8	20 99 c4	               jsr  lsra4bits
.c7db	20 8d c4	               jsr  nibtohex
.c7de	8d 99 c5	               sta  scraddr+2
.c7e1	8d 9e c5	               sta  coladdr+2
.c7e4	68		               pla
.c7e5	20 99 c4	               jsr  lsra4bits
.c7e8	20 8d c4	               jsr  nibtohex
.c7eb	8d 9a c5	               sta  scraddr+3
.c7ee	8d 9f c5	               sta  coladdr+3
.c7f1	20 4f c2	               jsr  pop
.c7f4	60		               rts
.c7f5			scrptr2zp1
.c7f5	08		               php
.c7f6	48		               pha
.c7f7	ad 8c c5	               lda  scrptr
.c7fa	85 fb		               sta  zpage1
.c7fc	ad 8d c5	               lda  scrptr+1
.c7ff	85 fc		               sta  zpage1+1
.c801	68		               pla
.c802	28		               plp
.c803	60		               rts
.c804			colptr2zp1
.c804	08		               php
.c805	48		               pha
.c806	ad 8e c5	               lda  colptr
.c809	85 fb		               sta  zpage1
.c80b	ad 8f c5	               lda  colptr+1
.c80e	85 fc		               sta  zpage1+1
.c810	68		               pla
.c811	28		               plp
.c812	60		               rts
.c813			scrptr2zp2
.c813	08		               php
.c814	48		               pha
.c815	ad 8c c5	               lda  scrptr
.c818	85 fd		               sta  zpage2
.c81a	ad 8d c5	               lda  scrptr+1
.c81d	85 fe		               sta  zpage2+1
.c81f	68		               pla
.c820	28		               plp
.c821	60		               rts
.c822			colptr2zp2
.c822	08		               php
.c823	48		               pha
.c824	ad 8e c5	               lda  colptr
.c827	85 fd		               sta  zpage2
.c829	ad 8f c5	               lda  colptr+1
.c82c	85 fe		               sta  zpage2+1
.c82e	68		               pla
.c82f	28		               plp
.c830	60		               rts
.c831			putrahex
.c831	08		               php
.c832	48		               pha
.c833	20 a0 c4	               jsr     atohex
.c836	a2 3a		               ldx     #<a2hexcol
.c838	a0 c4		               ldy     #>a2hexcol
.c83a	20 f3 c6	               jsr     puts
.c83d	68		               pla
.c83e	28		               plp
.c83f	60		               rts
.c840			putrahexxy
.c840	08		               php
.c841	48		               pha
.c842	20 a0 c4	               jsr  atohex
.c845	a9 3c		               lda  #<a2hexpos
.c847	a0 c4		               ldy  #>a2hexpos
.c849	20 1f c7	               jsr  putsxy
.c84c	68		               pla
.c84d	28		               plp
.c84e	60		               rts
.c84f			putrahexcxy
.c84f	08		               php
.c850	68		               pla
.c851	20 a0 c4	               jsr  atohex
.c854	a9 3c		               lda  #<a2hexpos
.c856	a0 c4		               ldy  #>a2hexpos
.c858	20 3e c7	               jsr  putscxy
.c85b	68		               pla
.c85c	28		               plp
.c85d	60		               rts

;******  Return to file: j2tester.asm


;******  End of listing
