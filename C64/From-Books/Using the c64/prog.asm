;---------------------------------------; Fichier.: usingc64-124.a; Auteur..: Daniel Lafrance; version.: 20151119; Revision: 0.0.1;---------------------------------------         .include "lib-vars.h"         .include "lib-float.h"         .include "lib-bashead.l";---------------------------------------main         .block         ;jsr bmapinit         ;jsr bmapclr         ;jsr bmpfillbk         ldx #200         ldy #150         jsr calcdot         lda col         jsr putahexdec         lda row         jsr putahexdec         lda lin         jsr putahexdec         lda sbit         jsr putahexdec         nop         rts         .bend;---------------------------------------putahexdec         .block         jsr pushregs         pha         lda #kjaune         jsr $ffd2         pla         jsr putahex         tax         lda #$20         jsr $ffd2         lda #$00         jsr f1fltxa         jsr popregs         lda #$0d         jsr $ffd2         lda #kgris3         jsr $ffd2         rts         .bend;---------------------------------------bmapinit         .block         php         pha         lda vic+$18         ora #$08         sta vic+$18         lda vic+$11         ora #$20         sta vic+$11         pla         plp         rts         .bend;---------------------------------------bmapclr         .block         jsr pushall         lda #<vidstart         sta zp1         lda #>vidstart         sta zp1+1         ldy #$00more     lda #$00         sta (zp1),y         jsr inczp1         lda zp1+1         cmp #$3f         bne more         lda zp1         cmp #$3f         bne more         jsr popall         rts         .bend;---------------------------------------bmpfillbkbakmem   = $0400    ; 1024 end at $0800         .block         jsr pushall         lda #<bakmem         sta zp1         lda #>bakmem         sta zp1+1         ldx #$08         ldy #$00         lda #$01more     sta (zp1),y         jsr inczp1         cpx zp1+1         bne more         jsr popall         rts         .bend;---------------------------------------; Entree: x=colonne y=lignecalcdot         .block         jsr pushall         tya     ;Y contien la ligne         lsr a   ; On divise par 8         lsr a         lsr a         sta row ; et on sauvegarde         txa     ;X contien la colonne         lsr a   ; On divise par 8         lsr a         lsr a         sta col ; et on sauvegarde         tya     ;Y masque avec 7 donne         and #$07; la ligne caractere         sta lin ; du pixel.         txa     ;7-(X and 7) donne le         and #$07; no du bit de l'octet         sta sbit; du pixel.         lda #$07         sec         sbc sbit         sta sbit         ; inserer calcul adresse ici         lda #<baseaddr         sta $62         lda #>baseaddr         sta $63         jsr f1int62         ldx #$01         lda #$02         jsr f1fltxa         jsr popall         rts         .bendrow      .byte $00col      .byte $00lin      .byte $00sbit     .byte $00adrs     .word $00baseaddr .word $2000 ;8192scrwidth .word $0140 ;320fvar1    .word $00,$00,$00fvar2    .word $00,$00,$00;---------------------------------------         .include "lib-push.l"         .include "lib-mem.l"         .include "lib-conv.l"         .include "lib-string.l";---------------------------------------