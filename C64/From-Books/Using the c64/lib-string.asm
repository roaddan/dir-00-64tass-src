;---------------------------------------;---------------------------------------; Fichier.: lib-string.l (seq); Auteur..: Daniel Lafrance; Version.: 0.0.2; Revision: 20251119,20251121;---------------------------------------; Description:; Routines d'affichage de chaines de; caracteres se terminant par $00 sans; recours au rom du Basic 2.0.;---------------------------------------;---------------------------------------; puts entres:;  Pointeur de chaine $FCFB; Desc. Affichage Kernal d'une chaine.;---------------------------------------puts         .block         php        ;Sauve. registres         pha        ; ...         tya        ; ...         pha        ; ...         ldy #$00   ; Y = offsetnextc    lda ($fb),y;lit un caractere         beq out    ;si 0 on sort         jsr $ffd2  ;On l'affiche         iny        ;Pointe le prochain         jmp nextc  ; et l'afficheout      pla        ;Recup. registres         tay        ; ...         pla        ; ...         plp        ; ...         rts         .bend;---------------------------------------; putstrz input:;  Pointeur de chaine $YYXX;---------------------------------------putsyx         .block         jsr pushall;Sauve reg + zps         stx $fb    ;$YYXX dans         sty $fb+1  ; zp1         jsr puts         jsr popall ;Recup reg + zps         rts         .bend;---------------------------------------; putstrzc input:;  Pointeur de chaine $FCFB, Couleur A;---------------------------------------putsc         .block         php        ;Flag sur stack         pha        ;Acc sur stack         pha        ;Sauvegarde acc         lda kcol   ;Recup coul. carac.         sta curcol ; et la sauvegarde         pla        ;Recup. Acc         sta kcol   ;Place coul. voulue         jsr puts   ;Affiche la chaine         lda curcol ;Recup coul. carac.         sta kcol   ; et la replace         pla        ;Recup Acc         plp        ;Recup flag         rts         .bend;---------------------------------------; putscxy input:;  Pointeur de chaine $YYXX, Couleur A;---------------------------------------putxcxy         .block         php       ;Sauve registres         pha       ; ...         pha       ;Sauve Acc         lda kcol  ;Recup couleur carac.         sta curcol; et sauvegarde         pla       ;Recup Acc         sta kcol  ;Place couleur carac.         jsr putsyx;Affiche la chaine         lda curcol         sta kcol         pla         plp         rts         .bend;---------------------------------------