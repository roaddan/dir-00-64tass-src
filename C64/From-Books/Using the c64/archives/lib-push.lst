               ;---------------------------------------               ; Fichier.: lib-push.l (seq)               ; Auteur..: Daniel Lafrance               ; Version.: 0.0.1               ; Revision: 20251119               ;---------------------------------------               pushall                        .block  ;s:pcl,pch1000 08                 php     ;s;p,pcl,pch1001 78                 sei1002 00                 sta ra  ;save a1003 68                 pla     ;s:pcl,pch1004 00                 sta rp  ;save rp1005 68                 pla     ;s:pch1006 00                 sta pc  ;save pcl1007 68                 pla     ;s:1008 00                 sta pc+1;save pch1009 a5 fb              lda $fb ;save fb100b 48                 pha     ;s:fb100c a5 fc              lda $fc ;save fc100e 48                 pha     ;s:fc,fb100f a5 fd              lda $fd ;save fd1011 48                 pha     ;s:fd,fc,fb1012 a5 fe              lda $fe ;save fe1014 48                 pha     ;s:fe,fd,fc,fb1015 00                 lda rp  ;save rp1016 48                 pha     ;s:rp,fe,fd,fc,fb1017 00                 lda ra  ;save ra1018 48                 pha     ;s:ra,rp,fe,fd,fc,fb1019 8a                 txa     ;save rx101a 48                 pha     ;s:rx,ra,rp,fe-fb101b 98                 tya     ;save y101c 48                 pha     ;s:ry,rx,ra,rp,fe-fb101d 00                 lda pc+1;Replace l'adresse101e 48                 pha     ;s:pch,ry,rx,ra,...101f 00                 lda pc  ; de retour.1020 48                 pha     ;s:pcl,pch,ru,rx,ra,...1021 00                 lda rp  ;Place les flags1022 48                 pha     ; sur le stack.1023 00                 lda ra  ;Recupere ra1024 28                 plp     ;Recupere les flags.1025 58                 cli1026 60                 rts                        .bend               ;---------------------------------------               popall                        .block1027 78                 sei     ;s:pcl,pch,ry,rx,...1028 68                 pla     ;s:pch,ry,rx,ra,rp,...1029 00                 sta pc  ;sauve pcl102a 68                 pla     ;s:ry,rx,ra,rp,fe...fb102b 00                 sta pc+1;sauve pch102c 68                 pla     ;s:rx,ra,rp,fe,fd,fc,fb102d a8                 tay     ;recupere ry102e 68                 pla     ;s:ra,rp,fe,fd,fc,fb102f aa                 tax     ;recupere rx1030 68                 pla     ;s:rp,fe,fd,fc,fb1031 00                 sta ra  ;recupere ra1032 68                 pla     ;s:fe,fd,fc,fb1033 00                 sta rp  ;recupere les flags.1034 68                 pla     ;s:fd,fc,fb1035 85 fe              sta $fe ;reccupere fe1037 68                 pla     ;s:fc,fb1038 85 fd              sta $fd ;recupere fd103a 68                 pla     ;s:fb103b 85 fc              sta $fc ;recupere fc103d 68                 pla     ;s:103e 85 fb              sta $fb ;recupere fb1040 00                 lda pc+1;Replaace l'adresse de1041 48                 pha     ;s:pch1042 00                 lda pc  ;retour sur la pile1043 48                 pha     ;s:pcl,pch1044 00                 lda rp  ;recupere les flags1045 48                 pha     ;s:rp,pcl,pch1046 00                 lda ra  ;recupere ra1047 58                 cli     ;1048 28                 plp     ;s:pcl,pch1049 60                 rts                        .bend               ;---------------------------------------               pushregs                        .block  ;s:pcl,pch104a 08                 php     ;s;p,pcl,pch104b 78                 sei104c 00                 sta ra  ;save a104d 68                 pla     ;s:pcl,pch104e 00                 sta rp  ;save rp104f 68                 pla     ;s:pch1050 00                 sta pc  ;save pcl1051 68                 pla     ;s:1052 00                 sta pc+1;save pch1053 00                 lda rp  ;save rp1054 48                 pha     ;s:rp1055 00                 lda ra  ;save ra1056 48                 pha     ;s:ra,rp1057 8a                 txa     ;save rx1058 48                 pha     ;s:rx,ra,rp1059 98                 tya     ;save y105a 48                 pha     ;s:ry,rx,ra,rp105b 00                 lda pc+1;Replace l'adresse105c 48                 pha     ;s:pch,ry,rx,ra,rp105d 00                 lda pc  ; de retour.105e 48                 pha     ;s:pcl,pch,ru,rx,ra,rp105f 00                 lda rp  ;Place les flags1060 48                 pha     ; sur le stack.1061 00                 lda ra  ;Recupere ra1062 28                 plp     ;Recupere les flags.1063 58                 cli1064 60                 rts                        .bend               ;---------------------------------------               popregs                        .block1065 78                 sei     ;s:pcl,pch,ry,rx,ra,rp1066 68                 pla     ;s:pch,ry,rx,ra,rp1067 00                 sta pc  ;sauve pcl1068 68                 pla     ;s:ry,rx,ra,rp1069 00                 sta pc+1;sauve pch106a 68                 pla     ;s:rx,ra,rp106b a8                 tay     ;recupere ry106c 68                 pla     ;s:ra,rp106d aa                 tax     ;recupere rx106e 68                 pla     ;s:rp106f 00                 sta ra  ;recupere ra1070 68                 pla     ;s:1071 00                 sta rp  ;recupere les flags.1072 00                 lda pc+1;Replaace l'adresse de1073 48                 pha     ;s:pch1074 00                 lda pc  ;retour sur la pile1075 48                 pha     ;s:pcl,pch1076 00                 lda rp  ;recupere les flags1077 48                 pha     ;s:rp,pcl,pch1078 00                 lda ra  ;recupere ra1079 58                 cli     ;107a 28                 plp     ;s:pcl,pch107b 60                 rts                        .bend               ;---------------------------------------