lib-vars.h,s,rlib-float.h,s,rlib-bashead.l,s,rlib-push.l,s,rlib-mem.l,s,rlib-conv.l,s,rlib-string.l,s,r               ;---------------------------------------               ; Fichier.: usingc64-124.a               ; Auteur..: Daniel Lafrance               ; version.: 20151119               ; Revision: 0.0.1               ;---------------------------------------lib-vars.h,s,r                        .include "lib-vars.h"lib-float.h,s,r                        .include "lib-float.h"lib-bashead.l,s,r                        .include "lib-bashead.l"               ;---------------------------------------               main                        .block                        ;jsr bmapinit                        ;jsr bmapclr                        ;jsr bmpfillbk1000 a2 c8              ldx #2001002 a0 96              ldy #1501004 20 a5 10           jsr calcdot1007 ad e2 10           lda col100a 20 21 10           jsr putahexdec100d ad e1 10           lda row1010 20 21 10           jsr putahexdec1013 ad e3 10           lda lin1016 20 21 10           jsr putahexdec1019 ad e4 10           lda sbit101c 20 21 10           jsr putahexdec101f ea                 nop1020 60                 rts                        .bend               ;---------------------------------------               putahexdec                        .block1021 00                 jsr pushregs1022 48                 pha1023 00                 lda #kjaune1024 20 d2 ff           jsr $ffd21027 68                 pla1028 00                 jsr putahex1029 aa                 tax102a a9 20              lda #$20102c 20 d2 ff           jsr $ffd2102f a9 00              lda #$001031 00                 jsr f1fltxa1032 00                 jsr popregs1033 a9 0d              lda #$0d1035 20 d2 ff           jsr $ffd21038 00                 lda #kgris31039 20 d2 ff           jsr $ffd2103c 60                 rts                        .bend               ;---------------------------------------               bmapinit                        .block103d 08                 php103e 48                 pha103f 00                 lda vic+$181040 09 08              ora #$081042 00                 sta vic+$181043 00                 lda vic+$111044 09 20              ora #$201046 00                 sta vic+$111047 68                 pla1048 28                 plp1049 60                 rts                        .bend               ;---------------------------------------               bmapclr                        .block104a 00                 jsr pushall104b 00                 lda #<vidstart104c 00                 sta zp1104d 00                 lda #>vidstart104e 00                 sta zp1+1104f a0 00              ldy #$001051 a9 00     more     lda #$001053 00                 sta (zp1),y1054 00                 jsr inczp11055 00                 lda zp1+11056 c9 3f              cmp #$3f1058 d0 11              bne more105a 00                 lda zp1105b c9 3f              cmp #$3f105d d0 0c              bne more105f 00                 jsr popall1060 60                 rts                        .bend               ;---------------------------------------               bmpfillbk               bakmem   = $0400    ; 1024 end at $0800                        .block1061 00                 jsr pushall1062 a9 00              lda #<bakmem1064 00                 sta zp11065 a9 04              lda #>bakmem1067 00                 sta zp1+11068 a2 08              ldx #$08106a a0 00              ldy #$00106c a9 01              lda #$01106e 00        more     sta (zp1),y106f 00                 jsr inczp11070 00                 cpx zp1+11071 d0 24              bne more1073 00                 jsr popall1074 60                 rts                        .bend               ;---------------------------------------               ; Entree: x=colonne y=ligne               calcdot                        .block1075 00                 jsr pushall1076 98                 tya     ;Y contien la ligne1077 4a                 lsr a   ; On divise par 81078 4a                 lsr a1079 4a                 lsr a107a 8d e1 10           sta row ; et on sauvegarde107d 8a                 txa     ;X contien la colonne107e 4a                 lsr a   ; On divise par 8107f 4a                 lsr a1080 4a                 lsr a1081 8d e2 10           sta col ; et on sauvegarde1084 98                 tya     ;Y masque avec 7 donne1085 29 07              and #$07; la ligne caractere1087 8d e3 10           sta lin ; du pixel.108a 8a                 txa     ;7-(X and 7) donne le108b 29 07              and #$07; no du bit de l'octet108d 8d e4 10           sta sbit; du pixel.1090 a9 07              lda #$071092 38                 sec1093 ed e4 10           sbc sbit1096 8d e4 10           sta sbit                        ; inserer calcul adresse ici1099 a9 e7              lda #<baseaddr109b 85 62              sta $62109d a9 10              lda #>baseaddr109f 85 63              sta $6310a1 00                 jsr f1int6210a2 a2 01              ldx #$0110a4 a9 00              lda #$0010a6 00                 jsr f1fltxa10a7 00                 jsr popall10a8 60                 rts                        .bend10a9 00        row      .byte $0010aa 00        col      .byte $0010ab 00        lin      .byte $0010ac 00        sbit     .byte $0010ad 00 00     adrs     .word $0010af 00 20     baseaddr .word $2000 ;819210b1 40 01     scrwidth .word $0140 ;32010b3 00 00 00 00 00 00               fvar1    .word $00,$00,$0010b9 00 00 00 00 00 00               fvar2    .word $00,$00,$00               ;---------------------------------------lib-push.l,s,r                        .include "lib-push.l"lib-mem.l,s,r                        .include "lib-mem.l"lib-conv.l,s,r                        .include "lib-conv.l"lib-string.l,s,r                        .include "lib-string.l"               ;---------------------------------------