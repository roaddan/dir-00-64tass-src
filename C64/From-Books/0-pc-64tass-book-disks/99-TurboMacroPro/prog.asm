;---------------------------------------; nom fichier..: prog.asm; type fichier.: source pour t.m.p.; auteur.......: daniel lafrance; version......: 20151125; revision.....: 0.0.2;---------------------------------------        .include "m-utils.asm"        .include "e-vars.asm"        .include "e-float.asm"        .include "e-64map.asm"        .include "l-bashead.asm";---------------------------------------main        .block        ;jsr bmapinit        ;jsr bmapclr        ;jsr bmpfillbk        ldx #0        ldy #24        jsr gotoxy        ldx #200        ldy #150        jsr calcdot        ;jmp fptest        lda row        jsr putahexdec        ;jsr anykey        #outcar 14        #outcar $0d        lda col        jsr putahexdec        ;jsr anykey        ;------------------------------        #outcar $0d        lda lin        jsr putahexdec        ;jsr anykey        #outcar $0d        lda sbit        jsr putahexdec        ;jsr anykeyfptest  #outcar $0d        ;jsr floattest        jsr memdump        rts        .bend;---------------------------------------        memdump         .block        jsr pushregs        lda #16        sta loops        ;#ldyximm start        ldy #$00        ldx #$00        jsr yxtoptr        #outcar $0d        #outcar 147  ;cls        #outcar $0d        #outstr dmphead again   jsr ptrtoyx        lda #$08        #outcar $0d        jsr bytestohex        jsr incptr8        dec loops        bne again        #outcar $0d        #outstr menu        jsr anykey        #outcar 147  ;cls        lda #16        sta loops        #outcar $0d        #outstr dmphead         jmp again        #outcar $0d        jsr popregs        rts        .bend;---------------------------------------putahexdec        .block        jsr pushregs        #outcar kjaune        jsr putahex        #outcar $20        #outcar kcyan        tax        lda #$00        jsr fiaxtf1        jsr popregs        rts        .bend;---------------------------------------; entree: x=colonne y=ligne (bmp)calcdot        .block        jsr pushall        tya     ;y contien la ligne        lsr a   ; on divise par 8        lsr a        lsr a        sta row ; et on sauvegarde        txa     ;x contien la colonne        lsr a   ; on divise par 8        lsr a        lsr a        sta col ; et on sauvegarde        tya     ; masque avec 7 donne        and #$07; la ligne caractere        sta lin ; du pixel.        txa     ;7-(x and 7) donne le        and #$07; no du bit de l'octet        sta sbit; du pixel.        lda #$07        sec        sbc sbit        sta sbit        ;------------------------------        ; inserer calcul adresse ici        ;------------------------------        ;ldx #$00        ;lda #$02        ;jsr fiaxtf1        ;#outcar $0d                 jsr popall        rts        .bend;---------------------------------------floattest;---------------------------------------        .block        php        pha        lda #$07        sta kcol        ;jsr getfac1        ldy sbit        jsr fiyytf1        jsr prnfac1        ;lda #$03        ;sta kcol        ;jsr prnfac1        ;lda #$01        ;sta kcol        pla        plp        rts        .bend;---------------------------------------        .include "l-push.asm"        .include "l-mem.asm"        .include "l-conv.asm"        .include "l-string.asm"        .include "l-float.asm"        .include "l-keyb.asm"        .include "l-math.asm"        .include "l-bitmap.asm"        .include "progvars.asm" ;---------------------------------------