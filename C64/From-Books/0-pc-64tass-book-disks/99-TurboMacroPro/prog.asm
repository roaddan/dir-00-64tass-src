;---------------------------------------; nom fichier..: prog.asm; type fichier.: source pour t.m.p.; auteur.......: daniel lafrance; version......: 20151125; revision.....: 0.0.1;---------------------------------------         .include "e-vars.asm"         .include "e-float.asm"         .include "e-64map.asm"         .include "m-utils.asm"         .include "l-bashead.asm";---------------------------------------main         .block         ;jsr bmapinit         ;jsr bmapclr         ;jsr bmpfillbk         jsr anykeyloopit   ldx #0posy     ldy #0         jsr gotoxyloadx    ldx #$00         stx $d020loada    lda #$ff         sta $d020         jsr fiaxtf1         inc loadx+1         bne loopit         inc loada+1         bne loopit         inc posy+1         lda posy+1         cmp #25         bmi loopit         rts         ldx #200         ldy #150         jsr calcdot         lda col         jsr putahexdec         jsr anykey         #crlf         lda row         jsr putahexdec         jsr anykey         #crlf         lda lin         jsr putahexdec         jsr anykey         #crlf         lda sbit         jsr putahexdec         jsr anykey         #crlf         jsr floattest         jsr anykey         #crlf         rts         .bendchaine .null "hello world!";---------------------------------------putahexdec         .block         jsr pushregs         pha         lda #kjaune         jsr chrout         pla         jsr putahex         pha         lda #$20         jsr chrout         pla         tax         lda #$00         jsr fiaxtf1         jsr popregs         rts         .bend;---------------------------------------bmapinit         .block         php         pha         lda vic+$18         ora #$08         sta vic+$18         lda vic+$11         ora #$20         sta vic+$11         pla         plp         rts         .bend;---------------------------------------bmapclr         .block         jsr pushall         lda #<vidstart         sta zp1         lda #>vidstart         sta zp1+1         ldy #$00more     lda #$00         sta (zp1),y         jsr inczp1         lda zp1+1         cmp #$3f         bne more         lda zp1         cmp #$3f         bne more         jsr popall         rts         .bend;---------------------------------------bmpfillbk         .block         jsr pushall         lda #<bakmem         sta zp1         lda #>bakmem         sta zp1+1         ldx #$08         ldy #$00         lda #$01more     sta (zp1),y         jsr inczp1         cpx zp1+1         bne more         jsr popall         rts         .bend;---------------------------------------calcdot; entree: x=colonne y=ligne (bmp)         .block         jsr pushall         tya     ;y contien la ligne         lsr a   ; on divise par 8         lsr a         lsr a         sta row ; et on sauvegarde         txa     ;x contien la colonne         lsr a   ; on divise par 8         lsr a         lsr a         sta col ; et on sauvegarde         tya     ; masque avec 7 donne         and #$07; la ligne caractere         sta lin ; du pixel.         txa     ;7-(x and 7) donne le         and #$07; no du bit de l'octet         sta sbit; du pixel.         lda #$07         sec         sbc sbit         sta sbit         ; inserer calcul adresse ici         ;ldx #$00         ;lda #$02         ;jsr fiaxtf1         ;#crlf                  jsr popall         rts         .bend;---------------------------------------floattest;---------------------------------------         .block         php         pha         lda #$07         sta kcol         ;jsr getfac1         ldy sbit         jsr fiyytf1         lda #$03         sta kcol         jsr prnfac1         lda #$01         sta kcol         pla         plp         rts         .bend;---------------------------------------row      .byte $00col      .byte $00lin      .byte $00sbit     .byte $55adrs     .word $00baseaddr .word $2000 ;8192scrwidth .word $0140 ;320;---------------------------------------         .include "l-push.asm"         .include "l-mem.asm"         .include "l-conv.asm"         .include "l-string.asm"         .include "l-float.asm"         .include "l-keyb.asm";---------------------------------------