;---------------------------------------; nom fichier..: prog.asm; type fichier.: source pour t.m.p.; auteur.......: daniel lafrance; version......: 20151125; revision.....: 0.0.1;---------------------------------------         .include "m-utils.asm"         .include "e-vars.asm"         .include "e-float.asm"         .include "e-64map.asm"         .include "l-bashead.asm";---------------------------------------main         .block         ;jsr bmapinit         ;jsr bmapclr         ;jsr bmpfillbk         ldx #0         ldy #10         jsr gotoxy         ldx #200         ldy #150         jsr calcdot         lda row         jsr putahexdec         jsr anykey         #outcar $0d         lda col         jsr putahexdec         jsr anykey         ;------------------------------         #outcar $0d         lda lin         jsr putahexdec         jsr anykey         #outcar $0d         lda sbit         jsr putahexdec         jsr anykey         #outcar $0d         jsr floattest         jsr anykey         #outcar $0d         rts         .bend;---------------------------------------putahexdec         .block         jsr pushregs         #outcar kjaune         jsr putahex         #outcar $20         #outcar kcyan         tax         lda #$00         jsr fiaxtf1         jsr popregs         rts         .bend;---------------------------------------; entree: x=colonne y=ligne (bmp)calcdot         .block         jsr pushall         tya     ;y contien la ligne         lsr a   ; on divise par 8         lsr a         lsr a         sta row ; et on sauvegarde         txa     ;x contien la colonne         lsr a   ; on divise par 8         lsr a         lsr a         sta col ; et on sauvegarde         tya     ; masque avec 7 donne         and #$07; la ligne caractere         sta lin ; du pixel.         txa     ;7-(x and 7) donne le         and #$07; no du bit de l'octet         sta sbit; du pixel.         lda #$07         sec         sbc sbit         sta sbit         ;------------------------------         ; inserer calcul adresse ici         ;------------------------------         ;ldx #$00         ;lda #$02         ;jsr fiaxtf1         ;#crlf                  jsr popall         rts         .bend;---------------------------------------floattest;---------------------------------------         .block         php         pha         lda #$07         sta kcol         ;jsr getfac1         ldy sbit         jsr fiyytf1         lda #$03         sta kcol         jsr prnfac1         lda #$01         sta kcol         pla         plp         rts         .bend;---------------------------------------row      .byte $00col      .byte $00lin      .byte $00sbit     .byte $55adrs     .word $00baseaddr .word $2000 ;8192scrwidth .word $0140 ;320;---------------------------------------         .include "l-push.asm"         .include "l-mem.asm"         .include "l-conv.asm"         .include "l-string.asm"         .include "l-float.asm"         .include "l-keyb.asm"         .include "l-bitmap.asm";---------------------------------------