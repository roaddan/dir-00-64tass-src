
; 64tass Turbo Assembler Macro V1.54.1900 listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib -i -L slbug64.txt -o slbug64.prg slbug64.asm
; Mon Dec 15 17:27:09 2025

;Offset	;Hex		;Source

;******  Processing input file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/m-utils.asm


;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/e-vars.asm

=$cfff			libre    = $cfff
=$cfff			rp       = libre    ;1 byte $cfff
=53246			ra       = libre-$01;1 byte $cffe
=53245			rx       = libre-$02;1 byte $cffd
=53244			ry       = libre-$03;1 byte $cffc
=53243			rs       = libre-$04;1 byte $cffb
=53241			pc       = libre-$06;1 word $cff9-$cffa
=53238			curcol   = libre-$09;1 byte $cff6
=53239			memptr   = libre-$08;1 word $cff7-$cff8
=53238			hexv     = libre-$09
=53233			hexstr   = hexv-$05 ;5 byte $cff1-$cff5
=53232			a2hexpfx = hexv-$06 ;1 byte $cff0
=53231			a2hexpy  = hexv-$07 ;1 byte $cfef
=53230			a2hexpx  = hexv-$08 ;1 byte $cfee
=53230			a2hexpos = hexv-$08 ;0 byte $cfee
=53229			a2hexcol = hexv-$09 ;1 byte $cfed
=53229			binv     = hexv-$09
=53220			binstr   = binv-$09 ;9 byte $cfe4-$cfec
=53219			a2binpfx = binv-$0a ;1 byte $cfe3
=53218			a2binpy  = binv-$0b ;1 byte $cfe2
=53217			a2binpx  = binv-$0c ;1 byte $cfe1
=53216			a2binpos = binv-$0d ;0 byte $cfe1
=53215			a2bincol = binv-$0e ;1 byte $cfe0
=53215			decv     = binv-$0e
=53209			decstr   = decv-$06 ;6 byte $cfda-$cfdf
=53209			a2decpfx = decv-$06 ;1 byte $cfd9
=53208			a2decpy  = decv-$07 ;1 byte $cfd8
=53207			a2decpx  = decv-$08 ;1 byte $cfd7
=53207			a2decpos = decv-$08 ;0 byte $cfd7
=53206			a2deccol = decv-$09 ;1 byte $cfd6
=53206			fltv     = decv-$09
=53200			fvar1    = fltv-6  ; 6 byte $cfd0-$cfd5
=53194			fvar2    = fltv-12 ; 6 byte $cfca-$cfcf
=53174			float1   = fltv-32 ;20 byte $cfb6-$cfc9
=53154			float2   = fltv-52 ;20 byte $cfa2-$cfb5
=53153			tval1    = fltv-53 ; 1 byte $cfa1
=53151			tval2    = fltv-55 ; 2 byte $cf9f-$cfa0
=53150			loops    = tval2-1 ; 1 byte $cf9e
=53149			nextvar  = loops-1 ; 1 byte $cf9d

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/e-float.asm

=$ba8c			ffvtf2   = $ba8c ;copie 4 byt $(yyaa) f2
=$bba2			ffvtf1   = $bba2 ;copie fp $(yyaa) to f1
=$bbc7			ff1t5c   = $bbc7 ;copie f1 to $5c-$60
=$bbca			ff1t57   = $bbca ;copie f1 to $57-$5b
=$bbd0			ff1t49   = $bbd0 ;copie f1 to $49.
=$bbd4			ff1tyx   = $bbd4 ;copie f1 mem $yyxx.
=$bbfc			ff2tf1   = $bbfc ;copie f2 to f1
=$bc0c			ff1tf2   = $bc0c ;copie f1 to f2
=$b849			ff1p05   = $b849 ;f1=f1+0.5
=$b850			ffvsf1   = $b850 ;f1=fv-f1 ($yyaa)
=$b853			ff2sf1   = $b853 ;f1=f2-f1
=$b867			ffvpf1   = $b867 ;f1=fv+f1 ($yyaa)
=$b86a			ff2pf1   = $b86a ;f1=f2+f1
=$bd7e			ff1pac   = $bd7e ;f1=f1+ra val ra=0-9
=$ba28			ff1xfv   = $ba28 ;f1=f1*fv ($yyaa)
=$ba2b			ff1xf2   = $ba2b ;f1=f1*f2
=$bae2			ff1x10   = $bae2 ;f1=f1*10
=$bafe			ff1d10   = $bafe ;f1=f1/10
=$bb0f			ffvdf1   = $bb0f ;f1=fv/f1 ($yyaa)
=$bb12			ff2df1   = $bb12 ;f1=f2/f1
=$afe6			ffpor    = $afe6 ;f1=f1 or f2
=$afe9			ffpand   = $afe9 ;f1=f1 and f2
=$b947			ff1com2  = $b947 ;f1=two's compl f1
=$bc1b			ff1rnd   = $bc1b ;f1=round(f1)
=$bc39			ff1sign  = $bc39 ;f1=sgn(f1)
=$bc58			ff1abs   = $bc58 ;f1=abs(f1)
=$bc5b			ffvcmp   = $bc5b ;f1=f1 comp fv ($yyaa)
=$bccc			ff1int   = $bccc ;f1=int(f1)
=$bf71			ff1sqr   = $bf71 ;f1=sqrt(f1)
=$bf7b			ff1ef2   = $bf7b ;f1=fac1^f2
=$b3a2			fiyytf1  = $b3a2 ;f1=float(y)
=$bc3c			fiaatf1  = $bc3c ;conv acc to fp in f1
=$bc44			fi62tf1  = $bc44 ;conv f1 word 62,63
=$bdcd			fiaxtf1  = $bdcd ;f1=float($aaxx)+print
=$bcf3			fasctf1  = $bcf3 ;f1=float(ascii)
=$bddd			ff1tasc  = $bddd ;f1 to ascii ($yyaa)
=$bc9b			ff1tudw  = $bc9b ;f1=unsighed dw(f1)
=$b1bf			ff1swd64 = $b1bf ;f1=sw(f1)->64
=$b1d2			ff1wrd64 = $b1d2 ;f1=uw(f1)->64
=$b1aa			ff1wrday = $b1aa ;f1=word->$aayy
=$b7a1			ff1bytxx = $b7a1 ;f1 to byte in x
=$b79e			ff1evalx = $b79e ;eval. expr. f1 to x
=$e264			ff1cos   = $e264 ;f1=sin(f1+(pi/2))
=$e26b			ff1sin   = $e26b ;f1=sin(f1)
=$e2b4			ff1tan   = $e2b4 ;f1=sin(f1)/cos(f1)
=$e30e			ff1atn   = $e30e ;f1=atn(f1)
=$bc2b			fsngf1   = $bc2b ;check f1 sign

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/e-64map.asm

=$73			chrget   = $73   ;Recup Basic car texte
=$79			chrgot   = $79   ; ...une seconde fois.
=$d1			scrnlin  = $d1   ;acresse ligne courante
=$fb			zp1      = $fb   ;1er Zpage prog. usager
=$fd			zp2      = $fd   ;2em Zpage prog. usager
=$0100			fascii   = $0100 ;region conv FP a ascii
=$0286			kcol     = $0286 ;Couleur car affiche.
=$fce2			reboot   = $fce2 ;Redemarrage a froid
=$fe66			reset    = $fe66 ;Redemarrare a chaud
=$e3bf			intcgt   = $e3bf ;Initialize chrget
=$ffa5			acptr    = $ffa5 ;Recoit byte port serie
=$ffc6			chkin    = $ffc6 ;Definie canal entree
=$ffc9			chkout   = $ffc9 ;Definie canal sortie
=$ffcf			chrin    = $ffcf ;Entre car canal entree
=$ffd2			chrout   = $ffd2 ;Sort car canal sortie
=$ff81			cint     = $ff81 ;Init ecran edit+vicii
=$ffa8			ciout    = $ffa8 ;Sort car sur bus serie
=$ffe7			clall    = $ffe7 ;Ferme tout fichier ouv
=$ffc3			close    = $ffc3 ;Ferme fichier logique
=$ffcc			clrchn   = $ffcc ;Efface caneaux i/o
=$ffe4			getin    = $ffe4 ;Entre un car de entree
=$fff3			iobase   = $fff3 ;Definie page mem. i/o
=$ff84			ioinit   = $ff84 ;Init. Periph. i/o
=$ffb1			listen   = $ffb1 ;Cmd LISTEN a perip bus
=$ffd5			load     = $ffd5 ;Charge periph. en ram
=$ff9c			membot   = $ff9c ;Lec./Ecr. bas mem.
=$ff99			memtop   = $ff99 ;Lec./Ecr. haut mem.
=$ffc0			open     = $ffc0 ;Ouvre fichier logique.
=$fff0			plot     = $fff0 ;Lec./Ecr. pos. curseur
=$ff87			ramtas   = $ff87 ;Init ram tapebuf+ecran
=$ffde			rdtim    = $ffde ;Recup horloge systeme
=$ffb7			readst   = $ffb7 ;Recup mot status i/o
=$ff8a			restor   = $ff8a ;Replace vecteurs i/o
=$ffd8			save     = $ffd8 ;Sauve mem vers periph
=$ff9f			scnkey   = $ff9f ;Sonde le clavier
=$ffed			screen   = $ffed ;Recup format ecran
=$ff93			second   = $ff93 ;Trans adr secnd/listen
=$ffba			setlfs   = $ffba ;Prep. fichier logique
=$ff90			setmsg   = $ff90 ;Prep. kmesg outpt flag
=$ffbd			setnam   = $ffbd ;Prep. nom de fichier
=$ffdb			settim   = $ffdb ;Init. horloge systeme
=$ffa2			settmo   = $ffa2 ;Place ieee delai fin
=$ffe1			stop     = $ffe1 ;Verif. clef stop
=$ffb4			talk     = $ffb4 ;Cmd LISTEN periph/SB
=$ff96			tsks     = $ff96 ;Trans. TALK secnd adr
=$ffea			udtim    = $ffea ;Maj. horloge systeme
=$ffae			unlsn    = $ffae ;Trans. UNLISTEN
=$ffab			untlk    = $ffab ;Trans. UNTALK
=$ffd8			vector   = $ffd8 ;Lec/ecr vecteurs i/o
=$d000			vic      = $d000 ;debut du vic-ii
=$0340			sprtmem  = $0340 ;832
=$07f8			sprtloc  = $07f8 ;2040
=$2000			vidstart = $2000
=$3f3f			vidend   = $3f3f
=$0400			bakmem   = $0400 ;1024 end at $0800
=$abf9			prompt   = $abf9 ;prompt ? dans tampon.
=$ab24			strout   = $ab24 ;print string at $0022
=8			discase  = 8
=9			enacase  = 9
=14			locase   = 14
=142			upcase   = 142
=17			crsdown  = 17
=29			crsright = 29
=145			crsup    = 145
=157			crsleft  = 157
=18			enarevs  = 18
=146			disrevs  = 146
=19			gohome   = 19
=147			clrhome  = 147
=20			delete   = 20
=32			space    = 32
=144			knoir    = 144
=129			korange  = 129
=5			kblanc   = 5
=28			krouge   = 28
=30			kvert    = 30
=31			kbleu    = 31
=149			kbrun    = 149
=150			krose    = 150
=151			kgris1   = 151
=152			kgris2   = 152
=153			kvertp   = 153
=154			kbleup   = 154
=155			kgris3   = 155
=156			kmauve   = 156
=158			kjaune   = 158
=159			kcyan    = 159
=176			tleft    = 176 ; Coin suppérieur gauche.
=174			tright   = 174 ; Coin suppérieur droit.
=173			bleft    = 173 ; Coin inférieur gauche.
=189			bright   = 189 ; Coin inférieur droit.
=171			hleft    = 171 ; Extr. gauche médianne.
=179			hright   = 179 ; Extr. droite médianne.
=221			vline    = 221 ; Ligne verticale.
=192			hline    = 192 ; Ligne horizontale.

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-bashead.asm

.0801			start
>0801	0b 08		bcmd1    .word $080b ;adresse de la pro-
>0803	0a 00		         .word $0a   ;no. ligne basic.
>0805	9e		         .byte $9e   ;jeton pour la
>0806	32 30 36 31	         .text "2061";adresse du debut
>080a	00		         .byte $00   ;fin de cmd basic.
>080b	00 00		bcmd2    .word $00   ;adresse de la pro-
.080d	20 14 08	         jsr initscr
.0810	4c 2d 08	         jmp main
.0813	00		         brk
.0814			initscr
.0814	08		         php
.0815	48		         pha
.0816	a9 05		bord     lda #$05    ;place la couleur
.0818	8d 20 d0	         sta $d020   ; de la bordure.
.081b	a9 06		back     lda #$06    ;place la couleur
.081d	8d 21 d0	         sta $d021   ; du fond d'ecran.
.0820	a9 01		text     lda #$01    ;place la couleur
.0822	8d 86 02	         sta $0286   ; du texte.
.0825	a9 93		         lda #$93    ;efface l'ecran par
.0827	20 d2 ff	         jsr chrout  ; chrout du kernal.
.082a	68		         pla
.082b	28		         plp
.082c	60		         rts

;******  Return to file: slbug64.asm

.082d			main
.082d	08		        php
.082e	48		        pha
.082f	a9 0e		        lda #14
.0831	20 d2 ff	        jsr chrout
.0834	68		        pla
.0835	28		        plp
.0836	08		        php
.0837	48		        pha
.0838	a9 08		        lda #8
.083a	20 d2 ff	        jsr chrout
.083d	68		        pla
.083e	28		        plp
.083f	a0 00		        ldy #$00
.0841	a2 00		        ldx #$00
.0843	20 47 08	        jsr ramprobe
.0846	60		        rts
.0847			ramprobe
.0847	20 b3 0b	        jsr pushregs
.084a	20 2a 0e	        jsr clrkbbuf
.084d	08		        php
.084e	8c d8 0a	        sty dumpadr+1
.0851	8e d7 0a	        stx dumpadr
.0854	28		        plp
.0855	08		        php
.0856	48		        pha
.0857	a9 93		        lda #147
.0859	20 d2 ff	        jsr chrout
.085c	68		        pla
.085d	28		        plp
.085e	20 b3 0b	        jsr pushregs
.0861	a2 01		        ldx #1
.0863	a0 00		        ldy #0
.0865	20 b6 0d	        jsr gotoxy
.0868	20 e0 0b	        jsr popregs
.086b	20 b3 0b	        jsr pushregs
.086e	a0 0f		        ldy #>dmphead+1
.0870	a2 ef		        ldx #<dmphead
.0872	20 76 0d	        jsr putsyx
.0875	20 e0 0b	        jsr popregs
.0878	20 b3 0b	        jsr pushregs
.087b	a2 01		        ldx #1
.087d	a0 01		        ldy #1
.087f	20 b6 0d	        jsr gotoxy
.0882	20 e0 0b	        jsr popregs
.0885	20 b3 0b	        jsr pushregs
.0888	a0 10		        ldy #>dmphead2+1
.088a	a2 1b		        ldx #<dmphead2
.088c	20 76 0d	        jsr putsyx
.088f	20 e0 0b	        jsr popregs
.0892	20 b3 0b	        jsr pushregs
.0895	a2 01		        ldx #1
.0897	a0 14		        ldy #20
.0899	20 b6 0d	        jsr gotoxy
.089c	20 e0 0b	        jsr popregs
.089f	20 b3 0b	        jsr pushregs
.08a2	ae 47 10	        ldx menu0
.08a5	ac 48 10	        ldy menu0+1
.08a8	20 b6 0d	        jsr gotoxy
.08ab	a0 10		        ldy #>menu0+2
.08ad	a2 49		        ldx #<menu0+2
.08af	20 76 0d	        jsr putsyx
.08b2	20 e0 0b	        jsr popregs
.08b5	20 b3 0b	        jsr pushregs
.08b8	ae 73 10	        ldx menu1
.08bb	ac 74 10	        ldy menu1+1
.08be	20 b6 0d	        jsr gotoxy
.08c1	a0 10		        ldy #>menu1+2
.08c3	a2 75		        ldx #<menu1+2
.08c5	20 76 0d	        jsr putsyx
.08c8	20 e0 0b	        jsr popregs
.08cb	20 b3 0b	        jsr pushregs
.08ce	ae a2 10	        ldx menu2
.08d1	ac a3 10	        ldy menu2+1
.08d4	20 b6 0d	        jsr gotoxy
.08d7	a0 10		        ldy #>menu2+2
.08d9	a2 a4		        ldx #<menu2+2
.08db	20 76 0d	        jsr putsyx
.08de	20 e0 0b	        jsr popregs
.08e1	20 b3 0b	        jsr pushregs
.08e4	ae d1 10	        ldx menu3
.08e7	ac d2 10	        ldy menu3+1
.08ea	20 b6 0d	        jsr gotoxy
.08ed	a0 10		        ldy #>menu3+2
.08ef	a2 d3		        ldx #<menu3+2
.08f1	20 76 0d	        jsr putsyx
.08f4	20 e0 0b	        jsr popregs
.08f7	20 b3 0b	        jsr pushregs
.08fa	ae 00 11	        ldx menu4
.08fd	ac 01 11	        ldy menu4+1
.0900	20 b6 0d	        jsr gotoxy
.0903	a0 11		        ldy #>menu4+2
.0905	a2 02		        ldx #<menu4+2
.0907	20 76 0d	        jsr putsyx
.090a	20 e0 0b	        jsr popregs
.090d	20 b3 0b	        jsr pushregs
.0910	ae 2f 11	        ldx menu5
.0913	ac 30 11	        ldy menu5+1
.0916	20 b6 0d	        jsr gotoxy
.0919	a0 11		        ldy #>menu5+2
.091b	a2 31		        ldx #<menu5+2
.091d	20 76 0d	        jsr putsyx
.0920	20 e0 0b	        jsr popregs
.0923	20 b3 0b	        jsr pushregs
.0926	ae 5e 11	        ldx menu6
.0929	ac 5f 11	        ldy menu6+1
.092c	20 b6 0d	        jsr gotoxy
.092f	a0 11		        ldy #>menu6+2
.0931	a2 60		        ldx #<menu6+2
.0933	20 76 0d	        jsr putsyx
.0936	20 e0 0b	        jsr popregs
.0939	4c bf 09	        jmp doit
.093c	ce d8 0a	arr1k   dec dumpadr+1
.093f	ce d8 0a	        dec dumpadr+1
.0942	ce d8 0a	        dec dumpadr+1
.0945	ce d8 0a	        dec dumpadr+1
.0948	ce d8 0a	        dec dumpadr+1
.094b	ce d8 0a	        dec dumpadr+1
.094e	ce d8 0a	        dec dumpadr+1
.0951	ce d8 0a	        dec dumpadr+1
.0954	ce d8 0a	        dec dumpadr+1
.0957	ce d8 0a	        dec dumpadr+1
.095a	ce d8 0a	        dec dumpadr+1
.095d	ce d8 0a	        dec dumpadr+1
.0960	ce d8 0a	        dec dumpadr+1
.0963	ce d8 0a	        dec dumpadr+1
.0966	ce d8 0a	arr512  dec dumpadr+1
.0969			arr256
.0969	08		        php
.096a	ac d8 0a	        ldy dumpadr+1
.096d	ae d7 0a	        ldx dumpadr
.0970	28		        plp
.0971	a9 80		        lda #128
.0973	20 a3 0e	        jsr subatoyx
.0976	08		        php
.0977	8c d8 0a	        sty dumpadr+1
.097a	8e d7 0a	        stx dumpadr
.097d	28		        plp
.097e	ce d8 0a	arr128  dec dumpadr+1
.0981	4c bf 09	        jmp doit
.0984	ee d8 0a	ava1k   inc dumpadr+1
.0987	ee d8 0a	        inc dumpadr+1
.098a	ee d8 0a	        inc dumpadr+1
.098d	ee d8 0a	        inc dumpadr+1
.0990	ee d8 0a	        inc dumpadr+1
.0993	ee d8 0a	        inc dumpadr+1
.0996	ee d8 0a	        inc dumpadr+1
.0999	ee d8 0a	        inc dumpadr+1
.099c	ee d8 0a	        inc dumpadr+1
.099f	ee d8 0a	        inc dumpadr+1
.09a2	ee d8 0a	        inc dumpadr+1
.09a5	ee d8 0a	        inc dumpadr+1
.09a8	ee d8 0a	        inc dumpadr+1
.09ab	ee d8 0a	        inc dumpadr+1
.09ae	ee d8 0a	ava512  inc dumpadr+1
.09b1	18		ava256  clc
.09b2	ad d7 0a	        lda dumpadr
.09b5	69 80		        adc #$80
.09b7	90 06		        bcc ava128
.09b9	ee d8 0a	        inc dumpadr+1
.09bc	8d d7 0a	        sta dumpadr
.09bf			ava128
.09bf			doit
.09bf	20 b3 0b	        jsr pushregs
.09c2	a2 01		        ldx #1
.09c4	a0 01		        ldy #1
.09c6	20 b6 0d	        jsr gotoxy
.09c9	20 e0 0b	        jsr popregs
.09cc	a9 10		        lda #16
.09ce	08		        php
.09cf	ac d8 0a	        ldy dumpadr+1
.09d2	ae d7 0a	        ldx dumpadr
.09d5	28		        plp
.09d6	20 8d 0a	        jsr memdump
.09d9	20 5f 0e	morekey jsr getkey
.09dc	c9 85		chkf1   cmp #133   ; touche [F1]
.09de	d0 03		        bne chkf2
.09e0	4c bf 09	        jmp doit   ; +128
.09e3	c9 89		chkf2   cmp #137   ; touche [F2]
.09e5	d0 03		        bne chkf3
.09e7	4c 7e 09	        jmp arr128 ;-128
.09ea	c9 86		chkf3   cmp #134   ; touche [F3]
.09ec	d0 03		        bne chkf4
.09ee	4c b1 09	        jmp ava256 ;+256
.09f1	c9 8a		chkf4   cmp #138   ; touche [F4]
.09f3	d0 03		        bne chkf5
.09f5	4c 69 09	        jmp arr256 ;-256
.09f8	c9 87		chkf5   cmp #135
.09fa	d0 03		        bne chkf6
.09fc	4c ae 09	        jmp ava512 ;+512
.09ff	c9 8b		chkf6   cmp #139
.0a01	d0 03		        bne chkf7
.0a03	4c 66 09	        jmp arr512 ;-512
.0a06	c9 88		chkf7   cmp #136
.0a08	d0 03		        bne chkf8
.0a0a	4c 84 09	        jmp ava1k  ;+1024
.0a0d	c9 8c		chkf8   cmp #140
.0a0f	d0 03		        bne chk20
.0a11	4c 3c 09	        jmp arr1k  ;-1024
.0a14	c9 20		chk20   cmp #$20   ; touche espace
.0a16	d0 03		        bne chkq
.0a18	4c bf 09	        jmp doit
.0a1b	c9 51		chkq    cmp #$51   ; touche q
.0a1d	f0 03		        beq quitter
.0a1f	4c d9 09	        jmp morekey
.0a22	20 e0 0b	quitter jsr popregs
.0a25	08		        php         ;Sauve registres.
.0a26	48		        pha
.0a27	a9 05		        lda #5    ;Init lparam top
.0a29	8d dd 0f	        sta dbtop
.0a2c	8d e2 0f	        sta dbclin;position de ligne
.0a2f	a9 05		        lda #5    ;Initialise left.
.0a31	8d de 0f	        sta dbleft
.0a34	a9 1e		        lda #30    ;Initialise width.
.0a36	8d df 0f	        sta dbwdth
.0a39	a9 0a		        lda #10    ;Initialise height.
.0a3b	8d e0 0f	        sta dbhght
.0a3e	a9 05		        lda #5    ;Initialise couleur.
.0a40	8d e1 0f	        sta dbcoul
.0a43	68		        pla         ;Récupère registres.
.0a44	28		        plp
.0a45	20 c0 0f	        jsr dbdraw  ;Dessine la fenêtre.
.0a48	a9 12		        lda #18     ;le titre zzzzzz
.0a4a	20 d2 ff	        jsr chrout
.0a4d	20 b3 0b	        jsr pushregs
.0a50	ad 86 02	        lda kcol
.0a53	48		        pha
.0a54	a9 05		        lda #5
.0a56	8d 86 02	        sta kcol
.0a59	a6 06		        ldx 5+1
.0a5b	a4 05		        ldy 5
.0a5d	20 b6 0d	        jsr gotoxy
.0a60	a0 44		chkhere ldy #>"Adresse"
.0a62	a2 c1		        ldx #<"Adresse"
.0a64	20 62 0d	        jsr puts
.0a67	68		        pla
.0a68	8d 86 02	        sta kcol
.0a6b	20 e0 0b	        jsr popregs
.0a6e	a9 92		        lda #146
.0a70	20 d2 ff	        jsr chrout
.0a73	20 5f 0e	        jsr getkey
.0a76	08		        php
.0a77	48		        pha
.0a78	a9 93		        lda #147
.0a7a	20 d2 ff	        jsr chrout
.0a7d	68		        pla
.0a7e	28		        plp
.0a7f	20 b3 0b	        jsr pushregs
.0a82	a2 00		        ldx #0
.0a84	a0 00		        ldy #0
.0a86	20 b6 0d	        jsr gotoxy
.0a89	20 e0 0b	        jsr popregs
.0a8c	60		        rts
.0a8d			memdump
.0a8d	8d d6 0a	        sta nligne
.0a90	8d 9e cf	        sta loops
.0a93	c0 ff		        cpy #$ff
.0a95	d0 07		        bne nouvel
.0a97	e0 ff		        cpx #$ff
.0a99	d0 03		        bne nouvel
.0a9b	4c ad 0a	        jmp memeadr
.0a9e	8c d8 0a	nouvel  sty dumpadr+1   ;*
.0aa1	48		        pha
.0aa2	8a		        txa
.0aa3	29 f8		        and #$f8
.0aa5	aa		        tax
.0aa6	68		        pla
.0aa7	8e d7 0a	        stx dumpadr     ;*
.0aaa	20 39 0c	        jsr yxtoptr
.0aad			memeadr
.0aad	ac d8 0a	again   ldy dumpadr+1   ;*
.0ab0	ae d7 0a	        ldx dumpadr     ;*
.0ab3	20 39 0c	        jsr yxtoptr
.0ab6	a9 08		        lda #$08
.0ab8	08		        php
.0ab9	48		        pha
.0aba	a9 0d		        lda #$0d
.0abc	20 d2 ff	        jsr chrout
.0abf	68		        pla
.0ac0	28		        plp
.0ac1	20 d7 0c	        jsr bytestohex
.0ac4	20 64 0c	        jsr incptr8
.0ac7	20 40 0c	        jsr ptrtoyx
.0aca	8c d8 0a	        sty dumpadr+1   ;*
.0acd	8e d7 0a	        stx dumpadr     ;*
.0ad0	ce 9e cf	        dec loops
.0ad3	d0 d8		        bne again
.0ad5	60		        rts
>0ad6	16		nligne  .byte $16
>0ad7	00 f0		dumpadr .word $f000
.0ad9			putahexdec
.0ad9	20 b3 0b	        jsr pushregs
.0adc	08		        php
.0add	48		        pha
.0ade	a9 9e		        lda #kjaune
.0ae0	20 d2 ff	        jsr chrout
.0ae3	68		        pla
.0ae4	28		        plp
.0ae5	20 99 0c	        jsr putahex
.0ae8	08		        php
.0ae9	48		        pha
.0aea	a9 20		        lda #$20
.0aec	20 d2 ff	        jsr chrout
.0aef	68		        pla
.0af0	28		        plp
.0af1	08		        php
.0af2	48		        pha
.0af3	a9 9f		        lda #kcyan
.0af5	20 d2 ff	        jsr chrout
.0af8	68		        pla
.0af9	28		        plp
.0afa	aa		        tax
.0afb	a9 00		        lda #$00
.0afd	20 cd bd	        jsr fiaxtf1
.0b00	20 e0 0b	        jsr popregs
.0b03	60		        rts
.0b04			calcdot
.0b04	20 41 0b	        jsr pushall
.0b07	98		        tya     ;y contien la ligne
.0b08	4a		        lsr a   ; on divise par 8
.0b09	4a		        lsr a
.0b0a	4a		        lsr a
.0b0b	8d e4 0f	        sta row ; et on sauvegarde
.0b0e	8a		        txa     ;x contien la colonne
.0b0f	4a		        lsr a   ; on divise par 8
.0b10	4a		        lsr a
.0b11	4a		        lsr a
.0b12	8d e5 0f	        sta col ; et on sauvegarde
.0b15	98		        tya     ; masque avec 7 donne
.0b16	29 07		        and #$07; la ligne caractere
.0b18	8d e6 0f	        sta lin ; du pixel.
.0b1b	8a		        txa     ;7-(x and 7) donne le
.0b1c	29 07		        and #$07; no du bit de l'octet
.0b1e	8d e7 0f	        sta sbit; du pixel.
.0b21	a9 07		        lda #$07
.0b23	38		        sec
.0b24	ed e7 0f	        sbc sbit
.0b27	8d e7 0f	        sta sbit
.0b2a	20 7a 0b	        jsr popall
.0b2d	60		        rts
.0b2e			floattest
.0b2e	08		        php
.0b2f	48		        pha
.0b30	a9 07		        lda #$07
.0b32	8d 86 02	        sta kcol
.0b35	ac e7 0f	        ldy sbit
.0b38	20 a2 b3	        jsr fiyytf1
.0b3b	20 16 0e	        jsr prnfac1
.0b3e	68		        pla
.0b3f	28		        plp
.0b40	60		        rts

;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-push.asm

.0b41			pushall
.0b41	08		         php     ;s;rp,pcl,pch
.0b42	8d fe cf	         sta ra  ;sauve a
.0b45	68		         pla     ;s:pcl,pch
.0b46	8d ff cf	         sta rp  ;sauve rp
.0b49	68		         pla     ;s:pch
.0b4a	8d f9 cf	         sta pc  ;sauve pcl
.0b4d	68		         pla     ;s:
.0b4e	8d fa cf	         sta pc+1;sauve pch
.0b51	a5 fb		         lda $fb ;sauve fb
.0b53	48		         pha     ;s:fb
.0b54	a5 fc		         lda $fc ;sauve fc
.0b56	48		         pha     ;s:fc,fb
.0b57	a5 fd		         lda $fd ;sauve fd
.0b59	48		         pha     ;s:fd,fc,fb
.0b5a	a5 fe		         lda $fe ;sauve fe
.0b5c	48		         pha     ;s:fe,fd,fc,fb
.0b5d	ad ff cf	         lda rp  ;sauve rp
.0b60	48		         pha     ;s:rp,fe,fd,fc,fb
.0b61	ad fe cf	         lda ra  ;sauve ra
.0b64	48		         pha     ;s:ra,rp,fe,fd,fc,fb
.0b65	8a		         txa     ;sauve rx
.0b66	48		         pha     ;s:rx,ra,rp,fe-fb
.0b67	98		         tya     ;sauve y
.0b68	48		         pha     ;s:ry,rx,ra,rp,fe-fb
.0b69	ad fa cf	         lda pc+1;replace l'adresse
.0b6c	48		         pha     ;s:pch,ry,rx,ra,...
.0b6d	ad f9 cf	         lda pc  ; de retour.
.0b70	48		         pha     ;s:pcl,pch,ru,rx,ra,...
.0b71	ad ff cf	         lda rp  ;place les flags
.0b74	48		         pha     ; sur le stack.
.0b75	ad fe cf	         lda ra  ;recupere ra
.0b78	28		         plp     ;recupere les flags.
.0b79	60		         rts
.0b7a			popall
.0b7a	08		         php     ;s:rp,pcl,pch,ry,rx,...
.0b7b	8d fe cf	         sta ra
.0b7e	68		         pla     ;s:pcl,pch,ry,rx,...
.0b7f	8d ff cf	         sta rp  ;s:pch,ry,rx,ra,rp,...
.0b82	68		         pla
.0b83	8d f9 cf	         sta pc  ;sauve pcl
.0b86	68		         pla     ;s:ry,rx,ra,rp,fe...fb
.0b87	8d fa cf	         sta pc+1;sauve pch
.0b8a	68		         pla     ;s:rx,ra,rp,fe,fd,fc,fb
.0b8b	a8		         tay     ;recupere ry
.0b8c	68		         pla     ;s:ra,rp,fe,fd,fc,fb
.0b8d	aa		         tax     ;recupere rx
.0b8e	68		         pla     ;s:rp,fe,fd,fc,fb
.0b8f	8d fe cf	         sta ra  ;recupere ra
.0b92	68		         pla     ;s:fe,fd,fc,fb
.0b93	8d ff cf	         sta rp  ;recupere les flags.
.0b96	68		         pla     ;s:fd,fc,fb
.0b97	85 fe		         sta $fe ;reccupere fe
.0b99	68		         pla     ;s:fc,fb
.0b9a	85 fd		         sta $fd ;recupere fd
.0b9c	68		         pla     ;s:fb
.0b9d	85 fc		         sta $fc ;recupere fc
.0b9f	68		         pla     ;s:
.0ba0	85 fb		         sta $fb ;recupere fb
.0ba2	ad fa cf	         lda pc+1;replaace l'adresse de
.0ba5	48		         pha     ;s:pch
.0ba6	ad f9 cf	         lda pc  ;retour sur la pile
.0ba9	48		         pha     ;s:pcl,pch
.0baa	ad ff cf	         lda rp  ;recupere les flags
.0bad	48		         pha     ;s:rp,pcl,pch
.0bae	ad fe cf	         lda ra  ;recupere ra
.0bb1	28		         plp     ;s:pcl,pch
.0bb2	60		         rts
.0bb3			pushregs
.0bb3	08		         php     ;s;rp,pcl,pch
.0bb4	8d fe cf	         sta ra  ; -- sauve a
.0bb7	68		         pla     ;s:pcl,pch
.0bb8	8d ff cf	         sta rp  ; -- sauve rp
.0bbb	68		         pla     ;s:pch
.0bbc	8d f9 cf	         sta pc  ; -- sauve pcl
.0bbf	68		         pla     ;s:
.0bc0	8d fa cf	         sta pc+1; -- sauve pch
.0bc3	ad ff cf	         lda rp  ; -- sauve rp
.0bc6	48		         pha     ;s:rp
.0bc7	ad fe cf	         lda ra  ; -- sauve ra
.0bca	48		         pha     ;s:ra,rp
.0bcb	8a		         txa     ; -- tfr rx
.0bcc	48		         pha     ;s:rx,ra,rp
.0bcd	98		         tya     ; -- tfr ry
.0bce	48		         pha     ;s:ry,rx,ra,rp
.0bcf	ad fa cf	         lda pc+1; -- replace l'adresse
.0bd2	48		         pha     ;s:pch,ry,rx,ra,rp
.0bd3	ad f9 cf	         lda pc  ; -- de retour.
.0bd6	48		         pha     ;s:pcl,pch,ru,rx,ra,rp
.0bd7	ad ff cf	         lda rp  ; -- place les flags
.0bda	48		         pha     ;    sur le stack.
.0bdb	ad fe cf	         lda ra  ; -- recupere ra
.0bde	28		         plp     ; -- recupere flags.
.0bdf	60		         rts     ;s:pcl,pch,ru,rx,ra,rp
.0be0			popregs
.0be0	08		         php
.0be1	8d fe cf	         sta ra
.0be4	68		         pla
.0be5	8d ff cf	         sta rp
.0be8	68		         pla     ;s:pch,ry,rx,ra,rp
.0be9	8d f9 cf	         sta pc  ; -- sauve pcl
.0bec	68		         pla     ;s:ry,rx,ra,rp
.0bed	8d fa cf	         sta pc+1; -- sauve pch
.0bf0	68		         pla     ;s:rx,ra,rp
.0bf1	a8		         tay     ;recupere ry
.0bf2	68		         pla     ;s:ra,rp
.0bf3	aa		         tax     ;recupere rx
.0bf4	68		         pla     ;s:rp
.0bf5	8d fe cf	         sta ra  ;recupere ra
.0bf8	68		         pla     ;s:
.0bf9	8d ff cf	         sta rp  ;recupere les flags.
.0bfc	ad fa cf	         lda pc+1;replace l'adresse de
.0bff	48		         pha     ;s:pch
.0c00	ad f9 cf	         lda pc  ;retour sur la pile
.0c03	48		         pha     ;s:pcl,pch
.0c04	ad ff cf	         lda rp  ;recupere les flags
.0c07	48		         pha     ;s:rp,pcl,pch
.0c08	ad fe cf	         lda ra  ;recupere ra
.0c0b	28		         plp     ;s:pcl,pch
.0c0c	60		         rts

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-mem.asm

.0c0d			inczp1
.0c0d	08		         php
.0c0e	e6 fb		         inc zp1
.0c10	d0 02		         bne repzp1
.0c12	e6 fc		         inc zp1+1
.0c14	28		repzp1   plp
.0c15	60		         rts
.0c16			inczp2
.0c16	08		         php
.0c17	e6 fd		         inc zp2
.0c19	d0 02		         bne repzp2
.0c1b	e6 fe		         inc zp2+1
.0c1d	28		repzp2   plp
.0c1e	60		         rts
.0c1f			deczp1
.0c1f	08		         php
.0c20	48		         pha
.0c21	a5 fb		         lda zp1
.0c23	d0 02		         bne noemp
.0c25	c6 fc		         dec zp1+1
.0c27	c6 fb		noemp    dec zp1
.0c29	68		         pla
.0c2a	28		         plp
.0c2b	60		         rts
.0c2c			deczp2
.0c2c	08		         php
.0c2d	48		         pha
.0c2e	a5 fd		         lda zp2
.0c30	d0 02		         bne noemp
.0c32	c6 fe		         dec zp2+1
.0c34	c6 fd		noemp    dec zp2
.0c36	68		         pla
.0c37	28		         plp
.0c38	60		         rts
.0c39			yxtoptr
.0c39	8c f8 cf	        sty memptr+1
.0c3c	8e f7 cf	        stx memptr
.0c3f	60		        rts
.0c40			ptrtoyx
.0c40	08		        php
.0c41	ac f8 cf	        ldy memptr+1
.0c44	ae f7 cf	        ldx memptr
.0c47	28		        plp
.0c48	60		        rts
.0c49			incptr
.0c49	08		        php
.0c4a	ee f7 cf	        inc memptr
.0c4d	d0 03		        bne norep
.0c4f	ee f8 cf	        inc memptr+1
.0c52	28		norep   plp
.0c53	60		        rts
.0c54			decptr
.0c54	08		        php
.0c55	48		        pha
.0c56	ad f7 cf	        lda memptr
.0c59	d0 03		        bne noemp
.0c5b	ee f8 cf	        inc memptr+1
.0c5e	ee f7 cf	noemp   inc memptr
.0c61	68		        pla
.0c62	28		        plp
.0c63	60		        rts
.0c64			incptr8
.0c64	08		        php
.0c65	48		        pha
.0c66	98		        tya
.0c67	48		        pha
.0c68	a0 08		        ldy #8
.0c6a	20 49 0c	again   jsr incptr
.0c6d	88		        dey
.0c6e	d0 fa		        bne again
.0c70	68		        pla
.0c71	a8		        tay
.0c72	68		        pla
.0c73	28		        plp
.0c74	60		        rts

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-conv.asm

.0c75			putyxhex
.0c75	20 41 0b	         jsr pushall
.0c78	98		         tya
.0c79	48		         pha
.0c7a	20 c5 0c	         jsr lsr4bits
.0c7d	20 cc 0c	         jsr nibtohex
.0c80	8d f1 cf	         sta hexstr+0
.0c83	68		         pla
.0c84	20 cc 0c	         jsr nibtohex
.0c87	8d f2 cf	         sta hexstr+1
.0c8a	8a		         txa
.0c8b	20 aa 0c	         jsr atohex
.0c8e	a2 f1		         ldx #<hexstr+0
.0c90	a0 cf		         ldy #>hexstr+0
.0c92	20 76 0d	         jsr putsyx
.0c95	20 7a 0b	         jsr popall
.0c98	60		         rts
.0c99			putahex
.0c99	20 b3 0b	         jsr pushregs
.0c9c	20 aa 0c	         jsr atohex
.0c9f	a2 f3		         ldx #<hexstr+2
.0ca1	a0 cf		         ldy #>hexstr+2
.0ca3	20 76 0d	         jsr putsyx
.0ca6	20 e0 0b	         jsr popregs
.0ca9	60		         rts
.0caa			atohex
.0caa	08		         php
.0cab	48		         pha
.0cac	48		         pha
.0cad	20 c5 0c	         jsr lsr4bits
.0cb0	20 cc 0c	         jsr nibtohex
.0cb3	8d f3 cf	         sta hexstr+2
.0cb6	68		         pla
.0cb7	20 cc 0c	         jsr nibtohex
.0cba	8d f4 cf	         sta hexstr+3
.0cbd	a9 00		         lda #$00
.0cbf	8d f5 cf	         sta hexstr+4
.0cc2	68		         pla
.0cc3	28		         plp
.0cc4	60		         rts
.0cc5			lsr4bits
.0cc5	08		         php
.0cc6	4a		         lsr a
.0cc7	4a		         lsr a
.0cc8	4a		         lsr a
.0cc9	4a		         lsr a
.0cca	28		         plp
.0ccb	60		         rts
.0ccc			nibtohex
.0ccc	08		         php
.0ccd	29 0f		         and #$0f
.0ccf	f8		         sed
.0cd0	18		         clc
.0cd1	69 90		         adc #$90
.0cd3	69 40		         adc #$40
.0cd5	28		         plp
.0cd6	60		         rts
.0cd7			bytestohex
.0cd7	20 41 0b	         jsr pushall
.0cda	84 fc		         sty zp1+1
.0cdc	86 fb		         stx zp1
.0cde	08		        php
.0cdf	48		        pha
.0ce0	a9 20		        lda #32
.0ce2	20 d2 ff	        jsr chrout
.0ce5	68		        pla
.0ce6	28		        plp
.0ce7	08		        php
.0ce8	48		        pha
.0ce9	a9 05		        lda #5
.0ceb	20 d2 ff	        jsr chrout
.0cee	68		        pla
.0cef	28		        plp
.0cf0	08		        php
.0cf1	48		        pha
.0cf2	a9 24		        lda #36
.0cf4	20 d2 ff	        jsr chrout
.0cf7	68		        pla
.0cf8	28		        plp
.0cf9	20 75 0c	         jsr putyxhex   ; prn adresse
.0cfc	08		        php
.0cfd	48		        pha
.0cfe	a9 20		        lda #$20
.0d00	20 d2 ff	        jsr chrout
.0d03	68		        pla
.0d04	28		        plp
.0d05	08		        php
.0d06	48		        pha
.0d07	a9 9f		        lda #159
.0d09	20 d2 ff	        jsr chrout
.0d0c	68		        pla
.0d0d	28		        plp
.0d0e	a0 00		         ldy #$00
.0d10	aa		         tax
.0d11	8c 61 0d	another  sty offset
.0d14	b1 fb		         lda (zp1),y
.0d16	20 99 0c	         jsr putahex
.0d19	48		         pha
.0d1a	20 39 0d	         jsr petsciiaddr
.0d1d	68		         pla
.0d1e	8d 00 04	petscii  sta $0400
.0d21	48		         pha
.0d22	a9 0d		         lda #$0d
.0d24	8d 00 d8	petcol   sta $d800
.0d27	68		         pla
.0d28	08		        php
.0d29	48		        pha
.0d2a	a9 20		        lda #$20
.0d2c	20 d2 ff	        jsr chrout
.0d2f	68		        pla
.0d30	28		        plp
.0d31	c8		         iny
.0d32	ca		         dex
.0d33	d0 dc		         bne another
.0d35	20 7a 0b	         jsr popall
.0d38	60		         rts
.0d39			petsciiaddr
.0d39	20 b3 0b	        jsr pushregs
.0d3c	08		        php
.0d3d	a4 d2		        ldy scrnlin+1
.0d3f	a6 d1		        ldx scrnlin
.0d41	28		        plp
.0d42	a9 1f		        lda #31
.0d44	18		        clc
.0d45	6d 61 0d	        adc offset
.0d48	20 86 0e	        jsr addatoyx
.0d4b	8c 20 0d	        sty petscii+2
.0d4e	8e 1f 0d	        stx petscii+1
.0d51	8e 25 0d	        stx petcol+1
.0d54	98		        tya
.0d55	29 fb		        and #%11111011 ;#%00000100
.0d57	09 d8		        ora #$d8
.0d59	8d 26 0d	        sta petcol+2
.0d5c	a8		        tay
.0d5d	20 e0 0b	        jsr popregs
.0d60	60		        rts
>0d61	00		offset  .byte $00

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-string.asm

.0d62			puts
.0d62	20 b3 0b	         jsr pushregs
.0d65	a0 00		         ldy #$00   ; y = offset
.0d67	b1 fb		nextc    lda ($fb),y;lit un caractere
.0d69	f0 07		         beq out    ;si 0 on sort
.0d6b	20 d2 ff	         jsr chrout ;on l'affiche
.0d6e	c8		         iny        ;pointe le prochain
.0d6f	4c 67 0d	         jmp nextc  ; et l'affiche
.0d72	20 e0 0b	out      jsr popregs
.0d75	60		         rts
.0d76			putsyx
.0d76	20 41 0b	         jsr pushall;sauve reg + zps
.0d79	86 fb		         stx $fb    ;$yyxx dans
.0d7b	84 fc		         sty $fb+1  ; zp1
.0d7d	20 62 0d	         jsr puts
.0d80	20 7a 0b	         jsr popall ;recup reg + zps
.0d83	60		         rts
.0d84			putsc
.0d84	08		         php        ;flag sur stack
.0d85	48		         pha        ;acc sur stack
.0d86	48		         pha        ;sauvegarde acc
.0d87	ad 86 02	         lda kcol   ;recup coul. carac.
.0d8a	8d f6 cf	         sta curcol ; et la sauvegarde
.0d8d	68		         pla        ;recup. acc
.0d8e	8d 86 02	         sta kcol   ;place coul. voulue
.0d91	20 62 0d	         jsr puts   ;affiche la chaine
.0d94	ad f6 cf	         lda curcol ;recup coul. carac.
.0d97	8d 86 02	         sta kcol   ; et la replace
.0d9a	68		         pla        ;recup acc
.0d9b	28		         plp        ;recup flag
.0d9c	60		         rts
.0d9d			putxcxy
.0d9d	08		         php       ;sauve registres
.0d9e	48		         pha       ; ...
.0d9f	48		         pha       ;sauve acc
.0da0	ad 86 02	         lda kcol  ;recup couleur carac.
.0da3	8d f6 cf	         sta curcol; et sauvegarde
.0da6	68		         pla       ;recup acc
.0da7	8d 86 02	         sta kcol  ;place couleur carac.
.0daa	20 76 0d	         jsr putsyx;affiche la chaine
.0dad	ad f6 cf	         lda curcol
.0db0	8d 86 02	         sta kcol
.0db3	68		         pla
.0db4	28		         plp
.0db5	60		         rts
.0db6			gotoxy
.0db6	20 b3 0b	        jsr pushregs
.0db9	8a		        txa ; interchange x et y
.0dba	48		        pha ; ...
.0dbb	98		        tya ; ...
.0dbc	aa		        tax ; ...
.0dbd	68		        pla ; ...
.0dbe	a8		        tay ; ...
.0dbf	c0 00		txlow   cpy #0
.0dc1	10 02		        bpl txhigh
.0dc3	a2 00		        ldx #0
.0dc5	e0 19		txhigh  cpx #25
.0dc7	30 02		        bmi tylow
.0dc9	a2 18		        ldx #24
.0dcb	c0 00		tylow   cpy #0
.0dcd	10 02		        bpl tyhigh
.0dcf	a0 00		        ldy #0
.0dd1	c0 28		tyhigh  cpy #40
.0dd3	30 02		        bmi allok
.0dd5	a0 27		        ldy #39
.0dd7	18		allok   clc
.0dd8	20 f0 ff	        jsr plot
.0ddb	20 e0 0b	        jsr popregs
.0dde	60		        rts
.0ddf			putnch
.0ddf	20 b3 0b	        jsr pushregs
.0de2	20 d2 ff	again   jsr chrout
.0de5	ca		        dex
.0de6	d0 fa		        bne again
.0de8	20 e0 0b	        jsr popregs
.0deb	60		        rts

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-float.asm

.0dec			clrbasbuf
.0dec	08		         php
.0ded	48		         pha
.0dee	98		         tya
.0def	48		         pha
.0df0	a9 00		         lda #$00
.0df2	a0 59		         ldy #$59
.0df4	99 00 02	again    sta $0200,y
.0df7	88		         dey
.0df8	d0 fa		         bne again
.0dfa	68		         pla
.0dfb	a8		         tay
.0dfc	68		         pla
.0dfd	28		         plp
.0dfe	60		         rts
.0dff			getfac1
.0dff	20 b3 0b	         jsr pushregs
.0e02	20 ec 0d	         jsr clrbasbuf
.0e05	20 f9 ab	         jsr prompt
.0e08	86 7a		         stx $7a
.0e0a	84 7b		         sty $7b
.0e0c	20 73 00	         jsr chrget
.0e0f	20 f3 bc	         jsr fasctf1 ;conv. ascii->float
.0e12	20 e0 0b	         jsr popregs
.0e15	60		         rts
.0e16			prnfac1
.0e16	20 b3 0b	         jsr pushregs
.0e19	20 dd bd	         jsr ff1tasc
.0e1c	20 76 0d	         jsr putsyx
.0e1f	20 e0 0b	         jsr popregs
.0e22	60		         rts
.0e23			prnfac2
.0e23	20 fc bb	         jsr ff2tf1
.0e26	20 16 0e	         jsr prnfac1
.0e29	60		         rts

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-keyb.asm

.0e2a			clrkbbuf
.0e2a	08		            php
.0e2b	48		            pha
.0e2c	a9 00		            lda #0
.0e2e	85 c6		            sta 198
.0e30	68		            pla
.0e31	28		            plp
.0e32	60		            rts
.0e33			waitstop
.0e33	08		          php    ;\ sauve les flags
.0e34	48		          pha    ;/  et l'acc.
.0e35	20 2a 0e	          jsr clrkbbuf
.0e38	20 e1 ff	wait      jsr stop ; Veri [run/stop]
.0e3b	d0 fb		          bne wait ;loop pas pesee.
.0e3d	68		          pla    ;\ recup. acc et
.0e3e	28		          plp    ;/  les flags.
.0e3f	60		          rts
.0e40			anykey
.0e40	08		        php
.0e41	48		        pha
.0e42	20 2a 0e	        jsr clrkbbuf
.0e45	a5 cb		wait    lda 203    ;lit la matrice de
.0e47	c9 40		        cmp #64    ; 64 = aucune clef
.0e49	f0 fa		        beq wait   ; on en attend une.
.0e4b	20 54 0e	        jsr kbfree ; Clavier relache.
.0e4e	20 2a 0e	        jsr clrkbbuf
.0e51	68		        pla
.0e52	28		        plp
.0e53	60		        rts
.0e54			kbfree
.0e54	08		        php
.0e55	48		        pha
.0e56	a5 cb		wait    lda 203    ; lit la matrice
.0e58	c9 40		        cmp #64    ; 64 = aucune clef
.0e5a	d0 fa		        bne wait   ; attend la relache
.0e5c	68		        pla
.0e5d	28		        plp
.0e5e	60		        rts
.0e5f			getkey
.0e5f	08		        php
.0e60	20 e4 ff	try     jsr getin  ;tente de lire
.0e63	c9 00		        cmp #0     ; 0 si aucune.
.0e65	f0 f9		        beq try    ; on reessaye
.0e67	28		        plp
.0e68	60		        rts
.0e69			waitkey
.0e69	08		        php
.0e6a	48		        pha
.0e6b	8d 85 0e	        sta clef   ;Sauve clef voulue
.0e6e	20 2a 0e	        jsr clrkbbuf
.0e71	20 e4 ff	wait    jsr getin  ;Sonde le clavier
.0e74	cd 85 0e	        cmp clef   ;Compare avec clef
.0e77	d0 f8		        bne wait   ;Pas la bonne.
.0e79	68		        pla
.0e7a	28		        plp
.0e7b	60		        rts
.0e7c			waitspace
.0e7c	a9 20		            lda #$20
.0e7e	20 69 0e	            jsr waitkey
.0e81	20 2a 0e	            jsr clrkbbuf
.0e84	60		            rts
>0e85	00		clef        .byte   0

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-math.asm

.0e86			addatoyx
.0e86	08		        php
.0e87	48		        pha
.0e88	8c c1 0e	        sty reponse+1
.0e8b	8e c0 0e	        stx reponse
.0e8e	18		        clc
.0e8f	6d c0 0e	        adc reponse
.0e92	90 03		        bcc norep
.0e94	ee c1 0e	        inc reponse+1
.0e97	8d c0 0e	norep   sta reponse
.0e9a	ac c1 0e	        ldy reponse+1
.0e9d	ae c0 0e	        ldx reponse
.0ea0	68		        pla
.0ea1	28		        plp
.0ea2	60		        rts
.0ea3			subatoyx
.0ea3	08		        php
.0ea4	48		        pha
.0ea5	8c c1 0e	        sty reponse+1
.0ea8	8e c0 0e	        stx reponse
.0eab	38		        sec
.0eac	ed c0 0e	        sbc reponse
.0eaf	b0 03		        bcs noemp
.0eb1	ce c1 0e	        dec reponse+1
.0eb4	8d c0 0e	noemp   sta reponse
.0eb7	ac c1 0e	        ldy reponse+1
.0eba	ae c0 0e	        ldx reponse
.0ebd	68		        pla
.0ebe	28		        plp
.0ebf	60		        rts
>0ec0	00 00		reponse .word $00

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-bitmap.asm

.0ec2			bmapinit
.0ec2	08		         php
.0ec3	48		         pha
.0ec4	ad 18 d0	         lda vic+$18
.0ec7	09 08		         ora #$08
.0ec9	8d 18 d0	         sta vic+$18
.0ecc	ad 11 d0	         lda vic+$11
.0ecf	09 20		         ora #$20
.0ed1	8d 11 d0	         sta vic+$11
.0ed4	68		         pla
.0ed5	28		         plp
.0ed6	60		         rts
.0ed7			bmapclr
.0ed7	20 41 0b	         jsr pushall
.0eda	a9 00		         lda #<vidstart
.0edc	85 fb		         sta zp1
.0ede	a9 20		         lda #>vidstart
.0ee0	85 fc		         sta zp1+1
.0ee2	a0 00		         ldy #$00
.0ee4	a9 00		more     lda #$00
.0ee6	91 fb		         sta (zp1),y
.0ee8	20 0d 0c	         jsr inczp1
.0eeb	a5 fc		         lda zp1+1
.0eed	c9 3f		         cmp #$3f
.0eef	d0 f3		         bne more
.0ef1	a5 fb		         lda zp1
.0ef3	c9 3f		         cmp #$3f
.0ef5	d0 ed		         bne more
.0ef7	20 7a 0b	         jsr popall
.0efa	60		         rts
.0efb			bmpfillbk
.0efb	20 41 0b	         jsr pushall
.0efe	a9 00		         lda #<bakmem
.0f00	85 fb		         sta zp1
.0f02	a9 04		         lda #>bakmem
.0f04	85 fc		         sta zp1+1
.0f06	a2 08		         ldx #$08
.0f08	a0 00		         ldy #$00
.0f0a	a9 01		         lda #$01
.0f0c	91 fb		more     sta (zp1),y
.0f0e	20 0d 0c	         jsr inczp1
.0f11	e4 fc		         cpx zp1+1
.0f13	d0 f7		         bne more
.0f15	20 7a 0b	         jsr popall
.0f18	60		         rts

;******  Return to file: slbug64.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib/l-drawbox.asm

.0f19			dbtline
.0f19	08		        php         ;Sauve registres.
.0f1a	48		        pha
.0f1b	a9 b0		        lda #tleft  ;Coin supp gauche.
.0f1d	8d da 0f	        sta cleft
.0f20	a9 c0		        lda #hline  ;Ligne horizontale.
.0f22	8d dc 0f	        sta cmid
.0f25	a9 ae		        lda #tright ;Coin supp droit.
.0f27	8d db 0f	        sta cright
.0f2a	28		        plp         ;Récup registres.
.0f2b	68		        pla
.0f2c	20 75 0f	        jsr dbdrawline
.0f2f	60		        rts
.0f30			dbbline
.0f30	08		        php         ;Sauve registres
.0f31	48		        pha
.0f32	a9 ad		        lda #bleft  ;Coin inf. gauche.
.0f34	8d da 0f	        sta cleft
.0f37	a9 c0		        lda #hline  ;Ligne horizontale.
.0f39	8d dc 0f	        sta cmid
.0f3c	a9 bd		        lda #bright ;Coin inf. droit.
.0f3e	8d db 0f	        sta cright
.0f41	28		        plp         ;Récup registres
.0f42	68		        pla
.0f43	20 75 0f	        jsr dbdrawline
.0f46	60		        rts
.0f47			dbeline
.0f47	08		        php         ;Sauve registres
.0f48	48		        pha
.0f49	a9 dd		        lda #vline  ;Ligne verticale.
.0f4b	8d da 0f	        sta cleft
.0f4e	a9 20		        lda #space  ;Carac espace.
.0f50	8d dc 0f	        sta cmid
.0f53	a9 dd		        lda #vline  ;Ligne verticale.
.0f55	8d db 0f	        sta cright
.0f58	28		        plp         ;Récup registres
.0f59	68		        pla
.0f5a	20 75 0f	        jsr dbdrawline
.0f5d	60		        rts
.0f5e			dbhline
.0f5e	08		        php         ;Sauve registres
.0f5f	48		        pha
.0f60	a9 ab		        lda #hleft  ;Ex. gauche médian
.0f62	8d da 0f	        sta cleft
.0f65	a9 c0		        lda #hline  ;Ligne horizontale
.0f67	8d dc 0f	        sta cmid
.0f6a	a9 b3		        lda #hright ;Ex. droite médian
.0f6c	8d db 0f	        sta cright
.0f6f	28		        plp         ;Récup registres
.0f70	68		        pla
.0f71	20 75 0f	        jsr dbdrawline
.0f74	60		        rts
.0f75			dbdrawline
.0f75	20 b3 0b	        jsr pushregs;Sauve registres
.0f78	ad 86 02	        lda kcol    ;Sauvegarde de la-
.0f7b	8d e3 0f	        sta dbbcoul ;-couleur basic.
.0f7e	ad e1 0f	        lda dbcoul  ;Sélect. couleur-
.0f81	8d 86 02	        sta kcol    ;-fenêtre.
.0f84	c9 10		        cmp #$10    ;Couleur inverse?
.0f86	30 05		        bmi norev   ;Non ...
.0f88	a9 12		        lda #18     ;Oui place en inv.
.0f8a	20 d2 ff	        jsr chrout
.0f8d	ae e2 0f	norev   ldx dbclin  ;posit curseur au-
.0f90	ac de 0f	        ldy dbleft  ;-coin supp-gauche-
.0f93	18		        clc         ;-de la fenêtre.
.0f94	20 f0 ff	        jsr plot
.0f97	ad da 0f	        lda cleft   ;dessine 1er car.
.0f9a	20 d2 ff	        jsr chrout
.0f9d	ad dc 0f	        lda cmid    ;dessine ligne hor-
.0fa0	ae df 0f	        ldx dbwdth  ;-selon largeur-
.0fa3	ca		        dex         ;-fenêtre moins-
.0fa4	ca		        dex         ;-2 car extrémité.
.0fa5	20 df 0d	        jsr putnch
.0fa8	ad db 0f	        lda cright  ;dess. dernier car
.0fab	20 d2 ff	        jsr chrout
.0fae	a9 92		        lda #146    ;fin inverse vidéo
.0fb0	20 d2 ff	        jsr chrout
.0fb3	ad e3 0f	        lda dbbcoul ;replace la couleur
.0fb6	8d 86 02	        sta kcol    ;basic.
.0fb9	ee e2 0f	        inc dbclin;ligne suivante.
.0fbc	20 e0 0b	        jsr popregs ;Récup registres
.0fbf	60		        rts
.0fc0			dbdraw
.0fc0	20 b3 0b	        jsr pushregs;Sauve registres
.0fc3	ae e0 0f	        ldx dbhght  ;recup hautr boite
.0fc6	20 19 0f	        jsr dbtline ;Dessine ligne sup
.0fc9	ca		        dex         ;-2 pour les ...
.0fca	ca		        dex         ;lignes supp/inf
.0fcb	f0 06		        beq linfin  ;Si 0 ligne vide.
.0fcd	20 47 0f	boucle  jsr dbeline ;Dessine ligne vide
.0fd0	ca		        dex         ;
.0fd1	d0 fa		        bne boucle  ;prochaine si reste
.0fd3	20 30 0f	linfin  jsr dbbline ;Dessine ligne inf.
.0fd6	20 e0 0b	        jsr popregs ;Récup registres
.0fd9	60		        rts
>0fda	00		cleft   .byte   0   ;Carac Gauche lin
>0fdb	00		cright  .byte   0   ;Carac droit lin
>0fdc	00		cmid    .byte   0   ;Carac centr lin
>0fdd	00		dbtop   .byte   0   ;Coord haut boite.
>0fde	00		dbleft  .byte   0   ;Coord gauche boîte
>0fdf	00		dbwdth  .byte   0   ;Larg de la boîte.
>0fe0	00		dbhght  .byte   0   ;Haut de la boîte.
>0fe1	00		dbcoul  .byte   0   ;Coul de la boîte.
>0fe2	00		dbclin  .byte   0   ;No ligne courante
>0fe3	00		dbbcoul .byte   0   ;couleur Basic.

;******  Return to file: slbug64.asm


;******  Processing file: progvars.asm

>0fe4	00		row      .byte $00
>0fe5	00		col      .byte $00
>0fe6	00		lin      .byte $00
>0fe7	55		sbit     .byte $55
>0fe8	00 00		adrs     .word $00
>0fea	00		counter  .byte $00
>0feb	00 20		baseaddr .word $2000 ;8192
>0fed	40 01		scrwidth .word $0140 ;320
>0fef	12 05		dmphead .byte 18,5
>0ff1	41 44 52 45	        .text "adres"
>0ff5	53
>0ff6	9f		        .byte 159
>0ff7	20 30 30 20	        .text " 00 01 02 03"
>0ffb	30 31 20 30 32 20 30 33
>1003	20 30 34 20	        .text " 04 05 06 07 "
>1007	30 35 20 30 36 20 30 37 20
>1010	99		        .byte 153
>1011	50 45 54 53	        .text "petsciis"
>1015	43 49 49 53
>1019	92 00		        .byte 146,0
>101b	12 05		dmphead2 .byte 18,5
>101d	20 20 20 20	        .text "     "
>1021	20
>1022	9f		        .byte 159
>1023	20 30 38 20	        .text " 08 09 0A 0B"
>1027	30 39 20 30 c1 20 30 c2
>102f	20 30 c3 20	        .text " 0C 0D 0E 0F "
>1033	30 c4 20 30 c5 20 30 c6 20
>103c	99		        .byte 153
>103d	20 20 20 20	        .text "        "
>1041	20 20 20 20
>1045	92 00		        .byte 146,0
>1047	01 12		menu0   .byte 1,18
>1049	9e b0		        .byte kjaune,176
>104b	c0 c0 c0	        .byte 192,192,192
>104e	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1052	c0 c0
>1054	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1058	c0 c0
>105a	12		        .byte 18
>105b	20 cd c5 ce	        .text " MENU "
>105f	d5 20
>1061	92		        .byte 146
>1062	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1066	c0 c0
>1068	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>106c	c0 c0
>106e	c0 c0 c0	        .byte 192,192,192
>1071	ae		        .byte 174
>1072	00		        .byte 0
>1073	01 13		menu1   .byte 1,19
>1075	9e dd 05	        .byte kjaune,221,kblanc
>1078	20 5b c6 31	        .text " [F1] +128 octets"
>107c	5d 20 2b 31 32 38 20 4f 43 54 45 54 53
>1089	9e b6 05	        .byte kjaune,182,kblanc
>108c	20 5b c6 32	        .text " [F2] -128 octets "
>1090	5d 20 2d 31 32 38 20 4f 43 54 45 54 53 20
>109e	9e dd 05	        .byte kjaune,221,kblanc
>10a1	00		        .byte 0
>10a2	01 14		menu2   .byte 1,20
>10a4	9e dd 05	        .byte kjaune,221,kblanc
>10a7	20 5b c6 33	        .text " [F3] +256 octets"
>10ab	5d 20 2b 32 35 36 20 4f 43 54 45 54 53
>10b8	9e b6 05	        .byte kjaune,182,kblanc
>10bb	20 5b c6 34	        .text " [F4] -256 octets "
>10bf	5d 20 2d 32 35 36 20 4f 43 54 45 54 53 20
>10cd	9e dd 05	        .byte kjaune,221,kblanc
>10d0	00		        .byte 0
>10d1	01 15		menu3   .byte 1,21
>10d3	9e dd 05	        .byte kjaune,221,kblanc
>10d6	20 5b c6 35	        .text " [F5] +512 octets"
>10da	5d 20 2b 35 31 32 20 4f 43 54 45 54 53
>10e7	9e b6 05	        .byte kjaune,182,kblanc
>10ea	20 5b c6 36	        .text " [F6] -512 octets "
>10ee	5d 20 2d 35 31 32 20 4f 43 54 45 54 53 20
>10fc	9e dd 05	        .byte kjaune,221,kblanc
>10ff	00		        .byte 0
>1100	01 16		menu4   .byte 1,22
>1102	9e dd 05	        .byte kjaune,221,kblanc
>1105	20 5b c6 37	        .text " [F7]+4096 octets"
>1109	5d 2b 34 30 39 36 20 4f 43 54 45 54 53
>1116	9e b6 05	        .byte kjaune,182,kblanc
>1119	20 5b c6 38	        .text " [F8]-4096 octets "
>111d	5d 2d 34 30 39 36 20 4f 43 54 45 54 53 20
>112b	9e dd 05	        .byte kjaune,221,kblanc
>112e	00		        .byte 0
>112f	01 17		menu5   .byte 1,23
>1131	9e dd 05	        .byte kjaune,221,kblanc
>1134	20 5b ce 5d	        .text " [N] entrer adre."
>1138	20 45 4e 54 52 45 52 20 41 44 52 45 2e
>1145	9e b6 05	        .byte kjaune,182,kblanc
>1148	20 5b d1 5d	        .text " [Q] Quitter      "
>114c	20 d1 55 49 54 54 45 52 20 20 20 20 20 20
>115a	9e dd 05	        .byte kjaune,221,kblanc
>115d	00		        .byte 0
>115e	01 18		menu6   .byte 1,24
>1160	9e ad		        .byte kjaune,173
>1162	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1166	c0 c0
>1168	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>116c	c0 c0
>116e	c0		        .byte 192
>116f	12		        .byte 18
>1170	20 c4 cc c2	        .text " DLBUG-64 "
>1174	d5 c7 2d 36 34 20
>117a	92 c0		        .byte 146,192
>117c	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1180	c0 c0
>1182	c0 c0 c0 c0	        .byte 192,192,192,192,192,192
>1186	c0 c0
>1188	bd 05		        .byte 189,kblanc
>118a	00		        .byte 0

;******  Return to file: slbug64.asm


;******  End of listing
