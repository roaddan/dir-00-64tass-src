;---------------------------------------; nom fichier..: l-string.asm (seq); type fichier.: code pour t.m.p.; auteur.......: daniel lafrance; version......: 0.0.2; revision.....: 20251119,20251121;---------------------------------------; description:; routines d'affichage de chaines de; caracteres se terminant par $00 sans; recours au rom du âasic 2.0.;---------------------------------------;---------------------------------------; puts entres:;  pointeur de chaine $fbfâ; desc. affichage ëernal d'une chaine.;---------------------------------------puts         .block         php        ;sauve. registres         pha        ; ...         tya        ; ...         pha        ; ...         ldy #$00   ; y = offsetnextc    lda ($fb),y;lit un caractere         beq out    ;si 0 on sort         jsr putch  ;on l'affiche         iny        ;pointe le prochain         jmp nextc  ; et l'afficheout      pla        ;recup. registres         tay        ; ...         pla        ; ...         plp        ; ...         rts         .bend;---------------------------------------; putstrz input:;  pointeur de chaine $yyxx;---------------------------------------putsyx         .block         jsr pushall;sauve reg + zps         stx $fb    ;$yyxx dans         sty $fb+1  ; zp1         jsr puts         jsr popall ;recup reg + zps         rts         .bend;---------------------------------------; putstrzc input:;  pointeur de chaine $fcfb, couleur a;---------------------------------------putsc         .block         php        ;flag sur stack         pha        ;acc sur stack         pha        ;sauvegarde acc         lda kcol   ;recup coul. carac.         sta curcol ; et la sauvegarde         pla        ;recup. acc         sta kcol   ;place coul. voulue         jsr puts   ;affiche la chaine         lda curcol ;recup coul. carac.         sta kcol   ; et la replace         pla        ;recup acc         plp        ;recup flag         rts         .bend;---------------------------------------; putscxy input:;  pointeur de chaine $yyxx, bouleur a;---------------------------------------putxcxy         .block         php       ;sauve registres         pha       ; ...         pha       ;sauve acc         lda kcol  ;recup couleur carac.         sta curcol; et sauvegarde         pla       ;recup acc         sta kcol  ;place couleur carac.         jsr putsyx;affiche la chaine         lda curcol         sta kcol         pla         plp         rts         .bend;---------------------------------------