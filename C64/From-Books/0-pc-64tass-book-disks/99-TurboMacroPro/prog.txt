
; 64tass Turbo Assembler Macro V1.54.1900 listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/d-00-64tass-src/lib -i -L prog.txt -o prog.prg prog.asm
; Mon Dec  8 14:36:47 2025

;Offset	;Hex		;Source

;******  Processing input file: prog.asm


;******  Processing file: m-utils.asm


;******  Return to file: prog.asm


;******  Processing file: e-vars.asm

=$cfff			libre    = $cfff
=$cfff			rp       = libre    ;1 byte $cfff
=53246			ra       = libre-$01;1 byte $cffe
=53245			rx       = libre-$02;1 byte $cffd
=53244			ry       = libre-$03;1 byte $cffc
=53243			rs       = libre-$04;1 byte $cffb
=53241			pc       = libre-$06;1 word $cff9-$cffa
=53238			curcol   = libre-$09;1 byte $cff6
=53239			memptr   = libre-$08;1 word $cff7-$cff8
=53238			hexv     = libre-$09
=53233			hexstr   = hexv-$05 ;5 byte $cff1-$cff5
=53232			a2hexpfx = hexv-$06 ;1 byte $cff0
=53231			a2hexpy  = hexv-$07 ;1 byte $cfef
=53230			a2hexpx  = hexv-$08 ;1 byte $cfee
=53230			a2hexpos = hexv-$08 ;0 byte $cfee
=53229			a2hexcol = hexv-$09 ;1 byte $cfed
=53229			binv     = hexv-$09
=53220			binstr   = binv-$09 ;9 byte $cfe4-$cfec
=53219			a2binpfx = binv-$0a ;1 byte $cfe3
=53218			a2binpy  = binv-$0b ;1 byte $cfe2
=53217			a2binpx  = binv-$0c ;1 byte $cfe1
=53216			a2binpos = binv-$0d ;0 byte $cfe1
=53215			a2bincol = binv-$0e ;1 byte $cfe0
=53215			decv     = binv-$0e
=53209			decstr   = decv-$06 ;6 byte $cfda-$cfdf
=53209			a2decpfx = decv-$06 ;1 byte $cfd9
=53208			a2decpy  = decv-$07 ;1 byte $cfd8
=53207			a2decpx  = decv-$08 ;1 byte $cfd7
=53207			a2decpos = decv-$08 ;0 byte $cfd7
=53206			a2deccol = decv-$09 ;1 byte $cfd6
=53206			fltv     = decv-$09
=53200			fvar1    = fltv-6  ; 6 byte $cfd0-$cfd5
=53194			fvar2    = fltv-12 ; 6 byte $cfca-$cfcf
=53174			float1   = fltv-32 ;20 byte $cfb6-$cfc9
=53154			float2   = fltv-52 ;20 byte $cfa2-$cfb5
=53153			tval1    = fltv-53 ; 1 byte $cfa1
=53151			tval2    = fltv-55 ; 2 byte $cf9f-$cfa0
=53150			freevar  = tval2-1 ; 1 byte $cf9e

;******  Return to file: prog.asm


;******  Processing file: e-float.asm

=$ba8c			ffvtf2   = $ba8c ;copie 4 byt $(yyaa) f2
=$bba2			ffvtf1   = $bba2 ;copie fp $(yyaa) to f1
=$bbc7			ff1t5c   = $bbc7 ;copie f1 to $5c-$60
=$bbca			ff1t57   = $bbca ;copie f1 to $57-$5b
=$bbd0			ff1t49   = $bbd0 ;copie f1 to $49.
=$bbd4			ff1tyx   = $bbd4 ;copie f1 mem $yyxx.
=$bbfc			ff2tf1   = $bbfc ;copie f2 to f1
=$bc0c			ff1tf2   = $bc0c ;copie f1 to f2
=$b849			ff1p05   = $b849 ;f1=f1+0.5
=$b850			ffvsf1   = $b850 ;f1=fv-f1 ($yyaa)
=$b853			ff2sf1   = $b853 ;f1=f2-f1
=$b867			ffvpf1   = $b867 ;f1=fv+f1 ($yyaa)
=$b86a			ff2pf1   = $b86a ;f1=f2+f1
=$bd7e			ff1pac   = $bd7e ;f1=f1+ra val ra=0-9
=$ba28			ff1xfv   = $ba28 ;f1=f1*fv ($yyaa)
=$ba2b			ff1xf2   = $ba2b ;f1=f1*f2
=$bae2			ff1x10   = $bae2 ;f1=f1*10
=$bafe			ff1d10   = $bafe ;f1=f1/10
=$bb0f			ffvdf1   = $bb0f ;f1=fv/f1 ($yyaa)
=$bb12			ff2df1   = $bb12 ;f1=f2/f1
=$afe6			ffpor    = $afe6 ;f1=f1 or f2
=$afe9			ffpand   = $afe9 ;f1=f1 and f2
=$b947			ff1com2  = $b947 ;f1=two's compl f1
=$bc1b			ff1rnd   = $bc1b ;f1=round(f1)
=$bc39			ff1sign  = $bc39 ;f1=sgn(f1)
=$bc58			ff1abs   = $bc58 ;f1=abs(f1)
=$bc5b			ffvcmp   = $bc5b ;f1=f1 comp fv ($yyaa)
=$bccc			ff1int   = $bccc ;f1=int(f1)
=$bf71			ff1sqr   = $bf71 ;f1=sqrt(f1)
=$bf7b			ff1ef2   = $bf7b ;f1=fac1^f2
=$b3a2			fiyytf1  = $b3a2 ;f1=float(y)
=$bc3c			fiaatf1  = $bc3c ;conv acc to fp in f1
=$bc44			fi62tf1  = $bc44 ;conv f1 word 62,63
=$bdcd			fiaxtf1  = $bdcd ;f1=float($aaxx)+print
=$bcf3			fasctf1  = $bcf3 ;f1=float(ascii)
=$bddd			ff1tasc  = $bddd ;f1 to ascii ($yyaa)
=$bc9b			ff1tudw  = $bc9b ;f1=unsighed dw(f1)
=$b1bf			ff1swd64 = $b1bf ;f1=sw(f1)->64
=$b1d2			ff1wrd64 = $b1d2 ;f1=uw(f1)->64
=$b1aa			ff1wrday = $b1aa ;f1=word->$aayy
=$b7a1			ff1bytxx = $b7a1 ;f1 to byte in x
=$b79e			ff1evalx = $b79e ;eval. expr. f1 to x
=$e264			ff1cos   = $e264 ;f1=sin(f1+(pi/2))
=$e26b			ff1sin   = $e26b ;f1=sin(f1)
=$e2b4			ff1tan   = $e2b4 ;f1=sin(f1)/cos(f1)
=$e30e			ff1atn   = $e30e ;f1=atn(f1)
=$bc2b			fsngf1   = $bc2b ;check f1 sign

;******  Return to file: prog.asm


;******  Processing file: e-64map.asm

=$73			chrget   = $73   ;Recup Basic car texte
=$79			chrgot   = $79   ; ...une seconde fois.
=$fb			zp1      = $fb   ;1er Zpage prog. usager
=$fd			zp2      = $fd   ;2em Zpage prog. usager
=$0100			fascii   = $0100 ;region conv FP a ascii
=$0286			kcol     = $0286 ;Couleur car affiche.
=$fce2			reboot   = $fce2 ;Redemarrage a froid
=$fe66			reset    = $fe66 ;Redemarrare a chaud
=$e3bf			intcgt   = $e3bf ;Initialize chrget
=$ffa5			acptr    = $ffa5 ;Recoit byte port serie
=$ffc6			chkin    = $ffc6 ;Definie canal entree
=$ffc9			chkout   = $ffc9 ;Definie canal sortie
=$ffcf			chrin    = $ffcf ;Entre car canal entree
=$ffd2			chrout   = $ffd2 ;Sort car canal sortie
=$ff81			cint     = $ff81 ;Init ecran edit+vicii
=$ffa8			ciout    = $ffa8 ;Sort car sur bus serie
=$ffe7			clall    = $ffe7 ;Ferme tout fichier ouv
=$ffc3			close    = $ffc3 ;Ferme fichier logique
=$ffcc			clrchn   = $ffcc ;Efface caneaux i/o
=$ffe4			getin    = $ffe4 ;Entre un car de entree
=$fff3			iobase   = $fff3 ;Definie page mem. i/o
=$ff84			ioinit   = $ff84 ;Init. Periph. i/o
=$ffb1			listen   = $ffb1 ;Cmd LISTEN a perip bus
=$ffd5			load     = $ffd5 ;Charge periph. en ram
=$ff9c			membot   = $ff9c ;Lec./Ecr. bas mem.
=$ff99			memtop   = $ff99 ;Lec./Ecr. haut mem.
=$ffc0			open     = $ffc0 ;Ouvre fichier logique.
=$fff0			plot     = $fff0 ;Lec./Ecr. pos. curseur
=$ff87			ramtas   = $ff87 ;Init ram tapebuf+ecran
=$ffde			rdtim    = $ffde ;Recup horloge systeme
=$ffb7			readst   = $ffb7 ;Recup mot status i/o
=$ff8a			restor   = $ff8a ;Replace vecteurs i/o
=$ffd8			save     = $ffd8 ;Sauve mem vers periph
=$ff9f			scnkey   = $ff9f ;Sonde le clavier
=$ffed			screen   = $ffed ;Recup format ecran
=$ff93			second   = $ff93 ;Trans adr secnd/listen
=$ffba			setlfs   = $ffba ;Prep. fichier logique
=$ff90			setmsg   = $ff90 ;Prep. kmesg outpt flag
=$ffbd			setnam   = $ffbd ;Prep. nom de fichier
=$ffdb			settim   = $ffdb ;Init. horloge systeme
=$ffa2			settmo   = $ffa2 ;Place ieee delai fin
=$ffe1			stop     = $ffe1 ;Verif. clef stop
=$ffb4			talk     = $ffb4 ;Cmd LISTEN periph/SB
=$ff96			tsks     = $ff96 ;Trans. TALK secnd adr
=$ffea			udtim    = $ffea ;Maj. horloge systeme
=$ffae			unlsn    = $ffae ;Trans. UNLISTEN
=$ffab			untlk    = $ffab ;Trans. UNTALK
=$ffd8			vector   = $ffd8 ;Lec/ecr vecteurs i/o
=$d000			vic      = $d000 ;debut du vic-ii
=$0340			sprtmem  = $0340 ;832
=$07f8			sprtloc  = $07f8 ;2040
=$2000			vidstart = $2000
=$3f3f			vidend   = $3f3f
=$0400			bakmem   = $0400 ;1024 end at $0800
=$abf9			prompt   = $abf9 ;prompt ? dans tampon.
=$ab24			strout   = $ab24 ;print string at $0022
=8			discase  = 8
=9			enacase  = 9
=14			locase   = 14
=142			upcase   = 142
=17			crsdown  = 17
=29			crsright = 29
=145			crsup    = 145
=157			crsleft  = 157
=18			enarevs  = 18
=146			disrevs  = 146
=19			gohome   = 19
=147			clrhome  = 147
=20			delete   = 20
=32			space    = 32
=144			knoir    = 144
=129			korange  = 129
=5			kblanc   = 5
=28			krouge   = 28
=30			kvert    = 30
=31			kbleu    = 31
=149			kbrun    = 149
=150			krose    = 150
=151			kgris1   = 151
=152			kgris2   = 152
=153			kvertp   = 153
=154			kbleup   = 154
=155			kgris3   = 155
=156			kmauve   = 156
=158			kjaune   = 158
=159			kcyan    = 159

;******  Return to file: prog.asm


;******  Processing file: l-bashead.asm

.0801			start
>0801	0b 08		bcmd1    .word $080b ;adresse de la pro-
>0803	0a 00		         .word $0a   ;no. ligne basic.
>0805	9e		         .byte $9e   ;jeton pour la
>0806	32 30 36 31	         .text "2061";adresse du debut
>080a	00		         .byte $00   ;fin de cmd basic.
>080b	00 00		bcmd2    .word $00   ;adresse de la pro-
.080d	20 14 08	         jsr initscr
.0810	4c 2d 08	         jmp main
.0813	00		         brk
.0814			initscr
.0814	08		         php
.0815	48		         pha
.0816	a9 05		bord     lda #$05    ;place la couleur
.0818	8d 20 d0	         sta $d020   ; de la bordure.
.081b	a9 06		back     lda #$06    ;place la couleur
.081d	8d 21 d0	         sta $d021   ; du fond d'ecran.
.0820	a9 01		text     lda #$01    ;place la couleur
.0822	8d 86 02	         sta $0286   ; du texte.
.0825	a9 93		         lda #$93    ;efface l'ecran par
.0827	20 d2 ff	         jsr chrout  ; chrout du kernal.
.082a	68		         pla
.082b	28		         plp
.082c	60		         rts

;******  Return to file: prog.asm

.082d			main
.082d	a2 00		         ldx #0
.082f	a0 18		         ldy #24
.0831	20 37 0b	         jsr gotoxy
.0834	a2 c8		         ldx #200
.0836	a0 96		         ldy #150
.0838	20 dd 08	         jsr calcdot
.083b	ad 19 09	         lda row
.083e	20 b2 08	         jsr putahexdec
.0841	08		         php
.0842	48		         pha
.0843	a9 0d		         lda #$0d
.0845	20 d2 ff	         jsr chrout
.0848	68		         pla
.0849	28		         plp
.084a	ad 1a 09	         lda col
.084d	20 b2 08	         jsr putahexdec
.0850	08		         php
.0851	48		         pha
.0852	a9 0d		         lda #$0d
.0854	20 d2 ff	         jsr chrout
.0857	68		         pla
.0858	28		         plp
.0859	ad 1b 09	         lda lin
.085c	20 b2 08	         jsr putahexdec
.085f	08		         php
.0860	48		         pha
.0861	a9 0d		         lda #$0d
.0863	20 d2 ff	         jsr chrout
.0866	68		         pla
.0867	28		         plp
.0868	ad 1c 09	         lda sbit
.086b	20 b2 08	         jsr putahexdec
.086e			fptest
.086e	08		         php
.086f	48		         pha
.0870	a9 0d		         lda #$0d
.0872	20 d2 ff	         jsr chrout
.0875	68		         pla
.0876	28		         plp
.0877	08		         php
.0878	48		         pha
.0879	a9 0d		         lda #$0d
.087b	20 d2 ff	         jsr chrout
.087e	68		         pla
.087f	28		         plp
.0880	a9 10		         lda #$10
.0882	8d 1f 09	         sta counter
.0885	a0 cf		         ldy #$cf
.0887	a2 80		         ldx #$80
.0889	20 10 0a	         jsr yxtoptr
.088c	20 17 0a	again    jsr ptrtoyx
.088f	a9 08		         lda #$08
.0891	20 ae 0a	         jsr bytestohex
.0894	08		         php
.0895	48		         pha
.0896	a9 0d		         lda #$0d
.0898	20 d2 ff	         jsr chrout
.089b	68		         pla
.089c	28		         plp
.089d	20 3b 0a	         jsr incptr8
.08a0	ce 1f 09	         dec counter
.08a3	d0 e7		         bne again
.08a5	20 b4 0b	         jsr anykey
.08a8	08		         php
.08a9	48		         pha
.08aa	a9 0d		         lda #$0d
.08ac	20 d2 ff	         jsr chrout
.08af	68		         pla
.08b0	28		         plp
.08b1	60		         rts
.08b2			putahexdec
.08b2	20 90 09	         jsr pushregs
.08b5	08		         php
.08b6	48		         pha
.08b7	a9 9e		         lda #kjaune
.08b9	20 d2 ff	         jsr chrout
.08bc	68		         pla
.08bd	28		         plp
.08be	20 70 0a	         jsr putahex
.08c1	08		         php
.08c2	48		         pha
.08c3	a9 20		         lda #$20
.08c5	20 d2 ff	         jsr chrout
.08c8	68		         pla
.08c9	28		         plp
.08ca	08		         php
.08cb	48		         pha
.08cc	a9 9f		         lda #kcyan
.08ce	20 d2 ff	         jsr chrout
.08d1	68		         pla
.08d2	28		         plp
.08d3	aa		         tax
.08d4	a9 00		         lda #$00
.08d6	20 cd bd	         jsr fiaxtf1
.08d9	20 be 09	         jsr popregs
.08dc	60		         rts
.08dd			calcdot
.08dd	20 24 09	         jsr pushall
.08e0	98		         tya     ;y contien la ligne
.08e1	4a		         lsr a   ; on divise par 8
.08e2	4a		         lsr a
.08e3	4a		         lsr a
.08e4	8d 19 09	         sta row ; et on sauvegarde
.08e7	8a		         txa     ;x contien la colonne
.08e8	4a		         lsr a   ; on divise par 8
.08e9	4a		         lsr a
.08ea	4a		         lsr a
.08eb	8d 1a 09	         sta col ; et on sauvegarde
.08ee	98		         tya     ; masque avec 7 donne
.08ef	29 07		         and #$07; la ligne caractere
.08f1	8d 1b 09	         sta lin ; du pixel.
.08f4	8a		         txa     ;7-(x and 7) donne le
.08f5	29 07		         and #$07; no du bit de l'octet
.08f7	8d 1c 09	         sta sbit; du pixel.
.08fa	a9 07		         lda #$07
.08fc	38		         sec
.08fd	ed 1c 09	         sbc sbit
.0900	8d 1c 09	         sta sbit
.0903	20 5e 09	         jsr popall
.0906	60		         rts
.0907			floattest
.0907	08		         php
.0908	48		         pha
.0909	a9 07		         lda #$07
.090b	8d 86 02	         sta kcol
.090e	a0 37		         ldy #55
.0910	20 a2 b3	         jsr fiyytf1
.0913	20 8a 0b	         jsr prnfac1
.0916	68		         pla
.0917	28		         plp
.0918	60		         rts
>0919	00		row      .byte $00
>091a	00		col      .byte $00
>091b	00		lin      .byte $00
>091c	55		sbit     .byte $55
>091d	00 00		adrs     .word $00
>091f	00		counter  .byte $00
>0920	00 20		baseaddr .word $2000 ;8192
>0922	40 01		scrwidth .word $0140 ;320

;******  Processing file: l-push.asm

.0924			pushall
.0924	08		         php     ;s;p,pcl,pch
.0925	78		         sei
.0926	8d fe cf	         sta ra  ;save a
.0929	68		         pla     ;s:pcl,pch
.092a	8d ff cf	         sta rp  ;save rp
.092d	68		         pla     ;s:pch
.092e	8d f9 cf	         sta pc  ;save pcl
.0931	68		         pla     ;s:
.0932	8d fa cf	         sta pc+1;save pch
.0935	a5 fb		         lda $fb ;save fb
.0937	48		         pha     ;s:fb
.0938	a5 fc		         lda $fc ;save fc
.093a	48		         pha     ;s:fc,fb
.093b	a5 fd		         lda $fd ;save fd
.093d	48		         pha     ;s:fd,fc,fb
.093e	a5 fe		         lda $fe ;save fe
.0940	48		         pha     ;s:fe,fd,fc,fb
.0941	ad ff cf	         lda rp  ;save rp
.0944	48		         pha     ;s:rp,fe,fd,fc,fb
.0945	ad fe cf	         lda ra  ;save ra
.0948	48		         pha     ;s:ra,rp,fe,fd,fc,fb
.0949	8a		         txa     ;save rx
.094a	48		         pha     ;s:rx,ra,rp,fe-fb
.094b	98		         tya     ;save y
.094c	48		         pha     ;s:ry,rx,ra,rp,fe-fb
.094d	ad fa cf	         lda pc+1;replace l'adresse
.0950	48		         pha     ;s:pch,ry,rx,ra,...
.0951	ad f9 cf	         lda pc  ; de retour.
.0954	48		         pha     ;s:pcl,pch,ru,rx,ra,...
.0955	ad ff cf	         lda rp  ;place les flags
.0958	48		         pha     ; sur le stack.
.0959	ad fe cf	         lda ra  ;recupere ra
.095c	28		         plp     ;recupere les flags.
.095d	60		         rts
.095e			popall
.095e	78		         sei     ;s:pcl,pch,ry,rx,...
.095f	68		         pla     ;s:pch,ry,rx,ra,rp,...
.0960	8d f9 cf	         sta pc  ;sauve pcl
.0963	68		         pla     ;s:ry,rx,ra,rp,fe...fb
.0964	8d fa cf	         sta pc+1;sauve pch
.0967	68		         pla     ;s:rx,ra,rp,fe,fd,fc,fb
.0968	a8		         tay     ;recupere ry
.0969	68		         pla     ;s:ra,rp,fe,fd,fc,fb
.096a	aa		         tax     ;recupere rx
.096b	68		         pla     ;s:rp,fe,fd,fc,fb
.096c	8d fe cf	         sta ra  ;recupere ra
.096f	68		         pla     ;s:fe,fd,fc,fb
.0970	8d ff cf	         sta rp  ;recupere les flags.
.0973	68		         pla     ;s:fd,fc,fb
.0974	85 fe		         sta $fe ;reccupere fe
.0976	68		         pla     ;s:fc,fb
.0977	85 fd		         sta $fd ;recupere fd
.0979	68		         pla     ;s:fb
.097a	85 fc		         sta $fc ;recupere fc
.097c	68		         pla     ;s:
.097d	85 fb		         sta $fb ;recupere fb
.097f	ad fa cf	         lda pc+1;replaace l'adresse de
.0982	48		         pha     ;s:pch
.0983	ad f9 cf	         lda pc  ;retour sur la pile
.0986	48		         pha     ;s:pcl,pch
.0987	ad ff cf	         lda rp  ;recupere les flags
.098a	48		         pha     ;s:rp,pcl,pch
.098b	ad fe cf	         lda ra  ;recupere ra
.098e	28		         plp     ;s:pcl,pch
.098f	60		         rts
.0990			pushregs
.0990	08		         php     ;s;p,pcl,pch
.0991	78		         sei
.0992	8d fe cf	         sta ra  ;save a
.0995	68		         pla     ;s:pcl,pch
.0996	8d ff cf	         sta rp  ;save rp
.0999	68		         pla     ;s:pch
.099a	8d f9 cf	         sta pc  ;save pcl
.099d	68		         pla     ;s:
.099e	8d fa cf	         sta pc+1;save pch
.09a1	ad ff cf	         lda rp  ;save rp
.09a4	48		         pha     ;s:rp
.09a5	ad fe cf	         lda ra  ;save ra
.09a8	48		         pha     ;s:ra,rp
.09a9	8a		         txa     ;save rx
.09aa	48		         pha     ;s:rx,ra,rp
.09ab	98		         tya     ;save y
.09ac	48		         pha     ;s:ry,rx,ra,rp
.09ad	ad fa cf	         lda pc+1;replace l'adresse
.09b0	48		         pha     ;s:pch,ry,rx,ra,rp
.09b1	ad f9 cf	         lda pc  ; de retour.
.09b4	48		         pha     ;s:pcl,pch,ru,rx,ra,rp
.09b5	ad ff cf	         lda rp  ;place les flags
.09b8	48		         pha     ; sur le stack.
.09b9	ad fe cf	         lda ra  ;recupere ra
.09bc	28		         plp     ;recupere les flags.
.09bd	60		         rts
.09be			popregs
.09be	78		         sei     ;s:pcl,pch,ry,rx,ra,rp
.09bf	68		         pla     ;s:pch,ry,rx,ra,rp
.09c0	8d f9 cf	         sta pc  ;sauve pcl
.09c3	68		         pla     ;s:ry,rx,ra,rp
.09c4	8d fa cf	         sta pc+1;sauve pch
.09c7	68		         pla     ;s:rx,ra,rp
.09c8	a8		         tay     ;recupere ry
.09c9	68		         pla     ;s:ra,rp
.09ca	aa		         tax     ;recupere rx
.09cb	68		         pla     ;s:rp
.09cc	8d fe cf	         sta ra  ;recupere ra
.09cf	68		         pla     ;s:
.09d0	8d ff cf	         sta rp  ;recupere les flags.
.09d3	ad fa cf	         lda pc+1;replaace l'adresse de
.09d6	48		         pha     ;s:pch
.09d7	ad f9 cf	         lda pc  ;retour sur la pile
.09da	48		         pha     ;s:pcl,pch
.09db	ad ff cf	         lda rp  ;recupere les flags
.09de	48		         pha     ;s:rp,pcl,pch
.09df	ad fe cf	         lda ra  ;recupere ra
.09e2	28		         plp     ;s:pcl,pch
.09e3	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-mem.asm

.09e4			inczp1
.09e4	08		         php
.09e5	e6 fb		         inc zp1
.09e7	d0 02		         bne repzp1
.09e9	e6 fc		         inc zp1+1
.09eb	28		repzp1   plp
.09ec	60		         rts
.09ed			inczp2
.09ed	08		         php
.09ee	e6 fd		         inc zp2
.09f0	d0 02		         bne repzp2
.09f2	e6 fe		         inc zp2+1
.09f4	28		repzp2   plp
.09f5	60		         rts
.09f6			deczp1
.09f6	08		         php
.09f7	48		         pha
.09f8	a5 fb		         lda zp1
.09fa	d0 02		         bne noemp
.09fc	c6 fc		         dec zp1+1
.09fe	c6 fb		noemp    dec zp1
.0a00	68		         pla
.0a01	28		         plp
.0a02	60		         rts
.0a03			deczp2
.0a03	08		         php
.0a04	48		         pha
.0a05	a5 fd		         lda zp2
.0a07	d0 02		         bne noemp
.0a09	c6 fe		         dec zp2+1
.0a0b	c6 fd		noemp    dec zp2
.0a0d	68		         pla
.0a0e	28		         plp
.0a0f	60		         rts
.0a10			yxtoptr
.0a10	8c f8 cf	        sty memptr+1
.0a13	8e f7 cf	        stx memptr
.0a16	60		        rts
.0a17			ptrtoyx
.0a17	08		        php
.0a18	ac f8 cf	        ldy memptr+1
.0a1b	ae f7 cf	        ldx memptr
.0a1e	28		        plp
.0a1f	60		        rts
.0a20			incptr
.0a20	08		        php
.0a21	ee f7 cf	        inc memptr
.0a24	d0 03		        bne norep
.0a26	ee f8 cf	        inc memptr+1
.0a29	28		norep   plp
.0a2a	60		        rts
.0a2b			decptr
.0a2b	08		        php
.0a2c	48		        pha
.0a2d	ad f7 cf	        lda memptr
.0a30	d0 03		        bne noemp
.0a32	ee f8 cf	        inc memptr+1
.0a35	ee f7 cf	noemp   inc memptr
.0a38	68		        pla
.0a39	28		        plp
.0a3a	60		        rts
.0a3b			incptr8
.0a3b	08		        php
.0a3c	48		        pha
.0a3d	98		        tya
.0a3e	48		        pha
.0a3f	a0 08		        ldy #8
.0a41	20 20 0a	again   jsr incptr
.0a44	88		        dey
.0a45	d0 fa		        bne again
.0a47	68		        pla
.0a48	a8		        tay
.0a49	68		        pla
.0a4a	28		        plp
.0a4b	60		        rts

;******  Return to file: prog.asm


;******  Processing file: l-conv.asm

.0a4c			putyxhex
.0a4c	20 24 09	         jsr pushall
.0a4f	98		         tya
.0a50	48		         pha
.0a51	20 9c 0a	         jsr lsr4bits
.0a54	20 a3 0a	         jsr nibtohex
.0a57	8d f1 cf	         sta hexstr+0
.0a5a	68		         pla
.0a5b	20 a3 0a	         jsr nibtohex
.0a5e	8d f2 cf	         sta hexstr+1
.0a61	8a		         txa
.0a62	20 81 0a	         jsr atohex
.0a65	a2 f1		         ldx #<hexstr+0
.0a67	a0 cf		         ldy #>hexstr+0
.0a69	20 f7 0a	         jsr putsyx
.0a6c	20 5e 09	         jsr popall
.0a6f	60		         rts
.0a70			putahex
.0a70	20 90 09	         jsr pushregs
.0a73	20 81 0a	         jsr atohex
.0a76	a2 f3		         ldx #<hexstr+2
.0a78	a0 cf		         ldy #>hexstr+2
.0a7a	20 f7 0a	         jsr putsyx
.0a7d	20 be 09	         jsr popregs
.0a80	60		         rts
.0a81			atohex
.0a81	08		         php
.0a82	48		         pha
.0a83	48		         pha
.0a84	20 9c 0a	         jsr lsr4bits
.0a87	20 a3 0a	         jsr nibtohex
.0a8a	8d f3 cf	         sta hexstr+2
.0a8d	68		         pla
.0a8e	20 a3 0a	         jsr nibtohex
.0a91	8d f4 cf	         sta hexstr+3
.0a94	a9 00		         lda #$00
.0a96	8d f5 cf	         sta hexstr+4
.0a99	68		         pla
.0a9a	28		         plp
.0a9b	60		         rts
.0a9c			lsr4bits
.0a9c	08		         php
.0a9d	4a		         lsr a
.0a9e	4a		         lsr a
.0a9f	4a		         lsr a
.0aa0	4a		         lsr a
.0aa1	28		         plp
.0aa2	60		         rts
.0aa3			nibtohex
.0aa3	08		         php
.0aa4	29 0f		         and #$0f
.0aa6	f8		         sed
.0aa7	18		         clc
.0aa8	69 90		         adc #$90
.0aaa	69 40		         adc #$40
.0aac	28		         plp
.0aad	60		         rts
.0aae			bytestohex
.0aae	20 24 09	         jsr pushall
.0ab1	84 fc		         sty $fc
.0ab3	86 fb		         stx $fb
.0ab5	08		         php
.0ab6	48		         pha
.0ab7	a9 3a		         lda #58
.0ab9	20 d2 ff	         jsr chrout
.0abc	68		         pla
.0abd	28		         plp
.0abe	20 4c 0a	         jsr putyxhex
.0ac1	08		         php
.0ac2	48		         pha
.0ac3	a9 20		         lda #$20
.0ac5	20 d2 ff	         jsr chrout
.0ac8	68		         pla
.0ac9	28		         plp
.0aca	a0 00		         ldy #$00
.0acc	aa		         tax
.0acd	b1 fb		another  lda ($fb),y
.0acf	20 70 0a	         jsr putahex
.0ad2	08		         php
.0ad3	48		         pha
.0ad4	a9 20		         lda #$20
.0ad6	20 d2 ff	         jsr chrout
.0ad9	68		         pla
.0ada	28		         plp
.0adb	c8		         iny
.0adc	ca		         dex
.0add	d0 ee		         bne another
.0adf	20 5e 09	         jsr popall
.0ae2	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-string.asm

.0ae3			puts
.0ae3	20 90 09	         jsr pushregs
.0ae6	a0 00		         ldy #$00   ; y = offset
.0ae8	b1 fb		nextc    lda ($fb),y;lit un caractere
.0aea	f0 07		         beq out    ;si 0 on sort
.0aec	20 d2 ff	         jsr chrout ;on l'affiche
.0aef	c8		         iny        ;pointe le prochain
.0af0	4c e8 0a	         jmp nextc  ; et l'affiche
.0af3	20 be 09	out      jsr popregs
.0af6	60		         rts
.0af7			putsyx
.0af7	20 24 09	         jsr pushall;sauve reg + zps
.0afa	86 fb		         stx $fb    ;$yyxx dans
.0afc	84 fc		         sty $fb+1  ; zp1
.0afe	20 e3 0a	         jsr puts
.0b01	20 5e 09	         jsr popall ;recup reg + zps
.0b04	60		         rts
.0b05			putsc
.0b05	08		         php        ;flag sur stack
.0b06	48		         pha        ;acc sur stack
.0b07	48		         pha        ;sauvegarde acc
.0b08	ad 86 02	         lda kcol   ;recup coul. carac.
.0b0b	8d f6 cf	         sta curcol ; et la sauvegarde
.0b0e	68		         pla        ;recup. acc
.0b0f	8d 86 02	         sta kcol   ;place coul. voulue
.0b12	20 e3 0a	         jsr puts   ;affiche la chaine
.0b15	ad f6 cf	         lda curcol ;recup coul. carac.
.0b18	8d 86 02	         sta kcol   ; et la replace
.0b1b	68		         pla        ;recup acc
.0b1c	28		         plp        ;recup flag
.0b1d	60		         rts
.0b1e			putxcxy
.0b1e	08		         php       ;sauve registres
.0b1f	48		         pha       ; ...
.0b20	48		         pha       ;sauve acc
.0b21	ad 86 02	         lda kcol  ;recup couleur carac.
.0b24	8d f6 cf	         sta curcol; et sauvegarde
.0b27	68		         pla       ;recup acc
.0b28	8d 86 02	         sta kcol  ;place couleur carac.
.0b2b	20 f7 0a	         jsr putsyx;affiche la chaine
.0b2e	ad f6 cf	         lda curcol
.0b31	8d 86 02	         sta kcol
.0b34	68		         pla
.0b35	28		         plp
.0b36	60		         rts
.0b37			gotoxy
.0b37	20 90 09	        jsr pushregs
.0b3a	8a		        txa ; interchange x et y
.0b3b	48		        pha ; ...
.0b3c	98		        tya ; ...
.0b3d	aa		        tax ; ...
.0b3e	68		        pla ; ...
.0b3f	a8		        tay ; ...
.0b40	c0 00		txlow   cpy #0
.0b42	10 02		        bpl txhigh
.0b44	a2 00		        ldx #0
.0b46	e0 28		txhigh  cpx #40
.0b48	30 02		        bmi tylow
.0b4a	a2 27		        ldx #39
.0b4c	c0 00		tylow   cpy #0
.0b4e	10 02		        bpl tyhigh
.0b50	a0 00		        ldy #0
.0b52	c0 19		tyhigh  cpy #25
.0b54	30 02		        bmi allok
.0b56	a0 18		        ldy #24
.0b58	18		allok   clc
.0b59	20 f0 ff	        jsr plot
.0b5c	20 be 09	        jsr popregs
.0b5f	60		        rts

;******  Return to file: prog.asm


;******  Processing file: l-float.asm

.0b60			clrbasbuf
.0b60	08		         php
.0b61	48		         pha
.0b62	98		         tya
.0b63	48		         pha
.0b64	a9 00		         lda #$00
.0b66	a0 59		         ldy #$59
.0b68	99 00 02	again    sta $0200,y
.0b6b	88		         dey
.0b6c	d0 fa		         bne again
.0b6e	68		         pla
.0b6f	a8		         tay
.0b70	68		         pla
.0b71	28		         plp
.0b72	60		         rts
.0b73			getfac1
.0b73	20 90 09	         jsr pushregs
.0b76	20 60 0b	         jsr clrbasbuf
.0b79	20 f9 ab	         jsr prompt
.0b7c	86 7a		         stx $7a
.0b7e	84 7b		         sty $7b
.0b80	20 73 00	         jsr chrget
.0b83	20 f3 bc	         jsr fasctf1 ;conv. ascii->float
.0b86	20 be 09	         jsr popregs
.0b89	60		         rts
.0b8a			prnfac1
.0b8a	20 90 09	         jsr pushregs
.0b8d	20 dd bd	         jsr ff1tasc
.0b90	20 f7 0a	         jsr putsyx
.0b93	20 be 09	         jsr popregs
.0b96	60		         rts
.0b97			prnfac2
.0b97	20 fc bb	         jsr ff2tf1
.0b9a	20 8a 0b	         jsr prnfac1
.0b9d	60		         rts

;******  Return to file: prog.asm


;******  Processing file: l-keyb.asm

.0b9e			clrkbbuf
.0b9e	08		            php
.0b9f	48		            pha
.0ba0	a9 00		            lda #0
.0ba2	85 c6		            sta 198
.0ba4	68		            pla
.0ba5	28		            plp
.0ba6	60		            rts
.0ba7			waitstop
.0ba7	08		          php    ;\ sauve les flags
.0ba8	48		          pha    ;/  et l'acc.
.0ba9	20 9e 0b	          jsr clrkbbuf
.0bac	20 e1 ff	wait      jsr stop    ; Veri [run/stop]
.0baf	d0 fb		          bne  wait   ;loop pas pesee.
.0bb1	68		          pla    ;\ recup. acc et
.0bb2	28		          plp    ;/  les flags.
.0bb3	60		          rts
.0bb4			anykey
.0bb4	08		        php     ;\ sauve les flags
.0bb5	48		        pha     ;/  et l'acc.
.0bb6	20 9e 0b	        jsr clrkbbuf
.0bb9	a5 cb		wait    lda 203 ;lit la matrice de
.0bbb	c9 40		        cmp #64 ; si 64 alors aucune
.0bbd	f0 fa		        beq wait; on attend qu'il y
.0bbf	20 c8 0b	        jsr kbfree ; on attend que
.0bc2	20 9e 0b	        jsr clrkbbuf
.0bc5	68		        pla     ;\ recup. l'acc et
.0bc6	28		        plp     ;/  les flags.
.0bc7	60		        rts
.0bc8			kbfree
.0bc8	08		            php     ;\ sauve les flags
.0bc9	48		            pha     ;/  et l'acc.
.0bca	a5 cb		wait        lda 203 ;lit la matrice de
.0bcc	c9 40		            cmp #64 ; si 64 alors aucune
.0bce	d0 fa		            bne wait;on attend qu'il y
.0bd0	68		            pla     ;\ recup. l'acc et
.0bd1	28		            plp     ;/  les flags.
.0bd2	60		            rts
.0bd3			getkey
.0bd3	08		            php     ; sauve les flags.
.0bd4	20 e4 ff	try         jsr getin ;tente de lire
.0bd7	c9 00		            cmp #0  ; 0 si aucune.
.0bd9	f0 f9		            beq try ; aucune, on attend.
.0bdb	28		            plp     ; recup. les flags.
.0bdc	60		            rts
.0bdd			waitkey
.0bdd	08		            php      ;\ sauve les flags
.0bde	48		            pha      ;/  et l'acc.
.0bdf	8d f9 0b	            sta clef ; sauve cle voulue.
.0be2	20 9e 0b	            jsr clrkbbuf
.0be5	20 e4 ff	wait        jsr getin; tente lire clef.
.0be8	cd f9 0b	            cmp clef ;compare avec clef
.0beb	d0 f8		            bne wait ;pas la bonne.
.0bed	68		            pla      ;\ recup. l'acc et
.0bee	28		            plp      ;/  les flags.
.0bef	60		            rts
.0bf0			waitspace
.0bf0	a9 20		            lda #$20
.0bf2	20 dd 0b	            jsr waitkey
.0bf5	20 9e 0b	            jsr clrkbbuf
.0bf8	60		            rts
>0bf9	00		clef        .byte   0

;******  Return to file: prog.asm


;******  Processing file: l-bitmap.asm

.0bfa			bmapinit
.0bfa	08		         php
.0bfb	48		         pha
.0bfc	ad 18 d0	         lda vic+$18
.0bff	09 08		         ora #$08
.0c01	8d 18 d0	         sta vic+$18
.0c04	ad 11 d0	         lda vic+$11
.0c07	09 20		         ora #$20
.0c09	8d 11 d0	         sta vic+$11
.0c0c	68		         pla
.0c0d	28		         plp
.0c0e	60		         rts
.0c0f			bmapclr
.0c0f	20 24 09	         jsr pushall
.0c12	a9 00		         lda #<vidstart
.0c14	85 fb		         sta zp1
.0c16	a9 20		         lda #>vidstart
.0c18	85 fc		         sta zp1+1
.0c1a	a0 00		         ldy #$00
.0c1c	a9 00		more     lda #$00
.0c1e	91 fb		         sta (zp1),y
.0c20	20 e4 09	         jsr inczp1
.0c23	a5 fc		         lda zp1+1
.0c25	c9 3f		         cmp #$3f
.0c27	d0 f3		         bne more
.0c29	a5 fb		         lda zp1
.0c2b	c9 3f		         cmp #$3f
.0c2d	d0 ed		         bne more
.0c2f	20 5e 09	         jsr popall
.0c32	60		         rts
.0c33			bmpfillbk
.0c33	20 24 09	         jsr pushall
.0c36	a9 00		         lda #<bakmem
.0c38	85 fb		         sta zp1
.0c3a	a9 04		         lda #>bakmem
.0c3c	85 fc		         sta zp1+1
.0c3e	a2 08		         ldx #$08
.0c40	a0 00		         ldy #$00
.0c42	a9 01		         lda #$01
.0c44	91 fb		more     sta (zp1),y
.0c46	20 e4 09	         jsr inczp1
.0c49	e4 fc		         cpx zp1+1
.0c4b	d0 f7		         bne more
.0c4d	20 5e 09	         jsr popall
.0c50	60		         rts

;******  Return to file: prog.asm


;******  End of listing
