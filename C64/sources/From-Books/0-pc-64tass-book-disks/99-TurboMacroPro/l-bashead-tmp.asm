;--------------------------------------; NOM FICHIER..: L-BASHEAD.ASM (SEQ); TYPE FICHIER.: CODE POUR T.M.P.; AUTEUR.......: DANIEL LAFRANCE; VERSION......: 0.0.1; REVISION.....: 20241013;--------------------------------------; ENTETE POUR DEMARRAGE BASIC 2 C64;--------------------------------------         *= $0801STARTBCMD1    .WORD $080B ;ADRESSE DE LA PRO                     ; CHAINE COMMANDE.         .WORD $0A   ;NO. LIGNE BASIC.                     ; 10 DANS CE CAS.         .BYTE $9E   ;JETON POUR LA                     ; COMMANDE SYS.         .TEXT "2061";ADRESSE DU DEBUT                     ; DU PROGRAMME EN                     ; DECIMAL/ASCII.         .BYTE $00   ;FIN DE CMD BASIC.BCMD2    .WORD $00   ;ADRESSE DE LA PRO                     ; CHAINE COMMANDE.                     ; $00 SI AUCUNE.;--------------------------------------;POUR FACILITER LA CREATION DE PROGRM; LA PREMIERE ACTION EST DE SAUTER VERS; UNE ROUTINE NOMMEE "MAIN".;CETTE METHODE PERMET D'UTILISER LE ; MEME ENTETE POUR TOUS LES PROGRAMME.;LA ROUTINE "MAIN" DOIT SE TERMINER PAR; UN "RTS" POUR ASSURER UN RETOUR; ADEQUAT A BASIC.;--------------------------------------        LDA #$90        STA $38        JSR $A65E        JSR BHSCRINI        JSR BHISLIB        LDA #<BHINFO        STA $FB        LDA #>BHINFO        STA $FC        JSR BHPRINTBASNOLD JMP MAIN;--------------------------------------BHSCRINI        .BLOCK        PHP        PHABORD    LDA #$05    ;PLACE LA COULEUR        STA $D020   ; DE LA BORDURE.BACK    LDA #$06    ;PLACE LA COULEUR        STA $D021   ; DU FOND D'ECRAN.TEXT    LDA #$01    ;PLACE LA COULEUR        STA $0286   ; DU TEXTE.        LDA #$93    ;EFFACE L'ECRAN PAR        JSR $FFD2   ; CHROUT DU KERNAL.        PLA        PLP        RTS        .BEND;--------------------------------------BHISLIB             .BLOCK        LDY #$FFNEXTC   INY        LDA LIBMARK,Y        BEQ FINISH        CMP $C000,Y        BEQ NEXTCNOROM   JSR BHLDLIB        RTSFINISH  RTS      LIBMARK .NULL "LIBC64"        .BEND;--------------------------------------BHLDLIB          .BLOCK        LDA #<BHMSG        STA $FB        LDA #>BHMSG        STA $FC        JSR BHPRINTDOIT    LDA #7      ;CHRG NFICHIER LEN.        LDX #<BHNAME ;POINTE $YYXX->PTR        LDY #>BHNAME ;  NFICHIER        JSR $FFBD   ;SETNAM        LDA #$01    ;CHRG LFN DANS A        LDX #8      ;PERIPH #8        LDY #$01 ;$00:ADRESSE<-YYXX                ;$01:ADRESSE<-FICHIER        JSR $FFBA   ;SETLFS        LDA #$00  ;$00:CHRG EN MEMOIRE                    ;$01:VERIFIER           JSR $FFD5   ;LOADEND     RTS        .BEND;--------------------------------------BHPRINT .BLOCK        LDY #$00NEXTC   LDA ($FB),Y        BEQ END        INY        JSR $FFD2        JMP NEXTC END     RTS        .BEND;--------------------------------------BHMSG   ;.BYTE $0D,$0D        .BYTE 29,29,29,29,29        .BYTE 29,29        .TEXT "CHARGEMENT/LOADING:"BHNAME  .NULL "ROMC000"BHINFO  .BYTE $0D,$0D        .BYTE 29,29,29,29,29        .BYTE 29,29,29,29,29        .TEXT "POUR/FOR INFORMATION"        .BYTE $0D        .BYTE 29,29,29,29,29        .BYTE 29,29,29,29        .TEXT "VOIR/SEE:"         .BYTE 18,32        .TEXT "ROMX000.TXT"        .BYTE 32,146        .BYTE $0D,$0D,$0D,$0D,$0D,0;--------------------------------------