;--------------------------------------; nom fichier..: dlbug64.asm; type fichier.: source pour t.m.p.; auteur.......: daniel lafrance; version......: 20151125-1; revision.....: 0.1.0fr;--------------------------------------        .include "m-utils.asm"        .include "e-romc000.asm"        .include "l-bashead.asm";--------------------------------------main        .block        #outcar 14 ;Force maj/min        #outcar 8  ;Bloque [C=][shift]        lda #$08        sta ddev        #outcar 147        #outcar 13        #ldyximm $c000        jsr ramprobe        #outcar kgris3        ldy #$00        #ptrtozp2 pushallnextop  ;jsr getkey        #outcar $0d        #outcar 36        ldy zp2+1        ldx zp2        jsr putyxhex        #outcar 32        ldy #$00        lda (zp2),y        jsr decode        cpx #$00        beq nextop        cmp #$60        beq outskip    jsr vinczp2        dex        bne skip        jmp nextopout     #outcar $0d        #outcar $0d        #outcar kjaune        jsr directory        #outcar kblanc        jsr getkey        jsr $fce2        rts        .bend;--------------------------------------;;-------------------------------------- decode        .block        jsr pushall        #ptrtozp1 opmneumo        pha        cmp #$00        beq print        tay again  jsr inczp1        jsr inczp1        jsr inczp1        jsr inczp1        dey        bne again print  jsr comaputs        #ptrtozp1 opcodes        #outcar 32        #outcar 36        pla        pha        tay        lda (zp1),y        sta numbytes        jsr putahex        #ptrtozp1 oplenght        #outcar 32        #outcar 36        pla        pha        tay        lda (zp1),y        sta numbytes        jsr putahex        #ptrtozp1 opcycles        #outcar 32        #outcar 36        pla        pha        tay        lda (zp1),y        jsr putahex        #ptrtozp1 opmodes        #outcar 32        #outcar 36        pla        pha        tay        lda (zp1),y        jsr putahex        pla        ;jsr getkey        jsr popall        ldx numbytes        rtsnumbytes .byte 0        .bend comaputs        .block        jsr pushall        ldy #$00next    lda (zp1),y        cmp #44        beq out        jsr chrout        iny        jmp nextout     jsr popall        rts        .bendtestprg jsr pushregs        lda #$05        sta $c002        lda $c002,y        jsr popregs        rts;--------------------------------------; Les fichiers du code du programme.;--------------------------------------        .include "memdump.asm"        .include "getadr.asm"        .include "ramprobe.asm";        .include "string-fr.asm"        .include "string-en.asm";--------------------------------------; Les librairies generales.;--------------------------------------        .include "l-opmneumo.asm"        .include "l-opcodes.asm"        .include "l-opcycles.asm"        .include "l-oplenght.asm"        .include "l-opmodes.asm" ;--------------------------------------