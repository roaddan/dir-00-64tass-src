
; 64tass Turbo Assembler Macro V1.52.1237? listing file
; 64tass -C -m -a -I /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib -i -L charedit.txt -o charedit.prg charedit.asm
; Sat Nov 25 18:00:55 2023

;Offset	;Hex		;Source

;******  Processing input file: charedit.asm

="20231116-100400"	version  = "20231116-100400"

;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/header-c64.asm

>0801	0b 08 0a 00	.word (+), 10
>0805	9e 32 30 36	.null $9e, "2061"
>0809	31 00
>080b	00 00		+ .word 0

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/macros-64tass.asm


;******  Return to file: charedit.asm


;******  Processing file: localmacro.asm


;******  Return to file: charedit.asm

=18			fkeyleft       =    18
=9			f1top          =    9
=$0400			scrnnewram     =    $0400
=10			charsdef       =    10
=9			grid_top       =    9
=1			grid_left      =    1
=16			grid_bot       =    grid_top + 7
=8			grid_right     =    grid_left + 7
=$0b			bordure        =    vgris
=$00			fond           =    vnoir
=$03			mesgcol        =    vcyan
=$03			menu1col1      =    vcyan
=$0e			menu1col2      =    vbleu1
=$0f			menu2col1      =    vgris2
=$0c			menu2col2      =    vgris1
=$01			flashcol       =    vblanc
=$07			whoamicol      =    vjaune
=$01			charcolor      =    vblanc
=$0f			charscolor     =    vgris2
.080d			main
.080d	20 71 21	               jsr  push
.0810	20 43 20	               jsr  scrmaninit
.0813	08		               php
.0814	48		               pha
.0815	a9 08		               lda  #$08
.0817	20 d2 ff	               jsr  $ffd2
.081a	68		               pla
.081b	28		               plp
.081c	20 5d 0a	               jsr  drawcredits
.081f	a2 76		               ldx #<menu_msg
.0821	a0 1c		               ldy #>menu_msg
.0823	20 09 21	               jsr putscxy
.0826			wait
.0826	20 29 20	               jsr  screendis
.0829	20 0e 10	               jsr  copycharset
.082c	20 63 20	               jsr  cls
.082f	20 f8 0f	               jsr  setscreenptr
.0832	20 bc 0a	               jsr  setdefaultchar
.0835	20 69 10	               jsr  staticscreen
.0838	20 3b 0f	               jsr  drawbitmap
.083b	a9 00		               lda  #$00
.083d	8d 51 09	               sta  fkeyset
.0840	20 a5 10	               jsr  drawfkeys
.0843	a9 00		               lda  #$00
.0845	20 71 21	               jsr  push
.0848	a2 c3		               ldx  #<blankmsg
.084a	a0 19		               ldy  #>blankmsg
.084c	20 09 21	               jsr  putscxy
.084f	a2 ef		               ldx  #<prompt_msg
.0851	a0 19		               ldy  #>prompt_msg
.0853	20 09 21	               jsr  putscxy
.0856	20 b0 21	               jsr  pop
.0859	20 36 20	               jsr  screenena
.085c	20 cd 0c	               jsr  keyaction
.085f	20 63 20	               jsr  cls
.0862	20 5d 0a	               jsr  drawcredits
.0865	a2 ff		               ldx #<bye_msg
.0867	a0 1d		               ldy #>bye_msg
.0869	20 09 21	               jsr putscxy
.086c	a2 21		               ldx #<any_msg
.086e	a0 1e		               ldy #>any_msg
.0870	20 09 21	               jsr putscxy
.0873	20 91 25	               jsr  getkey
.0876	20 63 20	               jsr  cls
.0879	20 b0 21	endmain        jsr  pop
.087c	60		               rts
.087d			savetofile
.087d	20 71 21	               jsr  push
.0880	a9 62		               lda  #<fname
.0882	8d 1f 27	               sta  dsk_fnptr
.0885	a9 09		               lda  #>fname
.0887	8d 20 27	               sta  dsk_fnptr+1
.088a	a9 0d		               lda  #(device-fname-1)
.088c	8d 21 27	               sta  dsk_fnlen
.088f	ad 70 09	               lda  device
.0892	29 0f		               and  #$0f
.0894	8d 1e 27	               sta  dsk_lfsno
.0897	8d 1d 27	               sta  dsk_dev
.089a	a9 00		               lda  #<bitmapmem
.089c	8d 19 27	               sta  dsk_data_s
.089f	a9 28		               lda  #>bitmapmem
.08a1	8d 1a 27	               sta  dsk_data_s+1
.08a4	a9 00		               lda  #<endofaddr
.08a6	8d 1b 27	               sta  dsk_data_e
.08a9	a9 48		               lda  #>endofaddr
.08ab	8d 1c 27	               sta  dsk_data_e+1
.08ae	a2 c3		               ldx #<blankmsg
.08b0	a0 19		               ldy #>blankmsg
.08b2	20 09 21	               jsr putscxy
.08b5	20 71 21	               jsr  push
.08b8	a2 01		               ldx  #1
.08ba	a0 04		               ldy  #4
.08bc	20 9a 20	               jsr  gotoxy
.08bf	20 b0 21	               jsr  pop
.08c2	20 86 26	               jsr  memtofile
.08c5	20 b0 21	               jsr  pop
.08c8	60		               rts
.08c9			loadfromfile
.08c9	20 71 21	               jsr  push
.08cc	a9 62		               lda  #<fname
.08ce	8d 1f 27	               sta  dsk_fnptr
.08d1	a9 09		               lda  #>fname
.08d3	8d 20 27	               sta  dsk_fnptr+1
.08d6	a9 0d		               lda  #(device-fname-1)
.08d8	8d 21 27	               sta  dsk_fnlen
.08db	ad 70 09	               lda  device
.08de	29 0f		               and  #$0f
.08e0	8d 1d 27	               sta  dsk_dev
.08e3	8d 1e 27	               sta  dsk_lfsno
.08e6	a9 00		               lda  #<bitmapmem
.08e8	8d 19 27	               sta  dsk_data_s
.08eb	a9 28		               lda  #>bitmapmem
.08ed	8d 1a 27	               sta  dsk_data_s+1
.08f0	a9 00		               lda  #<endofaddr
.08f2	8d 1b 27	               sta  dsk_data_e
.08f5	a9 48		               lda  #>endofaddr
.08f7	8d 1c 27	               sta  dsk_data_e+1
.08fa	a2 c3		               ldx #<blankmsg
.08fc	a0 19		               ldy #>blankmsg
.08fe	20 09 21	               jsr putscxy
.0901	20 71 21	               jsr  push
.0904	a2 01		               ldx  #1
.0906	a0 04		               ldy  #4
.0908	20 9a 20	               jsr  gotoxy
.090b	20 b0 21	               jsr  pop
.090e	20 be 26	               jsr  filetomem
.0911	20 b0 21	               jsr  pop
.0914	60		               rts
.0915			screenredraw
.0915	20 71 21	               jsr  push
.0918	20 29 20	               jsr  screendis
.091b	20 63 20	               jsr  cls
.091e	20 69 10	               jsr  staticscreen
.0921	20 3b 0f	               jsr  drawbitmap
.0924	20 a5 10	               jsr  drawfkeys
.0927	20 71 21	               jsr  push
.092a	a2 c3		               ldx  #<blankmsg
.092c	a0 19		               ldy  #>blankmsg
.092e	20 09 21	               jsr  putscxy
.0931	a2 ef		               ldx  #<prompt_msg
.0933	a0 19		               ldy  #>prompt_msg
.0935	20 09 21	               jsr  putscxy
.0938	20 b0 21	               jsr  pop
.093b	20 36 20	               jsr  screenena
.093e	20 b0 21	               jsr  pop
.0941	60		               rts
=10240			bitmapmem      =         charsdef * 1024     ;Calcul position ram des caracteres.
=18432			endofaddr      =         (charsdef * 1024) + (4*$800)
=61440			mstopaddr      =         $d000+(4*$800)
>0942	00 d0		startaddr      .word     $d000               ; 53248
>0944	00 f0		stopaddr       .word     mstopaddr           ; 55296
>0946	00 28		bitmapaddr     .word     bitmapmem           ; $3000, 12288
>0948	80 40 20 10	eorval         .byte     $80,$40,$20,$10,$08,$04,$02,$01
>094c	08 04 02 01
>0950	00		editmode       .byte     0
>0951	00		fkeyset        .byte     0
>0952	00		currentchar    .byte     0
>0953	00		currentkey     .byte     0
>0954	00		previouskey    .byte     0
>0955	00		bitmapoffset   .byte     0
>0956	00 00		mapaddr        .word     0
>0958	00 00		byteaddr       .word     0
>095a	00 00		gridaddr       .word     0
>095c	09		cursln         .byte     grid_top
>095d	01		curscl         .byte     grid_left
>095e	05 1b 03 12	pfname         .byte     vvert,27,3,18
>0962	40 30 3a	fname          .text     "@0:"
>0965	4f 52 49 47	name           .text     "origin"
>0969	49 4e
>096b	2e 43 48 52	ext            .null     ".chr"
>096f	00
>0970	08		device         .byte     8

;******  Processing file: routines.asm

.0971			template
.0971	20 71 21	               jsr  push
.0974	20 b0 21	               jsr  pop
.0977	60		               rts
.0978			getfname
.0978	20 71 21	               jsr  push
.097b	20 71 21	               jsr  push
.097e	a2 c3		               ldx  #<blankmsg
.0980	a0 19		               ldy  #>blankmsg
.0982	20 09 21	               jsr  putscxy
.0985	a2 2c		               ldx  #<fname_msg
.0987	a0 1c		               ldy  #>fname_msg
.0989	20 09 21	               jsr  putscxy
.098c	20 b0 21	               jsr  pop
.098f	a2 00		               ldx  #$00
.0991	8e c5 09	               stx  count
.0994	20 c6 09	getanother     jsr  getalphanum
.0997	20 7a 20	               jsr  putch
.099a	ae c5 09	               ldx  count
.099d	9d 65 09	               sta  name,x
.09a0	ee c5 09	               inc  count
.09a3	ae c5 09	               ldx  count
.09a6	e0 06		               cpx  #$06
.09a8	f0 03		               beq  finish
.09aa	4c 94 09	               jmp  getanother
.09ad			finish
.09ad	20 71 21	               jsr  push
.09b0	a2 c3		               ldx  #<blankmsg
.09b2	a0 19		               ldy  #>blankmsg
.09b4	20 09 21	               jsr  putscxy
.09b7	a2 5e		               ldx  #<pfname
.09b9	a0 09		               ldy  #>pfname
.09bb	20 09 21	               jsr  putscxy
.09be	20 b0 21	               jsr  pop
.09c1	20 b0 21	               jsr  pop
.09c4	60		               rts
>09c5	00		count          .byte     0
.09c6			getalphanum
.09c6	20 71 21	               jsr  push
.09c9	20 91 25	getanother     jsr  getkey
.09cc	c9 30		               cmp  #$30      ; 0
.09ce	30 f9		               bmi  getanother
.09d0	c9 3a		               cmp  #$3a      ; 9+1
.09d2	30 0b		               bmi  goodone
.09d4	c9 41		isitletter     cmp  #$41      ; A
.09d6	30 f1		               bmi  getanother
.09d8	c9 5b		               cmp  #$5b      ; Z+1
.09da	30 03		               bmi  goodone
.09dc	4c c9 09	               jmp  getanother
.09df	8d e9 09	goodone        sta  tempbyte
.09e2	20 b0 21	               jsr  pop
.09e5	ad e9 09	               lda  tempbyte
.09e8	60		               rts
>09e9	00		tempbyte       .byte     0
.09ea			copychar
.09ea	20 71 21	               jsr  push
.09ed	20 26 0a	               jsr  getvalidkey
.09f0	ad 46 09	               lda  bitmapaddr     ; on pointe sur la table des bitmaps
.09f3	85 fb		               sta  zpage1
.09f5	ad 47 09	               lda  bitmapaddr+1
.09f8	85 fc		               sta  zpage1+1
.09fa	ae 5c 0a	               ldx  copykey
.09fd	bd 6c 24	               lda  asciitorom,x
.0a00	aa		               tax
.0a01	e0 00		               cpx  #$00
.0a03	f0 08		               beq  no_offset      ; sommes nous déja à 0
.0a05	a9 08		addagain       lda  #$08
.0a07	20 01 12	               jsr  zp1addnum      ; on augmente de 8 byte ...
.0a0a	ca		               dex                 ; pour chaque caracteres
.0a0b	d0 f8		               bne  addagain
.0a0d	ad 56 09	no_offset      lda  mapaddr        ; le caractere actuel
.0a10	85 fd		               sta  zpage2         ;
.0a12	ad 57 09	               lda  mapaddr+1      ;
.0a15	85 fe		               sta  zpage2+1       ;
.0a17	a0 00		               ldy  #$00
.0a19	b1 fb		nextbyte       lda  (zpage1),y
.0a1b	91 fd		               sta  (zpage2),y
.0a1d	c8		               iny
.0a1e	c0 08		               cpy  #$08
.0a20	d0 f7		               bne  nextbyte
.0a22	20 b0 21	out            jsr  pop
.0a25	60		               rts
.0a26			getvalidkey
.0a26	20 71 21	               jsr  push
.0a29	20 71 21	               jsr  push
.0a2c	a2 c3		               ldx  #<blankmsg
.0a2e	a0 19		               ldy  #>blankmsg
.0a30	20 09 21	               jsr  putscxy
.0a33	a2 03		               ldx  #<copychar_msg
.0a35	a0 1c		               ldy  #>copychar_msg
.0a37	20 09 21	               jsr  putscxy
.0a3a	20 b0 21	               jsr  pop
.0a3d	20 91 25	getgoodkey     jsr  getkey
.0a40	8d 5c 0a	               sta  copykey
.0a43	aa		               tax
.0a44	bc 6c 24	               ldy  asciitorom,x
.0a47	c4 00		               cpy  $00
.0a49	d0 0a		               bne  goodone
.0a4b	ae 5c 0a	               ldx  copykey
.0a4e	e0 40		               cpx  #$40
.0a50	f0 03		               beq  goodone
.0a52	4c 3d 0a	               jmp  getgoodkey
.0a55	20 7a 20	goodone        jsr  putch
.0a58	20 b0 21	               jsr  pop
.0a5b	60		               rts
>0a5c	00		copykey        .byte 0
.0a5d			drawcredits
.0a5d	20 71 21	               jsr  push
.0a60	20 63 20	               jsr  cls
.0a63	a2 8b		               ldx #<whoami0
.0a65	a0 1c		               ldy #>whoami0
.0a67	20 09 21	               jsr putscxy
.0a6a	a2 b0		               ldx #<whoami1
.0a6c	a0 1c		               ldy #>whoami1
.0a6e	20 09 21	               jsr putscxy
.0a71	a2 d7		               ldx #<whoami2
.0a73	a0 1c		               ldy #>whoami2
.0a75	20 09 21	               jsr putscxy
.0a78	a2 fc		               ldx #<whoami3
.0a7a	a0 1c		               ldy #>whoami3
.0a7c	20 09 21	               jsr putscxy
.0a7f	a2 21		               ldx #<whoami4
.0a81	a0 1d		               ldy #>whoami4
.0a83	20 09 21	               jsr putscxy
.0a86	a2 46		               ldx #<whoami5
.0a88	a0 1d		               ldy #>whoami5
.0a8a	20 09 21	               jsr putscxy
.0a8d	a2 6b		               ldx #<whoami6
.0a8f	a0 1d		               ldy #>whoami6
.0a91	20 09 21	               jsr putscxy
.0a94	a2 90		               ldx #<whoami7
.0a96	a0 1d		               ldy #>whoami7
.0a98	20 09 21	               jsr putscxy
.0a9b	a2 b5		               ldx #<whoami8
.0a9d	a0 1d		               ldy #>whoami8
.0a9f	20 09 21	               jsr putscxy
.0aa2	a2 da		               ldx #<whoami9
.0aa4	a0 1d		               ldy #>whoami9
.0aa6	20 09 21	               jsr putscxy
.0aa9	20 1f 12	               jsr  delay
.0aac	20 1f 12	               jsr  delay
.0aaf	20 1f 12	               jsr  delay
.0ab2	20 1f 12	               jsr  delay
.0ab5	20 1f 12	               jsr  delay
.0ab8	20 b0 21	               jsr  pop
.0abb	60		               rts
.0abc			setdefaultchar
.0abc	20 71 21	               jsr  push
.0abf	a9 40		               lda  #$40
.0ac1	8d 53 09	               sta  currentkey
.0ac4	aa		               tax
.0ac5	bc 6c 24	               ldy  asciitorom,x
.0ac8	8c 55 09	               sty  bitmapoffset
.0acb	20 86 0b	               jsr  drawkeyval
.0ace	20 3b 0f	               jsr  drawbitmap
.0ad1	20 71 21	               jsr  push
.0ad4	a2 0d		               ldx  #13
.0ad6	a0 0c		               ldy  #12
.0ad8	20 9a 20	               jsr  gotoxy
.0adb	20 b0 21	               jsr  pop
.0ade	20 7a 20	               jsr  putch
.0ae1	20 71 21	               jsr  push
.0ae4	a2 11		               ldx  #17
.0ae6	a0 05		               ldy  #5
.0ae8	20 9a 20	               jsr  gotoxy
.0aeb	20 b0 21	               jsr  pop
.0aee	20 37 24	               jsr  atodec
.0af1	20 71 21	               jsr  push
.0af4	a2 3b		isx            ldx  #<adec
.0af6	a0 23		isy            ldy  #>adec
.0af8	20 80 20	               jsr  puts
.0afb	20 b0 21	               jsr  pull
.0afe	20 b0 21	               jsr  pop
.0b01	60		               rts
.0b02			resetmenuacolor
.0b02	20 71 21	               jsr  push
.0b05	a9 03		               lda  #menu1col1
.0b07	8d 79 1e	               sta  f1abutton
.0b0a	8d af 1e	               sta  f3abutton
.0b0d	8d e5 1e	               sta  f5abutton
.0b10	8d 1b 1f	               sta  f7abutton
.0b13	a9 0e		               lda  #menu1col2
.0b15	8d 94 1e	               sta  f2abutton
.0b18	8d ca 1e	               sta  f4abutton
.0b1b	8d 00 1f	               sta  f6abutton
.0b1e	8d 36 1f	               sta  f8abutton
.0b21	20 b0 21	               jsr  pop
.0b24	60		               rts
.0b25			resetmenubcolor
.0b25	20 71 21	               jsr  push
.0b28	a9 0f		               lda  #menu2col1
.0b2a	8d 51 1f	               sta  f1bbutton
.0b2d	8d 87 1f	               sta  f3bbutton
.0b30	8d bd 1f	               sta  f5bbutton
.0b33	8d f3 1f	               sta  f7bbutton
.0b36	a9 0f		               lda  #menu2col1
.0b38	8d 6c 1f	               sta  f2bbutton
.0b3b	8d a2 1f	               sta  f4bbutton
.0b3e	8d d8 1f	               sta  f6bbutton
.0b41	8d 0e 20	               sta  f8bbutton
.0b44	20 b0 21	               jsr  pop
.0b47	60		               rts
.0b48			setmenuacolor
.0b48	20 71 21	               jsr  push
.0b4b	8d 79 1e	               sta  f1abutton
.0b4e	8d 94 1e	               sta  f2abutton
.0b51	8d af 1e	               sta  f3abutton
.0b54	8d ca 1e	               sta  f4abutton
.0b57	8d e5 1e	               sta  f5abutton
.0b5a	8d 00 1f	               sta  f6abutton
.0b5d	8d 1b 1f	               sta  f7abutton
.0b60	8d 36 1f	               sta  f8abutton
.0b63	20 b0 21	               jsr  pop
.0b66	60		               rts
.0b67			setmenubcolor
.0b67	20 71 21	               jsr  push
.0b6a	8d 51 1f	               sta  f1bbutton
.0b6d	8d 6c 1f	               sta  f2bbutton
.0b70	8d 87 1f	               sta  f3bbutton
.0b73	8d a2 1f	               sta  f4bbutton
.0b76	8d bd 1f	               sta  f5bbutton
.0b79	8d d8 1f	               sta  f6bbutton
.0b7c	8d f3 1f	               sta  f7bbutton
.0b7f	8d 0e 20	               sta  f8bbutton
.0b82	20 b0 21	               jsr  pop
.0b85	60		               rts
.0b86			drawkeyval
.0b86	20 71 21	               jsr  push
.0b89	20 71 21	               jsr  push
.0b8c	a2 01		               ldx  #1
.0b8e	a0 13		               ldy  #19
.0b90	20 9a 20	               jsr  gotoxy
.0b93	20 b0 21	               jsr  pop
.0b96	ad 53 09	               lda  currentkey
.0b99	20 7a 20	               jsr  putch
.0b9c	48		               pha
.0b9d	a9 3d		               lda  #'='
.0b9f	20 7a 20	               jsr  putch
.0ba2	a9 25		               lda  #'%'
.0ba4	20 7a 20	               jsr  putch
.0ba7	68		               pla
.0ba8	20 fd 23	               jsr  putabin
.0bab	20 71 21	               jsr  push
.0bae	a2 01		               ldx  #1
.0bb0	a0 14		               ldy  #20
.0bb2	20 9a 20	               jsr  gotoxy
.0bb5	20 b0 21	               jsr  pop
.0bb8	20 71 21	               jsr  push
.0bbb	a2 87		isx            ldx  #<txt1
.0bbd	a0 0c		isy            ldy  #>txt1
.0bbf	20 80 20	               jsr  puts
.0bc2	20 b0 21	               jsr  pull
.0bc5	a9 24		               lda  #'$'
.0bc7	20 7a 20	               jsr  putch
.0bca	ad 53 09	               lda  currentkey
.0bcd	20 6a 23	               jsr  putahex
.0bd0	20 71 21	               jsr  push
.0bd3	a2 01		               ldx  #1
.0bd5	a0 15		               ldy  #21
.0bd7	20 9a 20	               jsr  gotoxy
.0bda	20 b0 21	               jsr  pop
.0bdd	20 71 21	               jsr  push
.0be0	a2 92		isx            ldx  #<txt2
.0be2	a0 0c		isy            ldy  #>txt2
.0be4	20 80 20	               jsr  puts
.0be7	20 b0 21	               jsr  pull
.0bea	a9 24		               lda  #'$'
.0bec	20 7a 20	               jsr  putch
.0bef	ad 47 09	               lda  bitmapaddr+1
.0bf2	20 6a 23	               jsr  putahex
.0bf5	ad 46 09	               lda  bitmapaddr
.0bf8	20 6a 23	               jsr  putahex
.0bfb	20 71 21	               jsr  push
.0bfe	a2 01		               ldx  #1
.0c00	a0 16		               ldy  #22
.0c02	20 9a 20	               jsr  gotoxy
.0c05	20 b0 21	               jsr  pop
.0c08	20 71 21	               jsr  push
.0c0b	a2 9d		isx            ldx  #<txt3
.0c0d	a0 0c		isy            ldy  #>txt3
.0c0f	20 80 20	               jsr  puts
.0c12	20 b0 21	               jsr  pull
.0c15	a9 24		               lda  #'$'
.0c17	20 7a 20	               jsr  putch
.0c1a	ad 55 09	               lda  bitmapoffset
.0c1d	20 6a 23	               jsr  putahex
.0c20	20 71 21	               jsr  push
.0c23	a2 01		               ldx  #1
.0c25	a0 17		               ldy  #23
.0c27	20 9a 20	               jsr  gotoxy
.0c2a	20 b0 21	               jsr  pop
.0c2d	20 71 21	               jsr  push
.0c30	a2 aa		isx            ldx  #<txt4
.0c32	a0 0c		isy            ldy  #>txt4
.0c34	20 80 20	               jsr  puts
.0c37	20 b0 21	               jsr  pull
.0c3a	a9 24		               lda  #'$'
.0c3c	20 7a 20	               jsr  putch
.0c3f	ad 57 09	               lda  mapaddr+1
.0c42	20 6a 23	               jsr  putahex
.0c45	ad 56 09	               lda  mapaddr
.0c48	20 6a 23	               jsr  putahex
.0c4b	20 71 21	               jsr  push
.0c4e	a2 01		               ldx  #1
.0c50	a0 18		               ldy  #24
.0c52	20 9a 20	               jsr  gotoxy
.0c55	20 b0 21	               jsr  pop
.0c58	20 71 21	               jsr  push
.0c5b	a2 b5		isx            ldx  #<txt5
.0c5d	a0 0c		isy            ldy  #>txt5
.0c5f	20 80 20	               jsr  puts
.0c62	20 b0 21	               jsr  pull
.0c65	ad 5d 09	               lda  curscl
.0c68	20 6a 23	               jsr  putahex
.0c6b	a9 da		               lda  #$da
.0c6d	20 7a 20	               jsr  putch
.0c70	ad 5c 09	               lda  cursln
.0c73	20 6a 23	               jsr  putahex
.0c76	20 b0 21	               jsr  pop
.0c79	60		               rts
>0c7a	50 45 54 53	txt0           .null     "petscii :   "
>0c7e	43 49 49 20 3a 20 20 20 00
>0c87	4b 45 59 20	txt1           .null     "key code: "
>0c8b	43 4f 44 45 3a 20 00
>0c92	42 49 54 4d	txt2           .null     "bitmap..: "
>0c96	41 50 2e 2e 3a 20 00
>0c9d	4f 46 46 53	txt3           .null     "offset..:   "
>0ca1	45 54 2e 2e 3a 20 20 20 00
>0caa	4d 41 50 41	txt4           .null     "mapaddr.: "
>0cae	44 44 52 2e 3a 20 00
>0cb5	43 55 52 53	txt5           .null     "cursval.: "
>0cb9	56 41 4c 2e 3a 20 00
>0cc0	53 54 41 43	txt6           .null     "stack......:"
>0cc4	4b 2e 2e 2e 2e 2e 2e 3a 00
.0ccd			keyaction
.0ccd	20 71 21	               jsr  push
.0cd0	20 91 25	loop           jsr  getkey
.0cd3	c9 85		f1             cmp  #key_f1
.0cd5	d0 03		               bne  f2
.0cd7	4c 55 0d	               jmp  dof1
.0cda	c9 89		f2             cmp  #key_f2
.0cdc	d0 03		               bne  f3
.0cde	4c 5b 0d	               jmp  dof2
.0ce1	c9 86		f3             cmp  #key_f3
.0ce3	d0 03		               bne  f4
.0ce5	4c 61 0d	               jmp  dof3
.0ce8	c9 8a		f4             cmp  #key_f4
.0cea	d0 03		               bne  f5
.0cec	4c 67 0d	               jmp  dof4
.0cef	c9 87		f5             cmp  #key_f5
.0cf1	d0 03		               bne  f6
.0cf3	4c 6d 0d	               jmp  dof5
.0cf6	c9 8b		f6             cmp  #key_f6
.0cf8	d0 03		               bne  f7
.0cfa	4c 73 0d	               jmp  dof6
.0cfd	c9 88		f7             cmp  #key_f7
.0cff	d0 03		               bne  f8
.0d01	4c 79 0d	               jmp  dof7
.0d04	c9 8c		f8             cmp  #key_f8
.0d06	d0 03		               bne  ctrlx
.0d08	4c 7f 0d	               jmp  dof8
.0d0b	c9 18		ctrlx          cmp  #ctrl_x
.0d0d	d0 03		               bne  ctrlr
.0d0f	4c 85 0d	               jmp  doquit
.0d12	c9 12		ctrlr          cmp  #ctrl_r
.0d14	d0 06		               bne  ishex14
.0d16	20 15 09	               jsr  screenredraw
.0d19	4c d0 0c	               jmp  loop
.0d1c	c9 14		ishex14        cmp  #$14
.0d1e	d0 03		               bne  ishex12
.0d20	4c d0 0c	               jmp  loop
.0d23	c9 12		ishex12        cmp  #$12
.0d25	d0 03		               bne  reste
.0d27	4c d0 0c	               jmp  loop
.0d2a			reste
.0d2a	20 71 21	               jsr  push
.0d2d	a2 0d		               ldx  #13
.0d2f	a0 0c		               ldy  #12
.0d31	20 9a 20	               jsr  gotoxy
.0d34	20 b0 21	               jsr  pop
.0d37	20 7a 20	               jsr  putch
.0d3a	48		               pha
.0d3b	ad 53 09	               lda  currentkey
.0d3e	8d 54 09	               sta  previouskey
.0d41	68		               pla
.0d42	8d 53 09	               sta  currentkey
.0d45	aa		               tax
.0d46	bc 6c 24	               ldy  asciitorom,x
.0d49	8c 55 09	               sty  bitmapoffset
.0d4c	20 86 0b	               jsr  drawkeyval
.0d4f	20 3b 0f	               jsr  drawbitmap
.0d52	4c d0 0c	               jmp  loop
.0d55	20 35 12	dof1           jsr  f1action  ;edit/reverse
.0d58	4c d0 0c	               jmp  loop
.0d5b	20 28 13	dof2           jsr  f2action  ;save/flip vert
.0d5e	4c d0 0c	               jmp  loop
.0d61	20 e0 13	dof3           jsr  f3action  ;load/flip horz
.0d64	4c d0 0c	               jmp  loop
.0d67	20 ad 14	dof4           jsr  f4action  ;copy/scroll r
.0d6a	4c d0 0c	               jmp  loop
.0d6d	20 7a 15	dof5           jsr  f5action  ;clear/scroll l
.0d70	4c d0 0c	               jmp  loop
.0d73	20 32 16	dof6           jsr  f6action  ;fill;/scroll up
.0d76	4c d0 0c	               jmp  loop
.0d79	20 ea 16	dof7           jsr  f7action  ;clear;/scroll down
.0d7c	4c d0 0c	               jmp  loop
.0d7f	20 a7 17	dof8           jsr  f8action  ; function
.0d82	4c d0 0c	               jmp  loop
.0d85	20 b0 21	doquit         jsr  pop
.0d88	60		               rts
.0d89			editor
.0d89	20 71 21	               jsr  push
.0d8c	20 71 21	               jsr  push
.0d8f	a2 c3		               ldx  #<blankmsg
.0d91	a0 19		               ldy  #>blankmsg
.0d93	20 09 21	               jsr  putscxy
.0d96	a2 76		               ldx  #<exit_msg
.0d98	a0 1c		               ldy  #>exit_msg
.0d9a	20 09 21	               jsr  putscxy
.0d9d	20 b0 21	               jsr  pop
.0da0	20 71 21	               jsr  push
.0da3	a2 c3		               ldx  #<blankmsg
.0da5	a0 19		               ldy  #>blankmsg
.0da7	20 09 21	               jsr  putscxy
.0daa	a2 15		               ldx  #<edit_msg
.0dac	a0 1a		               ldy  #>edit_msg
.0dae	20 09 21	               jsr  putscxy
.0db1	20 b0 21	               jsr  pop
.0db4	20 f7 0e	               jsr  setcurs
.0db7	ad 53 09	               lda  currentkey
.0dba	20 71 21	               jsr  push
.0dbd	a2 11		               ldx  #17
.0dbf	a0 05		               ldy  #5
.0dc1	20 9a 20	               jsr  gotoxy
.0dc4	20 b0 21	               jsr  pop
.0dc7	20 37 24	               jsr  atodec
.0dca	20 71 21	               jsr  push
.0dcd	a2 3b		isx            ldx  #<adec
.0dcf	a0 23		isy            ldy  #>adec
.0dd1	20 80 20	               jsr  puts
.0dd4	20 b0 21	               jsr  pull
.0dd7	20 3b 0f	               jsr  drawbitmap
.0dda	20 91 25	ed_loop        jsr  getkey
.0ddd	c9 85		f1             cmp  #f1key
.0ddf	d0 03		               bne  cu
.0de1	4c c9 0e	               jmp  do_ctrlx
.0de4	c9 91		cu             cmp  #cursu
.0de6	d0 03		               bne  cd
.0de8	4c 74 0e	               jmp  do_up
.0deb	c9 11		cd             cmp  #cursd
.0ded	d0 03		               bne  cl
.0def	4c 87 0e	               jmp  do_down
.0df2	c9 9d		cl             cmp  #cursl
.0df4	d0 03		               bne  cr
.0df6	4c 9a 0e	               jmp  do_left
.0df9	c9 1d		cr             cmp  #cursr
.0dfb	d0 03		               bne  cx
.0dfd	4c ad 0e	               jmp  do_right
.0e00	c9 18		cx             cmp  #ctrl_x
.0e02	d0 03		               bne  sp
.0e04	4c c9 0e	               jmp  do_ctrlx
.0e07	c9 20		sp             cmp  #$20
.0e09	d0 03		               bne  ishex14
.0e0b	4c c0 0e	               jmp  do_swap
.0e0e	c9 14		ishex14        cmp  #$14
.0e10	d0 03		               bne  ishex12
.0e12	4c c0 0e	               jmp  do_swap
.0e15	c9 12		ishex12        cmp  #$12
.0e17	d0 03		               bne  rest
.0e19	4c c0 0e	               jmp  do_swap
.0e1c			rest
.0e1c	20 71 21	               jsr  push
.0e1f	a2 0d		               ldx  #13
.0e21	a0 0c		               ldy  #12
.0e23	20 9a 20	               jsr  gotoxy
.0e26	20 b0 21	               jsr  pop
.0e29	20 7a 20	               jsr  putch
.0e2c	48		               pha
.0e2d	ad 53 09	               lda  currentkey
.0e30	8d 54 09	               sta  previouskey
.0e33	68		               pla
.0e34	8d 53 09	               sta  currentkey
.0e37	aa		               tax
.0e38	bc 6c 24	               ldy  asciitorom,x
.0e3b	8c 55 09	               sty  bitmapoffset
.0e3e	20 86 0b	               jsr  drawkeyval
.0e41	20 3b 0f	               jsr  drawbitmap
.0e44	20 71 21	               jsr  push
.0e47	a2 0d		               ldx  #13
.0e49	a0 0c		               ldy  #12
.0e4b	20 9a 20	               jsr  gotoxy
.0e4e	20 b0 21	               jsr  pop
.0e51	20 7a 20	               jsr  putch
.0e54	20 71 21	               jsr  push
.0e57	a2 11		               ldx  #17
.0e59	a0 05		               ldy  #5
.0e5b	20 9a 20	               jsr  gotoxy
.0e5e	20 b0 21	               jsr  pop
.0e61	20 37 24	               jsr  atodec
.0e64	20 71 21	               jsr  push
.0e67	a2 3b		isx            ldx  #<adec
.0e69	a0 23		isy            ldy  #>adec
.0e6b	20 80 20	               jsr  puts
.0e6e	20 b0 21	               jsr  pull
.0e71	4c c6 0e	               jmp  totop
.0e74	ad 5c 09	do_up          lda  cursln
.0e77	c9 09		               cmp  #grid_top
.0e79	f0 4b		               beq  totop
.0e7b	20 19 0f	               jsr  clrcurs
.0e7e	ce 5c 09	               dec  cursln
.0e81	20 f7 0e	               jsr  setcurs
.0e84	4c c6 0e	               jmp  totop
.0e87	ad 5c 09	do_down        lda  cursln
.0e8a	c9 10		               cmp  #grid_bot
.0e8c	f0 38		               beq  totop
.0e8e	20 19 0f	               jsr  clrcurs
.0e91	ee 5c 09	               inc  cursln
.0e94	20 f7 0e	               jsr  setcurs
.0e97	4c c6 0e	               jmp  totop
.0e9a	ad 5d 09	do_left        lda  curscl
.0e9d	c9 01		               cmp  #grid_left
.0e9f	f0 25		               beq  totop
.0ea1	20 19 0f	               jsr  clrcurs
.0ea4	ce 5d 09	               dec  curscl
.0ea7	20 f7 0e	               jsr  setcurs
.0eaa	4c c6 0e	               jmp  totop
.0ead	ad 5d 09	do_right       lda  curscl
.0eb0	c9 08		               cmp  #grid_right
.0eb2	f0 12		               beq  totop
.0eb4	20 19 0f	               jsr  clrcurs
.0eb7	ee 5d 09	               inc  curscl
.0eba	20 f7 0e	               jsr  setcurs
.0ebd	4c c6 0e	               jmp  totop
.0ec0	20 d0 0e	do_swap        jsr  do_eor
.0ec3	20 3b 0f	               jsr  drawbitmap
.0ec6	4c da 0d	totop          jmp  ed_loop
.0ec9	20 19 0f	do_ctrlx       jsr  clrcurs
.0ecc	20 b0 21	               jsr  pop
.0ecf	60		               rts
.0ed0			do_eor
.0ed0	20 71 21	               jsr  push
.0ed3	ad 56 09	               lda  mapaddr
.0ed6	85 fd		               sta  zpage2
.0ed8	ad 57 09	               lda  mapaddr+1
.0edb	85 fe		               sta  zpage2+1
.0edd	ae 5c 09	               ldx  cursln     ; calcul de
.0ee0	ca		               dex            ; l'offset de
.0ee1	8a		               txa            ; la
.0ee2	29 f7		               and  #$f7      ; ligne
.0ee4	a8		               tay
.0ee5	ae 5d 09	               ldx  curscl
.0ee8	ca		               dex
.0ee9	bd 48 09	               lda  eorval,x
.0eec	51 fd		               eor  (zpage2),y
.0eee	20 86 0b	               jsr  drawkeyval
.0ef1	91 fd		               sta  (zpage2),y
.0ef3	20 b0 21	               jsr  pop
.0ef6	60		               rts
.0ef7			setcurs
.0ef7	20 71 21	               jsr  push
.0efa	a2 01		               ldx  #grid_left
.0efc	ac 5c 09	               ldy  cursln
.0eff	20 9a 20	               jsr  gotoxy
.0f02	a9 da		               lda  #$da
.0f04	20 7a 20	               jsr  putch
.0f07	ae 5d 09	               ldx  curscl
.0f0a	e8		               inx
.0f0b	a0 08		               ldy  #grid_top-1
.0f0d	20 9a 20	               jsr  gotoxy
.0f10	a9 da		               lda  #$da
.0f12	20 7a 20	               jsr  putch
.0f15	20 b0 21	               jsr  pop
.0f18	60		               rts
.0f19			clrcurs
.0f19	20 71 21	               jsr  push
.0f1c	a2 01		               ldx  #grid_left
.0f1e	ac 5c 09	               ldy  cursln
.0f21	20 9a 20	               jsr  gotoxy
.0f24	a9 20		               lda  #$20
.0f26	20 7a 20	               jsr  putch
.0f29	ae 5d 09	               ldx  curscl
.0f2c	e8		               inx
.0f2d	a0 08		               ldy  #grid_top-1
.0f2f	20 9a 20	               jsr  gotoxy
.0f32	a9 20		               lda  #$20
.0f34	20 7a 20	               jsr  putch
.0f37	20 b0 21	               jsr  pop
.0f3a	60		               rts
.0f3b			drawbitmap
.0f3b	20 71 21	               jsr  push
.0f3e	20 a2 0f	               jsr  calcmapaddr
.0f41	ad 56 09	               lda  mapaddr        ; on pointe sur la table des bitmaps
.0f44	85 fb		               sta  zpage1
.0f46	ad 57 09	               lda  mapaddr+1
.0f49	85 fc		               sta  zpage1+1
.0f4b	a0 00		drawchar       ldy  #$00
.0f4d	a2 09		               ldx  #grid_top      ;on replace la ...
.0f4f	8e 58 0f	               stx  isy+1          ;ligne de départ
.0f52	20 71 21	nextline       jsr  push
.0f55	a2 02		               ldx  #grid_left+1        ; la colonne
.0f57	a0 00		isy            ldy  #$00      ; la ligne (autoinc)
.0f59	20 9a 20	               jsr  gotoxy
.0f5c	20 b0 21	               jsr  pop
.0f5f	b1 fb		               lda  (zpage1),y     ; on li une ligne
.0f61	20 db 23	               jsr  atobin
.0f64	20 d1 0f	               jsr  abintograph
.0f67	20 71 21	               jsr  push
.0f6a	a2 32		isx            ldx  #<abin
.0f6c	a0 23		isy            ldy  #>abin
.0f6e	20 80 20	               jsr  puts
.0f71	20 b0 21	               jsr  pull
.0f74	ee 58 0f	               inc  isy+1
.0f77	c8		               iny
.0f78	c0 08		               cpy  #$08
.0f7a	30 d6		               bmi  nextline
.0f7c	20 83 0f	               jsr  highlight
.0f7f	20 b0 21	               jsr  pop
.0f82	60		               rts
.0f83			highlight
.0f83	20 71 21	               jsr  push
.0f86	ae 54 09	               ldx  previouskey
.0f89	bd 6c 24	               lda  asciitorom,x
.0f8c	aa		               tax
.0f8d	a9 0f		               lda  #charscolor
.0f8f	9d 00 d8	               sta  colorram,x
.0f92	ae 53 09	               ldx  currentkey
.0f95	bd 6c 24	               lda  asciitorom,x
.0f98	aa		               tax
.0f99	a9 01		               lda  #charcolor
.0f9b	9d 00 d8	               sta  colorram,x
.0f9e	20 b0 21	               jsr  pop
.0fa1	60		               rts
.0fa2			calcmapaddr
.0fa2	20 71 21	               jsr  push
.0fa5	ad 46 09	               lda  bitmapaddr     ; on pointe sur la table des bitmaps
.0fa8	85 fb		               sta  zpage1
.0faa	ad 47 09	               lda  bitmapaddr+1
.0fad	85 fc		               sta  zpage1+1
.0faf	ae 55 09	               ldx  bitmapoffset
.0fb2	e0 00		               cpx  #$00
.0fb4	f0 08		               beq  thesame         ; sommes nous déja à 0
.0fb6	a9 08		addagain       lda  #$08
.0fb8	20 01 12	               jsr  zp1addnum      ; on augmente de 8 byte ...
.0fbb	ca		               dex                 ; pour chaque caracteres
.0fbc	d0 f8		               bne  addagain
.0fbe	48		thesame        pha
.0fbf	a5 fb		               lda  zpage1
.0fc1	8d 56 09	               sta  mapaddr
.0fc4	a5 fc		               lda  zpage1+1
.0fc6	8d 57 09	               sta  mapaddr+1
.0fc9	68		               pla
.0fca	20 86 0b	               jsr  drawkeyval
.0fcd	20 b0 21	out            jsr  pop
.0fd0	60		               rts
.0fd1			abintograph
.0fd1	20 71 21	               jsr  push
.0fd4	a9 32		               lda  #<abin
.0fd6	85 fb		               sta  zpage1
.0fd8	a9 23		               lda  #>abin+1
.0fda	85 fc		               sta  zpage1+1
.0fdc	a0 00		               ldy  #$00
.0fde	b1 fb		nextbit        lda  (zpage1),y
.0fe0	c9 30		               cmp  #$30
.0fe2	f0 07		               beq  itszero
.0fe4	a9 d1		itsone         lda  #$d1
.0fe6	91 fb		               sta  (zpage1),y
.0fe8	4c ef 0f	               jmp  next
.0feb	a9 2e		itszero        lda  #$2e
.0fed	91 fb		               sta  (zpage1),y
.0fef	c8		next           iny
.0ff0	c0 08		               cpy  #$08
.0ff2	30 ea		               bmi  nextbit
.0ff4	20 b0 21	               jsr  pop
.0ff7	60		               rts
.0ff8			setscreenptr
.0ff8	20 71 21	               jsr  push
.0ffb	a9 08		               lda  #$08      ; basic commande to disable ...
.0ffd	20 d2 ff	               jsr  chrout    ; ... character set change.
.1000	ad 18 d0	               lda  vicmemptr      ;$d018, 53272
.1003	29 f0		               and  #%11110000     ; On conserve les bits 7654 de ce registre ...
.1005	09 0a		               ora  #charsdef      ; on place les bits 3210 à %xxxx001x ce qui ...
.1007	8d 18 d0	               sta  vicmemptr      ; $d018, 53272
.100a	20 b0 21	               jsr  pop
.100d	60		               rts
.100e			copycharset
.100e	20 71 21	               jsr  push
.1011	ad 0e dc	               lda  cia1cra        ;$dc0e, 56334 cia1 control register A
.1014	29 fe		               and  #%11111110     ;254
.1016	8d 0e dc	               sta  cia1cra        ;$dc0e, 56334 cia1 control register A
.1019	a5 01		               lda  u6510map       ;$01
.101b	29 fb		               and  #%11111011     ;251
.101d	85 01		               sta  u6510map       ;$01
.101f	20 34 10	               jsr  memcopy
.1022	a5 01		               lda  u6510map       ;$01
.1024	09 04		               ora  #%00000100
.1026	85 01		               sta  u6510map       ;$01
.1028	ad 0e dc	               lda  cia1cra        ;$dc0e, 56334 cia1 control register A
.102b	09 01		               ora  #%00000001     ;254
.102d	8d 0e dc	               sta  cia1cra        ;$dc0e, 56334 cia1 control register A
.1030	20 b0 21	               jsr  pop
.1033	60		               rts
.1034			memcopy
.1034	20 71 21	               jsr  push
.1037	ad 42 09	               lda  startaddr
.103a	85 fb		               sta  zpage1
.103c	ad 43 09	               lda  startaddr+1
.103f	85 fc		               sta  zpage1+1
.1041	ad 46 09	               lda  bitmapaddr
.1044	85 fd		               sta  zpage2
.1046	ad 47 09	               lda  bitmapaddr+1
.1049	85 fe		               sta  zpage2+1
.104b	a0 00		               ldy  #$00
.104d	b1 fb		onemore        lda  (zpage1),y
.104f	91 fd		               sta  (zpage2),y
.1051	20 78 22	               jsr  inczp1
.1054	20 90 22	               jsr  inczp2
.1057	a5 fc		               lda  zpage1+1
.1059	cd 45 09	               cmp  stopaddr+1
.105c	d0 ef		               bne  onemore
.105e	a5 fb		               lda  zpage1
.1060	cd 44 09	               cmp  stopaddr
.1063	d0 e8		               bne  onemore
.1065	20 b0 21	               jsr  pop
.1068	60		               rts
.1069			staticscreen
.1069	48		               pha
.106a	a9 0b		               lda  #bordure
.106c	8d 20 d0	               sta  $d020
.106f	68		               pla
.1070	48		               pha
.1071	a9 00		               lda  #fond
.1073	8d 21 d0	               sta  $d021
.1076	68		               pla
.1077	20 58 11	               jsr  drawlines
.107a	20 34 11	               jsr  drawallchars
.107d	20 a0 11	               jsr  drawgrid
.1080	20 a5 10	               jsr  drawfkeys
.1083	20 71 21	               jsr  push
.1086	a2 c3		               ldx  #<blankmsg
.1088	a0 19		               ldy  #>blankmsg
.108a	20 09 21	               jsr  putscxy
.108d	a2 61		               ldx  #<quit_msg
.108f	a0 1c		               ldy  #>quit_msg
.1091	20 09 21	               jsr  putscxy
.1094	20 b0 21	               jsr  pop
.1097	20 71 21	               jsr  push
.109a	a2 00		               ldx  #0
.109c	a0 07		               ldy  #7
.109e	20 9a 20	               jsr  gotoxy
.10a1	20 b0 21	               jsr  pop
.10a4	60		               rts
.10a5			drawfkeys
.10a5	20 71 21	               jsr  push
.10a8	ad 51 09	               lda  fkeyset
.10ab	c9 00		               cmp  #$0
.10ad	d0 42		               bne  secondks
.10af	a2 43		               ldx #<titremenu1
.10b1	a0 1e		               ldy #>titremenu1
.10b3	20 09 21	               jsr putscxy
.10b6	a2 79		               ldx #<f1abutton
.10b8	a0 1e		               ldy #>f1abutton
.10ba	20 09 21	               jsr putscxy
.10bd	a2 94		               ldx #<f2abutton
.10bf	a0 1e		               ldy #>f2abutton
.10c1	20 09 21	               jsr putscxy
.10c4	a2 af		               ldx #<f3abutton
.10c6	a0 1e		               ldy #>f3abutton
.10c8	20 09 21	               jsr putscxy
.10cb	a2 ca		               ldx #<f4abutton
.10cd	a0 1e		               ldy #>f4abutton
.10cf	20 09 21	               jsr putscxy
.10d2	a2 e5		               ldx #<f5abutton
.10d4	a0 1e		               ldy #>f5abutton
.10d6	20 09 21	               jsr putscxy
.10d9	a2 00		               ldx #<f6abutton
.10db	a0 1f		               ldy #>f6abutton
.10dd	20 09 21	               jsr putscxy
.10e0	a2 1b		               ldx #<f7abutton
.10e2	a0 1f		               ldy #>f7abutton
.10e4	20 09 21	               jsr putscxy
.10e7	a2 36		               ldx #<f8abutton
.10e9	a0 1f		               ldy #>f8abutton
.10eb	20 09 21	               jsr putscxy
.10ee	4c 30 11	               jmp end
.10f1			secondks
.10f1	a2 5e		               ldx #<titremenu2
.10f3	a0 1e		               ldy #>titremenu2
.10f5	20 09 21	               jsr putscxy
.10f8	a2 51		               ldx #<f1bbutton
.10fa	a0 1f		               ldy #>f1bbutton
.10fc	20 09 21	               jsr putscxy
.10ff	a2 6c		               ldx #<f2bbutton
.1101	a0 1f		               ldy #>f2bbutton
.1103	20 09 21	               jsr putscxy
.1106	a2 87		               ldx #<f3bbutton
.1108	a0 1f		               ldy #>f3bbutton
.110a	20 09 21	               jsr putscxy
.110d	a2 a2		               ldx #<f4bbutton
.110f	a0 1f		               ldy #>f4bbutton
.1111	20 09 21	               jsr putscxy
.1114	a2 bd		               ldx #<f5bbutton
.1116	a0 1f		               ldy #>f5bbutton
.1118	20 09 21	               jsr putscxy
.111b	a2 d8		               ldx #<f6bbutton
.111d	a0 1f		               ldy #>f6bbutton
.111f	20 09 21	               jsr putscxy
.1122	a2 f3		               ldx #<f7bbutton
.1124	a0 1f		               ldy #>f7bbutton
.1126	20 09 21	               jsr putscxy
.1129	a2 0e		               ldx #<f8bbutton
.112b	a0 20		               ldy #>f8bbutton
.112d	20 09 21	               jsr putscxy
.1130	20 b0 21	end            jsr  pop
.1133	60		               rts
.1134			drawallchars
.1134	20 71 21	               jsr push
.1137	20 71 21	               jsr  push
.113a	a2 00		               ldx  #0
.113c	a0 00		               ldy  #0
.113e	20 9a 20	               jsr  gotoxy
.1141	20 b0 21	               jsr  pop
.1144	a2 00		               ldx  #$00
.1146	8a		nextc          txa
.1147	9d 00 04	               sta  scrnnewram,x
.114a	a9 0f		               lda  #charscolor
.114c	9d 00 d8	               sta  colorram,x
.114f	e8		               inx
.1150	e0 80		               cpx  #$80
.1152	d0 f2		               bne  nextc
.1154	20 b0 21	               jsr  pop
.1157	60		               rts
.1158			drawlines
=4			hline1=4
=6			hline2=6
=18			hline3=18
=16			vlinepos=16
=1272			vzplit=scrnnewram+(6*40)+8
.1158	20 71 21	               jsr  push
.115b	a2 28		               ldx  #40
.115d	a9 40		               lda  #64
.115f	9d 9f 04	nextl          sta  scrnnewram+(40*hline1)-1,x  ;On imprime les deux grande
.1162	9d ef 04	               sta  scrnnewram+(40*hline2)-1,x  ; lignes horizontales
.1165	ca		               dex
.1166	e0 10		hline          cpx  #vlinepos
.1168	10 03		               bpl  notyet
.116a	9d d0 06	               sta  scrnnewram+(40*hline3),x    ;On imprime la demiligne horz.
.116d	e0 00		notyet         cpx  #$00
.116f	d0 ee		               bne  nextl
.1171	a9 00		               lda  #<scrnnewram+(40*(hline2))+vlinepos
.1173	85 fb		               sta  zpage1
.1175	a9 05		               lda  #>scrnnewram+(40*(hline2))+vlinepos
.1177	85 fc		               sta  zpage1+1
.1179	a0 00		               ldy  #0
.117b	a9 72		               lda  #114
.117d	91 fb		               sta  (zpage1),y
.117f	20 0f 12	               jsr  zp1add40
.1182	a2 12		               ldx  #24-hline2
.1184	a9 5d		               lda  #93
.1186	91 fb		another93      sta  (zpage1),y
.1188	20 0f 12	               jsr  zp1add40
.118b	ca		               dex
.118c	d0 f8		               bne  another93
.118e	a9 e0		               lda  #<scrnnewram+(40*(hline3))+vlinepos
.1190	85 fb		               sta  zpage1
.1192	a9 06		               lda  #>scrnnewram+(40*(hline3))+vlinepos
.1194	85 fc		               sta  zpage1+1
.1196	a0 00		               ldy  #0
.1198	a9 73		               lda  #115
.119a	91 fb		               sta  (zpage1),y
.119c	20 b0 21	               jsr  pop
.119f	60		               rts
.11a0			drawgrid
.11a0	20 71 21	               jsr  push
.11a3	20 29 20	               jsr  screendis
.11a6	a9 69		               lda  #<scrnnewram+(40*(grid_top))+grid_left
.11a8	85 fb		               sta  zpage1
.11aa	a9 05		               lda  #>scrnnewram+(40*(grid_top))+grid_left
.11ac	85 fc		               sta  zpage1+1
.11ae	a2 08		               ldx  #8
.11b0	a9 65		nextbox        lda  #101
.11b2	a0 09		               ldy  #9
.11b4	91 fb		               sta  (zpage1),y
.11b6	88		               dey
.11b7	a9 2e		               lda  #$2e
.11b9	91 fb		nextcol        sta  (zpage1),y
.11bb	88		               dey
.11bc	d0 fb		               bne  nextcol
.11be	20 0f 12	               jsr  zp1add40
.11c1	ca		               dex
.11c2	d0 ec		               bne  nextbox
.11c4	a0 08		               ldy  #8
.11c6	a9 77		               lda  #119
.11c8	91 fb		nextlin        sta  (zpage1),y
.11ca	88		               dey
.11cb	d0 fb		               bne  nextlin
.11cd	a9 3e		               lda  #$3e
.11cf	8d eb 05	               sta  scrnnewram+(40*(12))+11
.11d2	a9 70		               lda  #$70                     ;+
.11d4	8d c4 05	               sta  scrnnewram+(40*(11))+12
.11d7	a9 43		               lda  #$43                     ;-
.11d9	8d c5 05	               sta  scrnnewram+(40*(11))+13
.11dc	a9 6e		               lda  #$6e                     ;+
.11de	8d c6 05	               sta  scrnnewram+(40*(11))+14
.11e1	a9 5d		               lda  #$5d                     ;|
.11e3	8d ec 05	               sta  scrnnewram+(40*(12))+12
.11e6	a9 5d		               lda  #$5d                     ;|
.11e8	8d ee 05	               sta  scrnnewram+(40*(12))+14
.11eb	a9 6d		               lda  #$6d                     ;+
.11ed	8d 14 06	               sta  scrnnewram+(40*(13))+12
.11f0	a9 43		               lda  #$43                     ;-
.11f2	8d 15 06	               sta  scrnnewram+(40*(13))+13
.11f5	a9 7d		               lda  #$7d                     ;+
.11f7	8d 16 06	               sta  scrnnewram+(40*(13))+14
.11fa	20 36 20	               jsr screenena
.11fd	20 b0 21	               jsr  pop
.1200	60		               rts
.1201			zp1addnum
.1201	08		               php
.1202	48		               pha
.1203	18		               clc
.1204	65 fb		               adc  zpage1
.1206	90 02		               bcc  nocarry
.1208	e6 fc		               inc  zpage1+1
.120a	85 fb		nocarry        sta  zpage1
.120c	68		               pla
.120d	28		               plp
.120e	60		               rts
.120f			zp1add40
.120f	08		               php
.1210	48		               pha
.1211	18		               clc
.1212	a5 fb		               lda  zpage1
.1214	69 28		               adc  #40
.1216	90 02		               bcc  nocarry
.1218	e6 fc		               inc  zpage1+1
.121a	85 fb		nocarry        sta  zpage1
.121c	68		               pla
.121d	28		               plp
.121e	60		               rts
.121f			delay
.121f	20 71 21	               jsr  push
.1222	a9 00		               lda  #$0
.1224	aa		               tax
.1225	a8		               tay
.1226	ca		xagain         dex
.1227	ca		               dex
.1228	88		yagain         dey
.1229	c0 00		               cpy  #$00
.122b	d0 fb		               bne  yagain
.122d	e0 00		               cpx  #$00
.122f	d0 f5		               bne  xagain
.1231	20 b0 21	               jsr  pop
.1234	60		               rts
.1235			f1action
.1235	48		               pha
.1236	a9 ff		               lda  #$ff
.1238	8d 50 09	               sta  editmode
.123b	ad 51 09	               lda  fkeyset
.123e	f0 03		               beq  menua
.1240	4c c8 12	               jmp  menub
.1243			menua
.1243	20 71 21	               jsr  push
.1246	a2 c3		               ldx  #<blankmsg
.1248	a0 19		               ldy  #>blankmsg
.124a	20 09 21	               jsr  putscxy
.124d	a2 15		               ldx  #<f1a_msg
.124f	a0 1a		               ldy  #>f1a_msg
.1251	20 09 21	               jsr  putscxy
.1254	20 b0 21	               jsr  pop
.1257	08		               php
.1258	48		               pha
.1259	8a		               txa
.125a	48		               pha
.125b	ad 79 1e	               lda  f1abutton
.125e	48		               pha
.125f	a9 92		               lda  #146
.1261	8d 8b 1e	               sta  f1abutton+18
.1264	a9 01		               lda  #flashcol
.1266	8d 79 1e	               sta  f1abutton
.1269	a2 79		               ldx  #<f1abutton
.126b	a0 1e		               ldy  #>f1abutton
.126d	20 09 21	               jsr  putscxy
.1270	20 1f 12	               jsr  delay
.1273	a9 12		               lda  #18
.1275	8d 8b 1e	               sta  f1abutton+18
.1278	68		               pla
.1279	8d 79 1e	               sta  f1abutton
.127c	a2 79		               ldx  #<f1abutton
.127e	a0 1e		               ldy  #>f1abutton
.1280	20 09 21	               jsr  putscxy
.1283	68		               pla
.1284	aa		               tax
.1285	68		               pla
.1286	28		               plp
.1287	a9 0b		               lda  #vgris
.1289	20 48 0b	               jsr  setmenuacolor
.128c	a9 03		               lda  #menu1col1
.128e	8d 79 1e	               sta  f1abutton
.1291	20 a5 10	               jsr  drawfkeys
.1294	20 89 0d	               jsr  editor
.1297	20 71 21	               jsr  push
.129a	a2 c3		               ldx  #<blankmsg
.129c	a0 19		               ldy  #>blankmsg
.129e	20 09 21	               jsr  putscxy
.12a1	a2 61		               ldx  #<quit_msg
.12a3	a0 1c		               ldy  #>quit_msg
.12a5	20 09 21	               jsr  putscxy
.12a8	20 b0 21	               jsr  pop
.12ab	20 71 21	               jsr  push
.12ae	a2 c3		               ldx  #<blankmsg
.12b0	a0 19		               ldy  #>blankmsg
.12b2	20 09 21	               jsr  putscxy
.12b5	a2 b9		               ldx  #<menua_msg
.12b7	a0 1b		               ldy  #>menua_msg
.12b9	20 09 21	               jsr  putscxy
.12bc	20 b0 21	               jsr  pop
.12bf	20 02 0b	               jsr  resetmenuacolor
.12c2	20 a5 10	               jsr  drawfkeys
.12c5	4c 12 13	               jmp  out
.12c8			menub
.12c8	20 71 21	               jsr  push
.12cb	a2 c3		               ldx  #<blankmsg
.12cd	a0 19		               ldy  #>blankmsg
.12cf	20 09 21	               jsr  putscxy
.12d2	a2 fd		               ldx  #<f1b_msg
.12d4	a0 1a		               ldy  #>f1b_msg
.12d6	20 09 21	               jsr  putscxy
.12d9	20 b0 21	               jsr  pop
.12dc	08		               php
.12dd	48		               pha
.12de	8a		               txa
.12df	48		               pha
.12e0	ad 51 1f	               lda  f1bbutton
.12e3	48		               pha
.12e4	a9 92		               lda  #146
.12e6	8d 63 1f	               sta  f1bbutton+18
.12e9	a9 01		               lda  #flashcol
.12eb	8d 51 1f	               sta  f1bbutton
.12ee	a2 51		               ldx  #<f1bbutton
.12f0	a0 1f		               ldy  #>f1bbutton
.12f2	20 09 21	               jsr  putscxy
.12f5	20 1f 12	               jsr  delay
.12f8	a9 12		               lda  #18
.12fa	8d 63 1f	               sta  f1bbutton+18
.12fd	68		               pla
.12fe	8d 51 1f	               sta  f1bbutton
.1301	a2 51		               ldx  #<f1bbutton
.1303	a0 1f		               ldy  #>f1bbutton
.1305	20 09 21	               jsr  putscxy
.1308	68		               pla
.1309	aa		               tax
.130a	68		               pla
.130b	28		               plp
.130c	20 8f 19	               jsr  flipvert
.130f	20 3b 0f	               jsr  drawbitmap
.1312	68		out            pla
.1313	20 71 21	               jsr  push
.1316	a2 c3		               ldx  #<blankmsg
.1318	a0 19		               ldy  #>blankmsg
.131a	20 09 21	               jsr  putscxy
.131d	a2 ef		               ldx  #<prompt_msg
.131f	a0 19		               ldy  #>prompt_msg
.1321	20 09 21	               jsr  putscxy
.1324	20 b0 21	               jsr  pop
.1327	60		               rts
.1328			f2action
.1328	48		               pha
.1329	a9 00		               lda  #$0
.132b	8d 50 09	               sta  editmode
.132e	ad 51 09	               lda  fkeyset
.1331	d0 4d		               bne  menub
.1333	20 71 21	               jsr  push
.1336	a2 c3		               ldx  #<blankmsg
.1338	a0 19		               ldy  #>blankmsg
.133a	20 09 21	               jsr  putscxy
.133d	a2 30		               ldx  #<f2a_msg
.133f	a0 1a		               ldy  #>f2a_msg
.1341	20 09 21	               jsr  putscxy
.1344	20 b0 21	               jsr  pop
.1347	08		               php
.1348	48		               pha
.1349	8a		               txa
.134a	48		               pha
.134b	ad 94 1e	               lda  f2abutton
.134e	48		               pha
.134f	a9 92		               lda  #146
.1351	8d a6 1e	               sta  f2abutton+18
.1354	a9 01		               lda  #flashcol
.1356	8d 94 1e	               sta  f2abutton
.1359	a2 94		               ldx  #<f2abutton
.135b	a0 1e		               ldy  #>f2abutton
.135d	20 09 21	               jsr  putscxy
.1360	20 1f 12	               jsr  delay
.1363	a9 12		               lda  #18
.1365	8d a6 1e	               sta  f2abutton+18
.1368	68		               pla
.1369	8d 94 1e	               sta  f2abutton
.136c	a2 94		               ldx  #<f2abutton
.136e	a0 1e		               ldy  #>f2abutton
.1370	20 09 21	               jsr  putscxy
.1373	68		               pla
.1374	aa		               tax
.1375	68		               pla
.1376	28		               plp
.1377	20 ea 09	               jsr  copychar
.137a	20 3b 0f	               jsr  drawbitmap
.137d	4c ca 13	               jmp  out
.1380			menub
.1380	20 71 21	               jsr  push
.1383	a2 c3		               ldx  #<blankmsg
.1385	a0 19		               ldy  #>blankmsg
.1387	20 09 21	               jsr  putscxy
.138a	a2 19		               ldx  #<f2b_msg
.138c	a0 1b		               ldy  #>f2b_msg
.138e	20 09 21	               jsr  putscxy
.1391	20 b0 21	               jsr  pop
.1394	08		               php
.1395	48		               pha
.1396	8a		               txa
.1397	48		               pha
.1398	ad 6c 1f	               lda  f2bbutton
.139b	48		               pha
.139c	a9 92		               lda  #146
.139e	8d 7e 1f	               sta  f2bbutton+18
.13a1	a9 01		               lda  #flashcol
.13a3	8d 6c 1f	               sta  f2bbutton
.13a6	a2 6c		               ldx  #<f2bbutton
.13a8	a0 1f		               ldy  #>f2bbutton
.13aa	20 09 21	               jsr  putscxy
.13ad	20 1f 12	               jsr  delay
.13b0	a9 12		               lda  #18
.13b2	8d 7e 1f	               sta  f2bbutton+18
.13b5	68		               pla
.13b6	8d 6c 1f	               sta  f2bbutton
.13b9	a2 6c		               ldx  #<f2bbutton
.13bb	a0 1f		               ldy  #>f2bbutton
.13bd	20 09 21	               jsr  putscxy
.13c0	68		               pla
.13c1	aa		               tax
.13c2	68		               pla
.13c3	28		               plp
.13c4	20 62 19	               jsr  fliphorz
.13c7	20 3b 0f	               jsr  drawbitmap
.13ca	68		out            pla
.13cb	20 71 21	               jsr  push
.13ce	a2 c3		               ldx  #<blankmsg
.13d0	a0 19		               ldy  #>blankmsg
.13d2	20 09 21	               jsr  putscxy
.13d5	a2 ef		               ldx  #<prompt_msg
.13d7	a0 19		               ldy  #>prompt_msg
.13d9	20 09 21	               jsr  putscxy
.13dc	20 b0 21	               jsr  pop
.13df	60		               rts
.13e0			f3action
.13e0	48		               pha
.13e1	a9 00		               lda  #$0
.13e3	8d 50 09	               sta  editmode
.13e6	ad 51 09	               lda  fkeyset
.13e9	d0 62		               bne  menub
.13eb	08		               php
.13ec	48		               pha
.13ed	8a		               txa
.13ee	48		               pha
.13ef	ad af 1e	               lda  f3abutton
.13f2	48		               pha
.13f3	a9 92		               lda  #146
.13f5	8d c1 1e	               sta  f3abutton+18
.13f8	a9 01		               lda  #flashcol
.13fa	8d af 1e	               sta  f3abutton
.13fd	a2 af		               ldx  #<f3abutton
.13ff	a0 1e		               ldy  #>f3abutton
.1401	20 09 21	               jsr  putscxy
.1404	20 1f 12	               jsr  delay
.1407	a9 12		               lda  #18
.1409	8d c1 1e	               sta  f3abutton+18
.140c	68		               pla
.140d	8d af 1e	               sta  f3abutton
.1410	a2 af		               ldx  #<f3abutton
.1412	a0 1e		               ldy  #>f3abutton
.1414	20 09 21	               jsr  putscxy
.1417	68		               pla
.1418	aa		               tax
.1419	68		               pla
.141a	28		               plp
.141b	20 71 21	               jsr  push
.141e	a2 c3		               ldx  #<blankmsg
.1420	a0 19		               ldy  #>blankmsg
.1422	20 09 21	               jsr  putscxy
.1425	a2 51		               ldx  #<f3a_msg
.1427	a0 1a		               ldy  #>f3a_msg
.1429	20 09 21	               jsr  putscxy
.142c	20 b0 21	               jsr  pop
.142f	20 91 25	getagain       jsr  getkey
.1432	c9 31		               cmp  #$31
.1434	f0 0b		               beq  devok
.1436	c9 38		               cmp  #$38
.1438	f0 07		               beq  devok
.143a	c9 39		               cmp  #$39
.143c	f0 03		               beq  devok
.143e	4c 2f 14	               jmp  getagain
.1441	8d 70 09	devok          sta  device
.1444	20 78 09	               jsr  getfname
.1447	20 7d 08	               jsr  savetofile
.144a	4c 97 14	               jmp  out
.144d			menub
.144d	20 71 21	               jsr  push
.1450	a2 c3		               ldx  #<blankmsg
.1452	a0 19		               ldy  #>blankmsg
.1454	20 09 21	               jsr  putscxy
.1457	a2 37		               ldx  #<f3b_msg
.1459	a0 1b		               ldy  #>f3b_msg
.145b	20 09 21	               jsr  putscxy
.145e	20 b0 21	               jsr  pop
.1461	08		               php
.1462	48		               pha
.1463	8a		               txa
.1464	48		               pha
.1465	ad 87 1f	               lda  f3bbutton
.1468	48		               pha
.1469	a9 92		               lda  #146
.146b	8d 99 1f	               sta  f3bbutton+18
.146e	a9 01		               lda  #flashcol
.1470	8d 87 1f	               sta  f3bbutton
.1473	a2 87		               ldx  #<f3bbutton
.1475	a0 1f		               ldy  #>f3bbutton
.1477	20 09 21	               jsr  putscxy
.147a	20 1f 12	               jsr  delay
.147d	a9 12		               lda  #18
.147f	8d 99 1f	               sta  f3bbutton+18
.1482	68		               pla
.1483	8d 87 1f	               sta  f3bbutton
.1486	a2 87		               ldx  #<f3bbutton
.1488	a0 1f		               ldy  #>f3bbutton
.148a	20 09 21	               jsr  putscxy
.148d	68		               pla
.148e	aa		               tax
.148f	68		               pla
.1490	28		               plp
.1491	20 ed 18	               jsr  scrollright
.1494	20 3b 0f	               jsr  drawbitmap
.1497	68		out            pla
.1498	20 71 21	               jsr  push
.149b	a2 c3		               ldx  #<blankmsg
.149d	a0 19		               ldy  #>blankmsg
.149f	20 09 21	               jsr  putscxy
.14a2	a2 ef		               ldx  #<prompt_msg
.14a4	a0 19		               ldy  #>prompt_msg
.14a6	20 09 21	               jsr  putscxy
.14a9	20 b0 21	               jsr  pop
.14ac	60		               rts
.14ad			f4action
.14ad	48		               pha
.14ae	a9 00		               lda  #$0
.14b0	8d 50 09	               sta  editmode
.14b3	ad 51 09	               lda  fkeyset
.14b6	d0 62		               bne  menub
.14b8	08		               php
.14b9	48		               pha
.14ba	8a		               txa
.14bb	48		               pha
.14bc	ad ca 1e	               lda  f4abutton
.14bf	48		               pha
.14c0	a9 92		               lda  #146
.14c2	8d dc 1e	               sta  f4abutton+18
.14c5	a9 01		               lda  #flashcol
.14c7	8d ca 1e	               sta  f4abutton
.14ca	a2 ca		               ldx  #<f4abutton
.14cc	a0 1e		               ldy  #>f4abutton
.14ce	20 09 21	               jsr  putscxy
.14d1	20 1f 12	               jsr  delay
.14d4	a9 12		               lda  #18
.14d6	8d dc 1e	               sta  f4abutton+18
.14d9	68		               pla
.14da	8d ca 1e	               sta  f4abutton
.14dd	a2 ca		               ldx  #<f4abutton
.14df	a0 1e		               ldy  #>f4abutton
.14e1	20 09 21	               jsr  putscxy
.14e4	68		               pla
.14e5	aa		               tax
.14e6	68		               pla
.14e7	28		               plp
.14e8	20 71 21	               jsr  push
.14eb	a2 c3		               ldx  #<blankmsg
.14ed	a0 19		               ldy  #>blankmsg
.14ef	20 09 21	               jsr  putscxy
.14f2	a2 7e		               ldx  #<f4a_msg
.14f4	a0 1a		               ldy  #>f4a_msg
.14f6	20 09 21	               jsr  putscxy
.14f9	20 b0 21	               jsr  pop
.14fc	20 91 25	getagain       jsr  getkey
.14ff	c9 31		               cmp  #$31
.1501	f0 0b		               beq  devok
.1503	c9 38		               cmp  #$38
.1505	f0 07		               beq  devok
.1507	c9 39		               cmp  #$39
.1509	f0 03		               beq  devok
.150b	4c fc 14	               jmp  getagain
.150e	8d 70 09	devok          sta  device
.1511	20 78 09	               jsr  getfname
.1514	20 c9 08	               jsr  loadfromfile
.1517	4c 64 15	               jmp  out
.151a			menub
.151a	20 71 21	               jsr  push
.151d	a2 c3		               ldx  #<blankmsg
.151f	a0 19		               ldy  #>blankmsg
.1521	20 09 21	               jsr  putscxy
.1524	a2 53		               ldx  #<f4b_msg
.1526	a0 1b		               ldy  #>f4b_msg
.1528	20 09 21	               jsr  putscxy
.152b	20 b0 21	               jsr  pop
.152e	08		               php
.152f	48		               pha
.1530	8a		               txa
.1531	48		               pha
.1532	ad a2 1f	               lda  f4bbutton
.1535	48		               pha
.1536	a9 92		               lda  #146
.1538	8d b4 1f	               sta  f4bbutton+18
.153b	a9 01		               lda  #flashcol
.153d	8d a2 1f	               sta  f4bbutton
.1540	a2 a2		               ldx  #<f4bbutton
.1542	a0 1f		               ldy  #>f4bbutton
.1544	20 09 21	               jsr  putscxy
.1547	20 1f 12	               jsr  delay
.154a	a9 12		               lda  #18
.154c	8d b4 1f	               sta  f4bbutton+18
.154f	68		               pla
.1550	8d a2 1f	               sta  f4bbutton
.1553	a2 a2		               ldx  #<f4bbutton
.1555	a0 1f		               ldy  #>f4bbutton
.1557	20 09 21	               jsr  putscxy
.155a	68		               pla
.155b	aa		               tax
.155c	68		               pla
.155d	28		               plp
.155e	20 12 19	               jsr  scrollleft
.1561	20 3b 0f	               jsr  drawbitmap
.1564	68		out            pla
.1565	20 71 21	               jsr  push
.1568	a2 c3		               ldx  #<blankmsg
.156a	a0 19		               ldy  #>blankmsg
.156c	20 09 21	               jsr  putscxy
.156f	a2 ef		               ldx  #<prompt_msg
.1571	a0 19		               ldy  #>prompt_msg
.1573	20 09 21	               jsr  putscxy
.1576	20 b0 21	               jsr  pop
.1579	60		               rts
.157a			f5action
.157a	48		               pha
.157b	a9 00		               lda  #$0
.157d	8d 50 09	               sta  editmode
.1580	ad 51 09	               lda  fkeyset
.1583	d0 4d		               bne  menub
.1585	20 71 21	               jsr  push
.1588	a2 c3		               ldx  #<blankmsg
.158a	a0 19		               ldy  #>blankmsg
.158c	20 09 21	               jsr  putscxy
.158f	a2 a6		               ldx  #<f5a_msg
.1591	a0 1a		               ldy  #>f5a_msg
.1593	20 09 21	               jsr  putscxy
.1596	20 b0 21	               jsr  pop
.1599	08		               php
.159a	48		               pha
.159b	8a		               txa
.159c	48		               pha
.159d	ad e5 1e	               lda  f5abutton
.15a0	48		               pha
.15a1	a9 92		               lda  #146
.15a3	8d f7 1e	               sta  f5abutton+18
.15a6	a9 01		               lda  #flashcol
.15a8	8d e5 1e	               sta  f5abutton
.15ab	a2 e5		               ldx  #<f5abutton
.15ad	a0 1e		               ldy  #>f5abutton
.15af	20 09 21	               jsr  putscxy
.15b2	20 1f 12	               jsr  delay
.15b5	a9 12		               lda  #18
.15b7	8d f7 1e	               sta  f5abutton+18
.15ba	68		               pla
.15bb	8d e5 1e	               sta  f5abutton
.15be	a2 e5		               ldx  #<f5abutton
.15c0	a0 1e		               ldy  #>f5abutton
.15c2	20 09 21	               jsr  putscxy
.15c5	68		               pla
.15c6	aa		               tax
.15c7	68		               pla
.15c8	28		               plp
.15c9	20 40 19	               jsr  clearchar
.15cc	20 3b 0f	               jsr  drawbitmap
.15cf	4c 1c 16	               jmp  out
.15d2			menub
.15d2	20 71 21	               jsr  push
.15d5	a2 c3		               ldx  #<blankmsg
.15d7	a0 19		               ldy  #>blankmsg
.15d9	20 09 21	               jsr  putscxy
.15dc	a2 6f		               ldx  #<f5b_msg
.15de	a0 1b		               ldy  #>f5b_msg
.15e0	20 09 21	               jsr  putscxy
.15e3	20 b0 21	               jsr  pop
.15e6	08		               php
.15e7	48		               pha
.15e8	8a		               txa
.15e9	48		               pha
.15ea	ad bd 1f	               lda  f5bbutton
.15ed	48		               pha
.15ee	a9 92		               lda  #146
.15f0	8d cf 1f	               sta  f5bbutton+18
.15f3	a9 01		               lda  #flashcol
.15f5	8d bd 1f	               sta  f5bbutton
.15f8	a2 bd		               ldx  #<f5bbutton
.15fa	a0 1f		               ldy  #>f5bbutton
.15fc	20 09 21	               jsr  putscxy
.15ff	20 1f 12	               jsr  delay
.1602	a9 12		               lda  #18
.1604	8d cf 1f	               sta  f5bbutton+18
.1607	68		               pla
.1608	8d bd 1f	               sta  f5bbutton
.160b	a2 bd		               ldx  #<f5bbutton
.160d	a0 1f		               ldy  #>f5bbutton
.160f	20 09 21	               jsr  putscxy
.1612	68		               pla
.1613	aa		               tax
.1614	68		               pla
.1615	28		               plp
.1616	20 7b 18	               jsr  scrollup
.1619	20 3b 0f	               jsr  drawbitmap
.161c	68		out            pla
.161d	20 71 21	               jsr  push
.1620	a2 c3		               ldx  #<blankmsg
.1622	a0 19		               ldy  #>blankmsg
.1624	20 09 21	               jsr  putscxy
.1627	a2 ef		               ldx  #<prompt_msg
.1629	a0 19		               ldy  #>prompt_msg
.162b	20 09 21	               jsr  putscxy
.162e	20 b0 21	               jsr  pop
.1631	60		               rts
.1632			f6action
.1632	48		               pha
.1633	a9 00		               lda  #$0
.1635	8d 50 09	               sta  editmode
.1638	ad 51 09	               lda  fkeyset
.163b	d0 4d		               bne  menub
.163d	20 71 21	               jsr  push
.1640	a2 c3		               ldx  #<blankmsg
.1642	a0 19		               ldy  #>blankmsg
.1644	20 09 21	               jsr  putscxy
.1647	a2 c2		               ldx  #<f6a_msg
.1649	a0 1a		               ldy  #>f6a_msg
.164b	20 09 21	               jsr  putscxy
.164e	20 b0 21	               jsr  pop
.1651	08		               php
.1652	48		               pha
.1653	8a		               txa
.1654	48		               pha
.1655	ad 00 1f	               lda  f6abutton
.1658	48		               pha
.1659	a9 92		               lda  #146
.165b	8d 12 1f	               sta  f6abutton+18
.165e	a9 01		               lda  #flashcol
.1660	8d 00 1f	               sta  f6abutton
.1663	a2 00		               ldx  #<f6abutton
.1665	a0 1f		               ldy  #>f6abutton
.1667	20 09 21	               jsr  putscxy
.166a	20 1f 12	               jsr  delay
.166d	a9 12		               lda  #18
.166f	8d 12 1f	               sta  f6abutton+18
.1672	68		               pla
.1673	8d 00 1f	               sta  f6abutton
.1676	a2 00		               ldx  #<f6abutton
.1678	a0 1f		               ldy  #>f6abutton
.167a	20 09 21	               jsr  putscxy
.167d	68		               pla
.167e	aa		               tax
.167f	68		               pla
.1680	28		               plp
.1681	20 34 19	               jsr  fillchar
.1684	20 3b 0f	               jsr  drawbitmap
.1687	4c d4 16	               jmp  out
.168a			menub
.168a	20 71 21	               jsr  push
.168d	a2 c3		               ldx  #<blankmsg
.168f	a0 19		               ldy  #>blankmsg
.1691	20 09 21	               jsr  putscxy
.1694	a2 89		               ldx  #<f6b_msg
.1696	a0 1b		               ldy  #>f6b_msg
.1698	20 09 21	               jsr  putscxy
.169b	20 b0 21	               jsr  pop
.169e	08		               php
.169f	48		               pha
.16a0	8a		               txa
.16a1	48		               pha
.16a2	ad d8 1f	               lda  f6bbutton
.16a5	48		               pha
.16a6	a9 92		               lda  #146
.16a8	8d ea 1f	               sta  f6bbutton+18
.16ab	a9 01		               lda  #flashcol
.16ad	8d d8 1f	               sta  f6bbutton
.16b0	a2 d8		               ldx  #<f6bbutton
.16b2	a0 1f		               ldy  #>f6bbutton
.16b4	20 09 21	               jsr  putscxy
.16b7	20 1f 12	               jsr  delay
.16ba	a9 12		               lda  #18
.16bc	8d ea 1f	               sta  f6bbutton+18
.16bf	68		               pla
.16c0	8d d8 1f	               sta  f6bbutton
.16c3	a2 d8		               ldx  #<f6bbutton
.16c5	a0 1f		               ldy  #>f6bbutton
.16c7	20 09 21	               jsr  putscxy
.16ca	68		               pla
.16cb	aa		               tax
.16cc	68		               pla
.16cd	28		               plp
.16ce	20 b3 18	               jsr  scrolldown
.16d1	20 3b 0f	               jsr  drawbitmap
.16d4	68		out            pla
.16d5	20 71 21	               jsr  push
.16d8	a2 c3		               ldx  #<blankmsg
.16da	a0 19		               ldy  #>blankmsg
.16dc	20 09 21	               jsr  putscxy
.16df	a2 ef		               ldx  #<prompt_msg
.16e1	a0 19		               ldy  #>prompt_msg
.16e3	20 09 21	               jsr  putscxy
.16e6	20 b0 21	               jsr  pop
.16e9	60		               rts
.16ea			f7action
.16ea	48		               pha
.16eb	a9 00		               lda  #$0
.16ed	8d 50 09	               sta  editmode
.16f0	ad 51 09	               lda  fkeyset
.16f3	d0 4d		               bne  menub
.16f5	20 71 21	               jsr  push
.16f8	a2 c3		               ldx  #<blankmsg
.16fa	a0 19		               ldy  #>blankmsg
.16fc	20 09 21	               jsr  putscxy
.16ff	a2 df		               ldx  #<f7a_msg
.1701	a0 1a		               ldy  #>f7a_msg
.1703	20 09 21	               jsr  putscxy
.1706	20 b0 21	               jsr  pop
.1709	08		               php
.170a	48		               pha
.170b	8a		               txa
.170c	48		               pha
.170d	ad 1b 1f	               lda  f7abutton
.1710	48		               pha
.1711	a9 92		               lda  #146
.1713	8d 2d 1f	               sta  f7abutton+18
.1716	a9 01		               lda  #flashcol
.1718	8d 1b 1f	               sta  f7abutton
.171b	a2 1b		               ldx  #<f7abutton
.171d	a0 1f		               ldy  #>f7abutton
.171f	20 09 21	               jsr  putscxy
.1722	20 1f 12	               jsr  delay
.1725	a9 12		               lda  #18
.1727	8d 2d 1f	               sta  f7abutton+18
.172a	68		               pla
.172b	8d 1b 1f	               sta  f7abutton
.172e	a2 1b		               ldx  #<f7abutton
.1730	a0 1f		               ldy  #>f7abutton
.1732	20 09 21	               jsr  putscxy
.1735	68		               pla
.1736	aa		               tax
.1737	68		               pla
.1738	28		               plp
.1739	20 0e 10	               jsr  copycharset
.173c	20 3b 0f	               jsr  drawbitmap
.173f	4c 91 17	               jmp  out
.1742	a9 00		menub          lda  #$0
.1744	8d 50 09	               sta  editmode
.1747	20 71 21	               jsr  push
.174a	a2 c3		               ldx  #<blankmsg
.174c	a0 19		               ldy  #>blankmsg
.174e	20 09 21	               jsr  putscxy
.1751	a2 a2		               ldx  #<f7b_msg
.1753	a0 1b		               ldy  #>f7b_msg
.1755	20 09 21	               jsr  putscxy
.1758	20 b0 21	               jsr  pop
.175b	08		               php
.175c	48		               pha
.175d	8a		               txa
.175e	48		               pha
.175f	ad f3 1f	               lda  f7bbutton
.1762	48		               pha
.1763	a9 92		               lda  #146
.1765	8d 05 20	               sta  f7bbutton+18
.1768	a9 01		               lda  #flashcol
.176a	8d f3 1f	               sta  f7bbutton
.176d	a2 f3		               ldx  #<f7bbutton
.176f	a0 1f		               ldy  #>f7bbutton
.1771	20 09 21	               jsr  putscxy
.1774	20 1f 12	               jsr  delay
.1777	a9 12		               lda  #18
.1779	8d 05 20	               sta  f7bbutton+18
.177c	68		               pla
.177d	8d f3 1f	               sta  f7bbutton
.1780	a2 f3		               ldx  #<f7bbutton
.1782	a0 1f		               ldy  #>f7bbutton
.1784	20 09 21	               jsr  putscxy
.1787	68		               pla
.1788	aa		               tax
.1789	68		               pla
.178a	28		               plp
.178b	20 5b 18	               jsr  reverse
.178e	20 3b 0f	               jsr  drawbitmap
.1791	68		out            pla
.1792	20 71 21	               jsr  push
.1795	a2 c3		               ldx  #<blankmsg
.1797	a0 19		               ldy  #>blankmsg
.1799	20 09 21	               jsr  putscxy
.179c	a2 ef		               ldx  #<prompt_msg
.179e	a0 19		               ldy  #>prompt_msg
.17a0	20 09 21	               jsr  putscxy
.17a3	20 b0 21	               jsr  pop
.17a6	60		               rts
.17a7			f8action
.17a7	48		               pha
.17a8	a9 00		               lda  #$0
.17aa	8d 50 09	               sta  editmode
.17ad	ad 51 09	               lda  fkeyset
.17b0	d0 47		               bne  menub
.17b2	20 71 21	               jsr  push
.17b5	a2 c3		               ldx  #<blankmsg
.17b7	a0 19		               ldy  #>blankmsg
.17b9	20 09 21	               jsr  putscxy
.17bc	a2 de		               ldx  #<menub_msg
.17be	a0 1b		               ldy  #>menub_msg
.17c0	20 09 21	               jsr  putscxy
.17c3	20 b0 21	               jsr  pop
.17c6	08		               php
.17c7	48		               pha
.17c8	8a		               txa
.17c9	48		               pha
.17ca	ad 36 1f	               lda  f8abutton
.17cd	48		               pha
.17ce	a9 92		               lda  #146
.17d0	8d 48 1f	               sta  f8abutton+18
.17d3	a9 01		               lda  #flashcol
.17d5	8d 36 1f	               sta  f8abutton
.17d8	a2 36		               ldx  #<f8abutton
.17da	a0 1f		               ldy  #>f8abutton
.17dc	20 09 21	               jsr  putscxy
.17df	20 1f 12	               jsr  delay
.17e2	a9 12		               lda  #18
.17e4	8d 48 1f	               sta  f8abutton+18
.17e7	68		               pla
.17e8	8d 36 1f	               sta  f8abutton
.17eb	a2 36		               ldx  #<f8abutton
.17ed	a0 1f		               ldy  #>f8abutton
.17ef	20 09 21	               jsr  putscxy
.17f2	68		               pla
.17f3	aa		               tax
.17f4	68		               pla
.17f5	28		               plp
.17f6	4c 3d 18	               jmp  swapit
.17f9			menub
.17f9	20 71 21	               jsr  push
.17fc	a2 c3		               ldx  #<blankmsg
.17fe	a0 19		               ldy  #>blankmsg
.1800	20 09 21	               jsr  putscxy
.1803	a2 b9		               ldx  #<menua_msg
.1805	a0 1b		               ldy  #>menua_msg
.1807	20 09 21	               jsr  putscxy
.180a	20 b0 21	               jsr  pop
.180d	08		               php
.180e	48		               pha
.180f	8a		               txa
.1810	48		               pha
.1811	ad 0e 20	               lda  f8bbutton
.1814	48		               pha
.1815	a9 92		               lda  #146
.1817	8d 20 20	               sta  f8bbutton+18
.181a	a9 01		               lda  #flashcol
.181c	8d 0e 20	               sta  f8bbutton
.181f	a2 0e		               ldx  #<f8bbutton
.1821	a0 20		               ldy  #>f8bbutton
.1823	20 09 21	               jsr  putscxy
.1826	20 1f 12	               jsr  delay
.1829	a9 12		               lda  #18
.182b	8d 20 20	               sta  f8bbutton+18
.182e	68		               pla
.182f	8d 0e 20	               sta  f8bbutton
.1832	a2 0e		               ldx  #<f8bbutton
.1834	a0 20		               ldy  #>f8bbutton
.1836	20 09 21	               jsr  putscxy
.1839	68		               pla
.183a	aa		               tax
.183b	68		               pla
.183c	28		               plp
.183d	49 ff		swapit         eor  #$ff
.183f	8d 51 09	               sta  fkeyset
.1842	20 a5 10	               jsr  drawfkeys
.1845	68		               pla
.1846	20 71 21	               jsr  push
.1849	a2 c3		               ldx  #<blankmsg
.184b	a0 19		               ldy  #>blankmsg
.184d	20 09 21	               jsr  putscxy
.1850	a2 ef		               ldx  #<prompt_msg
.1852	a0 19		               ldy  #>prompt_msg
.1854	20 09 21	               jsr  putscxy
.1857	20 b0 21	               jsr  pop
.185a	60		               rts
.185b			reverse
.185b	20 71 21	               jsr  push
.185e	48		               pha
.185f	ad 56 09	               lda  mapaddr
.1862	85 fd		               sta  $fd
.1864	ad 57 09	               lda  mapaddr+1
.1867	85 fe		               sta  $fe
.1869	68		               pla
.186a	a0 00		               ldy  #$00
.186c	b1 fd		again          lda  (zpage2),y
.186e	49 ff		               eor  #$ff
.1870	91 fd		               sta  (zpage2),y
.1872	c8		               iny
.1873	c0 08		               cpy  #$08
.1875	d0 f5		               bne  again
.1877	20 b0 21	               jsr  pop
.187a	60		               rts
.187b			scrollup
.187b	20 71 21	               jsr  push
.187e	48		               pha
.187f	ad 56 09	               lda  mapaddr
.1882	85 fb		               sta  $fb
.1884	ad 57 09	               lda  mapaddr+1
.1887	85 fc		               sta  $fc
.1889	68		               pla
.188a	48		               pha
.188b	ad 56 09	               lda  mapaddr
.188e	85 fd		               sta  $fd
.1890	ad 57 09	               lda  mapaddr+1
.1893	85 fe		               sta  $fe
.1895	68		               pla
.1896	20 90 22	               jsr  inczp2
.1899	a0 00		               ldy  #$00
.189b	b1 fb		               lda  (zpage1),y
.189d	8d b2 18	               sta  tmpbyte
.18a0	b1 fd		again          lda  (zpage2),y
.18a2	91 fb		               sta  (zpage1),y
.18a4	c8		               iny
.18a5	c0 07		               cpy  #$07
.18a7	d0 f7		               bne  again
.18a9	ad b2 18	               lda  tmpbyte
.18ac	91 fb		               sta  (zpage1),y
.18ae	20 b0 21	               jsr  pop
.18b1	60		               rts
>18b2	00		tmpbyte        .byte     $00
.18b3			scrolldown
.18b3	20 71 21	               jsr  push
.18b6	48		               pha
.18b7	ad 56 09	               lda  mapaddr
.18ba	85 fb		               sta  $fb
.18bc	ad 57 09	               lda  mapaddr+1
.18bf	85 fc		               sta  $fc
.18c1	68		               pla
.18c2	48		               pha
.18c3	ad 56 09	               lda  mapaddr
.18c6	85 fd		               sta  $fd
.18c8	ad 57 09	               lda  mapaddr+1
.18cb	85 fe		               sta  $fe
.18cd	68		               pla
.18ce	20 90 22	               jsr  inczp2
.18d1	a0 07		               ldy  #$07                ;xxxxxxxx zpage1
.18d3	b1 fb		               lda  (zpage1),y          ;xxxxxxxx zpage2
.18d5	8d ec 18	               sta  tmpbyte             ;xxxxxxxx
.18d8	88		again          dey                      ;xxxxxxxx
.18d9	b1 fb		               lda  (zpage1),y          ;xxxxxxxx
.18db	91 fd		               sta  (zpage2),y          ;xxxxxxxx
.18dd	c0 00		               cpy  #$00                ;xxxxxxxx
.18df	d0 f7		               bne  again               ;xxxxxxxx
.18e1	a0 00		               ldy  #$00
.18e3	ad ec 18	               lda  tmpbyte
.18e6	91 fb		               sta  (zpage1),y
.18e8	20 b0 21	               jsr  pop
.18eb	60		               rts
>18ec	00		tmpbyte        .byte     $00
.18ed			scrollright
.18ed	20 71 21	               jsr  push
.18f0	48		               pha
.18f1	ad 56 09	               lda  mapaddr
.18f4	85 fb		               sta  $fb
.18f6	ad 57 09	               lda  mapaddr+1
.18f9	85 fc		               sta  $fc
.18fb	68		               pla
.18fc	a0 00		               ldy  #$00
.18fe	b1 fb		again          lda  (zpage1),y
.1900	18		               clc
.1901	6a		               ror
.1902	90 03		               bcc  zero
.1904	18		               clc
.1905	69 80		one            adc  #$80
.1907	91 fb		zero           sta  (zpage1),y
.1909	c8		               iny
.190a	c0 08		               cpy  #$08
.190c	d0 f0		               bne  again
.190e	20 b0 21	               jsr  pop
.1911	60		               rts
.1912			scrollleft
.1912	20 71 21	               jsr  push
.1915	48		               pha
.1916	ad 56 09	               lda  mapaddr
.1919	85 fb		               sta  $fb
.191b	ad 57 09	               lda  mapaddr+1
.191e	85 fc		               sta  $fc
.1920	68		               pla
.1921	a0 00		               ldy  #$00
.1923	b1 fb		again          lda  (zpage1),y
.1925	18		               clc
.1926	2a		               rol
.1927	69 00		               adc  #$00
.1929	91 fb		               sta  (zpage1),y
.192b	c8		               iny
.192c	c0 08		               cpy  #$08
.192e	d0 f3		               bne  again
.1930	20 b0 21	               jsr  pop
.1933	60		               rts
.1934			fillchar
.1934	20 71 21	               jsr  push
.1937	a9 ff		               lda  #$ff
.1939	20 4c 19	               jsr  allsame
.193c	20 b0 21	               jsr  pop
.193f	60		               rts
.1940			clearchar
.1940	20 71 21	               jsr  push
.1943	a9 00		               lda  #$00
.1945	20 4c 19	               jsr  allsame
.1948	20 b0 21	               jsr  pop
.194b	60		               rts
.194c			allsame
.194c	48		               pha
.194d	ad 56 09	               lda  mapaddr
.1950	85 fd		               sta  $fd
.1952	ad 57 09	               lda  mapaddr+1
.1955	85 fe		               sta  $fe
.1957	68		               pla
.1958	a0 00		               ldy  #$00
.195a	91 fd		again          sta  (zpage2),y
.195c	c8		               iny
.195d	c0 08		               cpy  #$08
.195f	d0 f9		               bne  again
.1961	60		               rts
.1962			fliphorz
.1962	20 71 21	               jsr  push
.1965	48		               pha
.1966	ad 56 09	               lda  mapaddr
.1969	85 fd		               sta  $fd
.196b	ad 57 09	               lda  mapaddr+1
.196e	85 fe		               sta  $fe
.1970	68		               pla
.1971	a0 00		               ldy  #$00
.1973	b1 fd		nextbyte       lda  (zpage2),y
.1975	a2 00		               ldx  #$00
.1977	2a		rolagain       rol
.1978	6e 8e 19	               ror  tmpbyte
.197b	e8		               inx
.197c	e0 08		               cpx  #$08
.197e	30 f7		               bmi  rolagain
.1980	ad 8e 19	               lda  tmpbyte
.1983	91 fd		               sta  (zpage2),y
.1985	c8		               iny
.1986	c0 08		               cpy  #$08
.1988	30 e9		               bmi  nextbyte
.198a	20 b0 21	               jsr  pop
.198d	60		               rts
>198e	00		tmpbyte        .byte     $00
.198f			flipvert
.198f	20 71 21	               jsr  push
.1992	48		               pha
.1993	ad 56 09	               lda  mapaddr
.1996	85 fd		               sta  $fd
.1998	ad 57 09	               lda  mapaddr+1
.199b	85 fe		               sta  $fe
.199d	68		               pla
.199e	a0 00		               ldy  #$00
.19a0	b1 fd		tostack        lda  (zpage2),y
.19a2	48		               pha
.19a3	c8		               iny
.19a4	c0 08		               cpy  #$08
.19a6	d0 f8		               bne  tostack
.19a8	a0 00		               ldy  #$00
.19aa	68		fromstack      pla
.19ab	91 fd		               sta  (zpage2),y
.19ad	c8		               iny
.19ae	c0 08		               cpy  #$08
.19b0	d0 f8		               bne  fromstack
.19b2	20 b0 21	               jsr  pop
.19b5	60		               rts

;******  Return to file: charedit.asm


;******  Processing file: messages_fr.asm

>19b6	0a 01 05	editor_msg     .byte vrose,1,5
>19b9	5b 45 44 49	               .null     "[editeur]"
>19bd	54 45 55 52 5d 00
>19c3	03 00 05 92	blankmsg       .byte     mesgcol,0,5,146
>19c7	20 20 20 20	               .null     "                                       "
>19cb	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>19db	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>19eb	20 20 20 00
>19ef	03 00 05 92	prompt_msg     .byte     mesgcol,0,5,146
>19f3	20 55 54 49	               .null     " utilisez les clefs de fonction :"
>19f7	4c 49 53 45 5a 20 4c 45 53 20 43 4c 45 46 53 20
>1a07	44 45 20 46 4f 4e 43 54 49 4f 4e 20 3a 00
.1a15			f1a_msg
>1a15	03 00 05 92	edit_msg       .byte     mesgcol,0,5,146     ;18
>1a19	20 4d 4f 44	               .null     " mode edit: chr$(   )",146
>1a1d	45 20 45 44 49 54 3a 20 43 48 52 24 28 20 20 20
>1a2d	29 92 00
.1a30			f2a_msg
>1a30	03 00 05	copy_msg       .byte     mesgcol,0,5
>1a33	20 45 4e 54	               .null     " entez le character a copier:"
>1a37	45 5a 20 4c 45 20 43 48 41 52 41 43 54 45 52 20
>1a47	41 20 43 4f 50 49 45 52 3a 00
.1a51			f3a_msg
>1a51	03 00 05 92	save_msg       .byte     mesgcol,0,5,146
>1a55	20 53 41 55	               .null     " sauvegarder sur quel lecteur? (1/8/9): "
>1a59	56 45 47 41 52 44 45 52 20 53 55 52 20 51 55 45
>1a69	4c 20 4c 45 43 54 45 55 52 3f 20 28 31 2f 38 2f
>1a79	39 29 3a 20 00
.1a7e			f4a_msg
>1a7e	03 00 05 92	load_msg       .byte     mesgcol,0,5,146
>1a82	20 43 48 41	               .null     " charger de quel lecteur? (1,8,9): "
>1a86	52 47 45 52 20 44 45 20 51 55 45 4c 20 4c 45 43
>1a96	54 45 55 52 3f 20 28 31 2c 38 2c 39 29 3a 20 00
.1aa6			f5a_msg
>1aa6	03 00 05	clear_msg      .byte     mesgcol,0,5
>1aa9	20 45 46 46	               .null     " effacer char: chr$(   )"
>1aad	41 43 45 52 20 43 48 41 52 3a 20 43 48 52 24 28
>1abd	20 20 20 29 00
.1ac2			f6a_msg
>1ac2	03 00 05	fill_msg       .byte     mesgcol,0,5
>1ac5	20 52 45 4d	               .null     " remplir char:  chr$(   )"
>1ac9	50 4c 49 52 20 43 48 41 52 3a 20 20 43 48 52 24
>1ad9	28 20 20 20 29 00
.1adf			f7a_msg
>1adf	03 00 05	work_msg       .byte     mesgcol,0,5
>1ae2	20 52 45 43	               .null     " recuperer les caracteres."
>1ae6	55 50 45 52 45 52 20 4c 45 53 20 43 41 52 41 43
>1af6	54 45 52 45 53 2e 00
.1afd			f1b_msg
>1afd	03 00 05	invr_msg       .byte     mesgcol,0,5
>1b00	20 42 41 53	               .null     " basculer verticalement:"
>1b04	43 55 4c 45 52 20 56 45 52 54 49 43 41 4c 45 4d
>1b14	45 4e 54 3a 00
.1b19			f2b_msg
>1b19	03 00 05	flip_msg       .byte     mesgcol,0,5
>1b1c	20 42 41 53	               .null     " basculer horizontalement:"
>1b20	43 55 4c 45 52 20 48 4f 52 49 5a 4f 4e 54 41 4c
>1b30	45 4d 45 4e 54 3a 00
.1b37			f3b_msg
>1b37	03 00 05	scrollr_msg    .byte     mesgcol,0,5
>1b3a	20 44 45 46	               .null     " defiler vers la droite:"
>1b3e	49 4c 45 52 20 56 45 52 53 20 4c 41 20 44 52 4f
>1b4e	49 54 45 3a 00
.1b53			f4b_msg
>1b53	03 00 05	scrolll_msg    .byte     mesgcol,0,5
>1b56	20 44 45 46	               .null     " defiler vers la gauche:"
>1b5a	49 4c 45 52 20 56 45 52 53 20 4c 41 20 47 41 55
>1b6a	43 48 45 3a 00
.1b6f			f5b_msg
>1b6f	03 00 05	scrollu_msg    .byte     mesgcol,0,5
>1b72	20 44 45 46	               .null     " defiler vers le haut:"
>1b76	49 4c 45 52 20 56 45 52 53 20 4c 45 20 48 41 55
>1b86	54 3a 00
.1b89			f6b_msg
>1b89	03 00 05	scrolld_msg    .byte     mesgcol,0,5
>1b8c	20 44 45 46	               .null     " defiler vers le bas:"
>1b90	49 4c 45 52 20 56 45 52 53 20 4c 45 20 42 41 53
>1ba0	3a 00
.1ba2			f7b_msg
>1ba2	03 00 05	rvrs_msg       .byte     mesgcol,0,5
>1ba5	20 52 45 56	               .null     " reverse character:"
>1ba9	45 52 53 45 20 43 48 41 52 41 43 54 45 52 3a 00
>1bb9	03 00 05	menua_msg      .byte     mesgcol,0,5
>1bbc	20 56 4f 55	               .null     " vous etes dirige vers le menu 1."
>1bc0	53 20 45 54 45 53 20 44 49 52 49 47 45 20 56 45
>1bd0	52 53 20 4c 45 20 4d 45 4e 55 20 31 2e 00
>1bde	03 00 05	menub_msg      .byte     mesgcol,0,5
>1be1	20 56 4f 55	               .null     " vous etes dirige vers le menu 2."
>1be5	53 20 45 54 45 53 20 44 49 52 49 47 45 20 56 45
>1bf5	52 53 20 4c 45 20 4d 45 4e 55 20 32 2e 00
>1c03	07 00 05	copychar_msg   .byte     vjaune,0,5
>1c06	20 45 4e 54	               .null     " entrez le caractera a copier (?).",157,157,157
>1c0a	52 45 5a 20 4c 45 20 43 41 52 41 43 54 45 52 41
>1c1a	20 41 20 43 4f 50 49 45 52 20 28 3f 29 2e 9d 9d
>1c2a	9d 00
>1c2c	07 00 05	fname_msg      .byte     vjaune,0,5
>1c2f	20 4e 4f 4d	               .null     " nom du fichier (6 lettres): ",$a4,$a4,$a4,$a4,$a4,$a4,".chr",157,157,157,157,157,157,157,157,157,157
>1c33	20 44 55 20 46 49 43 48 49 45 52 20 28 36 20 4c
>1c43	45 54 54 52 45 53 29 3a 20 a4 a4 a4 a4 a4 a4 2e
>1c53	43 48 52 9d 9d 9d 9d 9d 9d 9d 9d 9d 9d 00
>1c61	0e 15 18 12	quit_msg       .byte     vblue1,21,24,18
>1c65	43 54 52 4c	               .text     "ctrl-x",146
>1c69	2d 58 92
>1c6c	2d 51 55 49	               .null     "-quitter."
>1c70	54 54 45 52 2e 00
.1c76			menu_msg
>1c76	0d 15 18 12	exit_msg       .byte     vvert1,21,24,18
>1c7a	43 54 52 4c	               .text     "ctrl-x",146
>1c7e	2d 58 92
>1c81	20 41 55 20	               .null     " au menu."
>1c85	4d 45 4e 55 2e 00
>1c8b	07 04 06 12	whoami0        .byte     whoamicol,4,6,18
>1c8f	20 20 20 20	               .null     "                               ",146
>1c93	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>1ca3	20 20 20 20 20 20 20 20 20 20 20 92 00
>1cb0	07 04 07 12	whoami1        .byte     whoamicol,4,7,18
>1cb4	20 20 20 20	               .null     "       ",146," c h a r e d i t ",18,"       ",146
>1cb8	20 20 20 92 20 43 20 48 20 41 20 52 20 45 20 44
>1cc8	20 49 20 54 20 12 20 20 20 20 20 20 20 92 00
>1cd7	07 04 08 12	whoami2        .byte     whoamicol,4,8,18
>1cdb	20 20 20 20	               .null     "                               ",146
>1cdf	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>1cef	20 20 20 20 20 20 20 20 20 20 20 92 00
>1cfc	07 04 09 12	whoami3        .byte     whoamicol,4,9,18
>1d00	20 20 20 20	               .null     "    inspire de john heilborn   ",146
>1d04	49 4e 53 50 49 52 45 20 44 45 20 4a 4f 48 4e 20
>1d14	48 45 49 4c 42 4f 52 4e 20 20 20 92 00
>1d21	07 04 0a 12	whoami4        .byte     whoamicol,4,10,18
>1d25	20 20 20 20	               .null     "      isbn: 0-942386-29-9      ",146
>1d29	20 20 49 53 42 4e 3a 20 30 2d 39 34 32 33 38 36
>1d39	2d 32 39 2d 39 20 20 20 20 20 20 92 00
>1d46	07 04 0b 12	whoami5        .byte     whoamicol,4,11,18
>1d4a	20 20 20 20	               .null     "                               ",146
>1d4e	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>1d5e	20 20 20 20 20 20 20 20 20 20 20 92 00
>1d6b	07 04 0c 12	whoami6        .byte     whoamicol,4,12,18
>1d6f	20 20 20 20	               .null     "     code en assembleur par    ",146
>1d73	20 43 4f 44 45 20 45 4e 20 41 53 53 45 4d 42 4c
>1d83	45 55 52 20 50 41 52 20 20 20 20 92 00
>1d90	07 04 0d 12	whoami7        .byte     whoamicol,4,13,18
>1d94	20 44 41 4e	               .null     " daniel lafrance quebec/canada ",146
>1d98	49 45 4c 20 4c 41 46 52 41 4e 43 45 20 51 55 45
>1da8	42 45 43 2f 43 41 4e 41 44 41 20 92 00
>1db5	07 04 0e 12	whoami8        .byte     whoamicol,4,14,18
>1db9	20 20 20 20	               .null     "    version:",version,"    ",146
>1dbd	56 45 52 53 49 4f 4e 3a 32 30 32 33 31 31 31 36
>1dcd	2d 31 30 30 34 30 30 20 20 20 20 92 00
>1dda	07 04 0f 12	whoami9        .byte     whoamicol,4,15,18
>1dde	20 20 20 20	               .null     "                               ",146
>1de2	20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
>1df2	20 20 20 20 20 20 20 20 20 20 20 92 00
>1dff	03 06 10 14	bye_msg        .byte     vcyan,6,16,20
>1e03	20 20 20 20	               .null     "      bonjour et merci      ",146
>1e07	20 20 42 4f 4e 4a 4f 55 52 20 45 54 20 4d 45 52
>1e17	43 49 20 20 20 20 20 20 92 00
>1e21	0d 05 18 12	any_msg        .byte     vvert1,5,24,18
>1e25	20 41 50 50	               .null     " appuyez une cle pour basic ",146
>1e29	55 59 45 5a 20 55 4e 45 20 43 4c 45 20 50 4f 55
>1e39	52 20 42 41 53 49 43 20 92 00
>1e43	03 12 07	titremenu1     .byte     menu1col1,fkeyleft,f1top-2       ;133
>1e46	12 20 4a 45	               .null     18," jeu de fonctions #1 ",146
>1e4a	55 20 44 45 20 46 4f 4e 43 54 49 4f 4e 53 20 23
>1e5a	31 20 92 00
>1e5e	0f 12 07	titremenu2     .byte     menu2col1,fkeyleft,f1top-2       ;133
>1e61	12 20 4a 45	               .null     18," jeu de fonctions #2 ",146
>1e65	55 20 44 45 20 46 4f 4e 43 54 49 4f 4e 53 20 23
>1e75	32 20 92 00
>1e79	03 12 09	f1abutton      .byte     menu1col1,fkeyleft,f1top       ;133
>1e7c	45 44 49 54	               .text     "editer carac..."
>1e80	45 52 20 43 41 52 41 43 2e 2e 2e
>1e8b	12		               .byte     18             ; position 15
>1e8c	a9 20 46 31	               .null     $a9," f1 ",223,146
>1e90	20 df 92 00
>1e94	0e 12 0a	f2abutton      .byte     menu1col2,fkeyleft,f1top+1     ;138
>1e97	43 4f 50 49	               .text     "copier un carac"
>1e9b	45 52 20 55 4e 20 43 41 52 41 43
>1ea6	12		               .byte     18   ; position 15
>1ea7	20 20 46 32	               .null     "  f2  ",146
>1eab	20 20 92 00
>1eaf	03 12 0c	f3abutton      .byte     menu1col1,fkeyleft,f1top+3     ;137
>1eb2	53 41 56 45	               .text     "savegarder sur."
>1eb6	47 41 52 44 45 52 20 53 55 52 2e
>1ec1	12		               .byte     18            ; position 15
>1ec2	a9 20 46 33	               .null     $a9," f3 ",223,146
>1ec6	20 df 92 00
>1eca	0e 12 0d	f4abutton      .byte     menu1col2,fkeyleft,f1top+4     ;134
>1ecd	43 48 41 52	               .text     "charger de....."
>1ed1	47 45 52 20 44 45 2e 2e 2e 2e 2e
>1edc	12		               .byte     18             ; position 15
>1edd	20 20 46 34	               .null     "  f4  ",146
>1ee1	20 20 92 00
>1ee5	03 12 0f	f5abutton      .byte     menu1col1,fkeyleft,f1top+6     ;135
>1ee8	4d 45 54 54	               .text     "mettre tout a 0"
>1eec	52 45 20 54 4f 55 54 20 41 20 30
>1ef7	12		               .byte     18             ; position 15
>1ef8	a9 20 46 35	               .null     $a9," f5 ",223,146
>1efc	20 df 92 00
>1f00	0e 12 10	f6abutton      .byte     menu1col2,fkeyleft,f1top+7    ;139
>1f03	4d 45 54 54	               .text     "mettre tout a 1"
>1f07	52 45 20 54 4f 55 54 20 41 20 31
>1f12	12		               .byte     18             ; position 15
>1f13	20 20 46 36	               .null     "  f6  ",146
>1f17	20 20 92 00
>1f1b	03 12 12	f7abutton      .byte     menu1col1,fkeyleft,f1top+9    ;136
>1f1e	52 45 43 55	               .text     "recuperer rom.."
>1f22	50 45 52 45 52 20 52 4f 4d 2e 2e
>1f2d	12		               .byte     18             ; position 15
>1f2e	a9 20 46 37	               .null     $a9," f7 ",223,146
>1f32	20 df 92 00
>1f36	0e 12 13	f8abutton      .byte     menu1col2,fkeyleft,f1top+10
>1f39	41 4c 4c 45	               .text     "aller au menu2."
>1f3d	52 20 41 55 20 4d 45 4e 55 32 2e
>1f48	12		               .byte     18             ; position 15
>1f49	20 20 46 38	               .null     "  f8  ", 146
>1f4d	20 20 92 00
>1f51	0f 12 09	f1bbutton      .byte     menu2col1,fkeyleft,f1top
>1f54	42 41 53 43	               .text     "basculer vert.."
>1f58	55 4c 45 52 20 56 45 52 54 2e 2e
>1f63	12		               .byte     18             ; position 15
>1f64	a9 20 46 31	               .null     $a9," f1 ",223,146
>1f68	20 df 92 00
>1f6c	0c 12 0a	f2bbutton      .byte     menu2col2,fkeyleft,f1top+1
>1f6f	42 41 53 43	               .text     "basculer horz.."
>1f73	55 4c 45 52 20 48 4f 52 5a 2e 2e
>1f7e	12		               .byte     18             ; position 15
>1f7f	20 20 46 32	               .null     "  f2  ",146
>1f83	20 20 92 00
>1f87	0f 12 0c	f3bbutton      .byte     menu2col1,fkeyleft,f1top+3
>1f8a	44 45 46 49	               .text     "defiler droite."
>1f8e	4c 45 52 20 44 52 4f 49 54 45 2e
>1f99	12		               .byte     18             ; position 15
>1f9a	a9 20 46 33	               .null     $a9," f3 ",223,146
>1f9e	20 df 92 00
>1fa2	0c 12 0d	f4bbutton      .byte     menu2col2,fkeyleft,f1top+4
>1fa5	44 45 46 49	               .text     "defiler gauche."
>1fa9	4c 45 52 20 47 41 55 43 48 45 2e
>1fb4	12		               .byte     18             ; position 15
>1fb5	20 20 46 34	               .null     "  f4  ",146
>1fb9	20 20 92 00
>1fbd	0f 12 0f	f5bbutton      .byte     menu2col1,fkeyleft,f1top+6
>1fc0	44 45 46 49	               .text     "defiler haut..."
>1fc4	4c 45 52 20 48 41 55 54 2e 2e 2e
>1fcf	12		               .byte     18             ; position 15
>1fd0	a9 20 46 35	               .null     $a9," f5 ",223,146
>1fd4	20 df 92 00
>1fd8	0c 12 10	f6bbutton      .byte     menu2col2,fkeyleft,f1top+7
>1fdb	44 45 46 49	               .text     "defiler bas...."
>1fdf	4c 45 52 20 42 41 53 2e 2e 2e 2e
>1fea	12		               .byte     18             ; position 15
>1feb	20 20 46 36	               .null     "  f6  ",146
>1fef	20 20 92 00
>1ff3	0f 12 12	f7bbutton      .byte     menu2col1,fkeyleft,f1top+9
>1ff6	49 4e 56 45	               .text     "inverser bits.."
>1ffa	52 53 45 52 20 42 49 54 53 2e 2e
>2005	12		               .byte     18             ; position 15
>2006	a9 20 46 37	               .null     $a9," f7 ",223,146
>200a	20 df 92 00
>200e	0c 12 13	f8bbutton      .byte     menu2col2,fkeyleft,f1top+10
>2011	41 4c 4c 45	               .text     "aller au menu1."
>2015	52 20 41 55 20 4d 45 4e 55 31 2e
>2020	12		               .byte     18             ; position 15
>2021	20 20 46 38	               .null     "  f8  ", 146
>2025	20 20 92 00

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/map-c64-kernal.asm

=$00			u6510ddr       =    $00       ;   0 6510 port data dir. reg. (def: %xx101111)
=$01			u6510map       =    $01       ;   1 6510 port used as memory map reg.
=$02			unused2        =    $02       ;   2 unused.
=$03			adray1         =    $03       ; 3-4 Vector to routine to convert a number ...
=$05			adray2         =    $05       ; 5-6 Vector to routine to convert a number ...
=$07			b_charac       =    $07       ;   7 Search character for scanning ...
=$08			b_endchr       =    $08       ;   8 Search character for scanning ...
=$09			b_trmpos       =    $09       ;   9 Cursor column position before the ...
=$0a			verck          =    $0a       ;  10 Flag: 0=Load or 1=Check
=$0b			b_count        =    $0b       ;  11 Index into the Text Input Buffer ...
=$0c			dimflg         =    $0c       ;  12 Flags for routine that locate or build array.
=$0d			valtyp         =    $0d       ;  13 Flag: Type of data ($ff=string or $00=numeric)
=$0e			intflg         =    $0e       ;  14 Numeric data Type ($80=Integer or $00=Float)
=$0f			garbfl         =    $0f       ;  15 Flag for list, Garbage collection, ...
=$10			subflg         =    $10       ;  16 Flag: Subscript reference to an array or ...
=$11			inpflg         =    $11       ;  17 Flag: Is data input to GET, READ or INPUT.
=$12			tansgn         =    $12       ;  18 Flag: Sign of result of TAN or SIN.
=$13			channl         =    $13       ;  19 Current i/o channel # (CMD logical file).
=$14			linnum         =    $14       ;  20-21 Integer line number value.
=$16			temppt         =    $16       ;  22 Ptr to next space in temp. string stack.
=$17			lastpt         =    $17       ;  23-24 Ptr to last string in temp. string stack.
=$2b			txttab         =    $2b       ;  43-44 Ptr to start of BASIC Program text.
=$2d			vartab         =    $2d       ;  45-46 Ptr to start of BASIC Variable area.
=$2f			arytab         =    $2f       ;  47-48 Ptr to start of BASIC Array area.
=$31			strebd         =    $31       ;  49-50 Ptr to END of BASIC Array area(+1) ...
=$33			fretop         =    $33       ;  51-52 Ptr to bottom of string text area.
=$35			frespc         =    $35       ;  53-54 Temp. ptr for string.
=$37			memsiz         =    $37       ;  55-56 Ptr to highest address used by BASIC.
=$39			curlib         =    $39       ;  57-58 Current BASIC line number.
=$3b			oldlin         =    $3b       ;  59-60 Previous BASIC line number.
=$3d			oldtxt         =    $3d       ;  61-62 Ptr to current BASIC statement address.
=$3f			datlin         =    $3f       ;  63-64 Current DATA line number.
=$41			datptr         =    $41       ;  65-66 Current DATA item address ptr.
=$43			impptr         =    $43       ;  67-68 GET, READ or INPUT info. source ptr.
=$45			varnam         =    $45       ;  69-70 Current BASIC variable name.
=$47			varpnt         =    $47       ;  71-72 Ptr to current BASIC variable value.
=$49			forpnt         =    $49       ;  73-74 Temp Ptr to index variable used by FOR.
=$4b			opptr          =    $4b       ;  75-76 Math operator table displacement.
=$4d			opmask         =    $4d       ;  77 Mask for comparison operation.
=$4e			defpnt         =    $4e       ;  78-79 Pointer to current FN descriptor.
=$50			dscpnt         =    $50       ;  80-82 Tmp ptr to current string descriptor.
=$53			four6          =    $53       ;  83 Constant of garbage collector.
=$54			jmper          =    $54       ;  84-86 Jump to function Instruction.
=$61			fac1           =    $61       ;  97-102 Floating point Accumulator #1
=$73			chrget         =    $73       ; 115
=$79			chrgot         =    $79       ; 121
=$90			kiostatus      =    $90       ; 144 Kernal I/O status word (st) (byte)
=$b7			curfnlen       =    $b7       ; 183 Current filename length (byte)
=$b9			cursecadd      =    $b9       ; 185 Current secondary address (byte)
=$ba			curdevno       =    $ba       ; 186 Current device number (byte)
=$bb			curfptr        =    $bb       ; 187 Current file pointer (word)
=$c1			stal           =    $c1       ; $c1-$c2 (193-194) ptr to ram address to load/save
=$c5			lstx           =    $c5       ; 197 matrix coordinate of last key pressed
=$c6			ndx            =    $c6       ; 198 Number of character in keyboard buffer
=$fb			zpage1         =    $fb       ; 251 zero page 1 address (word)
=$fd			zpage2         =    $fd       ; 253 zero page 2 address (word)
=$fb			zeropage       =    zpage1
=$fd			zonepage       =    zpage2
=$277			kbbuff         =    $277      ; 631
=$286			carcol         =    $286      ; 646 basic next chr colscreenram (byte)
=$288			hibase         =    $288      ;648
=$286			kcarcol        =    carcol
=$286			bascol         =    carcol
=$28d			shflag         =    $28d      ; 653
=$30a			ieval          =    $30a
=$314			cinv           =    $314      ; $314-$315 brk instruction interupt
=$33c			tbuffer        =    $33c      ; 828-1019 Cassette i/o buffer
=$326			ibsout         =    $326      ; 806
=$33c			tpbuff         =    $33c      ; $033c-$03fb (828-1019)
=$400			scrnram        =    $400      ; 1024 video character ram
=$400			scrram0        =    scrnram   ; 1024
=$500			scrram1        =    $500      ; 1280
=$600			scrram2        =    $600      ; 1536
=$700			scrram3        =    $700      ; 1792
=$801			basicsta       =    $801      ; 2049  basic start address
=$a000			basicrom       =    $a000     ; 40960 Basic rom base address
=$d400			sid            =    $d400     ; 54272 sid base address
=$d800			colorram       =    $d800     ; 55296 video color ram
=$d800			colram0        =    colorram  ; 55296
=$d900			colram1        =    $d900     ; 55552
=$da00			colram2        =    $da00     ; 55808
=$db00			colram3        =    $db00     ; 56064
=$dc00			cia1           =    $dc00     ; 56320 cia1 base address
=$dc00			cia1pra        =    $dc00     ; 56320 cia1 dataport A (keyboard column Write)
=$dc01			cia1prb        =    $dc01     ; 56321 cia1 dataport B (keyboard row read)
=$dc02			cia1ddra       =    $dc02     ; 56322 cia1 data direction A
=$dc03			cia1ddrb       =    $dc03     ; 56323 cia1 data direction B
=$dc04			cia1tmalo      =    $dc04     ; 56324 cia1 timer A low byte
=$dc05			cia1tmahi      =    $dc05     ; 56325 cia1 timer A high byte
=$dc06			cia1tmblo      =    $dc06     ; 56326 cia1 timer B low byte
=$dc07			cia1tmbhi      =    $dc07     ; 56327 cia1 timer B high byte
=$dc08			cia1todten     =    $dc08     ; 56328 cia1 time of day clock seconds/10
=$dc09			cia1todsec     =    $dc09     ; 56329 cia1 time of day clock seconds
=$dc0a			cia1todmin     =    $dc0a     ; 56330 cia1 time of day clock minutes
=$dc0b			cia1todhrs     =    $dc0b     ; 56331 cia1 time of day clock hours
=$dc0c			cia1sdr        =    $dc0c     ; 56332 cia1 serial data port
=$dc0d			cia1icr        =    $dc0d     ; 56333 cia1 Interupt control register
=$dc0e			cia1cra        =    $dc0e     ; 56334 cia1 control register A
=$dc0f			cia1crb        =    $dc0f     ; 56335 cia1 control register B
=$dd00			cia2           =    $dd00     ; 56576 cia2 base address
=$dd00			cia2pra        =    $dd00     ; 56576 cia2 dataport A
=$dd01			cia2prb        =    $dd01     ; 56577 cia2 dataport B
=$dd02			cia2ddra       =    $dd02     ; 56578 cia2 data direction A
=$dd03			cia2ddrb       =    $dd03     ; 56579 cia2 data direction B
=$dd04			cia2tmalo      =    $dd04     ; 56580 cia2 timer A low byte
=$dd05			cia2tmahi      =    $dd05     ; 56581 cia2 timer A high byte
=$dd06			cia2tmblo      =    $dd06     ; 56582 cia2 timer B low byte
=$dd07			cia2tmbhi      =    $dd07     ; 56583 cia2 timer B high byte
=$dd08			cia2todten     =    $dd08     ; 56584 cia2 time of day clock seconds/10
=$dd09			cia2todsec     =    $dd09     ; 56585 cia2 time of day clock seconds
=$dd0a			cia2todmin     =    $dd0a     ; 56586 cia2 time of day clock minutes
=$dd0b			cia2todhrs     =    $dd0b     ; 56587 cia2 time of day clock hours
=$dd0c			cia2sdr        =    $dd0c     ; 56588 cia2 serial data port
=$dd0d			cia2icr        =    $dd0d     ; 56589 cia2 Interupt control register
=$dd0e			cia2cra        =    $dd0e     ; 56590 cia2 control register A
=$dd0f			cia2crb        =    $dd0f     ; 56501 cia2 control register B
=$e000			kernalrom      =    $e000     ; 57344 start of kernal rom
=$ea31			irq            =    $ea31     ; 59953 irq entry point
=$03			bstop          =    $03       ;  03 [STOP],     [CTRL]-[C]
=$05			bwhite         =    $05       ;  05 [CTRL]+[2], [CTRL]-[E], Set colour to WHITE
=$08			block          =    $08       ;  08 Disable char map switch with [SHIFT]+[C=]
=$09			bunlock        =    $09       ;  09 Enabled char map switch with [SHIFT]+[C=]
=$0d			bcarret        =    $0d       ;  11 [RETURN]
=$0e			btext          =    $0e       ;  14 CTRL]-[N] select Upper/lowercase charset
=$11			bcrsdn         =    $11       ;  17 [CRS-D]           Cursor DOWN 1 line
=$12			brevcol        =    $12       ;  18 [CTRL]+[9]        REVERSE VIDEO ON
=$13			bhome          =    $13       ;  19 [HOME]            Cursor HOME
=$14			bdelete        =    $14       ;  20 [DELETE]          Delete 1 char
=$1c			bred           =    $1c       ;  28 [CTRL]+[3]        Set colour to RED
=$1d			bcuright       =    $1d       ;  29 [CRS-R]           Cursor RIGHT
=$1e			bgreen         =    $1e       ;  30 [CTRL]+[6]        Set colour to GREEN
=$1f			bblue          =    $1f       ;  31 [CTRL]+[7]        Set colour to BLUE
=$81			borange        =    $81       ; 129 [C=]+[1]          Set colour to ORANGE
=$85			f1key          =    $85       ; 133 [F1]
=$86			f2key          =    $86       ; 134 [F2]
=$87			f3key          =    $87       ; 135 [F3]
=$88			f4key          =    $88       ; 136 [F4]
=$89			f5key          =    $89       ; 137 [F5]
=$8a			f6key          =    $8a       ; 138 [F6]
=$8b			f7key          =    $8b       ; 139 [F7]
=$8c			f8key          =    $8c       ; 140 [F8]
=$8d			bcarret1       =    $8d       ; 141 [SHIFT]+[RETURN]
=$8e			bgraph         =    $8e       ; 142 select Uppercase+graphics charset
=$90			bblack         =    $90       ; 144 [CTRL]+[1]        Set colour to BLACK
=$91			bcuup          =    $91       ; 145 [SHIFT]+[CRS-D]   cursor UP 1 line
=$92			brevoff        =    $92       ; 146 [CTRL]+[0]        REVERSE VIDEO OFF
=$93			bclear         =    $93       ; 147 [SHIFT]+[HOME]    CLEAR SCREEN
=$94			binsert        =    $94       ; 148 [SHIFT]+[DELETE]  INSERT a char
=$95			bbrown         =    $95       ; 149 [C=]+[2]          Set colour to BROWN
=$96			bltred         =    $96       ; 150 [C=]+[3]          Set colour to PINK
=$97			bdkgrey        =    $97       ; 151 [C=]+[4]          Set colour to DARK GREY
=$98			bmdgrey        =    $98       ; 152 [C=]+[5]          Set colour to MEDIUM GREY
=$99			bltgreen       =    $99       ; 153 [C=]+[6]          Set colour to LIGHT GREEN
=$9a			bltblue        =    $9a       ; 154 [C=]+[7]          Set colour to LIGHT BLUE
=$9b			bltgrey        =    $9b       ; 155 [C=]+[8]          Set colour to LIGHT GREY
=$9c			bmagenta       =    $9c       ; 156 [CTRL]+[5]        Set colour to MAGENTA
=$9d			bculeft        =    $9d       ; 157 [SHIFT]+[CRS-R]   cursor RIGHT 1 pos
=$9e			byellow        =    $9e       ; 158 [CTRL]+[8]        Set colour to YELLOW
=$9f			bcyan          =    $9f       ; 159 [CTRL]+[4]        Set colour to CYAN
=$a0			bspace1        =    $a0       ; 169                   space
=$e0			bspace2        =    $e0       ; 224                   space
=$0			cnoir          =    $0
=$1			cblanc         =    $1
=$2			crouge         =    $2
=$3			cocean         =    $3
=$4			cmauve         =    $4
=$5			cvert          =    $5
=$6			cbleu          =    $6
=$7			cjaune         =    $7
=$8			corange        =    $8
=$9			cbrun          =    $9
=$a			crose          =    $a
=$b			cgrisfonce     =    $b
=$c			cgrismoyen     =    $c
=$d			cvertpale      =    $d
=$e			cbleupale      =    $e
=$f			cgrispale      =    $f
=$0			cblack         =    $0
=$1			cwhite         =    $1
=$2			cred           =    $2
=$3			ccyan          =    $3
=$4			cpurple        =    $4
=$5			cgreen         =    $5
=$6			cblue          =    $6
=$7			cyellow        =    $7
=$9			cbrown         =    $9
=$a			clightred      =    $a
=$b			cdarkgray      =    $b
=$c			cmidgray       =    $c
=$d			clightgreen    =    $d
=$e			clightblue     =    $e
=$f			clightgray     =    $f
=$00			vnoir          =    %00000000
=$00			vblack         =    %00000000
=$01			vblanc         =    %00000001
=$01			vwhite         =    %00000001
=$02			vrouge         =    %00000010
=$02			vred           =    %00000010
=$03			vocean         =    %00000011
=$03			vcyan          =    %00000011
=$04			vmauve         =    %00000100
=$04			vpurple        =    %00000100
=$05			vvert          =    %00000101
=$05			vgreen         =    %00000101
=$06			vbleu          =    %00000110
=$06			vblue          =    %00000110
=$07			vjaune         =    %00000111
=$07			vyellow        =    %00000111
=$08			vorange        =    %00001000
=$09			vbrun          =    %00001001
=$09			vbrown         =    %00001001
=$0a			vrose          =    %00001010
=$0a			vpink          =    %00001010
=$0b			vgris          =    %00001011
=$0b			vgray          =    %00001011
=$0b			vgrey          =    %00001011
=$0c			vgris1         =    %00001100
=$0c			vgray1         =    %00001100
=$0c			vgrey1         =    %00001100
=$0d			vvert1         =    %00001101
=$0d			vgreen1        =    %00001101
=$0e			vbleu1         =    %00001110
=$0e			vblue1         =    %00001110
=$0f			vgris2         =    %00001111
=$0f			vgray2         =    %00001111
=$0f			vgrey2         =    %00001111
=$e1d4			setprms= $e1d4 ; Set parameters for LOAD, SAVE, and verify
=$ed09			stalk  = $ed09 ; Send Talk command to serial bus.
=$ed0c			slisten= $ed0c ; Send LISTEN command to serial bus.
=$ed40			sflush = $ed40 ; Flush serial bus output cache at memory address $0095, to
=$edb9			slisten2= $edb9 ; Send LISTEN secondary addressto serial bus.
=$edb9			stalk2 = $edb9 ; Send TALK secondary addressto serial bus.
=$eddd			sbout  = $eddd ; Write byte to serial bus.
=$edef			sutalk = $edef ; Send UNTalk command to serial bus.
=$edfe			sulisten= $edfe ; Send UNLISTEN command to serial bus.
=$ee85			sclkhigh= $ee85 ; Set CLOCK OUT to High
=$ee8e			sclklow= $ee8e ; Set CLOCK OUT to low
=$ee97			sdathigh= $ee97 ; Set DATA OUT to High
=$eea0			sdatlow= $eea0 ; Set DATA OUT to low
=$eea9			sclkdta= $eea9 ; Read CLOCK IN and DATA IN.
=$f1ad			sbread = $f1ad ; Read one byte from serial port.
=$f237			sstdin = $F237 ; Define serial bus as standard input; do not send TALK
=$f279			sstdout= $F279 ; Define serial bus as standard output; do not send LISTEN
=$f3d5			sfopen = $F3D5 ; Open file on serial bus; do not send file name if secondary
=$f528			sutclose= $F528 ; Send UNTALK and CLOSE command to serial bus.
=$f63f			sulclose= $F63F ; Send UNLISTEN and CLOSE command to serial bus.
=$f642			sfclose= $F642 ; Close file on serial bus; do not send CLOSE secondary address
=$fe21			stimeout= $FE21 ; Unknown. (Set serial bus timeout.)
=$ffa5			acptr  = $ffa5 ; jmp $ee13 Recoit un caractere provenant du port serie
=$ffc6			chkin  = $ffc6 ; jmp ($031e) Define an input channel.
=$ffc9			chkout = $ffc9 ; jmp ($0320) Define an output channel.
=$ffcf			chrin  = $ffcf ; jmp ($0324) Get a character from the input channel
=$ffd2			chrout = $ffd2 ; jmp ($0326) Output a character
=$ff81			cint   = $ff81 ; jsr $e518 Initialize the screen editor and vic-ii chip
=$ffa8			ciout  = $ffa8 ; jmp $eddd Transmit a byte over the serial bus
=$ffe7			clall  = $ffe7 ; jmp ($032c) Close all open files
=$ffc3			close  = $ffc3 ; jmp ($031c) Close a logical file
=$ffcc			clrchn = $ffcc ; jmp ($0322) - Clear all i/o channels.
=$ffe4			getin  = $ffe4 ; jmp ($032a) Get a character.
=$fff3			iobase = $fff3 ; jmp $e500 Define i/o memory page
=$ff84			ioinit = $ff84 ; ($fda3) Initialize i/o devices.
=$ffb1			listen = $ffb1 ; jmp ($ed0c) Command a device on the serial bus to listen.
=$ffd5			load   = $ffd5 ; jmp $f4e9 Load device to RAM.
=$ff9c			membot = $ff9c ; jmp $fe34 Get/set bottom of memory.
=$ff99			memtop = $ff99 ; jmp $fe25 Get/Set top of ram
=$ffc0			open   = $ffc0 ; jmp ($031a) Open a logical file
=$fff0			plot   = $fff0 ; jmp $e50a Set or retrieve cursor location x=column, y=line
=$ff87			ramtas = $ff87 ; ($fd50) Initialise ram, tape buffer and screen.
=$ffde			rdtim  = $ffde ; jmp $f6dd Read system clock
=$ffb7			readst = $ffb7 ; jmp $fe07 Read i/o status word
=$ff8a			restor = $ff8a ; jmp $fd15 Restore default I/O vectors.
=$ffd8			save   = $ffd8 ; jmp $f5dd Save memory to a device.
=$ff9f			scnkey = $ff9f ; jmp $ea87 Scan the keyboard
=$ffed			screen = $ffed ; jmp $e505 Return screen format
=$ff93			second = $ff93 ; jmp $edb9 Send secondary address after listen
=$ffba			setlfs = $ffba ; jmp $fe00 Set up a logical file
=$ff90			setmsg = $ff90 ; jmp $fe18 Set kernal message output flag
=$ffbd			setnam = $ffbd ; jmp $fdf9 Set up file name
=$ffdb			settim = $ffdb ; jmp $f6e4 Set the system clock.
=$ffa2			settmo = $ffa2 ; jmp $fe21 Set ieee bus card timeout flag
=$ffe1			stop   = $ffe1 ; jmp ($0328) Check if stop key is pressed.
=$ffb4			talk   = $ffb4 ; jmp $ed09 Command a device on the serial bus to talk
=$ff96			tksa   = $ff96 ; jmp $edc7 Send a secondary address to a device commanded to talk
=$ffea			udtim  = $ffea ; jmp $f69b Update the system clock
=$ffae			unlsn  = $ffae ; jmp $edfe Send an unlisten command
=$ffab			untlk  = $ffab ; jmp $edef Send an untalk command
=$ff8d			vector = $ff8d ; jmp $fd1a Read/set I/O vectors.
=$e043			kd_poly1       =    $e043
=$e059			kd_poly2       =    $e059
=$e08d			kd_rmulc       =    $e08d       ;
=$e092			kd_raddc       =    $e092       ;
=$e097			kd_rnd         =    $e097
=$e12a			kd_sys         =    $e12a
=$e156			kd_save        =    $e156
=$e165			kd_verify      =    $e165
=$e168			kd_load        =    $e168
=$f1ca			kd_chrout      =    $f1ca
=$ff81			kcint          =    cint           ;   , init vic + ecran.
=$ff84			kioinit        =    ioinit         ;   , init i/o dev.
=$ff87			kramtas        =    ramtas         ;   , test de memoire.
=$ffa8			kciout         =    ciout          ;a  ,tx byte  acia
=$ff8a			krestor        =    restor         ;   , set ram plafond
=$ff8d			kvector        =    vector         ;
=$ff90			ksetmsg        =    setmsg         ;a  , set sys. msg. out
=$ff93			ksecond        =    second         ;a  , tx adresse sec.
=$ff96			ktksa          =    tksa           ;a  , talk adresse sec.
=$ff99			kmemtop        =    memtop         ; yx, (c) get mem high
=$ff9c			kmembot        =    membot         ; yx, (c) get mem low
=$ff9f			kscankey       =    scnkey         ;   , scan clavier
=$ffa2			ksettmo        =    settmo         ;a  , set ieee timeout
=$ffa5			kacptr         =    acptr          ;a  ,rx serie.
=$ffab			kuntlk         =    untlk          ;   , iec-cmc stop talk
=$ffae			kunlsn         =    unlsn          ;   , iec-cmd stop lsn
=$ffb1			klisten        =    listen         ;a  , iec-cmd dev ecout
=$ffb4			ktalk          =    talk           ;a  , iec-cmd dev parle
=$ffb7			kreadst        =    readst         ;a  , lecture i/o stats
=$ffba			ksetlfs        =    setlfs         ;ayx, init fich logi.
=$ffbd			ksetnam        =    setnam         ;ayx, init num.nom.fich
=$ffc0			kopen          =    open           ;axy, ouvre fich-nom
=$ffc3			kclose         =    close          ;a  , ferme fichier #a.
=$ffc6			kchkin         =    chkin          ;  x,open canal in.
=$ffc9			kchkout        =    chkout         ;  x,open canal out
=$ffcc			kclrchn        =    clrchn         ;   , ferme canaux i/o.
=$ffcf			kchrin         =    chrin          ;a  ,recup. un car.
=$ffd2			kchrout        =    chrout         ;a  ,sort un car.
=$ffd5			kload          =    load           ;ayx, dev->ram
=$ffd8			ksave          =    save           ;   , sauve mem->dev
=$ffdb			ksettim        =    settim         ;axy, init sysclock
=$ffde			krdtim         =    rdtim          ;axy, lecture sysclock
=$ffe1			kstop          =    stop           ;a  , ret. stopkey stat
=$ffe4			kgetin         =    getin          ;a  , recup. car. #dev.
=$ffe7			kclall         =    clall          ;   , ferme fichiers.
=$ffea			kudtim         =    udtim          ;   , maj sysclock
=$ffed			kscreen        =    screen         ; yx, get format ecran
=$fff0			kplot          =    plot           ; yx, (c) get csr pos.
=$fff3			kiobase        =    iobase         ; yx, def. i/o mem page
=$e39a			k_echostartup  =    $e39a
=$e716			k_putch        =    $e716; 52) Print a character.          ;a--;---; a= char
=$e7a0			k_cls          =    $e7a0
=$e87c			k_cursordown   =    $e87c
=$e8ea			k_scrollup     =    $e8ea
=$e94e			k_home         =    $e94e
=$e965			k_insertline   =    $e965
=$e9c8			k_screlldown   =    $e9c8
=$ed0c			k_devsndlstn   =    $ed0c; 55) Send 'LISTEN'>IEEE/Serial.  ;a--;---; a= dev #
=$ee13			k_ieeein       =    $ee13; 60) Input from IEEE/Serial.     ;---;a--; a= Data byte
=$eef6			k_devsndutalk  =    $eef6; 58) Send 'UNTALK'>IEEE/Serial.  ;---;---;
=$ef04			k_devsndulstn  =    $ef04; 59) Send 'UNLISTEN'>IEEE/Serial.;---;---;
=$f12f			k_putsysmsg    =    $f12f; 53) Print system message.       ;--y;---; y= msg offset
=$f291			k_cloself      =    $f291; 61) Close logical file .        ;a--;---; a= file #
=$f49e			k_loadsub      =    $f49e; 63) LOAD subroutine.            ;axy;---; a= # start=yyxx
=$f5af			k_prnsrch      =    $f5af; 64) Print SEARCHING if imm mode.;---;---;
=$f5b3			k_echosearch   =    $f5b3; 64b) Skipping test part of 64.  ;---;---;
=$f5c1			k_prnfnam      =    $f5c1; 65) Print filename.             ;---;---;
=$f6ed			k_stop         =    $f6ed; 62) Check for STOP key.         ;---;---; z= 1 pressed
=$f7ea			k_gettaphdblk  =    $f7ea; 66) Find a tape hdr blk.        ;a--;---; a= len
=$f7ea			k_fndtaphdblk  =    $f7ea; 67) Find any tape hdr blk.      ;---;---;
=$f817			k_waittapplay  =    $f817; 68) Press PLAY... (wait)        ;---;---;
=$f841			k_rdtape2buff  =    $f841; 69) Read tape to buffer.        ;---;---;
=$f847			k_readtape     =    $f847; 70) Read tape.                 ;---;---;
=$f864			k_wrbuff2tape  =    $f864; 71) write buffer to tape.       ;---;---;
=$f869			k_wrtape       =    $f869; 72) write tape.                ;a--;---; a= ldr len
=$fb8e			k_resettapeio  =    $fb8e; 73) Reset tape I/O.             ;---;---;
=$fcbd			k_setintvect   =    $fcbd; 74) set interupt vector.        ;---;---;
=$fce2			k_coldreset    =    $fce2; 75) Power on reset.             ;---;---;
=$fce2			k_coldstart    =    $fce2; 75) Power on reset.             ;---;---;
=$fce2			k_coldboot     =    $fce2; 75) Power on reset.             ;---;---;
=$fe66			k_warmreset    =    $fe66;     Warm resetstart
=$fe66			k_warmboot     =    $fe66;     Warm resetstart
=$ff93			k_devsndaddr2  =    $ff93; 56) Send second address.        ;a--;---; a= SA or #$60
=0			kerr00         =    0    ; routine ended by the stop key.
=1			kerr01         =    1    ; too many files open.
=2			kerr02         =    2    ; file already open.
=3			kerr03         =    3    ; file not open.
=4			kerr04         =    4    ; file not found.
=5			kerr05         =    5    ; device not present.
=6			kerr06         =    6    ; file is not an input file.
=7			kerr07         =    7    ; file is not an output file.
=8			kerr08         =    8    ; file name is missing.
=9			kerr09         =    9    ; illegal device number.
=240			kerrf0         =    240  ; top-of-memory change rs-232 buffer allocation.
.2029			libtart

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/map-c64-vicii.asm

=$0400			viciiscn    =   $0400
=$0400			viciiscn0   =   $0400
=$04f0			viciiscn1   =   $04f0
=$05e0			viciiscn2   =   $05e0
=$06d0			viciiscn3   =   $06d0
=$d000			vic = $d000			; VicII C64 memorymap base address
=53248			vicsprt0x = vic+$00	; $d000, 53248 Sprt 0 Horizontal position (X)
=53249			vicsprt0y = vic+$01	; $d001, 53249 Sprt 0 Vertical position (Y)
=53250			vicsprt1x = vic+$02	; $d002, 53250 Sprt 1 Horizontal position (X)
=53251			vicsprt1y = vic+$03	; $d003, 53251 Sprt 1 Vertical position (Y)
=53252			vicsprt2x = vic+$04	; $d004, 53252 Sprt 2 Horizontal position (X)
=53253			vicsprt2y = vic+$05	; $d005, 53253 Sprt 2 Vertical position (Y)
=53254			vicsprt3x = vic+$06	; $d006, 53254 Sprt 3 Horizontal position (X)
=53255			vicsprt3y = vic+$07	; $d007, 53255 Sprt 3 Vertical position (Y)
=53256			vicsprt4x = vic+$08	; $d008, 53256 Sprt 4 Horizontal position (X)
=53257			vicsprt4y = vic+$09	; $d009, 53257 Sprt 4 Vertical position (Y)
=53258			vicsprt5x = vic+$0a	; $d00a, 53258 Sprt 5 Horizontal position (X)
=53259			vicsprt5y = vic+$0b	; $d00b, 53259 Sprt 5 Vertical position (Y)
=53260			vicsprt6x = vic+$0c	; $d00c, 53260 Sprt 6 Horizontal position (X)
=53261			vicsprt6y = vic+$0d	; $d00d, 53261 Sprt 6 Vertical position (Y)
=53262			vicsprt7x = vic+$0e	; $d00e, 53262 Sprt 7 Horizontal position (X)
=53263			vicsprt7y = vic+$0f	; $d00f, 53263 Sprt 7 Vertical position (Y)
=53264			vicspxmsb = vic+$10	; $D010, 53264
=53265			vicctrl0v  = vic+$11	; $d011, 53265
=53266			vicraster = vic+$12	; $d012, 53266	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53267			viclpenhp = vic+$13	; $d013, 53267	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53268			viclpenvp = vic+$14	; $d014, 53268	     	|b7|b6|b5|b4|b3|b2|b1|b0|
=53269			vicsprctl = vic+$15	; $d015, 53269	     	|s7|s6|s5|s4|s3|s2|s1|s0|
=53270			vicctrl1h = vic+$16	; $d016, 53270
=53271			vicsprtexv = vic+$17	; $d017, 53271	     |s7|s6|s5|s4|s3|s2|s1|s0|
=53272			vicmemptr  = vic+$18	; $d018, 53272
=53273			vicirqreg  = vic+$19	; $d019, 53273
=53274			vicirqena  = vic+$1a	; $d01a, 53274
=53275			vicsprtprio = vic+$1b 	; $d01b, 53275		|s7|s6|s5|s4|s3|s2|s1|s0|
=53276			vicsprtmcol = vic+$1c 	; $d01c, 53276		|s7|s6|s5|s4|s3|s2|s1|s0|
=53277			vicsprtexh = vic+$1d 	; $d01d, 53277		|s7|s6|s5|s4|s3|s2|s1|s0|
=53278			vicsprscol = vic+$1e 	; $d01e, 53278		|s7|s6|s5|s4|s3|s2|s1|s0|
=53279			vicsprbakcol = vic+$1f ; $d01f, 53279		|s7|s6|s5|s4|s3|s2|s1|s0|
=53280			vicbordcol = vic+$20 	; $d020, 53280		|--|--|--|--|c3|c2|c1|c0|
=53281			vicbackcol  = vic+$21 	; $d021, 53281
=53281			vicback0col = vic+$21 	; $d021, 53281		|--|--|--|--|c3|c2|c1|c0|
=53282			vicback1col = vic+$22 	; $d022, 53282		|--|--|--|--|c3|c2|c1|c0|
=53283			vicback2col = vic+$23 	; $d023, 53283		|--|--|--|--|c3|c2|c1|c0|
=53284			vicback3col = vic+$24 	; $d024, 53284		|--|--|--|--|c3|c2|c1|c0|
=53285			vicsprtmcol0 = vic+$25 	; $d025, 53285		|--|--|--|--|c3|c2|c1|c0|
=53286			vicsprtmcol1 = vic+$26 	; $d026, 53286		|--|--|--|--|c3|c2|c1|c0|
=53287			vicsprt0col = vic+$27 	; $d027, 53287		|--|--|--|--|c3|c2|c1|c0|
=53288			vicsprt1col = vic+$28 	; $d028, 53288		|--|--|--|--|c3|c2|c1|c0|
=53289			vicsprt2col = vic+$29 	; $d029, 53289		|--|--|--|--|c3|c2|c1|c0|
=53290			vicsprt3col = vic+$2a 	; $d02a, 53290		|--|--|--|--|c3|c2|c1|c0|
=53291			vicsprt4col = vic+$2b 	; $d02b, 53291		|--|--|--|--|c3|c2|c1|c0|
=53292			vicsprt5col = vic+$2c 	; $d02c, 53292		|--|--|--|--|c3|c2|c1|c0|
=53293			vicsprt6col = vic+$2d 	; $d02d, 53293		|--|--|--|--|c3|c2|c1|c0|
=53294			vicsprt7col = vic+$2e 	; $d02e, 53294		|--|--|--|--|c3|c2|c1|c0|

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/map-c64-basic2.asm

=144			b_black        =    144  ;0,  ctrl-1
=5			b_white        =    5    ;1,  ctrl-2
=28			b_red          =    28   ;2,  ctrl-3
=159			b_cyan         =    159  ;3,  ctrl-4
=156			b_purple       =    156  ;4,  ctrl-5
=30			b_green        =    30   ;5,  ctrl-6
=31			b_blue         =    31   ;6,  ctrl-7
=158			b_yellow       =    158  ;7,  ctrl-8
=129			b_orange       =    129  ;8,  C=-1
=149			b_brown        =    149  ;9,  C=-2
=150			b_ltred        =    150  ;10, C=-3
=155			b_gray3        =    155  ;11, C=-4
=155			b_grey3        =    155  ;11, C=-4
=152			b_gray2        =    152  ;12, C=-5
=152			b_grey2        =    152  ;13, C=-5
=153			b_ltgreen      =    153  ;13, C=-6
=154			b_ltblue       =    154  ;14, C=-7
=151			b_gray1        =    151  ;15, C=-8
=151			b_grey1        =    151  ;15, C=-8
=18			b_rvs_on       =    18   ;    ctrl-9
=146			b_rvs_off      =    146  ;    ctrl-0
=14			b_lowercase    =    14
=142			b_uppercase    =    142
=145			b_crsr_up      =    145
=17			b_crsr_down    =    17
=157			b_crsr_left    =    157
=29			b_crsr_right   =    29
=19			b_home         =    19
=147			b_clr_home     =    147
=20			b_insert       =    20
=141			b_shft_ret     =    141
=148			b_delete       =    148
=133			b_f1           =    133
=137			b_f2           =    137
=134			b_f3           =    134
=138			b_f4           =    138
=135			b_f5           =    135
=139			b_f6           =    139
=136			b_f7           =    136
=140			b_f8           =    140
=8			b_dis_cmd      =    8
=9			b_ena_cmd      =    9
=172			b_ul           =    172
=187			b_ur           =    187
=188			b_ll           =    188
=190			b_lr           =    190
=182			b_vl           =    182
=181			b_vr           =    181
=184			b_bo           =    184
=185			b_to           =    185
=$a3bb			b_opentxtspc  = $a3bb ; Open space in BASIC text.   ;a-y;---; Array top $yyaa
=$a408			b_chkavailmem = $a408 ; Check available Memory. *1  ;a-y;---; Array top $yyaa
=$a435			b_outofmem    = $a435 ; ?Out of memory.             ;---;---;
=$a437			b_errormesg   = $a437 ; Send BASIC error message.   ;a--;---; a = errno
=$a474			b_warmstart   = $a474 ; Basic warm start.           ;---;---;
=$a48a			b_chrget      = $a48a ; Main CHRGET entry.          ;---;---;
=$a49c			b_newline     = $a49c ; Crunch tokens, insert line. ;-x-;---; x = buff len
=$a52a			b_clrready    = $a52a ; Fix chaining CLR and READY. ;---;---;
=$a533			b_fixchaining = $a533 ; Fix chaining.               ;---;---;
=$a560			b_kbgetline   = $a560 ; Recieve line from keyboard.
=$a579			b_crunchtkns  = $a579 ; Crunch token. *7            ;-x-;---: x = buff len
=$a613			b_findline    = $a613 ; Find line in BASIC.         ;ax-;---; strBAS = $xxaa
=$a642			b_new         = $a642 ; Do NEW                      ;---;---;
=$a659			b_resetclr    = $a659 ; Reset BASIC and do CLR      ;---;---;
=$a65e			b_clr         = $a65e ; Do CLR                      ;---;---;
=$a68e			b_rstchrget   = $a68e ; Rst CHRGET to BASIC start   ;---;a--; strBAS hi
=$a857			b_continue    = $a857 ; Do CONTINUE.                ;a-y;---; curline $yyaa
=$a96b			b_getint      = $a96b ; Get int from BASIX text.    ;---;---;
=$aad3			b_sndcr       = $aad3 ; Send RETURN, LF in scr mode.;---;a--; a = LF
=$aad7			b_sndcrlf     = $aad7 ; Send RETURN, LINEFEED.      ;---;a--; a = LF
=$ab1e			b_outstr_ay   = $ab1e ; Print string from $yyaa.    ;a-y;---; sptr = $yyaa
=$ab1e			b_puts        = b_outstr_ay
=$ab24			b_outstrprep  = $ab24 ; Print precomputated string. ;a--;---; a = strlen
=$ab45			b_printqm     = $ab45 ; Print '?'.                  ;---;---;
=$ab47			b_sendchar    = $ab47 ; Send char in a to device.   ;a--;a--; a = char
=$ad8a			b_frmnum      = $ad8a ; Evaluate numeric expression and/or check for data type mismatch
=$ad9e			b_evalexpr    = $ad9e ; Evaluate expression.
=$aefd			b_chk4comma   = $aefd ; Check for coma.             ;---;a--; a = char
=$aefa			b_chk4lpar    = $aefa ; check for '('.              ;---;a--; a = char
=$aef7			b_chk4rpar    = $aef7 ; check for ')'.              ;---;a--; a = char
=$af08			b_syntaxerr   = $af08 ; send 'SYNTAX ERROR'.        ;---;---;
=$b0e7			b_fndfloatvar = $b0e7 ; find float var by name.     ;---;a-y; addr = $yyaa
=$b185			b_bumpvaraddr = $b185 ; Bumb var addr by 2. *31     ;---;a-y; addr = $yyaa
=$b1bf			b_float2int   = $b1bf ; Float to int in Acc#1.      ;---;---;
=$b248			b_fcerr       = $b248 ; Print ILLEGAL QUANTITY error message.
=$b391			b_int2float   = $b391 ; Int to float in Acc#1.      ;---;---;
=$b79e			b_getacc1lsb  = $b79e ; Get Acc#1 LSB in x.         ;---;-x-; x = Acc#1 LSB
=$b7b5			b_str2float   = $b7b5 ; Evaluate str to float (VAL) ;---;---;
=$b7b9			b_strxy2float = $b7b9 ; Eval. float from str in xy. ;---;-xy; strptr = $yyxx
=$b7eb			b_getpokeprms = $b7eb ; Get 2 params for POKE, WAIT.;---;-x-; x = Param2
=$b7f7			b_getadr      = $b7f7 ; Convert Floating point number to an Unsighed TwoByte Integer.
=$b867			b_memfloatadd = $b867 ; Add from memory.            ;a-y;---; ptr = $yyaa
=$ba28			b_memfloatmul = $ba28 ; Multiply from memory.       ;a-y;---; ptr = $yyaa
=$bae2			b_acc1mul10   = $bae2 ; Multiply Acc#1 by 10.       ;---;---; ptr = $yyaa
=$bba2			b_memvar2acc1 = $bba2 ; Unpack mem var to Acc#1.    ;a-y;---; ptr = $yyaa
=$bbd7			b_copyacc12xy = $bbd7 ; Copy Acc#1 to mem location. ;-xy;---; ptr = $yyxx
=$bbfc			b_acc2toacc1  = $bbfc ; Move Acc#2 to Acc#1.        ;---;---;
=$bc0c			b_rndac1ac2   = $bc0c ; Move rnd Acc#1 to Acc#2.    ;---;---;
=$bc0f			b_urndac1ac2  = $bc0f ; Move unrnd Acc#1 to Acc#2.  ;---;---;
=$bc1b			b_rndac1      = $bc1b ; Round Acc#1.                ;---;---;
=$bdcd			b_putint      = $bdcd ; Print fix point value.      ;ax-;---; Value = $xxaa
=$bdd7			b_putfloat    = $bdd7 ; Print Acc#1 float.          ;---;---;
=$bddd			b_num2str     = $bddd ; Cnv num to str at $0100. *48;a-y;---; a=#$00, y=#$01

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-c64-vicii.asm

.2029			screendis
.2029	08		               php
.202a	48		               pha
.202b	ad 11 d0	               lda  $d011
.202e	29 ef		               and  #%11101111
.2030	8d 11 d0	               sta  $d011
.2033	68		               pla
.2034	28		               plp
.2035	60		               rts
.2036			screenena
.2036	08		               php
.2037	48		               pha
.2038	ad 11 d0	               lda  $d011
.203b	09 10		               ora  #%00010000
.203d	8d 11 d0	               sta  $d011
.2040	68		               pla
.2041	28		               plp
.2042	60		               rts

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-c64-basic2.asm

=0			bkcol=0
=0			bkcol0=0
=0			bkcol1=0
=0			bkcol2=0
=0			bkcol3=0
.2043			scrmaninit
.2043	20 71 21	               jsr  push
.2046	a9 06		               lda  #vbleu
.2048	8d 21 d0	               sta  vicbackcol
.204b	a9 05		               lda  #vvert
.204d	8d 20 d0	               sta  vicbordcol
.2050	a9 01		               lda  #vblanc
.2052	8d 86 02	               sta  bascol
.2055	ad 00 04	               lda  scrnram
.2058	8d 00 04	               sta  scrnram
.205b	20 63 20	               jsr  cls
.205e	20 b0 21	               jsr  pop
.2061	60		               rts
>2062	8e		characterset   .byte b_uppercase
.2063			cls
.2063	08		               php
.2064	48		               pha
.2065	a9 93		               lda  #$93
.2067	20 7a 20	               jsr  putch
.206a	68		               pla
.206b	28		               plp
.206c	60		               rts
.206d			putnch
.206d	08		               php
.206e	e0 00		               cpx  #$00
.2070	f0 06		               beq  out
.2072	20 d2 ff	again          jsr  $ffd2
.2075	ca		               dex
.2076	d0 fa		               bne  again
.2078	28		out            plp
.2079	60		               rts
.207a			putch
.207a	08		               php
.207b	20 d2 ff	               jsr  $ffd2
.207e	28		               plp
.207f	60		               rts
.2080			puts
.2080	20 71 21	               jsr  push
.2083	86 fb		               stx  zpage1
.2085	84 fc		               sty  zpage1+1
.2087	a0 00		               ldy  #0
.2089	b1 fb		next           lda  (zpage1),y
.208b	f0 09		               beq  exit
.208d	20 7a 20	               jsr  putch
.2090	20 78 22	               jsr  inczp1
.2093	4c 89 20	               jmp  next
.2096	20 b0 21	exit           jsr  pop
.2099	60		               rts
.209a			gotoxy
.209a	08		               php
.209b	18		               clc
.209c	8a		               txa
.209d	48		               pha
.209e	98		               tya
.209f	aa		               tax
.20a0	68		               pla
.20a1	a8		               tay
.20a2	20 f0 ff	               jsr  kplot
.20a5	28		               plp
.20a6	60		               rts
.20a7			cursor
=$0286			bascol    =    $0286
.20a7	08		               php
.20a8	48		               pha
.20a9	90 12		               bcc  restore
.20ab	20 f0 ff	               jsr  kplot
.20ae	8c cf 20	               sty  cx
.20b1	8e d0 20	               stx  cy
.20b4	ad 86 02	               lda  bascol
.20b7	8d d1 20	               sta  bcol
.20ba	4c cc 20	               jmp  out
.20bd	ae d0 20	restore        ldx  cy
.20c0	ac cf 20	               ldy  cx
.20c3	20 f0 ff	               jsr  kplot
.20c6	ad d1 20	               lda  bcol
.20c9	8d 86 02	               sta  bascol
.20cc	68		out            pla
.20cd	28		               plp
.20ce	60		               rts
>20cf	00		cx   .byte     $00
>20d0	00		cy   .byte     $00
>20d1	00		bcol .byte     $00
.20d2			cursave
.20d2	08		               php
.20d3	38		               sec
.20d4	20 a7 20	               jsr  cursor
.20d7	28		               plp
.20d8	60		               rts
.20d9			curput
.20d9	08		               php
.20da	18		               clc
.20db	20 a7 20	               jsr  cursor
.20de	28		               plp
.20df	60		               rts
.20e0			putsxy
.20e0	20 71 21	               jsr  push
.20e3	86 fb		               stx  zpage1
.20e5	84 fc		               sty  zpage1+1
.20e7	a0 00		               ldy  #$00
.20e9	b1 fb		               lda  (zpage1),y
.20eb	aa		               tax
.20ec	20 78 22	               jsr  inczp1
.20ef	b1 fb		               lda  (zpage1),y
.20f1	a8		               tay
.20f2	20 9a 20	               jsr  gotoxy
.20f5	20 78 22	               jsr  inczp1
.20f8	a6 fb		               ldx  zpage1
.20fa	a4 fc		               ldy  zpage1+1
.20fc	20 80 20	               jsr  puts
.20ff	20 b0 21	               jsr  pop
.2102	60		               rts
>2103	00 00		straddr   .word     $00
>2105	00		px        .byte     $00
>2106	00		py        .byte     $00
>2107	00 00		zp1       .word     $00
.2109			putscxy
.2109	20 71 21	               jsr  push
.210c	84 fc		               sty  zpage1+1
.210e	86 fb		               stx  zpage1
.2110	ad 86 02	               lda  bascol
.2113	8d 33 21	               sta  bc
.2116	a0 00		               ldy #$00
.2118	b1 fb		               lda  (zpage1),y
.211a	8d 86 02	               sta  bascol
.211d	20 78 22	               jsr  inczp1
.2120	a6 fb		               ldx  zpage1
.2122	a4 fc		               ldy  zpage1+1
.2124	20 e0 20	               jsr  putsxy
.2127	ad 33 21	               lda  bc
.212a	8d 86 02	               sta  bascol
.212d	20 b0 21	               jsr  pop
.2130	60		               rts
>2131	00 00		straddr  .word      $00
>2133	00		bc       .byte      $00
>2134	00 00		zp1      .word      $00
.2136			putrahex
.2136	08		               php
.2137	48		               pha
.2138	20 8e 23	               jsr  a2hex
.213b	a9 2d		               lda  #<a2hexstr
.213d	a0 23		               ldy  #>a2hexstr
.213f	20 80 20	               jsr  puts
.2142	68		               pla
.2143	28		               plp
.2144	60		               rts
.2145			kputrahexxy
.2145			bputrahexxy
.2145			putrahexxy
.2145	08		               php
.2146	20 8e 23	               jsr  a2hex
.2149	a9 2a		               lda  #<a2hexpos
.214b	a0 23		               ldy  #>a2hexpos
.214d	20 e0 20	               jsr  putsxy
.2150	68		               pla
.2151	28		               plp
.2152	60		               rts
.2153			putrahexcxy
.2153	08		               php
.2154	20 8e 23	               jsr  a2hex
.2157	a9 2a		               lda  #<a2hexpos
.2159	a0 23		               ldy  #>a2hexpos
.215b	20 09 21	               jsr  putscxy
.215e	68		               pla
.215f	28		               plp
.2160	60		               rts
.2161			setinverse
.2161	48		               pha
.2162	a9 12		               lda  #$12
.2164	20 d2 ff	               jsr  $ffd2
.2167	68		               pla
.2168	60		               rts
.2169			clrinverse
.2169	48		               pha
.216a	a9 92		               lda  #$92
.216c	20 d2 ff	               jsr  $ffd2
.216f	68		               pla
.2170	60		               rts

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-cbm-pushpop.asm

.2171			push
.2171	08		          php            ; stack : flg, pcl, pch
.2172	78		          sei
.2173	8d ad 21	          sta  ra        ; save a
.2176	68		          pla            ; stack : pcl, pch
.2177	8d ac 21	          sta  rp        ; save rp
.217a	68		          pla            ; stack : pch
.217b	8d ae 21	          sta  pc        ; save pcl
.217e	68		          pla            ; stack : -
.217f	8d af 21	          sta  pc+1      ; save pch
.2182	a5 fb		          lda  zpage1    ; get zpage1 low byte
.2184	48		          pha            ; stack : zp1l
.2185	a5 fc		          lda  zpage1+1  ; get zpage1 High byte
.2187	48		          pha            ; stack : zp1h, zp1l
.2188	a5 fd		          lda  zpage2    ; get zpage2 low byte
.218a	48		          pha            ; stack : zp2l, zp1h, zp1l
.218b	a5 fe		          lda  zpage2+1  ; get zpage2 High byte
.218d	48		          pha            ; stack : zp2h, zp2l, zp1h, zp1l
.218e	ad ac 21	          lda  rp        ; get rp
.2191	48		          pha            ; stack : flg, zp2h, zp2l, zp1h, zp1l
.2192	ad ad 21	          lda  ra        ; get a
.2195	48		          pha            ; stack : a, flg, zp2h, zp2l, zp1h, zp1l
.2196	8a		          txa            ; get x
.2197	48		          pha            ; stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.2198	98		          tya            ; get y
.2199	48		          pha            ; stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.219a	ad af 21	          lda  pc+1      ; get pch
.219d	48		          pha            ; stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.219e	ad ae 21	          lda  pc        ; get pcl
.21a1	48		          pha            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.21a2	ad ac 21	          lda  rp        ; get rp
.21a5	48		          pha            ; stack : flg, pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.21a6	ad ad 21	          lda  ra        ; get a
.21a9	28		          plp            ; stack : pcl, pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.21aa	58		          cli
.21ab	60		          rts
>21ac	00		rp        .byte     0
>21ad	00		ra        .byte     0
>21ae	00 00		pc        .word     0
.21b0			pull
.21b0			pop
.21b0	78		          sei
.21b1	68		          pla            ; get pcl stack : pch, y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.21b2	8d e5 21	          sta  pc        ; save pcl
.21b5	68		          pla            ; get pch stack : y, x, a, flg, zp2h, zp2l, zp1h, zp1l
.21b6	8d e6 21	          sta  pc+1      ; save pch
.21b9	68		          pla            ; get y stack : x, a, flg, zp2h, zp2l, zp1h, zp1l
.21ba	a8		          tay            ; set y
.21bb	68		          pla            ; get x stack : a, flg, zp2h, zp2l, zp1h, zp1l
.21bc	aa		          tax            ; set x
.21bd	68		          pla            ; get a stack : flg, zp2h, zp2l, zp1h, zp1l
.21be	8d e4 21	          sta  ra        ; save a
.21c1	68		          pla            ; get flag stack : zp2h, zp2l, zp1h, zp1l
.21c2	8d e3 21	          sta  rp        ; save rp
.21c5	68		          pla            ; stack : zp2l, zp1h, zp1l
.21c6	85 fe		          sta  zpage2+1  ; get zpage1 low byte
.21c8	68		          pla            ; stack : zp1h, zp1l
.21c9	85 fd		          sta  zpage2    ; get zpage2 High byte
.21cb	68		          pla            ; stack : zp1l
.21cc	85 fc		          sta  zpage1+1  ; get zpage2 low byte
.21ce	68		          pla            ; stack :
.21cf	85 fb		          sta  zpage1    ; get zpage1 High byte
.21d1	ad e6 21	          lda  pc+1      ; get pch
.21d4	48		          pha            ; stack : pch
.21d5	ad e5 21	          lda  pc
.21d8	48		          pha            ; stack : pcl, pch
.21d9	ad e3 21	          lda  rp        ; get rp
.21dc	48		          pha            ; stack : rp, pcl, pch
.21dd	ad e4 21	          lda  ra        ; set ra
.21e0	58		          cli
.21e1	28		          plp            ; stack : pcl, pch
.21e2	60		          rts
>21e3	00		rp        .byte     0
>21e4	00		ra        .byte     0
>21e5	00 00		pc        .word     0

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-cbm-mem.asm

.21e7			blkfill
.21e7	20 71 21	bf0            jsr  push
.21ea	20 a8 22	               jsr  savezp1
.21ed	84 fc		               sty  zpage1+1
.21ef	a0 00		               ldy  #$00
.21f1	84 fb		               sty  zpage1
.21f3	91 fb		bf1            sta  (zpage1),y
.21f5	c8		               iny
.21f6	d0 fb		               bne  bf1
.21f8	20 b7 22	               jsr  restzp1
.21fb	20 b0 21	               jsr  pop
.21fe	60		               rts
.21ff			memfill
.21ff	20 71 21	               jsr  push
.2202	20 e7 21	mf1            jsr  blkfill
.2205	c8		               iny
.2206	ca		               dex
.2207	d0 f9		               bne  mf1
.2209	20 b0 21	               jsr  pop
.220c	60		               rts
.220d			memmove
.220d	20 71 21	               jsr  push
.2210	ba		               tsx            ; On se crée un pointeur ...
.2211	8a		               txa
.2212	18		               clc
.2213	69 0b		               adc  #11
.2215	a8		               tay
.2216	a2 06		               ldx  #$06
.2218	b9 00 01	nextbyte       lda  $0100,y
.221b	99 67 22	               sta  words,y
.221e	c8		               iny
.221f	ca		               dex
.2220	d0 f6		               bne  nextbyte
.2222	ad 67 22	               lda  s
.2225	8d 3e 22	               sta  source+1
.2228	ad 68 22	               lda  s+1
.222b	8d 3f 22	               sta  source+2
.222e	ad 69 22	               lda  d
.2231	8d 3b 22	               sta  destin+1
.2234	ad 6a 22	               lda  d+1
.2237	8d 3c 22	               sta  destin+2
.223a	ad ff ff	destin         lda  $ffff
.223d	8d ff ff	source         sta  $ffff
.2240	ee 3b 22	               inc  destin+1
.2243	d0 03		               bne  src
.2245	ee 3c 22	               inc  destin+2
.2248	ee 3e 22	src            inc  source+1
.224b	d0 03		               bne  cnt
.224d	ee 3f 22	               inc  source+2
.2250	ad 6b 22	cnt            lda  compte
.2253	d0 08		               bne  decit
.2255	ad 6c 22	               lda  compte+1
.2258	f0 09		               beq  fini
.225a	ce 6c 22	               dec  compte+1
.225d	ce 6b 22	decit          dec  compte
.2260	4c 3a 22	               jmp  destin
.2263	20 b0 21	fini           jsr  pop
.2266	60		               rts
.2267			words
>2267	00 00		s         .word     $0000
>2269	00 00		d         .word     $0000
>226b	00 00		compte    .word     $0000
.226d			decword
.226d	20 71 21	               jsr  push
.2270	86 fd		               stx  zpage2
.2272	84 fe		               sty  zpage2+1
.2274	20 b0 21	               jsr  pop
.2277	60		               rts
.2278			inczp1
.2278	08		               php
.2279	48		               pha
.227a	e6 fb		               inc  zpage1
.227c	a5 fb		               lda  zpage1
.227e	d0 02		               bne  nopage
.2280	e6 fc		               inc  zpage1+1
.2282	68		nopage         pla
.2283	28		               plp
.2284	60		               rts
.2285			deczp1
.2285	08		                php
.2286	48		                pha
.2287	c6 fb		                dec  zpage1
.2289	d0 02		                bne  nopage
.228b	c6 fc		                dec  zpage1+1
.228d	68		nopage          pla
.228e	28		                plp
.228f	60		                rts
.2290			inczp2
.2290	08		               php
.2291	48		               pha
.2292	e6 fd		               inc  zpage2
.2294	a5 fd		               lda  zpage2
.2296	d0 02		               bne  nopage
.2298	e6 fe		               inc  zpage2+1
.229a	68		nopage         pla
.229b	28		               plp
.229c	60		               rts
.229d			deczp2
.229d	08		               php
.229e	48		               pha
.229f	a5 fd		               lda  zpage2
.22a1	d0 02		               bne  nopage
.22a3	c6 fe		               dec  zpage2+1
.22a5	68		nopage         pla
.22a6	28		               plp
.22a7	60		               rts
.22a8			savezp1
.22a8	08		               php
.22a9	48		               pha
.22aa	a5 fb		               lda  zpage1
.22ac	8d 24 23	               sta  zp1
.22af	a5 fc		               lda  zpage1+1
.22b1	8d 25 23	               sta  zp1+1
.22b4	68		               pla
.22b5	28		               plp
.22b6	60		               rts
.22b7			restzp1
.22b7	08		               php
.22b8	48		               pha
.22b9	ad 24 23	               lda zp1
.22bc	85 fb		               sta zpage1
.22be	ad 25 23	               lda zp1+1
.22c1	85 fc		               sta zpage1+1
.22c3	68		               pla
.22c4	28		               plp
.22c5	60		               rts
.22c6			savezp2
.22c6	08		         php
.22c7	48		         pha
.22c8	a5 fd		         lda zpage2
.22ca	8d 26 23	         sta zp2
.22cd	a5 fe		         lda zpage2+1
.22cf	8d 27 23	         sta zp2+1
.22d2	68		         pla
.22d3	28		         plp
.22d4	60		         rts
.22d5			restzp2
.22d5	08		                php
.22d6	48		                pha
.22d7	ad 26 23	                lda  zp2
.22da	85 fd		                sta  zpage2
.22dc	ad 27 23	                lda  zp2+1
.22df	85 fe		                sta  zpage2+1
.22e1	68		                pla
.22e2	28		                plp
.22e3	60		                rts
.22e4			xy2addr
.22e4	08		                php
.22e5	48		                pha
.22e6	8a		                txa
.22e7	48		                pha
.22e8	98		                tya
.22e9	48		                pha
.22ea	ad 1f 23	                lda     addr1+1
.22ed	8d 21 23	                sta     addr2+1
.22f0	ad 1e 23	                lda     addr1
.22f3	8d 20 23	                sta     addr2
.22f6	c0 00		                cpy     #$00
.22f8	f0 0f		                beq     addx
.22fa	18		moreline        clc
.22fb	6d 1d 23	                adc     ymult
.22fe	90 03		                bcc     norepy
.2300	ee 21 23	                inc     addr2+1
.2303	8d 20 23	norepy          sta     addr2
.2306	88		                dey
.2307	d0 f1		                bne     moreline
.2309	8a		addx            txa
.230a	18		                clc
.230b	6d 20 23	                adc     addr2
.230e	90 03		                bcc     thatsit
.2310	ee 21 23	                inc     addr2+1
.2313	8d 20 23	thatsit         sta     addr2
.2316	68		                pla
.2317	a8		                tay
.2318	68		                pla
.2319	aa		                tax
.231a	68		                pla
.231b	28		                plp
.231c	60		                rts
>231d	28		ymult          .byte     40
>231e	00 00		addr1          .word     $0000
>2320	00 00		addr2          .word     $0000
>2322	00 00		bytecnt        .word     $0000
>2324	00 00		zp1        .word   $0000
>2326	00 00		zp2        .word   $0000

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-cbm-hex.asm

>2328	01		a2hexcol       .byte     1              ; pour aputscxy
>2329	00		a2hexbkcol     .byte     %00000000
.232a			a2hexpos
>232a	00		a2hexpx        .byte     0              ; pour aputsxy
>232b	00		a2hexpy        .byte     0
>232c	24		a2hexprefix    .byte     "$"            ; pour aputs
>232d	00 00		a2hexstr       .word     $00
>232f	00 00		               .word     $00
>2331	00		               .byte     0              ; 0 end string
>2332	30 30 30 30	abin           .null     "00000000"
>2336	30 30 30 30 00
>233b	20 20 20 00	adec           .null     "   "
.233f			putahexfmtxy
.233f	20 71 21	               jsr  push
.2342	20 8e 23	               jsr  a2hex
.2345	ae 2a 23	               ldx  a2hexpx
.2348	ac 2b 23	               ldy  a2hexpy
.234b	20 9a 20	               jsr  gotoxy
.234e	a2 2c		               ldx  #<a2hexprefix
.2350	a0 23		               ldy  #>a2hexprefix
.2352	20 80 20	               jsr  puts
.2355	20 b0 21	               jsr  pop
.2358	60		               rts
.2359			putahexfmt
.2359	20 71 21	               jsr  push
.235c	20 8e 23	               jsr  a2hex
.235f	a2 2c		               ldx  #<a2hexprefix
.2361	a0 23		               ldy  #>a2hexprefix
.2363	20 80 20	               jsr  puts
.2366	20 b0 21	               jsr  pop
.2369	60		               rts
.236a			putahex
.236a	20 71 21	               jsr  push
.236d	20 8e 23	               jsr  a2hex
.2370	a2 2d		               ldx  #<a2hexstr
.2372	a0 23		               ldy  #>a2hexstr
.2374	20 80 20	               jsr  puts
.2377	20 b0 21	               jsr  pop
.237a	60		               rts
.237b			nib2hex
.237b	08		               php
.237c	29 0f		               and  #$0f
.237e	f8		               sed
.237f	18		               clc
.2380	69 90		               adc  #$90
.2382	69 40		               adc  #$40
.2384	d8		               cld
.2385	28		               plp
.2386	60		               rts
.2387			lsra4bits
.2387	08		               php
.2388	4a		               lsr
.2389	4a		               lsr
.238a	4a		               lsr
.238b	4a		               lsr
.238c	28		               plp
.238d	60		               rts
.238e			a2hex
.238e	08		               php
.238f	48		               pha
.2390	48		               pha
.2391	20 87 23	               jsr  lsra4bits
.2394	20 7b 23	               jsr  nib2hex
.2397	8d 2d 23	               sta  a2hexstr
.239a	68		               pla
.239b	20 7b 23	               jsr  nib2hex
.239e	8d 2e 23	               sta  a2hexstr+1
.23a1	a9 00		               lda  #$00                ; set end of string
.23a3	8d 2f 23	               sta  a2hexstr+2
.23a6	68		               pla
.23a7	28		               plp
.23a8	60		               rts
.23a9			xy2hex
.23a9	20 71 21	               jsr  push
.23ac	20 8e 23	               jsr  a2hex
.23af	8a		               txa
.23b0	48		               pha
.23b1	20 87 23	               jsr  lsra4bits
.23b4	20 7b 23	               jsr  nib2hex
.23b7	8d 2d 23	               sta  a2hexstr
.23ba	68		               pla
.23bb	20 7b 23	               jsr  nib2hex
.23be	8d 2e 23	               sta  a2hexstr+1
.23c1	98		               tya
.23c2	48		               pha
.23c3	20 87 23	               jsr  lsra4bits
.23c6	20 7b 23	               jsr  nib2hex
.23c9	8d 2f 23	               sta  a2hexstr+2
.23cc	68		               pla
.23cd	20 7b 23	               jsr  nib2hex
.23d0	8d 30 23	               sta  a2hexstr+3
.23d3	a9 00		               lda  #$00                ; 0 ended string
.23d5	8d 31 23	               sta  a2hexstr+4
.23d8	20 b0 21	               jsr  pop
.23db			atobin
.23db	20 71 21	               jsr  push
.23de	a2 08		               ldx  #8
.23e0	a0 00		               ldy  #0
.23e2	18		               clc
.23e3	2a		nextbit        rol
.23e4	48		               pha
.23e5	69 00		               adc  #$00
.23e7	29 01		               and  #$01
.23e9	20 7b 23	               jsr  nib2hex
.23ec	99 32 23	               sta  abin,y
.23ef	68		               pla
.23f0	c8		               iny
.23f1	ca		               dex
.23f2	d0 ef		               bne  nextbit
.23f4	a9 00		               lda  #0
.23f6	99 32 23	               sta  abin,y
.23f9	20 b0 21	               jsr  pull
.23fc	60		               rts
.23fd			putabin
.23fd	20 db 23	               jsr     atobin
.2400	20 71 21	               jsr     push
.2403	a2 32		               ldx     #<abin
.2405	a0 23		               ldy     #>abin
.2407	20 80 20	               jsr     puts
.240a	20 b0 21	               jsr     pop
.240d	60		               rts
.240e			printabin
.240e	20 71 21	               jsr     push
.2411	a2 32		               ldx     #<abin
.2413	a0 23		               ldy     #>abin
.2415	20 80 20	               jsr     puts
.2418	20 b0 21	               jsr     pop
.241b	60		               rts
.241c			putabinfmt
.241c	08		               php
.241d	48		               pha
.241e	a9 25		               lda     #"%"
.2420	20 7a 20	               jsr     putch
.2423	68		               pla
.2424	20 fd 23	               jsr     putabin
.2427	28		               plp
.2428	60		               rts
.2429			putabinxy
.2429	20 9a 20	               jsr     gotoxy
.242c	20 fd 23	               jsr     putabin
.242f	60		               rts
.2430			putabinfmtxy
.2430	20 9a 20	               jsr     gotoxy
.2433	20 1c 24	               jsr     putabinfmt
.2436	60		               rts
.2437			atodec
.2437	20 71 21	               jsr  push
.243a	f8		               sed
.243b	aa		               tax
.243c	a0 00		               ldy  #$00
.243e	a9 00		               lda  #$00
.2440	18		nextbit        clc
.2441	69 01		               adc  #$01
.2443	90 01		               bcc  decx
.2445	c8		               iny
.2446	ca		decx           dex
.2447	d0 f7		               bne  nextbit
.2449	48		               pha
.244a	98		               tya
.244b	20 7b 23	               jsr  nib2hex
.244e	8d 3b 23	               sta  adec
.2451	68		               pla
.2452	48		               pha
.2453	20 7b 23	               jsr  nib2hex
.2456	8d 3d 23	               sta  adec+2
.2459	68		               pla
.245a	6a		               ror
.245b	6a		               ror
.245c	6a		               ror
.245d	6a		               ror
.245e	20 7b 23	               jsr  nib2hex
.2461	8d 3c 23	               sta  adec+1
.2464	d8		               cld
.2465	20 b0 21	               jsr  pull
.2468	60		               rts
>2469	00 00 00	buffer         .byte     0,0,0

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-cbm-keyb.asm

=$5f			arrowleft      =    $5f
=$06			ctrl_al        =    $06
=$5f			escape         =    $5f
=$06			ctrl_escape    =    $06
=$a9			pound          =    $a9
=$13			home           =    $13
=$93			clear          =    $93
=$5e			uparrow        =    $5e
=$de			pisign         =    $de
=$03			runstop        =    $03
=$11			cursd          =    $11
=$91			cursu          =    $91
=$1d			cursr          =    $1d
=$9d			cursl          =    $9d
=$85			key_f1         =    $85
=$86			key_f3         =    $86
=$87			key_f5         =    $87
=$88			key_f7         =    $88
=$89			key_f2         =    $89
=$8a			key_f4         =    $8a
=$8b			key_f6         =    $8b
=$8c			key_f8         =    $8c
=$0d			enter          =    $0d
=$8d			comd_enter     =    $8d
=$41			key_a          =    $41
=$42			key_b          =    $42
=$43			key_c          =    $43
=$44			key_d          =    $44
=$45			key_e          =    $45
=$46			key_f          =    $46
=$47			key_g          =    $47
=$48			key_h          =    $48
=$49			key_i          =    $49
=$4a			key_j          =    $4a
=$4b			key_k          =    $4b
=$4c			key_l          =    $4c
=$4d			key_m          =    $4d
=$4e			key_n          =    $4e
=$4f			key_o          =    $4f
=$50			key_p          =    $50
=$51			key_q          =    $51
=$52			key_r          =    $52
=$53			key_s          =    $53
=$54			key_t          =    $54
=$55			key_u          =    $55
=$56			key_v          =    $56
=$57			key_w          =    $57
=$58			key_x          =    $58
=$59			key_y          =    $59
=$5a			key_z          =    $5a
=$c1			shift_a        =    $c1
=$c2			shift_b        =    $c2
=$c3			shift_c        =    $c3
=$c4			shift_d        =    $c4
=$c5			shift_e        =    $c5
=$c6			shift_f        =    $c6
=$c7			shift_g        =    $c7
=$c8			shift_h        =    $c8
=$c9			shift_i        =    $c9
=$ca			shift_j        =    $ca
=$cb			shift_k        =    $cb
=$cc			shift_l        =    $cc
=$cd			shift_m        =    $cd
=$ce			shift_n        =    $ce
=$cf			shift_o        =    $cf
=$d0			shift_p        =    $d0
=$d1			shift_q        =    $d1
=$d2			shift_r        =    $d2
=$d3			shift_s        =    $d3
=$d4			shift_t        =    $d4
=$d5			shift_u        =    $d5
=$d6			shift_v        =    $d6
=$d7			shift_w        =    $d7
=$d8			shift_x        =    $d8
=$d9			shift_y        =    $d9
=$da			shift_z        =    $da
=$01			ctrl_a         =    $01
=$02			ctrl_b         =    $02
=$03			ctrl_c         =    $03
=$04			ctrl_d         =    $04
=$05			ctrl_e         =    $05
=$06			ctrl_f         =    $06
=$07			ctrl_g         =    $07
=$08			ctrl_h         =    $08
=$09			ctrl_i         =    $09
=$0a			ctrl_j         =    $0a
=$0b			ctrl_k         =    $0b
=$0c			ctrl_l         =    $0c
=$0d			ctrl_m         =    $0d
=$0d			key_enter      =    $0d
=$0e			ctrl_n         =    $0e
=$0f			ctrl_o         =    $0f
=$10			ctrl_p         =    $10
=$11			ctrl_q         =    $11
=$12			ctrl_r         =    $12
=$13			ctrl_s         =    $13
=$14			ctrl_t         =    $14
=$15			ctrl_u         =    $15
=$16			ctrl_v         =    $16
=$17			ctrl_w         =    $17
=$18			ctrl_x         =    $18
=$19			ctrl_y         =    $19
=$1a			ctrl_z         =    $1a
=$b0			comd_a         =    $b0
=$bf			comd_b         =    $bf
=$bc			comd_c         =    $bc
=$ac			comd_d         =    $ac
=$b1			comd_e         =    $b1
=$bb			comd_f         =    $bb
=$a5			comd_g         =    $a5
=$b4			comd_h         =    $b4
=$a2			comd_i         =    $a2
=$b5			comd_j         =    $b5
=$a1			comd_k         =    $a1
=$b6			comd_l         =    $b6
=$a7			comd_m         =    $a7
=$aa			comd_n         =    $aa
=$b9			comd_o         =    $b9
=$af			comd_p         =    $af
=$ab			comd_q         =    $ab
=$b2			comd_r         =    $b2
=$ae			comd_s         =    $ae
=$a3			comd_t         =    $a3
=$b8			comd_u         =    $b8
=$be			comd_v         =    $be
=$b3			comd_w         =    $b3
=$bd			comd_x         =    $bd
=$b7			comd_y         =    $b7
=$ad			comd_z         =    $ad
>246c	00 00 00 00	asciitorom     .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0d,$00,$00  ;$00
>2470	00 00 00 00 00 00 00 00 00 0d 00 00
>247c	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$10
>2480	00 00 00 00 00 00 00 00 00 00 00 00
>248c	20 21 22 23	               .byte     $20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$2a,$2b,$2c,$2d,$2e,$2f  ;$20
>2490	24 25 26 27 28 29 2a 2b 2c 2d 2e 2f
>249c	30 31 32 33	               .byte     $30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$3a,$3b,$3c,$3d,$3e,$3f  ;$30
>24a0	34 35 36 37 38 39 3a 3b 3c 3d 3e 3f
>24ac	00 01 02 03	               .byte     $00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0a,$0b,$0c,$0d,$0e,$0f  ;$40
>24b0	04 05 06 07 08 09 0a 0b 0c 0d 0e 0f
>24bc	10 11 12 13	               .byte     $10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$1a,$1b,$1c,$1d,$1e,$1f  ;$50
>24c0	14 15 16 17 18 19 1a 1b 1c 1d 1e 1f
>24cc	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$60
>24d0	00 00 00 00 00 00 00 00 00 00 00 00
>24dc	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$70
>24e0	00 00 00 00 00 00 00 00 00 00 00 00
>24ec	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$80
>24f0	00 00 00 00 00 00 00 00 00 00 00 00
>24fc	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$90
>2500	00 00 00 00 00 00 00 00 00 00 00 00
>250c	60 61 62 63	               .byte     $60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$6a,$6b,$6c,$6d,$6e,$6f  ;$a0
>2510	64 65 66 67 68 69 6a 6b 6c 6d 6e 6f
>251c	70 71 72 73	               .byte     $70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$7a,$7b,$7c,$7d,$7e,$7f  ;$b0
>2520	74 75 76 77 78 79 7a 7b 7c 7d 7e 7f
>252c	40 41 42 43	               .byte     $40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$4a,$4b,$4c,$4d,$4e,$4f  ;$c0
>2530	44 45 46 47 48 49 4a 4b 4c 4d 4e 4f
>253c	50 51 52 53	               .byte     $50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$5a,$5b,$5c,$5d,$5e,$5f  ;$d0
>2540	54 55 56 57 58 59 5a 5b 5c 5d 5e 5f
>254c	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$e0
>2550	00 00 00 00 00 00 00 00 00 00 00 00
>255c	00 00 00 00	               .byte     $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00  ;$f0
>2560	00 00 00 00 00 00 00 00 00 00 00 00
.256c			waitstop
.256c	20 71 21	               jsr  push
.256f	20 ed f6	wait           jsr  k_stop
.2572	d0 fb		               bne  wait
.2574	20 b0 21	               jsr  pop
.2577	60		               rts
.2578			anykey
.2578	08		               php
.2579	48		               pha
.257a	a5 cb		nokey          lda 203
.257c	c9 40		               cmp #64
.257e	f0 fa		               beq nokey
.2580	20 86 25	               jsr releasekey
.2583	68		               pla
.2584	28		               plp
.2585	60		               rts
.2586			releasekey
.2586	08		               php
.2587	48		               pha
.2588	a5 cb		keypressed     lda 203
.258a	c9 40		               cmp #64
.258c	d0 fa		               bne keypressed
.258e	68		               pla
.258f	28		               plp
.2590	60		               rts
.2591			getkey
.2591	20 e4 ff	again          jsr  getin
.2594	c9 00		               cmp  #0
.2596	f0 f9		               beq  again
.2598	60		               rts
.2599			waitkey
.2599	20 71 21	               jsr  push
.259c	8d ea 25	               sta  thekey
.259f	20 e4 ff	nope           jsr  getin
.25a2	20 d2 ff	               jsr  chrout
.25a5	cd ea 25	               cmp  thekey
.25a8	d0 f5		               bne  nope
.25aa	20 d2 ff	               jsr  chrout
.25ad	20 b0 21	               jsr  pop
.25b0	60		               rts
.25b1			waitspace
.25b1	20 71 21	               jsr  push
.25b4	a9 7f		wait           lda  #$7f  ;%01111111
.25b6	8d 00 dc	               sta  $dc00
.25b9	ad 01 dc	               lda  $dc01
.25bc	29 10		               and  #$10  ;mask %00010000
.25be	d0 f4		               bne  wait
.25c0	20 b0 21	               jsr  pop
.25c3			waitsstop
.25c3	20 71 21	               jsr  push
.25c6	20 ed f6	wait           jsr  k_stop  ;%01111111
.25c9	d0 fb		               bne  wait
.25cb	20 b0 21	               jsr  pop
.25ce			waitreturn
.25ce	20 71 21	               jsr  push
.25d1	ad eb 25	               lda  thecount
.25d4	8d 00 04	               sta  scrnram
.25d7	a9 02		               lda  #$02
.25d9	8d 00 d8	               sta  colorram
.25dc	20 e4 ff	nope           jsr  getin
.25df	c9 0d		nohex          cmp  #$0d
.25e1	d0 f9		               bne  nope
.25e3	ee eb 25	               inc  thecount
.25e6	20 b0 21	               jsr  pop
.25e9	60		               rts
>25ea	00		thekey         .byte   0
>25eb	01		thecount       .byte   $01

;******  Return to file: charedit.asm


;******  Processing file: /Users/Locals/C64/00-usbkey32go/dir-00-64tass-src/lib/lib-cbm-disk.asm

.25ec			diskerror
.25ec	20 71 21	               jsr  push
.25ef	ad 1d 27	               lda  dsk_dev   ; Select device 8
.25f2	85 ba		               sta  $ba       ;
.25f4	20 b4 ff	               jsr  talk      ; $ffb4 |a  , iec-cmd dev parle
.25f7	a9 6f		               lda  #$6f
.25f9	85 b9		               sta  $b9       ;
.25fb	20 96 ff	               jsr  tksa      ; $ff96 |a  , talk adresse sec.
.25fe	20 a5 ff	nextchar       jsr  acptr     ; $ffa5 |a  , rx serie.
.2601	20 d2 ff	               jsr  chrout    ; $ffd2 |a  , sort un car.
.2604	c9 0d		               cmp  #$0d      ; Is it CR ?
.2606	d0 f6		               bne  nextchar  ; No, get next char
.2608	20 ab ff	               jsr  untlk     ;$ffab      , iec-cmc stop talk
.260b	20 b0 21	               jsr  pop
.260e	60		               rts
.260f			diskdir
.260f	20 71 21	               jsr  push
.2612	a9 24		               lda  #$24      ; L012C - Filename is "$"
.2614	85 fb		               sta  $fb       ; L012E - Zpage1 msb
.2616	a9 fb		               lda  #$fb      ; L0130 - Set current filename
.2618	85 bb		               sta  $bb       ; L0132 - Current filename msb.
.261a	a9 00		               lda  #$00      ; L0134 - to Zpage 1
.261c	85 bc		               sta  $bc       ; L0136 - Current filename lsb.
.261e	a9 01		               lda  #$01      ; L0138 - set ...
.2620	85 b7		               sta  $b7       ; L013A - ... length of current filename
.2622	ad 1d 27	               lda  dsk_dev   ; L013C - set 8 as ...
.2625	85 ba		               sta  $ba       ; L013E - ... current serial sevice.
.2627	a9 60		               lda  #$60      ; L0140 - set $60 to ...
.2629	85 b9		               sta  $b9       ; L0142 - ... secondary address
.262b	20 d5 f3	               jsr  sfopen    ; L0144 - $f3d5 Serial file open.
.262e	a5 ba		               lda  $ba       ; L0147 - Command device $ba ($08) ...%10111010
.2630	20 b4 ff	               jsr  talk      ; L0149 - $ffb4 ... to talk.
.2633	a5 b9		               lda  $b9       ; L014C - Command sec. device ($60) ...
.2635	20 96 ff	               jsr  tksa      ; L014E - $ff96 ... to talk.
.2638	a9 00		               lda  #$00      ; L0151 - put $00 in ...
.263a	85 90		               sta  $90       ; L0153 - ... kernal status word.
.263c	a0 03		               ldy  #$03      ; L0155 - To read 3 bytes, put $03 in
.263e	84 fb		loop1          sty  $fb       ; L0157 - Zpage 1 Msb
.2640	20 a5 ff	               jsr  acptr     ; L0159 - $ffa5 Recoit un byte du port serie.
.2643	85 fc		               sta  $fc       ; L015C - Store byte in zpage 1 lsb
.2645	a4 90		               ldy  $90       ; L015E - Load kernal status word.
.2647	d0 2f		               bne  exit      ; L0160 - If any error, EXIT.
.2649	20 a5 ff	               jsr  $ffa5     ; L0162 - jsr acptr
.264c	a4 90		               ldy  $90       ; L0165 - Load byte counter,
.264e	d0 28		               bne  exit      ; L0167
.2650	a4 fb		               ldy  $fb       ; L0169
.2652	88		               dey            ; L016b
.2653	d0 e9		               bne  loop1     ; L016C - If not last, loop
.2655	a6 fc		               ldx  $fc       ; L016E - Load the recieved byte in X.
.2657	20 cd bd	               jsr  b_putint  ; L0170 - $bdcd print file size
.265a	a9 20		               lda  #$20      ; L0173 - Load space character and ...
.265c	20 d2 ff	               jsr  chrout    ; L0175 - $ffd2 ... print it.
.265f	20 a5 ff	loop3          jsr  acptr     ; L0178 - $ffa5 Recoit un byte du port serie.
.2662	a6 90		               ldx  $90       ; L017B - Load kernal status word.
.2664	d0 12		               bne  exit      ; L017D - If any error, EXIT.
.2666	aa		               tax            ; L017F - tfr a in x
.2667	f0 06		               beq  loop2     ; L0180 - Byte is 0 loop1
.2669	20 d2 ff	               jsr  chrout    ; L0182 - $ffd2 ... print it.
.266c	4c 5f 26	               jmp  loop3     ; L0185 - get another byte
.266f	a9 0d		loop2          lda  #$0d      ; L0188  - Load CR in a
.2671	20 d2 ff	               jsr  chrout    ; L018A - $ffd2 ... print it.
.2674	a0 02		               ldy  #$02      ; L018D - set Y to 2
.2676	d0 c6		               bne  loop1     ; L018f - Loop to next dir entry.
.2678	20 42 f6	exit           jsr  sfclose   ; L0191 - $f642 ... close file.
.267b	20 b0 21	               jsr  pop
.267e	60		               rts            ; L0194
.267f			directory
.267f	20 0f 26	               jsr  diskdir
.2682	20 ec 25	               jsr  diskerror
.2685	60		               rts
.2686			memtofile
.2686	20 f7 26	               jsr  dsk_putmesg
.2689	20 71 21	               jsr  push
.268c	ad 21 27	               lda  dsk_fnlen
.268f	ae 1f 27	               ldx  dsk_fnptr      ; load fname addr. lbyte
.2692	ac 20 27	               ldy  dsk_fnptr+1
.2695	20 bd ff	               jsr  setnam         ; call setnam
.2698	ad 1e 27	               lda  dsk_lfsno
.269b	ae 1d 27	               ldx  dsk_dev        ; specified device
.269e	a0 00		skip           ldy  #$00
.26a0	20 ba ff	               jsr  setlfs         ; call setlfs
.26a3	ad 19 27	               lda  dsk_data_s     ; put data start lbyte in stal
.26a6	85 c1		               sta  stal
.26a8	ad 1a 27	               lda  dsk_data_s+1   ; put data start hbyte in stal
.26ab	85 c2		               sta  stal+1
.26ad	ae 1b 27	               ldx  dsk_data_e     ; put data end lbyte in x
.26b0	ac 1c 27	               ldy  dsk_data_e+1   ; put data end hbyte in y
.26b3	a9 c1		               lda  #stal          ; start address located in $c1/$c2
.26b5	20 d8 ff	               jsr  save           ; call save
.26b8	90 00		               bcc  noerror        ; if carry set, a load error has happened
.26ba	20 b0 21	noerror        jsr  pop
.26bd	60		               rts
.26be			filetomem
.26be	20 71 21	               jsr push
.26c1	ad 21 27	               lda dsk_fnlen
.26c4	ae 1f 27	               ldx dsk_fnptr
.26c7	ac 20 27	               ldy dsk_fnptr+1
.26ca	20 bd ff	               jsr setnam     ; call setnam
.26cd	ad 1e 27	               lda dsk_lfsno
.26d0	ae 1d 27	               ldx dsk_dev    ; default to device 8
.26d3	a0 01		               ldy #$01       ; not $01 means: load to address stored in file
.26d5	20 ba ff	               jsr setlfs     ; call setlfs
.26d8	a9 00		               lda #$00       ; $00 means: load to memory (not verify)
.26da	20 d5 ff	               jsr load       ; call load
.26dd	90 03		               bcc noerror      ; if carry set, a load error has happened
.26df	20 e6 26	               jsr  error
.26e2	20 b0 21	noerror        jsr pop
.26e5	60		               rts
.26e6			error
.26e6	60		               rts
.26e7	a2 32		error1         ldx  #<dsk_emsg1
.26e9	a0 27		               ldy  #>dsk_emsg1
.26eb	20 80 20	               jsr  puts
.26ee	60		               rts
.26ef	a2 46		error2         ldx #<dsk_emsg2
.26f1	a0 27		               ldy #>dsk_emsg2
.26f3	20 80 20	               jsr puts
.26f6	60		               rts
.26f7			dsk_putmesg
.26f7	20 71 21	               jsr push
.26fa	a2 22		               ldx #<dsk_msg0
.26fc	a0 27		               ldy #>dsk_msg0
.26fe	20 80 20	               jsr puts
.2701	a9 20		               lda #$20
.2703	20 7a 20	               jsr putch
.2706	ae 1f 27	               ldx dsk_fnptr
.2709	ac 20 27	               ldy dsk_fnptr+1
.270c	20 80 20	               jsr puts
.270f	ad 1e 27	               lda dsk_lfsno
.2712	20 c3 ff	               jsr close
.2715	20 b0 21	               jsr pop
.2718	60		               rts
>2719	00 00		dsk_data_s     .word     $0000    ; example addresses
>271b	00 20		dsk_data_e     .word     $2000
>271d	08		dsk_dev        .byte     $08
>271e	00		dsk_lfsno      .byte     $00
>271f	00 00		dsk_fnptr      .word     $00
>2721	00		dsk_fnlen      .byte     0
>2722	8d		dsk_msg0       .byte     141
>2723	53 41 56 49	               .null     "saving"
>2727	4e 47 00
>272a	8d		dsk_msg1       .byte     141
>272b	53 55 43 43	               .null     "succes"
>272f	45 53 00
>2732	8d		dsk_emsg1      .byte     141
>2733	46 49 43 48	               .null     "fichier non ouvert"
>2737	49 45 52 20 4e 4f 4e 20 4f 55 56 45 52 54 00
>2746	11		dsk_emsg2      .byte     17
>2747	45 52 52 45	               .null     "erreur d'ecriture"
>274b	55 52 20 44 27 45 43 52 49 54 55 52 45 00

;******  Return to file: charedit.asm


;******  End of listing
